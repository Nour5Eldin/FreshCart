"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/next-sanity";
exports.ids = ["vendor-chunks/next-sanity"];
exports.modules = {

/***/ "(action-browser)/./node_modules/next-sanity/dist/visual-editing/server-actions.js":
/*!************************************************************************!*\
  !*** ./node_modules/next-sanity/dist/visual-editing/server-actions.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   revalidateRootLayout: () => (/* binding */ revalidateRootLayout)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-server-reference */ \"(action-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(action-browser)/./node_modules/next/dist/server/app-render/encryption.js\");\n/* harmony import */ var next_cache_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/cache.js */ \"(action-browser)/./node_modules/next/cache.js\");\n/* harmony import */ var next_headers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/headers.js */ \"(action-browser)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(action-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"7f804780294cc71d12e48f89f46f8713e1d6d53169\":\"revalidateRootLayout\"} */ \n\n\n\nasync function revalidateRootLayout() {\n    if (!(await (0,next_headers_js__WEBPACK_IMPORTED_MODULE_3__.draftMode)()).isEnabled) {\n        console.warn(\"Skipped revalidatePath request because draft mode is not enabled\");\n        return;\n    }\n    await (0,next_cache_js__WEBPACK_IMPORTED_MODULE_2__.revalidatePath)(\"/\", \"layout\");\n}\n //# sourceMappingURL=server-actions.js.map\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_4__.ensureServerEntryExports)([\n    revalidateRootLayout\n]);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(revalidateRootLayout, \"7f804780294cc71d12e48f89f46f8713e1d6d53169\", null);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0LXNhbml0eS9kaXN0L3Zpc3VhbC1lZGl0aW5nL3NlcnZlci1hY3Rpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFJQSxlQUFzQix1QkFBc0M7SUFDMUQsSUFBSSxFQUFFLE1BQU0sMERBQVMsRUFBVCxFQUFhLFdBQVc7UUFFbEMsUUFBUSxLQUFLLGtFQUFrRTtRQUMvRTtJQUNGO0lBQ0EsTUFBTSw2REFBYyxDQUFDLEtBQUssUUFBUTtBQUNwQyIsInNvdXJjZXMiOlsiL1VzZXJzL25vdXJlbGRpbm1haG1vdWQvc3JjL3Zpc3VhbC1lZGl0aW5nL3NlcnZlci1hY3Rpb25zL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc2VydmVyJ1xuaW1wb3J0IHtyZXZhbGlkYXRlUGF0aH0gZnJvbSAnbmV4dC9jYWNoZS5qcydcbmltcG9ydCB7ZHJhZnRNb2RlfSBmcm9tICduZXh0L2hlYWRlcnMuanMnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXZhbGlkYXRlUm9vdExheW91dCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgaWYgKCEoYXdhaXQgZHJhZnRNb2RlKCkpLmlzRW5hYmxlZCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS53YXJuKCdTa2lwcGVkIHJldmFsaWRhdGVQYXRoIHJlcXVlc3QgYmVjYXVzZSBkcmFmdCBtb2RlIGlzIG5vdCBlbmFibGVkJylcbiAgICByZXR1cm5cbiAgfVxuICBhd2FpdCByZXZhbGlkYXRlUGF0aCgnLycsICdsYXlvdXQnKVxufVxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/next-sanity/dist/visual-editing/server-actions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/next-sanity/dist/_chunks-es/deprecated-live.js":
/*!*********************************************************************!*\
  !*** ./node_modules/next-sanity/dist/_chunks-es/deprecated-live.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defineLive: () => (/* binding */ defineLive)\n/* harmony export */ });\n/* harmony import */ var _sanity_next_loader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sanity/next-loader */ \"(rsc)/./node_modules/@sanity/next-loader/dist/index.js\");\n\nlet warned = !1;\nfunction defineLive(options) {\n  return warned || (console.warn(\n    `Importing defineLive from the root import is deprecated and will be removed in next-sanity v11. Please change \"import {defineLive} from 'next-sanity'\" to \"import {definveLive} from 'next-sanity/live'\"`\n  ), warned = !0), (0,_sanity_next_loader__WEBPACK_IMPORTED_MODULE_0__.defineLive)(options);\n}\n\n//# sourceMappingURL=deprecated-live.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvZGlzdC9fY2h1bmtzLWVzL2RlcHJlY2F0ZWQtbGl2ZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFpRTtBQUNqRTtBQUNBO0FBQ0E7QUFDQSw0SEFBNEgsWUFBWSxnQ0FBZ0MsYUFBYTtBQUNyTCxtQkFBbUIsK0RBQVk7QUFDL0I7QUFHRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbm91cmVsZGlubWFobW91ZC9mcmVzaGNhcnQvZGVwbG95L25vZGVfbW9kdWxlcy9uZXh0LXNhbml0eS9kaXN0L19jaHVua3MtZXMvZGVwcmVjYXRlZC1saXZlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmluZUxpdmUgYXMgZGVmaW5lTGl2ZSQxIH0gZnJvbSBcIkBzYW5pdHkvbmV4dC1sb2FkZXJcIjtcbmxldCB3YXJuZWQgPSAhMTtcbmZ1bmN0aW9uIGRlZmluZUxpdmUob3B0aW9ucykge1xuICByZXR1cm4gd2FybmVkIHx8IChjb25zb2xlLndhcm4oXG4gICAgYEltcG9ydGluZyBkZWZpbmVMaXZlIGZyb20gdGhlIHJvb3QgaW1wb3J0IGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBuZXh0LXNhbml0eSB2MTEuIFBsZWFzZSBjaGFuZ2UgXCJpbXBvcnQge2RlZmluZUxpdmV9IGZyb20gJ25leHQtc2FuaXR5J1wiIHRvIFwiaW1wb3J0IHtkZWZpbnZlTGl2ZX0gZnJvbSAnbmV4dC1zYW5pdHkvbGl2ZSdcImBcbiAgKSwgd2FybmVkID0gITApLCBkZWZpbmVMaXZlJDEob3B0aW9ucyk7XG59XG5leHBvcnQge1xuICBkZWZpbmVMaXZlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVwcmVjYXRlZC1saXZlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next-sanity/dist/_chunks-es/deprecated-live.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/next-sanity/dist/visual-editing/client-component.js":
/*!**************************************************************************!*\
  !*** ./node_modules/next-sanity/dist/visual-editing/client-component.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-server-dom-webpack/server */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-webpack-server.js\");\n// This file is generated by the Webpack next-flight-loader.\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,react_server_dom_webpack_server__WEBPACK_IMPORTED_MODULE_0__.registerClientReference)(\nfunction() { throw new Error(\"Attempted to call the default export of \\\"/Users/noureldinmahmoud/freshcart/deploy/node_modules/next-sanity/dist/visual-editing/client-component.js\\\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n\"/Users/noureldinmahmoud/freshcart/deploy/node_modules/next-sanity/dist/visual-editing/client-component.js\",\n\"default\",\n));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvZGlzdC92aXN1YWwtZWRpdGluZy9jbGllbnQtY29tcG9uZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEiLCJzb3VyY2VzIjpbIl9OX0UvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvZGlzdC92aXN1YWwtZWRpdGluZy9jbGllbnQtY29tcG9uZW50LmpzL19fbmV4dGpzLWludGVybmFsLXByb3h5Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGZpbGUgaXMgZ2VuZXJhdGVkIGJ5IHRoZSBXZWJwYWNrIG5leHQtZmxpZ2h0LWxvYWRlci5cbmltcG9ydCB7IHJlZ2lzdGVyQ2xpZW50UmVmZXJlbmNlIH0gZnJvbSBcInJlYWN0LXNlcnZlci1kb20td2VicGFjay9zZXJ2ZXJcIjtcbmV4cG9ydCBkZWZhdWx0IHJlZ2lzdGVyQ2xpZW50UmVmZXJlbmNlKFxuZnVuY3Rpb24oKSB7IHRocm93IG5ldyBFcnJvcihcIkF0dGVtcHRlZCB0byBjYWxsIHRoZSBkZWZhdWx0IGV4cG9ydCBvZiBcXFwiL1VzZXJzL25vdXJlbGRpbm1haG1vdWQvZnJlc2hjYXJ0L2RlcGxveS9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvZGlzdC92aXN1YWwtZWRpdGluZy9jbGllbnQtY29tcG9uZW50LmpzXFxcIiBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCdzIG9uIHRoZSBjbGllbnQuIEl0J3Mgbm90IHBvc3NpYmxlIHRvIGludm9rZSBhIGNsaWVudCBmdW5jdGlvbiBmcm9tIHRoZSBzZXJ2ZXIsIGl0IGNhbiBvbmx5IGJlIHJlbmRlcmVkIGFzIGEgQ29tcG9uZW50IG9yIHBhc3NlZCB0byBwcm9wcyBvZiBhIENsaWVudCBDb21wb25lbnQuXCIpOyB9LFxuXCIvVXNlcnMvbm91cmVsZGlubWFobW91ZC9mcmVzaGNhcnQvZGVwbG95L25vZGVfbW9kdWxlcy9uZXh0LXNhbml0eS9kaXN0L3Zpc3VhbC1lZGl0aW5nL2NsaWVudC1jb21wb25lbnQuanNcIixcblwiZGVmYXVsdFwiLFxuKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next-sanity/dist/visual-editing/client-component.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/dist/_chunks-es/VisualEditing.js":
/*!*******************************************************************!*\
  !*** ./node_modules/next-sanity/dist/_chunks-es/VisualEditing.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ VisualEditing)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var _sanity_visual_editing_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @sanity/visual-editing/react */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/react/index.js\");\n/* harmony import */ var next_navigation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/navigation.js */ \"(ssr)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var next_sanity_visual_editing_server_actions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-sanity/visual-editing/server-actions */ \"(ssr)/./node_modules/next-sanity/dist/visual-editing/server-actions.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n\n\n\n\n\nfunction pathHasPrefix(path, prefix) {\n  if (typeof path != \"string\")\n    return !1;\n  const { pathname } = parsePath(path);\n  return pathname === prefix || pathname.startsWith(`${prefix}/`);\n}\nfunction parsePath(path) {\n  const hashIndex = path.indexOf(\"#\"), queryIndex = path.indexOf(\"?\"), hasQuery = queryIndex > -1 && (hashIndex < 0 || queryIndex < hashIndex);\n  return hasQuery || hashIndex > -1 ? {\n    pathname: path.substring(0, hasQuery ? queryIndex : hashIndex),\n    query: hasQuery ? path.substring(queryIndex, hashIndex > -1 ? hashIndex : void 0) : \"\",\n    hash: hashIndex > -1 ? path.slice(hashIndex) : \"\"\n  } : { pathname: path, query: \"\", hash: \"\" };\n}\nfunction addPathPrefix(path, prefix) {\n  if (!path.startsWith(\"/\") || !prefix)\n    return path;\n  if (path === \"/\" && prefix)\n    return prefix;\n  const { pathname, query, hash } = parsePath(path);\n  return `${prefix}${pathname}${query}${hash}`;\n}\nfunction removePathPrefix(path, prefix) {\n  if (!pathHasPrefix(path, prefix))\n    return path;\n  const withoutPrefix = path.slice(prefix.length);\n  return withoutPrefix.startsWith(\"/\") ? withoutPrefix : `/${withoutPrefix}`;\n}\nconst normalizePathTrailingSlash = (path, trailingSlash) => {\n  const { pathname, query, hash } = parsePath(path);\n  return trailingSlash ? pathname.endsWith(\"/\") ? `${pathname}${query}${hash}` : `${pathname}/${query}${hash}` : `${removeTrailingSlash(pathname)}${query}${hash}`;\n};\nfunction removeTrailingSlash(route) {\n  return route.replace(/\\/$/, \"\") || \"/\";\n}\nfunction VisualEditing(props) {\n  const { basePath = \"\", plugins, components, refresh, trailingSlash = !1, zIndex } = props, router = (0,next_navigation_js__WEBPACK_IMPORTED_MODULE_1__.useRouter)(), routerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(router), [navigate, setNavigate] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)();\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    routerRef.current = router;\n  }, [router]);\n  const history = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(\n    () => ({\n      subscribe: (_navigate) => (setNavigate(() => _navigate), () => setNavigate(void 0)),\n      update: (update) => {\n        switch (update.type) {\n          case \"push\":\n            return routerRef.current.push(removePathPrefix(update.url, basePath));\n          case \"pop\":\n            return routerRef.current.back();\n          case \"replace\":\n            return routerRef.current.replace(removePathPrefix(update.url, basePath));\n          default:\n            throw new Error(`Unknown update type: ${update.type}`);\n        }\n      }\n    }),\n    [basePath]\n  ), pathname = (0,next_navigation_js__WEBPACK_IMPORTED_MODULE_1__.usePathname)(), searchParams = (0,next_navigation_js__WEBPACK_IMPORTED_MODULE_1__.useSearchParams)();\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    navigate && navigate({\n      type: \"push\",\n      url: normalizePathTrailingSlash(\n        addPathPrefix(`${pathname}${searchParams?.size ? `?${searchParams}` : \"\"}`, basePath),\n        trailingSlash\n      )\n    });\n  }, [basePath, navigate, pathname, searchParams, trailingSlash]);\n  const handleRefresh = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(\n    (payload) => {\n      if (refresh) return refresh(payload);\n      const manualFastRefresh = () => (console.debug(\n        \"Live preview is setup, calling router.refresh() to refresh the server components without refetching cached data\"\n      ), routerRef.current.refresh(), Promise.resolve()), manualFallbackRefresh = () => (console.debug(\n        \"No loaders in live mode detected, or preview kit setup, revalidating root layout\"\n      ), (0,next_sanity_visual_editing_server_actions__WEBPACK_IMPORTED_MODULE_3__.revalidateRootLayout)()), mutationFallbackRefresh = () => (console.debug(\n        \"No loaders in live mode detected, or preview kit setup, revalidating root layout\"\n      ), (0,next_sanity_visual_editing_server_actions__WEBPACK_IMPORTED_MODULE_3__.revalidateRootLayout)());\n      switch (payload.source) {\n        case \"manual\":\n          return payload.livePreviewEnabled ? manualFastRefresh() : manualFallbackRefresh();\n        case \"mutation\":\n          return payload.livePreviewEnabled ? mutationFastRefresh() : mutationFallbackRefresh();\n        default:\n          throw new Error(\"Unknown refresh source\", { cause: payload });\n      }\n    },\n    [refresh]\n  );\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\n    _sanity_visual_editing_react__WEBPACK_IMPORTED_MODULE_4__.VisualEditing,\n    {\n      plugins,\n      components,\n      history,\n      portal: !0,\n      refresh: handleRefresh,\n      zIndex\n    }\n  );\n}\nfunction mutationFastRefresh() {\n  return console.debug(\n    \"Live preview is setup, mutation is skipped assuming its handled by the live preview\"\n  ), !1;\n}\n\n//# sourceMappingURL=VisualEditing.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvZGlzdC9fY2h1bmtzLWVzL1Zpc3VhbEVkaXRpbmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXdDO0FBQ3dDO0FBQ0g7QUFDSTtBQUNQO0FBQzFFO0FBQ0E7QUFDQTtBQUNBLFVBQVUsV0FBVztBQUNyQix1REFBdUQsT0FBTztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsd0JBQXdCO0FBQ2xDLFlBQVksT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsS0FBSztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGNBQWM7QUFDM0U7QUFDQTtBQUNBLFVBQVUsd0JBQXdCO0FBQ2xDLHFEQUFxRCxTQUFTLEVBQUUsTUFBTSxFQUFFLEtBQUssT0FBTyxTQUFTLEdBQUcsTUFBTSxFQUFFLEtBQUssT0FBTyw4QkFBOEIsRUFBRSxNQUFNLEVBQUUsS0FBSztBQUNqSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwwRUFBMEUsa0JBQWtCLDZEQUFTLGdCQUFnQiw2Q0FBTSxvQ0FBb0MsK0NBQVE7QUFDakwsRUFBRSxnREFBUztBQUNYO0FBQ0EsR0FBRztBQUNILGtCQUFrQiw4Q0FBTztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELFlBQVk7QUFDaEU7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGdCQUFnQiwrREFBVyxtQkFBbUIsbUVBQWU7QUFDN0QsRUFBRSxnREFBUztBQUNYO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixTQUFTLEVBQUUseUJBQXlCLGFBQWEsT0FBTztBQUNqRjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCx3QkFBd0Isa0RBQVc7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUywrRkFBb0I7QUFDN0I7QUFDQSxTQUFTLCtGQUFvQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsZ0JBQWdCO0FBQ3RFO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx5QkFBeUIsc0RBQUc7QUFDNUIsSUFBSSx1RUFBZTtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbm91cmVsZGlubWFobW91ZC9mcmVzaGNhcnQvZGVwbG95L25vZGVfbW9kdWxlcy9uZXh0LXNhbml0eS9kaXN0L19jaHVua3MtZXMvVmlzdWFsRWRpdGluZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqc3ggfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IFZpc3VhbEVkaXRpbmcgYXMgVmlzdWFsRWRpdGluZyQxIH0gZnJvbSBcIkBzYW5pdHkvdmlzdWFsLWVkaXRpbmcvcmVhY3RcIjtcbmltcG9ydCB7IHVzZVJvdXRlciwgdXNlUGF0aG5hbWUsIHVzZVNlYXJjaFBhcmFtcyB9IGZyb20gXCJuZXh0L25hdmlnYXRpb24uanNcIjtcbmltcG9ydCB7IHJldmFsaWRhdGVSb290TGF5b3V0IH0gZnJvbSBcIm5leHQtc2FuaXR5L3Zpc3VhbC1lZGl0aW5nL3NlcnZlci1hY3Rpb25zXCI7XG5pbXBvcnQgeyB1c2VSZWYsIHVzZVN0YXRlLCB1c2VFZmZlY3QsIHVzZU1lbW8sIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XG5mdW5jdGlvbiBwYXRoSGFzUHJlZml4KHBhdGgsIHByZWZpeCkge1xuICBpZiAodHlwZW9mIHBhdGggIT0gXCJzdHJpbmdcIilcbiAgICByZXR1cm4gITE7XG4gIGNvbnN0IHsgcGF0aG5hbWUgfSA9IHBhcnNlUGF0aChwYXRoKTtcbiAgcmV0dXJuIHBhdGhuYW1lID09PSBwcmVmaXggfHwgcGF0aG5hbWUuc3RhcnRzV2l0aChgJHtwcmVmaXh9L2ApO1xufVxuZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcbiAgY29uc3QgaGFzaEluZGV4ID0gcGF0aC5pbmRleE9mKFwiI1wiKSwgcXVlcnlJbmRleCA9IHBhdGguaW5kZXhPZihcIj9cIiksIGhhc1F1ZXJ5ID0gcXVlcnlJbmRleCA+IC0xICYmIChoYXNoSW5kZXggPCAwIHx8IHF1ZXJ5SW5kZXggPCBoYXNoSW5kZXgpO1xuICByZXR1cm4gaGFzUXVlcnkgfHwgaGFzaEluZGV4ID4gLTEgPyB7XG4gICAgcGF0aG5hbWU6IHBhdGguc3Vic3RyaW5nKDAsIGhhc1F1ZXJ5ID8gcXVlcnlJbmRleCA6IGhhc2hJbmRleCksXG4gICAgcXVlcnk6IGhhc1F1ZXJ5ID8gcGF0aC5zdWJzdHJpbmcocXVlcnlJbmRleCwgaGFzaEluZGV4ID4gLTEgPyBoYXNoSW5kZXggOiB2b2lkIDApIDogXCJcIixcbiAgICBoYXNoOiBoYXNoSW5kZXggPiAtMSA/IHBhdGguc2xpY2UoaGFzaEluZGV4KSA6IFwiXCJcbiAgfSA6IHsgcGF0aG5hbWU6IHBhdGgsIHF1ZXJ5OiBcIlwiLCBoYXNoOiBcIlwiIH07XG59XG5mdW5jdGlvbiBhZGRQYXRoUHJlZml4KHBhdGgsIHByZWZpeCkge1xuICBpZiAoIXBhdGguc3RhcnRzV2l0aChcIi9cIikgfHwgIXByZWZpeClcbiAgICByZXR1cm4gcGF0aDtcbiAgaWYgKHBhdGggPT09IFwiL1wiICYmIHByZWZpeClcbiAgICByZXR1cm4gcHJlZml4O1xuICBjb25zdCB7IHBhdGhuYW1lLCBxdWVyeSwgaGFzaCB9ID0gcGFyc2VQYXRoKHBhdGgpO1xuICByZXR1cm4gYCR7cHJlZml4fSR7cGF0aG5hbWV9JHtxdWVyeX0ke2hhc2h9YDtcbn1cbmZ1bmN0aW9uIHJlbW92ZVBhdGhQcmVmaXgocGF0aCwgcHJlZml4KSB7XG4gIGlmICghcGF0aEhhc1ByZWZpeChwYXRoLCBwcmVmaXgpKVxuICAgIHJldHVybiBwYXRoO1xuICBjb25zdCB3aXRob3V0UHJlZml4ID0gcGF0aC5zbGljZShwcmVmaXgubGVuZ3RoKTtcbiAgcmV0dXJuIHdpdGhvdXRQcmVmaXguc3RhcnRzV2l0aChcIi9cIikgPyB3aXRob3V0UHJlZml4IDogYC8ke3dpdGhvdXRQcmVmaXh9YDtcbn1cbmNvbnN0IG5vcm1hbGl6ZVBhdGhUcmFpbGluZ1NsYXNoID0gKHBhdGgsIHRyYWlsaW5nU2xhc2gpID0+IHtcbiAgY29uc3QgeyBwYXRobmFtZSwgcXVlcnksIGhhc2ggfSA9IHBhcnNlUGF0aChwYXRoKTtcbiAgcmV0dXJuIHRyYWlsaW5nU2xhc2ggPyBwYXRobmFtZS5lbmRzV2l0aChcIi9cIikgPyBgJHtwYXRobmFtZX0ke3F1ZXJ5fSR7aGFzaH1gIDogYCR7cGF0aG5hbWV9LyR7cXVlcnl9JHtoYXNofWAgOiBgJHtyZW1vdmVUcmFpbGluZ1NsYXNoKHBhdGhuYW1lKX0ke3F1ZXJ5fSR7aGFzaH1gO1xufTtcbmZ1bmN0aW9uIHJlbW92ZVRyYWlsaW5nU2xhc2gocm91dGUpIHtcbiAgcmV0dXJuIHJvdXRlLnJlcGxhY2UoL1xcLyQvLCBcIlwiKSB8fCBcIi9cIjtcbn1cbmZ1bmN0aW9uIFZpc3VhbEVkaXRpbmcocHJvcHMpIHtcbiAgY29uc3QgeyBiYXNlUGF0aCA9IFwiXCIsIHBsdWdpbnMsIGNvbXBvbmVudHMsIHJlZnJlc2gsIHRyYWlsaW5nU2xhc2ggPSAhMSwgekluZGV4IH0gPSBwcm9wcywgcm91dGVyID0gdXNlUm91dGVyKCksIHJvdXRlclJlZiA9IHVzZVJlZihyb3V0ZXIpLCBbbmF2aWdhdGUsIHNldE5hdmlnYXRlXSA9IHVzZVN0YXRlKCk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcm91dGVyUmVmLmN1cnJlbnQgPSByb3V0ZXI7XG4gIH0sIFtyb3V0ZXJdKTtcbiAgY29uc3QgaGlzdG9yeSA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIHN1YnNjcmliZTogKF9uYXZpZ2F0ZSkgPT4gKHNldE5hdmlnYXRlKCgpID0+IF9uYXZpZ2F0ZSksICgpID0+IHNldE5hdmlnYXRlKHZvaWQgMCkpLFxuICAgICAgdXBkYXRlOiAodXBkYXRlKSA9PiB7XG4gICAgICAgIHN3aXRjaCAodXBkYXRlLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIFwicHVzaFwiOlxuICAgICAgICAgICAgcmV0dXJuIHJvdXRlclJlZi5jdXJyZW50LnB1c2gocmVtb3ZlUGF0aFByZWZpeCh1cGRhdGUudXJsLCBiYXNlUGF0aCkpO1xuICAgICAgICAgIGNhc2UgXCJwb3BcIjpcbiAgICAgICAgICAgIHJldHVybiByb3V0ZXJSZWYuY3VycmVudC5iYWNrKCk7XG4gICAgICAgICAgY2FzZSBcInJlcGxhY2VcIjpcbiAgICAgICAgICAgIHJldHVybiByb3V0ZXJSZWYuY3VycmVudC5yZXBsYWNlKHJlbW92ZVBhdGhQcmVmaXgodXBkYXRlLnVybCwgYmFzZVBhdGgpKTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIHVwZGF0ZSB0eXBlOiAke3VwZGF0ZS50eXBlfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSksXG4gICAgW2Jhc2VQYXRoXVxuICApLCBwYXRobmFtZSA9IHVzZVBhdGhuYW1lKCksIHNlYXJjaFBhcmFtcyA9IHVzZVNlYXJjaFBhcmFtcygpO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIG5hdmlnYXRlICYmIG5hdmlnYXRlKHtcbiAgICAgIHR5cGU6IFwicHVzaFwiLFxuICAgICAgdXJsOiBub3JtYWxpemVQYXRoVHJhaWxpbmdTbGFzaChcbiAgICAgICAgYWRkUGF0aFByZWZpeChgJHtwYXRobmFtZX0ke3NlYXJjaFBhcmFtcz8uc2l6ZSA/IGA/JHtzZWFyY2hQYXJhbXN9YCA6IFwiXCJ9YCwgYmFzZVBhdGgpLFxuICAgICAgICB0cmFpbGluZ1NsYXNoXG4gICAgICApXG4gICAgfSk7XG4gIH0sIFtiYXNlUGF0aCwgbmF2aWdhdGUsIHBhdGhuYW1lLCBzZWFyY2hQYXJhbXMsIHRyYWlsaW5nU2xhc2hdKTtcbiAgY29uc3QgaGFuZGxlUmVmcmVzaCA9IHVzZUNhbGxiYWNrKFxuICAgIChwYXlsb2FkKSA9PiB7XG4gICAgICBpZiAocmVmcmVzaCkgcmV0dXJuIHJlZnJlc2gocGF5bG9hZCk7XG4gICAgICBjb25zdCBtYW51YWxGYXN0UmVmcmVzaCA9ICgpID0+IChjb25zb2xlLmRlYnVnKFxuICAgICAgICBcIkxpdmUgcHJldmlldyBpcyBzZXR1cCwgY2FsbGluZyByb3V0ZXIucmVmcmVzaCgpIHRvIHJlZnJlc2ggdGhlIHNlcnZlciBjb21wb25lbnRzIHdpdGhvdXQgcmVmZXRjaGluZyBjYWNoZWQgZGF0YVwiXG4gICAgICApLCByb3V0ZXJSZWYuY3VycmVudC5yZWZyZXNoKCksIFByb21pc2UucmVzb2x2ZSgpKSwgbWFudWFsRmFsbGJhY2tSZWZyZXNoID0gKCkgPT4gKGNvbnNvbGUuZGVidWcoXG4gICAgICAgIFwiTm8gbG9hZGVycyBpbiBsaXZlIG1vZGUgZGV0ZWN0ZWQsIG9yIHByZXZpZXcga2l0IHNldHVwLCByZXZhbGlkYXRpbmcgcm9vdCBsYXlvdXRcIlxuICAgICAgKSwgcmV2YWxpZGF0ZVJvb3RMYXlvdXQoKSksIG11dGF0aW9uRmFsbGJhY2tSZWZyZXNoID0gKCkgPT4gKGNvbnNvbGUuZGVidWcoXG4gICAgICAgIFwiTm8gbG9hZGVycyBpbiBsaXZlIG1vZGUgZGV0ZWN0ZWQsIG9yIHByZXZpZXcga2l0IHNldHVwLCByZXZhbGlkYXRpbmcgcm9vdCBsYXlvdXRcIlxuICAgICAgKSwgcmV2YWxpZGF0ZVJvb3RMYXlvdXQoKSk7XG4gICAgICBzd2l0Y2ggKHBheWxvYWQuc291cmNlKSB7XG4gICAgICAgIGNhc2UgXCJtYW51YWxcIjpcbiAgICAgICAgICByZXR1cm4gcGF5bG9hZC5saXZlUHJldmlld0VuYWJsZWQgPyBtYW51YWxGYXN0UmVmcmVzaCgpIDogbWFudWFsRmFsbGJhY2tSZWZyZXNoKCk7XG4gICAgICAgIGNhc2UgXCJtdXRhdGlvblwiOlxuICAgICAgICAgIHJldHVybiBwYXlsb2FkLmxpdmVQcmV2aWV3RW5hYmxlZCA/IG11dGF0aW9uRmFzdFJlZnJlc2goKSA6IG11dGF0aW9uRmFsbGJhY2tSZWZyZXNoKCk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biByZWZyZXNoIHNvdXJjZVwiLCB7IGNhdXNlOiBwYXlsb2FkIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgW3JlZnJlc2hdXG4gICk7XG4gIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFxuICAgIFZpc3VhbEVkaXRpbmckMSxcbiAgICB7XG4gICAgICBwbHVnaW5zLFxuICAgICAgY29tcG9uZW50cyxcbiAgICAgIGhpc3RvcnksXG4gICAgICBwb3J0YWw6ICEwLFxuICAgICAgcmVmcmVzaDogaGFuZGxlUmVmcmVzaCxcbiAgICAgIHpJbmRleFxuICAgIH1cbiAgKTtcbn1cbmZ1bmN0aW9uIG11dGF0aW9uRmFzdFJlZnJlc2goKSB7XG4gIHJldHVybiBjb25zb2xlLmRlYnVnKFxuICAgIFwiTGl2ZSBwcmV2aWV3IGlzIHNldHVwLCBtdXRhdGlvbiBpcyBza2lwcGVkIGFzc3VtaW5nIGl0cyBoYW5kbGVkIGJ5IHRoZSBsaXZlIHByZXZpZXdcIlxuICApLCAhMTtcbn1cbmV4cG9ydCB7XG4gIFZpc3VhbEVkaXRpbmcgYXMgZGVmYXVsdFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpc3VhbEVkaXRpbmcuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/dist/_chunks-es/VisualEditing.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/dist/visual-editing/client-component.js":
/*!**************************************************************************!*\
  !*** ./node_modules/next-sanity/dist/visual-editing/client-component.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ VisualEditingLazyClientComponent)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\nconst VisualEditingClientComponent = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(()=>Promise.all(/*! import() */[__webpack_require__.e(\"vendor-chunks/@sanity\"), __webpack_require__.e(\"vendor-chunks/next-sanity\"), __webpack_require__.e(\"vendor-chunks/lodash-es\"), __webpack_require__.e(\"vendor-chunks/lodash\"), __webpack_require__.e(\"vendor-chunks/@juggle\"), __webpack_require__.e(\"vendor-chunks/stylis\"), __webpack_require__.e(\"vendor-chunks/@emotion\"), __webpack_require__.e(\"vendor-chunks/styled-components\"), __webpack_require__.e(\"vendor-chunks/react-is\"), __webpack_require__.e(\"vendor-chunks/valibot\"), __webpack_require__.e(\"vendor-chunks/scroll-into-view-if-needed\"), __webpack_require__.e(\"vendor-chunks/mendoza\"), __webpack_require__.e(\"vendor-chunks/get-random-values-esm\"), __webpack_require__.e(\"vendor-chunks/compute-scroll-into-view\"), __webpack_require__.e(\"vendor-chunks/@vercel\"), __webpack_require__.e(\"vendor-chunks/shallowequal\"), __webpack_require__.e(\"vendor-chunks/react-compiler-runtime\")]).then(__webpack_require__.bind(__webpack_require__, /*! ../_chunks-es/VisualEditing.js */ \"(ssr)/./node_modules/next-sanity/dist/_chunks-es/VisualEditing.js\")));\nfunction VisualEditingLazyClientComponent(props) {\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense, {\n        fallback: null,\n        children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(VisualEditingClientComponent, {\n            ...props\n        })\n    });\n}\n //# sourceMappingURL=client-component.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvZGlzdC92aXN1YWwtZWRpdGluZy9jbGllbnQtY29tcG9uZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBWUEsTUFBTSw2Q0FBK0IsMkNBQUksQ0FBQyxJQUFNLGlrQ0FBeUI7QUFFbEUsU0FBUyxpQ0FBaUMsT0FBNEM7SUFDM0YsT0FDRSx1RUFBQywyQ0FBUSxFQUFSO1FBQVMsVUFBVTtRQUNsQixpRkFBQztZQUE4QixHQUFHO1FBQUEsQ0FBTztJQUFBLENBQzNDO0FBRUoiLCJzb3VyY2VzIjpbIi9Vc2Vycy9ub3VyZWxkaW5tYWhtb3VkL3NyYy92aXN1YWwtZWRpdGluZy9jbGllbnQtY29tcG9uZW50L1Zpc3VhbEVkaXRpbmdMYXp5LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqXG4gKiBJZiBwYWdlcyByb3V0ZXIgc3VwcG9ydGVkIGBuZXh0L2R5bmFtaWNgIGltcG9ydHMgKGl0IHdhbnRzIGBuZXh0L2R5bmFtaWMuanNgKSxcbiAqIG9yIGlmIHR1cmJvcGFjayBpbiBhcHAgcm91dGVyIGFsbG93ZWQgYG5leHQvZHluYW1pYy5qc2AgKGl0IGRvZXNuJ3QgeWV0KVxuICogd2UgY291bGQgdXNlIGBkeW5hbWljKCgpID0+IGltcG9ydCgnLi4uKSwge3NzcjogZmFsc2V9KWAgaGVyZS5cbiAqIFNpbmNlIHdlIGNhbid0LCB3ZSBuZWVkIHRvIHVzZSBhIGxhenkgaW1wb3J0IGFuZCBTdXNwZW5zZSBvdXJzZWxmLlxuICovXG5cbmltcG9ydCB7bGF6eSwgU3VzcGVuc2V9IGZyb20gJ3JlYWN0J1xuXG5pbXBvcnQgdHlwZSB7VmlzdWFsRWRpdGluZ1Byb3BzfSBmcm9tICcuL1Zpc3VhbEVkaXRpbmcnXG5cbmNvbnN0IFZpc3VhbEVkaXRpbmdDbGllbnRDb21wb25lbnQgPSBsYXp5KCgpID0+IGltcG9ydCgnLi9WaXN1YWxFZGl0aW5nJykpXG5cbmV4cG9ydCBmdW5jdGlvbiBWaXN1YWxFZGl0aW5nTGF6eUNsaWVudENvbXBvbmVudChwcm9wczogVmlzdWFsRWRpdGluZ1Byb3BzKTogUmVhY3QuUmVhY3ROb2RlIHtcbiAgcmV0dXJuIChcbiAgICA8U3VzcGVuc2UgZmFsbGJhY2s9e251bGx9PlxuICAgICAgPFZpc3VhbEVkaXRpbmdDbGllbnRDb21wb25lbnQgey4uLnByb3BzfSAvPlxuICAgIDwvU3VzcGVuc2U+XG4gIClcbn1cbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/dist/visual-editing/client-component.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/dist/visual-editing/server-actions.js":
/*!************************************************************************!*\
  !*** ./node_modules/next-sanity/dist/visual-editing/server-actions.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   revalidateRootLayout: () => (/* binding */ revalidateRootLayout)
/* harmony export */ });
/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-client-wrapper */ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js");
/* __next_internal_action_entry_do_not_use__ {"7f804780294cc71d12e48f89f46f8713e1d6d53169":"revalidateRootLayout"} */ 
var revalidateRootLayout = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)("7f804780294cc71d12e48f89f46f8713e1d6d53169", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, "revalidateRootLayout");
 //# sourceMappingURL=server-actions.js.map


/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/arrify.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/arrify.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   arrify: () => (/* binding */ arrify)\n/* harmony export */ });\nfunction arrify(val) {\n  return Array.isArray(val) ? val : [val];\n}\n\n//# sourceMappingURL=arrify.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX2NodW5rcy1lcy9hcnJpZnkuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9ub3VyZWxkaW5tYWhtb3VkL2ZyZXNoY2FydC9kZXBsb3kvbm9kZV9tb2R1bGVzL25leHQtc2FuaXR5L25vZGVfbW9kdWxlcy9Ac2FuaXR5L211dGF0ZS9kaXN0L19jaHVua3MtZXMvYXJyaWZ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGFycmlmeSh2YWwpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsKSA/IHZhbCA6IFt2YWxdO1xufVxuZXhwb3J0IHtcbiAgYXJyaWZ5XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyaWZ5LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/arrify.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/decode.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/decode.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   decodeAll: () => (/* binding */ decodeAll)\n/* harmony export */ });\n/* harmony import */ var _parse_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./parse.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/parse.js\");\n\nfunction isCreateIfNotExistsMutation(sanityMutation) {\n  return \"createIfNotExists\" in sanityMutation;\n}\nfunction isCreateOrReplaceMutation(sanityMutation) {\n  return \"createOrReplace\" in sanityMutation;\n}\nfunction isCreateMutation(sanityMutation) {\n  return \"create\" in sanityMutation;\n}\nfunction isDeleteMutation(sanityMutation) {\n  return \"delete\" in sanityMutation;\n}\nfunction isPatchMutation(sanityMutation) {\n  return \"patch\" in sanityMutation;\n}\nfunction isSetPatch(sanityPatch) {\n  return \"set\" in sanityPatch;\n}\nfunction isSetIfMissingPatch(sanityPatch) {\n  return \"setIfMissing\" in sanityPatch;\n}\nfunction isUnsetPatch(sanityPatch) {\n  return \"unset\" in sanityPatch;\n}\nfunction isIncPatch(sanityPatch) {\n  return \"inc\" in sanityPatch;\n}\nfunction isDecPatch(sanityPatch) {\n  return \"inc\" in sanityPatch;\n}\nfunction isInsertPatch(sanityPatch) {\n  return \"insert\" in sanityPatch;\n}\nfunction decodeAll(sanityMutations) {\n  return sanityMutations.map(decodeMutation);\n}\nfunction decode(encodedMutation) {\n  return decodeMutation(encodedMutation);\n}\nfunction decodeMutation(encodedMutation) {\n  if (isCreateIfNotExistsMutation(encodedMutation))\n    return {\n      type: \"createIfNotExists\",\n      document: encodedMutation.createIfNotExists\n    };\n  if (isCreateOrReplaceMutation(encodedMutation))\n    return {\n      type: \"createOrReplace\",\n      document: encodedMutation.createOrReplace\n    };\n  if (isCreateMutation(encodedMutation))\n    return { type: \"create\", document: encodedMutation.create };\n  if (isDeleteMutation(encodedMutation))\n    return { id: encodedMutation.delete.id, type: \"delete\" };\n  if (isPatchMutation(encodedMutation))\n    return {\n      type: \"patch\",\n      id: encodedMutation.patch.id,\n      patches: decodeNodePatches(encodedMutation.patch)\n    };\n  throw new Error(`Unknown mutation: ${JSON.stringify(encodedMutation)}`);\n}\nconst POSITION_KEYS = [\"before\", \"replace\", \"after\"];\nfunction getInsertPosition(insert) {\n  const positions = POSITION_KEYS.filter((k) => k in insert);\n  if (positions.length > 1)\n    throw new Error(\n      `Insert patch is ambiguous. Should only contain one of: ${POSITION_KEYS.join(\n        \", \"\n      )}, instead found ${positions.join(\", \")}`\n    );\n  return positions[0];\n}\nfunction decodeNodePatches(patch) {\n  return [\n    ...getSetPatches(patch),\n    ...getSetIfMissingPatches(patch),\n    ...getUnsetPatches(patch),\n    ...getIncPatches(patch),\n    ...getDecPatches(patch),\n    ...getInsertPatches(patch)\n  ];\n}\nfunction getSetPatches(patch) {\n  return isSetPatch(patch) ? Object.keys(patch.set).map((path) => ({\n    path: (0,_parse_js__WEBPACK_IMPORTED_MODULE_0__.parse)(path),\n    op: { type: \"set\", value: patch.set[path] }\n  })) : [];\n}\nfunction getSetIfMissingPatches(patch) {\n  return isSetIfMissingPatch(patch) ? Object.keys(patch.setIfMissing).map((path) => ({\n    path: (0,_parse_js__WEBPACK_IMPORTED_MODULE_0__.parse)(path),\n    op: { type: \"setIfMissing\", value: patch.setIfMissing[path] }\n  })) : [];\n}\nfunction getUnsetPatches(patch) {\n  return isUnsetPatch(patch) ? patch.unset.map((path) => ({\n    path: (0,_parse_js__WEBPACK_IMPORTED_MODULE_0__.parse)(path),\n    op: { type: \"unset\" }\n  })) : [];\n}\nfunction getIncPatches(patch) {\n  return isIncPatch(patch) ? Object.keys(patch.inc).map((path) => ({\n    path: (0,_parse_js__WEBPACK_IMPORTED_MODULE_0__.parse)(path),\n    op: { type: \"inc\", amount: patch.inc[path] }\n  })) : [];\n}\nfunction getDecPatches(patch) {\n  return isDecPatch(patch) ? Object.keys(patch.dec).map((path) => ({\n    path: (0,_parse_js__WEBPACK_IMPORTED_MODULE_0__.parse)(path),\n    op: { type: \"dec\", amount: patch.dec[path] }\n  })) : [];\n}\nfunction getInsertPatches(patch) {\n  if (!isInsertPatch(patch))\n    return [];\n  const position = getInsertPosition(patch.insert);\n  if (!position)\n    throw new Error(\"Insert patch missing position\");\n  const path = (0,_parse_js__WEBPACK_IMPORTED_MODULE_0__.parse)(patch.insert[position]), referenceItem = path.pop(), op = position === \"replace\" ? {\n    type: \"insert\",\n    position,\n    referenceItem,\n    items: patch.insert.items\n  } : {\n    type: \"insert\",\n    position,\n    referenceItem,\n    items: patch.insert.items\n  };\n  return [{ path, op }];\n}\n\n//# sourceMappingURL=decode.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX2NodW5rcy1lcy9kZWNvZGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsZ0NBQWdDO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRTtBQUNoRTtBQUNBLFFBQVEsa0JBQWtCLHFCQUFxQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdEQUFLO0FBQ2YsVUFBVTtBQUNWLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdEQUFLO0FBQ2YsVUFBVTtBQUNWLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdEQUFLO0FBQ2YsVUFBVTtBQUNWLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdEQUFLO0FBQ2YsVUFBVTtBQUNWLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdEQUFLO0FBQ2YsVUFBVTtBQUNWLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0RBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksVUFBVTtBQUN0QjtBQUlFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9ub3VyZWxkaW5tYWhtb3VkL2ZyZXNoY2FydC9kZXBsb3kvbm9kZV9tb2R1bGVzL25leHQtc2FuaXR5L25vZGVfbW9kdWxlcy9Ac2FuaXR5L211dGF0ZS9kaXN0L19jaHVua3MtZXMvZGVjb2RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBhcnNlIH0gZnJvbSBcIi4vcGFyc2UuanNcIjtcbmZ1bmN0aW9uIGlzQ3JlYXRlSWZOb3RFeGlzdHNNdXRhdGlvbihzYW5pdHlNdXRhdGlvbikge1xuICByZXR1cm4gXCJjcmVhdGVJZk5vdEV4aXN0c1wiIGluIHNhbml0eU11dGF0aW9uO1xufVxuZnVuY3Rpb24gaXNDcmVhdGVPclJlcGxhY2VNdXRhdGlvbihzYW5pdHlNdXRhdGlvbikge1xuICByZXR1cm4gXCJjcmVhdGVPclJlcGxhY2VcIiBpbiBzYW5pdHlNdXRhdGlvbjtcbn1cbmZ1bmN0aW9uIGlzQ3JlYXRlTXV0YXRpb24oc2FuaXR5TXV0YXRpb24pIHtcbiAgcmV0dXJuIFwiY3JlYXRlXCIgaW4gc2FuaXR5TXV0YXRpb247XG59XG5mdW5jdGlvbiBpc0RlbGV0ZU11dGF0aW9uKHNhbml0eU11dGF0aW9uKSB7XG4gIHJldHVybiBcImRlbGV0ZVwiIGluIHNhbml0eU11dGF0aW9uO1xufVxuZnVuY3Rpb24gaXNQYXRjaE11dGF0aW9uKHNhbml0eU11dGF0aW9uKSB7XG4gIHJldHVybiBcInBhdGNoXCIgaW4gc2FuaXR5TXV0YXRpb247XG59XG5mdW5jdGlvbiBpc1NldFBhdGNoKHNhbml0eVBhdGNoKSB7XG4gIHJldHVybiBcInNldFwiIGluIHNhbml0eVBhdGNoO1xufVxuZnVuY3Rpb24gaXNTZXRJZk1pc3NpbmdQYXRjaChzYW5pdHlQYXRjaCkge1xuICByZXR1cm4gXCJzZXRJZk1pc3NpbmdcIiBpbiBzYW5pdHlQYXRjaDtcbn1cbmZ1bmN0aW9uIGlzVW5zZXRQYXRjaChzYW5pdHlQYXRjaCkge1xuICByZXR1cm4gXCJ1bnNldFwiIGluIHNhbml0eVBhdGNoO1xufVxuZnVuY3Rpb24gaXNJbmNQYXRjaChzYW5pdHlQYXRjaCkge1xuICByZXR1cm4gXCJpbmNcIiBpbiBzYW5pdHlQYXRjaDtcbn1cbmZ1bmN0aW9uIGlzRGVjUGF0Y2goc2FuaXR5UGF0Y2gpIHtcbiAgcmV0dXJuIFwiaW5jXCIgaW4gc2FuaXR5UGF0Y2g7XG59XG5mdW5jdGlvbiBpc0luc2VydFBhdGNoKHNhbml0eVBhdGNoKSB7XG4gIHJldHVybiBcImluc2VydFwiIGluIHNhbml0eVBhdGNoO1xufVxuZnVuY3Rpb24gZGVjb2RlQWxsKHNhbml0eU11dGF0aW9ucykge1xuICByZXR1cm4gc2FuaXR5TXV0YXRpb25zLm1hcChkZWNvZGVNdXRhdGlvbik7XG59XG5mdW5jdGlvbiBkZWNvZGUoZW5jb2RlZE11dGF0aW9uKSB7XG4gIHJldHVybiBkZWNvZGVNdXRhdGlvbihlbmNvZGVkTXV0YXRpb24pO1xufVxuZnVuY3Rpb24gZGVjb2RlTXV0YXRpb24oZW5jb2RlZE11dGF0aW9uKSB7XG4gIGlmIChpc0NyZWF0ZUlmTm90RXhpc3RzTXV0YXRpb24oZW5jb2RlZE11dGF0aW9uKSlcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJjcmVhdGVJZk5vdEV4aXN0c1wiLFxuICAgICAgZG9jdW1lbnQ6IGVuY29kZWRNdXRhdGlvbi5jcmVhdGVJZk5vdEV4aXN0c1xuICAgIH07XG4gIGlmIChpc0NyZWF0ZU9yUmVwbGFjZU11dGF0aW9uKGVuY29kZWRNdXRhdGlvbikpXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwiY3JlYXRlT3JSZXBsYWNlXCIsXG4gICAgICBkb2N1bWVudDogZW5jb2RlZE11dGF0aW9uLmNyZWF0ZU9yUmVwbGFjZVxuICAgIH07XG4gIGlmIChpc0NyZWF0ZU11dGF0aW9uKGVuY29kZWRNdXRhdGlvbikpXG4gICAgcmV0dXJuIHsgdHlwZTogXCJjcmVhdGVcIiwgZG9jdW1lbnQ6IGVuY29kZWRNdXRhdGlvbi5jcmVhdGUgfTtcbiAgaWYgKGlzRGVsZXRlTXV0YXRpb24oZW5jb2RlZE11dGF0aW9uKSlcbiAgICByZXR1cm4geyBpZDogZW5jb2RlZE11dGF0aW9uLmRlbGV0ZS5pZCwgdHlwZTogXCJkZWxldGVcIiB9O1xuICBpZiAoaXNQYXRjaE11dGF0aW9uKGVuY29kZWRNdXRhdGlvbikpXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwicGF0Y2hcIixcbiAgICAgIGlkOiBlbmNvZGVkTXV0YXRpb24ucGF0Y2guaWQsXG4gICAgICBwYXRjaGVzOiBkZWNvZGVOb2RlUGF0Y2hlcyhlbmNvZGVkTXV0YXRpb24ucGF0Y2gpXG4gICAgfTtcbiAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIG11dGF0aW9uOiAke0pTT04uc3RyaW5naWZ5KGVuY29kZWRNdXRhdGlvbil9YCk7XG59XG5jb25zdCBQT1NJVElPTl9LRVlTID0gW1wiYmVmb3JlXCIsIFwicmVwbGFjZVwiLCBcImFmdGVyXCJdO1xuZnVuY3Rpb24gZ2V0SW5zZXJ0UG9zaXRpb24oaW5zZXJ0KSB7XG4gIGNvbnN0IHBvc2l0aW9ucyA9IFBPU0lUSU9OX0tFWVMuZmlsdGVyKChrKSA9PiBrIGluIGluc2VydCk7XG4gIGlmIChwb3NpdGlvbnMubGVuZ3RoID4gMSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgSW5zZXJ0IHBhdGNoIGlzIGFtYmlndW91cy4gU2hvdWxkIG9ubHkgY29udGFpbiBvbmUgb2Y6ICR7UE9TSVRJT05fS0VZUy5qb2luKFxuICAgICAgICBcIiwgXCJcbiAgICAgICl9LCBpbnN0ZWFkIGZvdW5kICR7cG9zaXRpb25zLmpvaW4oXCIsIFwiKX1gXG4gICAgKTtcbiAgcmV0dXJuIHBvc2l0aW9uc1swXTtcbn1cbmZ1bmN0aW9uIGRlY29kZU5vZGVQYXRjaGVzKHBhdGNoKSB7XG4gIHJldHVybiBbXG4gICAgLi4uZ2V0U2V0UGF0Y2hlcyhwYXRjaCksXG4gICAgLi4uZ2V0U2V0SWZNaXNzaW5nUGF0Y2hlcyhwYXRjaCksXG4gICAgLi4uZ2V0VW5zZXRQYXRjaGVzKHBhdGNoKSxcbiAgICAuLi5nZXRJbmNQYXRjaGVzKHBhdGNoKSxcbiAgICAuLi5nZXREZWNQYXRjaGVzKHBhdGNoKSxcbiAgICAuLi5nZXRJbnNlcnRQYXRjaGVzKHBhdGNoKVxuICBdO1xufVxuZnVuY3Rpb24gZ2V0U2V0UGF0Y2hlcyhwYXRjaCkge1xuICByZXR1cm4gaXNTZXRQYXRjaChwYXRjaCkgPyBPYmplY3Qua2V5cyhwYXRjaC5zZXQpLm1hcCgocGF0aCkgPT4gKHtcbiAgICBwYXRoOiBwYXJzZShwYXRoKSxcbiAgICBvcDogeyB0eXBlOiBcInNldFwiLCB2YWx1ZTogcGF0Y2guc2V0W3BhdGhdIH1cbiAgfSkpIDogW107XG59XG5mdW5jdGlvbiBnZXRTZXRJZk1pc3NpbmdQYXRjaGVzKHBhdGNoKSB7XG4gIHJldHVybiBpc1NldElmTWlzc2luZ1BhdGNoKHBhdGNoKSA/IE9iamVjdC5rZXlzKHBhdGNoLnNldElmTWlzc2luZykubWFwKChwYXRoKSA9PiAoe1xuICAgIHBhdGg6IHBhcnNlKHBhdGgpLFxuICAgIG9wOiB7IHR5cGU6IFwic2V0SWZNaXNzaW5nXCIsIHZhbHVlOiBwYXRjaC5zZXRJZk1pc3NpbmdbcGF0aF0gfVxuICB9KSkgOiBbXTtcbn1cbmZ1bmN0aW9uIGdldFVuc2V0UGF0Y2hlcyhwYXRjaCkge1xuICByZXR1cm4gaXNVbnNldFBhdGNoKHBhdGNoKSA/IHBhdGNoLnVuc2V0Lm1hcCgocGF0aCkgPT4gKHtcbiAgICBwYXRoOiBwYXJzZShwYXRoKSxcbiAgICBvcDogeyB0eXBlOiBcInVuc2V0XCIgfVxuICB9KSkgOiBbXTtcbn1cbmZ1bmN0aW9uIGdldEluY1BhdGNoZXMocGF0Y2gpIHtcbiAgcmV0dXJuIGlzSW5jUGF0Y2gocGF0Y2gpID8gT2JqZWN0LmtleXMocGF0Y2guaW5jKS5tYXAoKHBhdGgpID0+ICh7XG4gICAgcGF0aDogcGFyc2UocGF0aCksXG4gICAgb3A6IHsgdHlwZTogXCJpbmNcIiwgYW1vdW50OiBwYXRjaC5pbmNbcGF0aF0gfVxuICB9KSkgOiBbXTtcbn1cbmZ1bmN0aW9uIGdldERlY1BhdGNoZXMocGF0Y2gpIHtcbiAgcmV0dXJuIGlzRGVjUGF0Y2gocGF0Y2gpID8gT2JqZWN0LmtleXMocGF0Y2guZGVjKS5tYXAoKHBhdGgpID0+ICh7XG4gICAgcGF0aDogcGFyc2UocGF0aCksXG4gICAgb3A6IHsgdHlwZTogXCJkZWNcIiwgYW1vdW50OiBwYXRjaC5kZWNbcGF0aF0gfVxuICB9KSkgOiBbXTtcbn1cbmZ1bmN0aW9uIGdldEluc2VydFBhdGNoZXMocGF0Y2gpIHtcbiAgaWYgKCFpc0luc2VydFBhdGNoKHBhdGNoKSlcbiAgICByZXR1cm4gW107XG4gIGNvbnN0IHBvc2l0aW9uID0gZ2V0SW5zZXJ0UG9zaXRpb24ocGF0Y2guaW5zZXJ0KTtcbiAgaWYgKCFwb3NpdGlvbilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnNlcnQgcGF0Y2ggbWlzc2luZyBwb3NpdGlvblwiKTtcbiAgY29uc3QgcGF0aCA9IHBhcnNlKHBhdGNoLmluc2VydFtwb3NpdGlvbl0pLCByZWZlcmVuY2VJdGVtID0gcGF0aC5wb3AoKSwgb3AgPSBwb3NpdGlvbiA9PT0gXCJyZXBsYWNlXCIgPyB7XG4gICAgdHlwZTogXCJpbnNlcnRcIixcbiAgICBwb3NpdGlvbixcbiAgICByZWZlcmVuY2VJdGVtLFxuICAgIGl0ZW1zOiBwYXRjaC5pbnNlcnQuaXRlbXNcbiAgfSA6IHtcbiAgICB0eXBlOiBcImluc2VydFwiLFxuICAgIHBvc2l0aW9uLFxuICAgIHJlZmVyZW5jZUl0ZW0sXG4gICAgaXRlbXM6IHBhdGNoLmluc2VydC5pdGVtc1xuICB9O1xuICByZXR1cm4gW3sgcGF0aCwgb3AgfV07XG59XG5leHBvcnQge1xuICBkZWNvZGUsXG4gIGRlY29kZUFsbFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlY29kZS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/decode.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/encode.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/encode.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encode: () => (/* binding */ encode),\n/* harmony export */   encodeAll: () => (/* binding */ encodeAll),\n/* harmony export */   encodeMutation: () => (/* binding */ encodeMutation),\n/* harmony export */   encodeTransaction: () => (/* binding */ encodeTransaction)\n/* harmony export */ });\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./stringify.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/stringify.js\");\n\nfunction encode(mutation) {\n  return encodeMutation(mutation);\n}\nfunction encodeAll(mutations) {\n  return mutations.flatMap(encode);\n}\nfunction encodeTransaction(transaction) {\n  return {\n    transactionId: transaction.id,\n    mutations: encodeAll(transaction.mutations)\n  };\n}\nfunction encodeMutation(mutation) {\n  if (mutation.type === \"create\" || mutation.type === \"createIfNotExists\" || mutation.type === \"createOrReplace\")\n    return { [mutation.type]: mutation.document };\n  if (mutation.type === \"delete\")\n    return {\n      delete: { id: mutation.id }\n    };\n  const ifRevisionID = mutation.options?.ifRevision;\n  return mutation.patches.map((patch) => ({\n    patch: {\n      id: mutation.id,\n      ...ifRevisionID && { ifRevisionID },\n      ...patchToSanity(patch)\n    }\n  }));\n}\nfunction patchToSanity(patch) {\n  const { path, op } = patch;\n  if (op.type === \"unset\")\n    return { unset: [(0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.stringify)(path)] };\n  if (op.type === \"insert\")\n    return {\n      insert: {\n        [op.position]: (0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.stringify)([...path, op.referenceItem]),\n        items: op.items\n      }\n    };\n  if (op.type === \"diffMatchPatch\")\n    return { diffMatchPatch: { [(0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.stringify)(path)]: op.value } };\n  if (op.type === \"inc\")\n    return { inc: { [(0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.stringify)(path)]: op.amount } };\n  if (op.type === \"dec\")\n    return { dec: { [(0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.stringify)(path)]: op.amount } };\n  if (op.type === \"set\" || op.type === \"setIfMissing\")\n    return { [op.type]: { [(0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.stringify)(path)]: op.value } };\n  if (op.type === \"truncate\") {\n    const range = [\n      op.startIndex,\n      typeof op.endIndex == \"number\" ? op.endIndex : \"\"\n    ].join(\":\");\n    return { unset: [`${(0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.stringify)(path)}[${range}]`] };\n  }\n  if (op.type === \"upsert\")\n    return {\n      unset: op.items.map(\n        (item) => (0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.stringify)([...path, { _key: item._key }])\n      ),\n      insert: {\n        [op.position]: (0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.stringify)([...path, op.referenceItem]),\n        items: op.items\n      }\n    };\n  if (op.type === \"assign\")\n    return {\n      set: Object.fromEntries(\n        Object.keys(op.value).map((key) => [\n          (0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.stringify)(path.concat(key)),\n          op.value[key]\n        ])\n      )\n    };\n  if (op.type === \"unassign\")\n    return {\n      unset: op.keys.map((key) => (0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.stringify)(path.concat(key)))\n    };\n  if (op.type === \"replace\")\n    return {\n      insert: {\n        replace: (0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.stringify)(path.concat(op.referenceItem)),\n        items: op.items\n      }\n    };\n  if (op.type === \"remove\")\n    return {\n      unset: [(0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.stringify)(path.concat(op.referenceItem))]\n    };\n  throw new Error(`Unknown operation type ${op.type}`);\n}\n\n//# sourceMappingURL=encode.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX2NodW5rcy1lcy9lbmNvZGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsY0FBYztBQUN6QztBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxVQUFVLFdBQVc7QUFDckI7QUFDQSxhQUFhLFFBQVEsd0RBQVM7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHdEQUFTO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxrQkFBa0IsQ0FBQyx3REFBUztBQUN6QztBQUNBLGFBQWEsT0FBTyxDQUFDLHdEQUFTO0FBQzlCO0FBQ0EsYUFBYSxPQUFPLENBQUMsd0RBQVM7QUFDOUI7QUFDQSxhQUFhLGFBQWEsQ0FBQyx3REFBUztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxXQUFXLHdEQUFTLE9BQU8sR0FBRyxNQUFNO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHdEQUFTLGFBQWEsaUJBQWlCO0FBQ3pEO0FBQ0E7QUFDQSx1QkFBdUIsd0RBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLHdEQUFTO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx3REFBUztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQix3REFBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx3REFBUztBQUN2QjtBQUNBLDRDQUE0QyxRQUFRO0FBQ3BEO0FBTUU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL25vdXJlbGRpbm1haG1vdWQvZnJlc2hjYXJ0L2RlcGxveS9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX2NodW5rcy1lcy9lbmNvZGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3RyaW5naWZ5IH0gZnJvbSBcIi4vc3RyaW5naWZ5LmpzXCI7XG5mdW5jdGlvbiBlbmNvZGUobXV0YXRpb24pIHtcbiAgcmV0dXJuIGVuY29kZU11dGF0aW9uKG11dGF0aW9uKTtcbn1cbmZ1bmN0aW9uIGVuY29kZUFsbChtdXRhdGlvbnMpIHtcbiAgcmV0dXJuIG11dGF0aW9ucy5mbGF0TWFwKGVuY29kZSk7XG59XG5mdW5jdGlvbiBlbmNvZGVUcmFuc2FjdGlvbih0cmFuc2FjdGlvbikge1xuICByZXR1cm4ge1xuICAgIHRyYW5zYWN0aW9uSWQ6IHRyYW5zYWN0aW9uLmlkLFxuICAgIG11dGF0aW9uczogZW5jb2RlQWxsKHRyYW5zYWN0aW9uLm11dGF0aW9ucylcbiAgfTtcbn1cbmZ1bmN0aW9uIGVuY29kZU11dGF0aW9uKG11dGF0aW9uKSB7XG4gIGlmIChtdXRhdGlvbi50eXBlID09PSBcImNyZWF0ZVwiIHx8IG11dGF0aW9uLnR5cGUgPT09IFwiY3JlYXRlSWZOb3RFeGlzdHNcIiB8fCBtdXRhdGlvbi50eXBlID09PSBcImNyZWF0ZU9yUmVwbGFjZVwiKVxuICAgIHJldHVybiB7IFttdXRhdGlvbi50eXBlXTogbXV0YXRpb24uZG9jdW1lbnQgfTtcbiAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwiZGVsZXRlXCIpXG4gICAgcmV0dXJuIHtcbiAgICAgIGRlbGV0ZTogeyBpZDogbXV0YXRpb24uaWQgfVxuICAgIH07XG4gIGNvbnN0IGlmUmV2aXNpb25JRCA9IG11dGF0aW9uLm9wdGlvbnM/LmlmUmV2aXNpb247XG4gIHJldHVybiBtdXRhdGlvbi5wYXRjaGVzLm1hcCgocGF0Y2gpID0+ICh7XG4gICAgcGF0Y2g6IHtcbiAgICAgIGlkOiBtdXRhdGlvbi5pZCxcbiAgICAgIC4uLmlmUmV2aXNpb25JRCAmJiB7IGlmUmV2aXNpb25JRCB9LFxuICAgICAgLi4ucGF0Y2hUb1Nhbml0eShwYXRjaClcbiAgICB9XG4gIH0pKTtcbn1cbmZ1bmN0aW9uIHBhdGNoVG9TYW5pdHkocGF0Y2gpIHtcbiAgY29uc3QgeyBwYXRoLCBvcCB9ID0gcGF0Y2g7XG4gIGlmIChvcC50eXBlID09PSBcInVuc2V0XCIpXG4gICAgcmV0dXJuIHsgdW5zZXQ6IFtzdHJpbmdpZnkocGF0aCldIH07XG4gIGlmIChvcC50eXBlID09PSBcImluc2VydFwiKVxuICAgIHJldHVybiB7XG4gICAgICBpbnNlcnQ6IHtcbiAgICAgICAgW29wLnBvc2l0aW9uXTogc3RyaW5naWZ5KFsuLi5wYXRoLCBvcC5yZWZlcmVuY2VJdGVtXSksXG4gICAgICAgIGl0ZW1zOiBvcC5pdGVtc1xuICAgICAgfVxuICAgIH07XG4gIGlmIChvcC50eXBlID09PSBcImRpZmZNYXRjaFBhdGNoXCIpXG4gICAgcmV0dXJuIHsgZGlmZk1hdGNoUGF0Y2g6IHsgW3N0cmluZ2lmeShwYXRoKV06IG9wLnZhbHVlIH0gfTtcbiAgaWYgKG9wLnR5cGUgPT09IFwiaW5jXCIpXG4gICAgcmV0dXJuIHsgaW5jOiB7IFtzdHJpbmdpZnkocGF0aCldOiBvcC5hbW91bnQgfSB9O1xuICBpZiAob3AudHlwZSA9PT0gXCJkZWNcIilcbiAgICByZXR1cm4geyBkZWM6IHsgW3N0cmluZ2lmeShwYXRoKV06IG9wLmFtb3VudCB9IH07XG4gIGlmIChvcC50eXBlID09PSBcInNldFwiIHx8IG9wLnR5cGUgPT09IFwic2V0SWZNaXNzaW5nXCIpXG4gICAgcmV0dXJuIHsgW29wLnR5cGVdOiB7IFtzdHJpbmdpZnkocGF0aCldOiBvcC52YWx1ZSB9IH07XG4gIGlmIChvcC50eXBlID09PSBcInRydW5jYXRlXCIpIHtcbiAgICBjb25zdCByYW5nZSA9IFtcbiAgICAgIG9wLnN0YXJ0SW5kZXgsXG4gICAgICB0eXBlb2Ygb3AuZW5kSW5kZXggPT0gXCJudW1iZXJcIiA/IG9wLmVuZEluZGV4IDogXCJcIlxuICAgIF0uam9pbihcIjpcIik7XG4gICAgcmV0dXJuIHsgdW5zZXQ6IFtgJHtzdHJpbmdpZnkocGF0aCl9WyR7cmFuZ2V9XWBdIH07XG4gIH1cbiAgaWYgKG9wLnR5cGUgPT09IFwidXBzZXJ0XCIpXG4gICAgcmV0dXJuIHtcbiAgICAgIHVuc2V0OiBvcC5pdGVtcy5tYXAoXG4gICAgICAgIChpdGVtKSA9PiBzdHJpbmdpZnkoWy4uLnBhdGgsIHsgX2tleTogaXRlbS5fa2V5IH1dKVxuICAgICAgKSxcbiAgICAgIGluc2VydDoge1xuICAgICAgICBbb3AucG9zaXRpb25dOiBzdHJpbmdpZnkoWy4uLnBhdGgsIG9wLnJlZmVyZW5jZUl0ZW1dKSxcbiAgICAgICAgaXRlbXM6IG9wLml0ZW1zXG4gICAgICB9XG4gICAgfTtcbiAgaWYgKG9wLnR5cGUgPT09IFwiYXNzaWduXCIpXG4gICAgcmV0dXJuIHtcbiAgICAgIHNldDogT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICBPYmplY3Qua2V5cyhvcC52YWx1ZSkubWFwKChrZXkpID0+IFtcbiAgICAgICAgICBzdHJpbmdpZnkocGF0aC5jb25jYXQoa2V5KSksXG4gICAgICAgICAgb3AudmFsdWVba2V5XVxuICAgICAgICBdKVxuICAgICAgKVxuICAgIH07XG4gIGlmIChvcC50eXBlID09PSBcInVuYXNzaWduXCIpXG4gICAgcmV0dXJuIHtcbiAgICAgIHVuc2V0OiBvcC5rZXlzLm1hcCgoa2V5KSA9PiBzdHJpbmdpZnkocGF0aC5jb25jYXQoa2V5KSkpXG4gICAgfTtcbiAgaWYgKG9wLnR5cGUgPT09IFwicmVwbGFjZVwiKVxuICAgIHJldHVybiB7XG4gICAgICBpbnNlcnQ6IHtcbiAgICAgICAgcmVwbGFjZTogc3RyaW5naWZ5KHBhdGguY29uY2F0KG9wLnJlZmVyZW5jZUl0ZW0pKSxcbiAgICAgICAgaXRlbXM6IG9wLml0ZW1zXG4gICAgICB9XG4gICAgfTtcbiAgaWYgKG9wLnR5cGUgPT09IFwicmVtb3ZlXCIpXG4gICAgcmV0dXJuIHtcbiAgICAgIHVuc2V0OiBbc3RyaW5naWZ5KHBhdGguY29uY2F0KG9wLnJlZmVyZW5jZUl0ZW0pKV1cbiAgICB9O1xuICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gb3BlcmF0aW9uIHR5cGUgJHtvcC50eXBlfWApO1xufVxuZXhwb3J0IHtcbiAgZW5jb2RlLFxuICBlbmNvZGVBbGwsXG4gIGVuY29kZU11dGF0aW9uLFxuICBlbmNvZGVUcmFuc2FjdGlvblxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVuY29kZS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/encode.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/getAtPath.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/getAtPath.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAtPath: () => (/* binding */ getAtPath)\n/* harmony export */ });\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./stringify.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/stringify.js\");\n\nfunction getAtPath(path, value) {\n  if (path.length === 0)\n    return value;\n  let current = value;\n  for (const head of path) {\n    if ((0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.isArrayElement)(head)) {\n      if (!Array.isArray(current))\n        return;\n      if ((0,_stringify_js__WEBPACK_IMPORTED_MODULE_0__.isKeyedElement)(head)) {\n        current = current.find((item) => item._key === head._key);\n        continue;\n      }\n      current = current[head];\n      continue;\n    }\n    current = current[head];\n  }\n  return current;\n}\n\n//# sourceMappingURL=getAtPath.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX2NodW5rcy1lcy9nZXRBdFBhdGguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBZ0U7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsNkRBQWM7QUFDdEI7QUFDQTtBQUNBLFVBQVUsNkRBQWM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbm91cmVsZGlubWFobW91ZC9mcmVzaGNhcnQvZGVwbG95L25vZGVfbW9kdWxlcy9uZXh0LXNhbml0eS9ub2RlX21vZHVsZXMvQHNhbml0eS9tdXRhdGUvZGlzdC9fY2h1bmtzLWVzL2dldEF0UGF0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0FycmF5RWxlbWVudCwgaXNLZXllZEVsZW1lbnQgfSBmcm9tIFwiLi9zdHJpbmdpZnkuanNcIjtcbmZ1bmN0aW9uIGdldEF0UGF0aChwYXRoLCB2YWx1ZSkge1xuICBpZiAocGF0aC5sZW5ndGggPT09IDApXG4gICAgcmV0dXJuIHZhbHVlO1xuICBsZXQgY3VycmVudCA9IHZhbHVlO1xuICBmb3IgKGNvbnN0IGhlYWQgb2YgcGF0aCkge1xuICAgIGlmIChpc0FycmF5RWxlbWVudChoZWFkKSkge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGN1cnJlbnQpKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAoaXNLZXllZEVsZW1lbnQoaGVhZCkpIHtcbiAgICAgICAgY3VycmVudCA9IGN1cnJlbnQuZmluZCgoaXRlbSkgPT4gaXRlbS5fa2V5ID09PSBoZWFkLl9rZXkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnQgPSBjdXJyZW50W2hlYWRdO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGN1cnJlbnQgPSBjdXJyZW50W2hlYWRdO1xuICB9XG4gIHJldHVybiBjdXJyZW50O1xufVxuZXhwb3J0IHtcbiAgZ2V0QXRQYXRoXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z2V0QXRQYXRoLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/getAtPath.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/isObject.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/isObject.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isObject: () => (/* binding */ isObject)\n/* harmony export */ });\nfunction isObject(val) {\n  return val !== null && typeof val == \"object\" && !Array.isArray(val);\n}\n\n//# sourceMappingURL=isObject.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX2NodW5rcy1lcy9pc09iamVjdC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBR0U7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL25vdXJlbGRpbm1haG1vdWQvZnJlc2hjYXJ0L2RlcGxveS9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX2NodW5rcy1lcy9pc09iamVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBpc09iamVjdCh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkodmFsKTtcbn1cbmV4cG9ydCB7XG4gIGlzT2JqZWN0XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNPYmplY3QuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/isObject.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/parse.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/parse.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parse: () => (/* binding */ parse)\n/* harmony export */ });\nfunction parse(path) {\n  return path.split(/[[.\\]]/g).filter(Boolean).map((seg) => seg.includes(\"==\") ? parseSegment(seg) : coerce(seg));\n}\nconst IS_NUMERIC = /^-?\\d+$/;\nfunction unquote(str) {\n  return str.replace(/^['\"]/, \"\").replace(/['\"]$/, \"\");\n}\nfunction parseSegment(segment) {\n  const [key, value] = segment.split(\"==\");\n  if (key !== \"_key\")\n    throw new Error(\n      `Currently only \"_key\" is supported as path segment. Found ${key}`\n    );\n  if (typeof value > \"u\")\n    throw new Error('Invalid path segment, expected `key==\"value\"`');\n  return { _key: unquote(value) };\n}\nfunction coerce(segment) {\n  return IS_NUMERIC.test(segment) ? Number(segment) : segment;\n}\n\n//# sourceMappingURL=parse.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX2NodW5rcy1lcy9wYXJzZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxJQUFJO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUdFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9ub3VyZWxkaW5tYWhtb3VkL2ZyZXNoY2FydC9kZXBsb3kvbm9kZV9tb2R1bGVzL25leHQtc2FuaXR5L25vZGVfbW9kdWxlcy9Ac2FuaXR5L211dGF0ZS9kaXN0L19jaHVua3MtZXMvcGFyc2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gcGFyc2UocGF0aCkge1xuICByZXR1cm4gcGF0aC5zcGxpdCgvW1suXFxdXS9nKS5maWx0ZXIoQm9vbGVhbikubWFwKChzZWcpID0+IHNlZy5pbmNsdWRlcyhcIj09XCIpID8gcGFyc2VTZWdtZW50KHNlZykgOiBjb2VyY2Uoc2VnKSk7XG59XG5jb25zdCBJU19OVU1FUklDID0gL14tP1xcZCskLztcbmZ1bmN0aW9uIHVucXVvdGUoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlsnXCJdLywgXCJcIikucmVwbGFjZSgvWydcIl0kLywgXCJcIik7XG59XG5mdW5jdGlvbiBwYXJzZVNlZ21lbnQoc2VnbWVudCkge1xuICBjb25zdCBba2V5LCB2YWx1ZV0gPSBzZWdtZW50LnNwbGl0KFwiPT1cIik7XG4gIGlmIChrZXkgIT09IFwiX2tleVwiKVxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBDdXJyZW50bHkgb25seSBcIl9rZXlcIiBpcyBzdXBwb3J0ZWQgYXMgcGF0aCBzZWdtZW50LiBGb3VuZCAke2tleX1gXG4gICAgKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA+IFwidVwiKVxuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwYXRoIHNlZ21lbnQsIGV4cGVjdGVkIGBrZXk9PVwidmFsdWVcImAnKTtcbiAgcmV0dXJuIHsgX2tleTogdW5xdW90ZSh2YWx1ZSkgfTtcbn1cbmZ1bmN0aW9uIGNvZXJjZShzZWdtZW50KSB7XG4gIHJldHVybiBJU19OVU1FUklDLnRlc3Qoc2VnbWVudCkgPyBOdW1iZXIoc2VnbWVudCkgOiBzZWdtZW50O1xufVxuZXhwb3J0IHtcbiAgcGFyc2Vcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYXJzZS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/parse.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/stringify.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/stringify.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isArrayElement: () => (/* binding */ isArrayElement),\n/* harmony export */   isElementEqual: () => (/* binding */ isElementEqual),\n/* harmony export */   isEqual: () => (/* binding */ isEqual),\n/* harmony export */   isIndexElement: () => (/* binding */ isIndexElement),\n/* harmony export */   isKeyElement: () => (/* binding */ isKeyElement),\n/* harmony export */   isKeyedElement: () => (/* binding */ isKeyedElement),\n/* harmony export */   isPropertyElement: () => (/* binding */ isPropertyElement),\n/* harmony export */   startsWith: () => (/* binding */ startsWith),\n/* harmony export */   stringify: () => (/* binding */ stringify)\n/* harmony export */ });\nfunction safeGetElementAt(array, index) {\n  if (index < 0 || index >= array.length)\n    throw new Error(\"Index out of bounds\");\n  return array[index];\n}\nfunction startsWith(parentPath, path) {\n  return parentPath.length <= path.length && parentPath.every(\n    (segment, i) => isElementEqual(segment, safeGetElementAt(path, i))\n  );\n}\nfunction isEqual(path, otherPath) {\n  return path.length === otherPath.length && path.every(\n    (segment, i) => isElementEqual(segment, safeGetElementAt(path, i))\n  );\n}\nfunction isElementEqual(segmentA, segmentB) {\n  return isKeyElement(segmentA) && isKeyElement(segmentB) ? segmentA._key === segmentB._key : isIndexElement(segmentA) ? Number(segmentA) === Number(segmentB) : segmentA === segmentB;\n}\nfunction isKeyElement(segment) {\n  return typeof segment?._key == \"string\";\n}\nfunction isIndexElement(segment) {\n  return typeof segment == \"number\";\n}\nfunction isKeyedElement(element) {\n  return typeof element == \"object\" && \"_key\" in element && typeof element._key == \"string\";\n}\nfunction isArrayElement(element) {\n  return typeof element == \"number\" || isKeyedElement(element);\n}\nfunction isPropertyElement(element) {\n  return typeof element == \"string\";\n}\nconst IS_DOTTABLE = /^[a-z_$]+/;\nfunction stringifySegment(segment, hasLeading) {\n  return Array.isArray(segment) ? `[${segment[0]}:${segment[1] || \"\"}]` : typeof segment == \"number\" ? `[${segment}]` : isKeyedElement(segment) ? `[_key==${JSON.stringify(segment._key)}]` : typeof segment == \"string\" && IS_DOTTABLE.test(segment) ? hasLeading ? segment : `.${segment}` : `['${segment}']`;\n}\nfunction stringify(pathArray) {\n  return pathArray.map((segment, i) => stringifySegment(segment, i === 0)).join(\"\");\n}\n\n//# sourceMappingURL=stringify.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX2NodW5rcy1lcy9zdHJpbmdpZnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxXQUFXLEdBQUcsaUJBQWlCLHNDQUFzQyxRQUFRLHlDQUF5Qyw2QkFBNkIsMEZBQTBGLFFBQVEsU0FBUyxRQUFRO0FBQzVTO0FBQ0E7QUFDQTtBQUNBO0FBV0U7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL25vdXJlbGRpbm1haG1vdWQvZnJlc2hjYXJ0L2RlcGxveS9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX2NodW5rcy1lcy9zdHJpbmdpZnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gc2FmZUdldEVsZW1lbnRBdChhcnJheSwgaW5kZXgpIHtcbiAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSBhcnJheS5sZW5ndGgpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW5kZXggb3V0IG9mIGJvdW5kc1wiKTtcbiAgcmV0dXJuIGFycmF5W2luZGV4XTtcbn1cbmZ1bmN0aW9uIHN0YXJ0c1dpdGgocGFyZW50UGF0aCwgcGF0aCkge1xuICByZXR1cm4gcGFyZW50UGF0aC5sZW5ndGggPD0gcGF0aC5sZW5ndGggJiYgcGFyZW50UGF0aC5ldmVyeShcbiAgICAoc2VnbWVudCwgaSkgPT4gaXNFbGVtZW50RXF1YWwoc2VnbWVudCwgc2FmZUdldEVsZW1lbnRBdChwYXRoLCBpKSlcbiAgKTtcbn1cbmZ1bmN0aW9uIGlzRXF1YWwocGF0aCwgb3RoZXJQYXRoKSB7XG4gIHJldHVybiBwYXRoLmxlbmd0aCA9PT0gb3RoZXJQYXRoLmxlbmd0aCAmJiBwYXRoLmV2ZXJ5KFxuICAgIChzZWdtZW50LCBpKSA9PiBpc0VsZW1lbnRFcXVhbChzZWdtZW50LCBzYWZlR2V0RWxlbWVudEF0KHBhdGgsIGkpKVxuICApO1xufVxuZnVuY3Rpb24gaXNFbGVtZW50RXF1YWwoc2VnbWVudEEsIHNlZ21lbnRCKSB7XG4gIHJldHVybiBpc0tleUVsZW1lbnQoc2VnbWVudEEpICYmIGlzS2V5RWxlbWVudChzZWdtZW50QikgPyBzZWdtZW50QS5fa2V5ID09PSBzZWdtZW50Qi5fa2V5IDogaXNJbmRleEVsZW1lbnQoc2VnbWVudEEpID8gTnVtYmVyKHNlZ21lbnRBKSA9PT0gTnVtYmVyKHNlZ21lbnRCKSA6IHNlZ21lbnRBID09PSBzZWdtZW50Qjtcbn1cbmZ1bmN0aW9uIGlzS2V5RWxlbWVudChzZWdtZW50KSB7XG4gIHJldHVybiB0eXBlb2Ygc2VnbWVudD8uX2tleSA9PSBcInN0cmluZ1wiO1xufVxuZnVuY3Rpb24gaXNJbmRleEVsZW1lbnQoc2VnbWVudCkge1xuICByZXR1cm4gdHlwZW9mIHNlZ21lbnQgPT0gXCJudW1iZXJcIjtcbn1cbmZ1bmN0aW9uIGlzS2V5ZWRFbGVtZW50KGVsZW1lbnQpIHtcbiAgcmV0dXJuIHR5cGVvZiBlbGVtZW50ID09IFwib2JqZWN0XCIgJiYgXCJfa2V5XCIgaW4gZWxlbWVudCAmJiB0eXBlb2YgZWxlbWVudC5fa2V5ID09IFwic3RyaW5nXCI7XG59XG5mdW5jdGlvbiBpc0FycmF5RWxlbWVudChlbGVtZW50KSB7XG4gIHJldHVybiB0eXBlb2YgZWxlbWVudCA9PSBcIm51bWJlclwiIHx8IGlzS2V5ZWRFbGVtZW50KGVsZW1lbnQpO1xufVxuZnVuY3Rpb24gaXNQcm9wZXJ0eUVsZW1lbnQoZWxlbWVudCkge1xuICByZXR1cm4gdHlwZW9mIGVsZW1lbnQgPT0gXCJzdHJpbmdcIjtcbn1cbmNvbnN0IElTX0RPVFRBQkxFID0gL15bYS16XyRdKy87XG5mdW5jdGlvbiBzdHJpbmdpZnlTZWdtZW50KHNlZ21lbnQsIGhhc0xlYWRpbmcpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoc2VnbWVudCkgPyBgWyR7c2VnbWVudFswXX06JHtzZWdtZW50WzFdIHx8IFwiXCJ9XWAgOiB0eXBlb2Ygc2VnbWVudCA9PSBcIm51bWJlclwiID8gYFske3NlZ21lbnR9XWAgOiBpc0tleWVkRWxlbWVudChzZWdtZW50KSA/IGBbX2tleT09JHtKU09OLnN0cmluZ2lmeShzZWdtZW50Ll9rZXkpfV1gIDogdHlwZW9mIHNlZ21lbnQgPT0gXCJzdHJpbmdcIiAmJiBJU19ET1RUQUJMRS50ZXN0KHNlZ21lbnQpID8gaGFzTGVhZGluZyA/IHNlZ21lbnQgOiBgLiR7c2VnbWVudH1gIDogYFsnJHtzZWdtZW50fSddYDtcbn1cbmZ1bmN0aW9uIHN0cmluZ2lmeShwYXRoQXJyYXkpIHtcbiAgcmV0dXJuIHBhdGhBcnJheS5tYXAoKHNlZ21lbnQsIGkpID0+IHN0cmluZ2lmeVNlZ21lbnQoc2VnbWVudCwgaSA9PT0gMCkpLmpvaW4oXCJcIik7XG59XG5leHBvcnQge1xuICBpc0FycmF5RWxlbWVudCxcbiAgaXNFbGVtZW50RXF1YWwsXG4gIGlzRXF1YWwsXG4gIGlzSW5kZXhFbGVtZW50LFxuICBpc0tleUVsZW1lbnQsXG4gIGlzS2V5ZWRFbGVtZW50LFxuICBpc1Byb3BlcnR5RWxlbWVudCxcbiAgc3RhcnRzV2l0aCxcbiAgc3RyaW5naWZ5XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5naWZ5LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/stringify.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/toTransactions.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/toTransactions.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyMutations: () => (/* binding */ applyMutations),\n/* harmony export */   commit: () => (/* binding */ commit),\n/* harmony export */   getMutationDocumentId: () => (/* binding */ getMutationDocumentId),\n/* harmony export */   rebase: () => (/* binding */ rebase),\n/* harmony export */   squashDMPStrings: () => (/* binding */ squashDMPStrings),\n/* harmony export */   squashMutationGroups: () => (/* binding */ squashMutationGroups),\n/* harmony export */   toTransactions: () => (/* binding */ toTransactions)\n/* harmony export */ });\n/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash-es */ \"(ssr)/./node_modules/lodash-es/groupBy.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/utils.js\");\n/* harmony import */ var _getAtPath_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getAtPath.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/getAtPath.js\");\n/* harmony import */ var _sanity_diff_match_patch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sanity/diff-match-patch */ \"(ssr)/./node_modules/@sanity/diff-match-patch/dist/index.js\");\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/stringify.js\");\n\n\n\n\n\nfunction getMutationDocumentId(mutation) {\n  if (mutation.type === \"patch\")\n    return mutation.id;\n  if (mutation.type === \"create\")\n    return mutation.document._id;\n  if (mutation.type === \"delete\")\n    return mutation.id;\n  if (mutation.type === \"createIfNotExists\" || mutation.type === \"createOrReplace\")\n    return mutation.document._id;\n  throw new Error(\"Invalid mutation type\");\n}\nfunction applyAll(current, mutation) {\n  return mutation.reduce((doc, m) => {\n    const res = applyDocumentMutation(doc, m);\n    if (res.status === \"error\")\n      throw new Error(res.message);\n    return res.status === \"noop\" ? doc : res.after;\n  }, current);\n}\nfunction applyDocumentMutation(document, mutation) {\n  if (mutation.type === \"create\")\n    return create(document, mutation);\n  if (mutation.type === \"createIfNotExists\")\n    return createIfNotExists(document, mutation);\n  if (mutation.type === \"delete\")\n    return del(document, mutation);\n  if (mutation.type === \"createOrReplace\")\n    return createOrReplace(document, mutation);\n  if (mutation.type === \"patch\")\n    return patch(document, mutation);\n  throw new Error(`Invalid mutation type: ${mutation.type}`);\n}\nfunction create(document, mutation) {\n  if (document)\n    return { status: \"error\", message: \"Document already exist\" };\n  const result = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.assignId)(mutation.document, _utils_js__WEBPACK_IMPORTED_MODULE_0__.nanoid);\n  return { status: \"created\", id: result._id, after: result };\n}\nfunction createIfNotExists(document, mutation) {\n  return (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.hasId)(mutation.document) ? document ? { status: \"noop\" } : { status: \"created\", id: mutation.document._id, after: mutation.document } : {\n    status: \"error\",\n    message: \"Cannot createIfNotExists on document without _id\"\n  };\n}\nfunction createOrReplace(document, mutation) {\n  return (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.hasId)(mutation.document) ? document ? {\n    status: \"updated\",\n    id: mutation.document._id,\n    before: document,\n    after: mutation.document\n  } : { status: \"created\", id: mutation.document._id, after: mutation.document } : {\n    status: \"error\",\n    message: \"Cannot createIfNotExists on document without _id\"\n  };\n}\nfunction del(document, mutation) {\n  return document ? mutation.id !== document._id ? { status: \"error\", message: \"Delete mutation targeted wrong document\" } : {\n    status: \"deleted\",\n    id: mutation.id,\n    before: document,\n    after: void 0\n  } : { status: \"noop\" };\n}\nfunction patch(document, mutation) {\n  if (!document)\n    return {\n      status: \"error\",\n      message: \"Cannot apply patch on nonexistent document\"\n    };\n  const next = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.applyPatchMutation)(mutation, document);\n  return document === next ? { status: \"noop\" } : { status: \"updated\", id: mutation.id, before: document, after: next };\n}\nfunction applyMutations(mutations, dataset) {\n  const updatedDocs = /* @__PURE__ */ Object.create(null);\n  for (const mutation of mutations) {\n    const documentId = getMutationDocumentId(mutation);\n    if (!documentId)\n      throw new Error(\"Unable to get document id from mutation\");\n    const before = updatedDocs[documentId]?.after || dataset.get(documentId), res = applyDocumentMutation(before, mutation);\n    if (res.status === \"error\")\n      throw new Error(res.message);\n    res.status !== \"noop\" && (res.status === \"updated\" || res.status === \"created\" || res.status === \"deleted\") && (documentId in updatedDocs || (updatedDocs[documentId] = { before, after: void 0, muts: [] }), updatedDocs[documentId].after = res.after);\n  }\n  return Object.entries(updatedDocs).map(\n    // eslint-disable-next-line no-shadow\n    ([id, { before, after, muts }]) => ({\n      id,\n      status: after ? before ? \"updated\" : \"created\" : \"deleted\",\n      mutations: muts,\n      before,\n      after\n    })\n  );\n}\nfunction commit(results, dataset) {\n  results.forEach((result) => {\n    (result.status === \"created\" || result.status === \"updated\") && dataset.set(result.id, result.after), result.status === \"deleted\" && dataset.delete(result.id);\n  });\n}\nfunction takeUntilRight(arr, predicate, opts) {\n  const result = [];\n  for (const item of arr.slice().reverse()) {\n    if (predicate(item))\n      return result;\n    result.push(item);\n  }\n  return result.reverse();\n}\nfunction isEqualPath(p1, p2) {\n  return (0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__.stringify)(p1) === (0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__.stringify)(p2);\n}\nfunction supersedes(later, earlier) {\n  return (earlier.type === \"set\" || earlier.type === \"unset\") && (later.type === \"set\" || later.type === \"unset\");\n}\nfunction squashNodePatches(patches) {\n  return compactSetIfMissingPatches(\n    compactSetPatches(compactUnsetPatches(patches))\n  );\n}\nfunction compactUnsetPatches(patches) {\n  return patches.reduce(\n    (earlierPatches, laterPatch) => {\n      if (laterPatch.op.type !== \"unset\")\n        return earlierPatches.push(laterPatch), earlierPatches;\n      const unaffected = earlierPatches.filter(\n        (earlierPatch) => !(0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__.startsWith)(laterPatch.path, earlierPatch.path)\n      );\n      return unaffected.push(laterPatch), unaffected;\n    },\n    []\n  );\n}\nfunction compactSetPatches(patches) {\n  return patches.reduceRight(\n    (laterPatches, earlierPatch) => (laterPatches.find(\n      (later) => supersedes(later.op, earlierPatch.op) && isEqualPath(later.path, earlierPatch.path)\n    ) || laterPatches.unshift(earlierPatch), laterPatches),\n    []\n  );\n}\nfunction compactSetIfMissingPatches(patches) {\n  return patches.reduce(\n    (previousPatches, laterPatch) => laterPatch.op.type !== \"setIfMissing\" ? (previousPatches.push(laterPatch), previousPatches) : (takeUntilRight(\n      previousPatches,\n      (patch2) => patch2.op.type === \"unset\"\n    ).find(\n      (precedingPatch) => precedingPatch.op.type === \"setIfMissing\" && isEqualPath(precedingPatch.path, laterPatch.path)\n    ) || previousPatches.push(laterPatch), previousPatches),\n    []\n  );\n}\nfunction compactDMPSetPatches(base, patches) {\n  let edge = base;\n  return patches.reduce(\n    (earlierPatches, laterPatch) => {\n      const before = edge;\n      if (edge = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.applyNodePatch)(laterPatch, edge), laterPatch.op.type === \"set\" && typeof laterPatch.op.value == \"string\") {\n        const current = (0,_getAtPath_js__WEBPACK_IMPORTED_MODULE_2__.getAtPath)(laterPatch.path, before);\n        if (typeof current == \"string\") {\n          const replaced = {\n            ...laterPatch,\n            op: {\n              type: \"diffMatchPatch\",\n              value: (0,_sanity_diff_match_patch__WEBPACK_IMPORTED_MODULE_3__.stringifyPatches)(\n                (0,_sanity_diff_match_patch__WEBPACK_IMPORTED_MODULE_3__.makePatches)(current, laterPatch.op.value)\n              )\n            }\n          };\n          return earlierPatches.flatMap((ep) => isEqualPath(ep.path, laterPatch.path) && ep.op.type === \"diffMatchPatch\" ? [] : ep).concat(replaced);\n        }\n      }\n      return earlierPatches.push(laterPatch), earlierPatches;\n    },\n    []\n  );\n}\nfunction squashDMPStrings(remote, mutationGroups) {\n  return mutationGroups.map((mutationGroup) => ({\n    ...mutationGroup,\n    mutations: dmpIfyMutations(remote, mutationGroup.mutations)\n  }));\n}\nfunction dmpIfyMutations(store, mutations) {\n  return mutations.map((mutation, i) => mutation.type === \"patch\" ? dmpifyPatchMutation(store.get(mutation.id), mutation) : mutation);\n}\nfunction dmpifyPatchMutation(base, mutation) {\n  return base ? {\n    ...mutation,\n    patches: compactDMPSetPatches(base, mutation.patches)\n  } : mutation;\n}\nfunction mergeMutationGroups(mutationGroups) {\n  return chunkWhile(mutationGroups, (group) => !group.transaction).flatMap(\n    (chunk) => ({\n      ...chunk[0],\n      mutations: chunk.flatMap((c) => c.mutations)\n    })\n  );\n}\nfunction chunkWhile(arr, predicate) {\n  const res = [];\n  let currentChunk = [];\n  return arr.forEach((item) => {\n    predicate(item) ? currentChunk.push(item) : (currentChunk.length > 0 && res.push(currentChunk), currentChunk = [], res.push([item]));\n  }), currentChunk.length > 0 && res.push(currentChunk), res;\n}\nfunction squashMutationGroups(staged) {\n  return mergeMutationGroups(staged).map((transaction) => ({\n    ...transaction,\n    mutations: squashMutations(transaction.mutations)\n  })).map((transaction) => ({\n    ...transaction,\n    mutations: transaction.mutations.map((mutation) => mutation.type !== \"patch\" ? mutation : {\n      ...mutation,\n      patches: squashNodePatches(mutation.patches)\n    })\n  }));\n}\nfunction squashMutations(mutations) {\n  const byDocument = (0,lodash_es__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(mutations, getMutationDocumentId);\n  return Object.values(byDocument).flatMap((documentMutations) => squashCreateIfNotExists(squashDelete(documentMutations)).flat().reduce((acc, docMutation) => {\n    const prev = acc[acc.length - 1];\n    return (!prev || prev.type === \"patch\") && docMutation.type === \"patch\" ? acc.slice(0, -1).concat({\n      ...docMutation,\n      patches: (prev?.patches || []).concat(docMutation.patches)\n    }) : acc.concat(docMutation);\n  }, []));\n}\nfunction squashCreateIfNotExists(mutations) {\n  return mutations.length === 0 ? mutations : mutations.reduce((previousMuts, laterMut) => laterMut.type !== \"createIfNotExists\" ? (previousMuts.push(laterMut), previousMuts) : (takeUntilRight(previousMuts, (m) => m.type === \"delete\").find(\n    (precedingPatch) => precedingPatch.type === \"createIfNotExists\"\n  ) || previousMuts.push(laterMut), previousMuts), []);\n}\nfunction squashDelete(mutations) {\n  return mutations.length === 0 ? mutations : mutations.reduce((previousMuts, laterMut) => laterMut.type === \"delete\" ? [laterMut] : (previousMuts.push(laterMut), previousMuts), []);\n}\nfunction rebase(documentId, oldBase, newBase, stagedMutations) {\n  let edge = oldBase;\n  const dmpified = stagedMutations.map((transaction) => {\n    const mutations = transaction.mutations.flatMap((mut) => {\n      if (getMutationDocumentId(mut) !== documentId)\n        return [];\n      const before = edge;\n      return edge = applyAll(edge, [mut]), !before || mut.type !== \"patch\" ? mut : {\n        type: \"dmpified\",\n        mutation: {\n          ...mut,\n          // Todo: make compactDMPSetPatches return pairs of patches that was dmpified with their\n          //  original as dmpPatches and original is not 1:1 (e..g some of the original may not be dmpified)\n          dmpPatches: compactDMPSetPatches(before, mut.patches),\n          original: mut.patches\n        }\n      };\n    });\n    return { ...transaction, mutations };\n  });\n  let newBaseWithDMPForOldBaseApplied = newBase;\n  return dmpified.map((transaction) => {\n    const applied = [];\n    return transaction.mutations.forEach((mut) => {\n      if (mut.type === \"dmpified\")\n        try {\n          newBaseWithDMPForOldBaseApplied = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.applyPatches)(\n            mut.mutation.dmpPatches,\n            newBaseWithDMPForOldBaseApplied\n          ), applied.push(mut);\n        } catch {\n          console.warn(\"Failed to apply dmp patch, falling back to original\");\n          try {\n            newBaseWithDMPForOldBaseApplied = (0,_utils_js__WEBPACK_IMPORTED_MODULE_0__.applyPatches)(\n              mut.mutation.original,\n              newBaseWithDMPForOldBaseApplied\n            ), applied.push(mut);\n          } catch (second) {\n            throw new Error(\n              `Failed to apply patch for document \"${documentId}\": ${second.message}`\n            );\n          }\n        }\n      else\n        newBaseWithDMPForOldBaseApplied = applyAll(\n          newBaseWithDMPForOldBaseApplied,\n          [mut]\n        );\n    });\n  }), [stagedMutations.map((transaction) => ({\n    ...transaction,\n    mutations: transaction.mutations.map((mut) => mut.type !== \"patch\" || getMutationDocumentId(mut) !== documentId ? mut : {\n      ...mut,\n      patches: mut.patches.map((patch2) => patch2.op.type !== \"set\" ? patch2 : {\n        ...patch2,\n        op: {\n          ...patch2.op,\n          value: (0,_getAtPath_js__WEBPACK_IMPORTED_MODULE_2__.getAtPath)(patch2.path, newBaseWithDMPForOldBaseApplied)\n        }\n      })\n    })\n  })), newBaseWithDMPForOldBaseApplied];\n}\nfunction toTransactions(groups) {\n  return groups.map((group) => group.transaction && group.id !== void 0 ? { id: group.id, mutations: group.mutations } : { mutations: group.mutations });\n}\n\n//# sourceMappingURL=toTransactions.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX2NodW5rcy1lcy90b1RyYW5zYWN0aW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBb0M7QUFDbUU7QUFDNUQ7QUFDOEI7QUFDbEI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsY0FBYztBQUMxRDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsaUJBQWlCLG1EQUFRLG9CQUFvQiw2Q0FBTTtBQUNuRCxXQUFXO0FBQ1g7QUFDQTtBQUNBLFNBQVMsZ0RBQUssbUNBQW1DLGlCQUFpQixJQUFJLHlFQUF5RTtBQUMvSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxnREFBSztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxJQUFJLHlFQUF5RTtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELHNFQUFzRTtBQUMzSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksSUFBSTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw2REFBa0I7QUFDakMsK0JBQStCLGlCQUFpQixJQUFJO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEtBQThLLGlDQUFpQztBQUMvTTtBQUNBO0FBQ0E7QUFDQSxZQUFZLHFCQUFxQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsd0RBQVMsU0FBUyx3REFBUztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIseURBQVU7QUFDckM7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIseURBQWM7QUFDL0Isd0JBQXdCLHdEQUFTO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMEVBQWdCO0FBQ3JDLGdCQUFnQixxRUFBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EscUJBQXFCLHFEQUFPO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsYUFBYTtBQUNiLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsdURBQVk7QUFDeEQ7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSw4Q0FBOEMsdURBQVk7QUFDMUQ7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0EscURBQXFELFdBQVcsS0FBSyxlQUFlO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHdEQUFTO0FBQzFCO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLDRFQUE0RSwyQ0FBMkMsSUFBSSw0QkFBNEI7QUFDdko7QUFTRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbm91cmVsZGlubWFobW91ZC9mcmVzaGNhcnQvZGVwbG95L25vZGVfbW9kdWxlcy9uZXh0LXNhbml0eS9ub2RlX21vZHVsZXMvQHNhbml0eS9tdXRhdGUvZGlzdC9fY2h1bmtzLWVzL3RvVHJhbnNhY3Rpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdyb3VwQnkgfSBmcm9tIFwibG9kYXNoLWVzXCI7XG5pbXBvcnQgeyBhc3NpZ25JZCwgbmFub2lkLCBoYXNJZCwgYXBwbHlQYXRjaE11dGF0aW9uLCBhcHBseU5vZGVQYXRjaCwgYXBwbHlQYXRjaGVzIH0gZnJvbSBcIi4vdXRpbHMuanNcIjtcbmltcG9ydCB7IGdldEF0UGF0aCB9IGZyb20gXCIuL2dldEF0UGF0aC5qc1wiO1xuaW1wb3J0IHsgc3RyaW5naWZ5UGF0Y2hlcywgbWFrZVBhdGNoZXMgfSBmcm9tIFwiQHNhbml0eS9kaWZmLW1hdGNoLXBhdGNoXCI7XG5pbXBvcnQgeyBzdGFydHNXaXRoLCBzdHJpbmdpZnkgfSBmcm9tIFwiLi9zdHJpbmdpZnkuanNcIjtcbmZ1bmN0aW9uIGdldE11dGF0aW9uRG9jdW1lbnRJZChtdXRhdGlvbikge1xuICBpZiAobXV0YXRpb24udHlwZSA9PT0gXCJwYXRjaFwiKVxuICAgIHJldHVybiBtdXRhdGlvbi5pZDtcbiAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwiY3JlYXRlXCIpXG4gICAgcmV0dXJuIG11dGF0aW9uLmRvY3VtZW50Ll9pZDtcbiAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwiZGVsZXRlXCIpXG4gICAgcmV0dXJuIG11dGF0aW9uLmlkO1xuICBpZiAobXV0YXRpb24udHlwZSA9PT0gXCJjcmVhdGVJZk5vdEV4aXN0c1wiIHx8IG11dGF0aW9uLnR5cGUgPT09IFwiY3JlYXRlT3JSZXBsYWNlXCIpXG4gICAgcmV0dXJuIG11dGF0aW9uLmRvY3VtZW50Ll9pZDtcbiAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBtdXRhdGlvbiB0eXBlXCIpO1xufVxuZnVuY3Rpb24gYXBwbHlBbGwoY3VycmVudCwgbXV0YXRpb24pIHtcbiAgcmV0dXJuIG11dGF0aW9uLnJlZHVjZSgoZG9jLCBtKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXBwbHlEb2N1bWVudE11dGF0aW9uKGRvYywgbSk7XG4gICAgaWYgKHJlcy5zdGF0dXMgPT09IFwiZXJyb3JcIilcbiAgICAgIHRocm93IG5ldyBFcnJvcihyZXMubWVzc2FnZSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMgPT09IFwibm9vcFwiID8gZG9jIDogcmVzLmFmdGVyO1xuICB9LCBjdXJyZW50KTtcbn1cbmZ1bmN0aW9uIGFwcGx5RG9jdW1lbnRNdXRhdGlvbihkb2N1bWVudCwgbXV0YXRpb24pIHtcbiAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwiY3JlYXRlXCIpXG4gICAgcmV0dXJuIGNyZWF0ZShkb2N1bWVudCwgbXV0YXRpb24pO1xuICBpZiAobXV0YXRpb24udHlwZSA9PT0gXCJjcmVhdGVJZk5vdEV4aXN0c1wiKVxuICAgIHJldHVybiBjcmVhdGVJZk5vdEV4aXN0cyhkb2N1bWVudCwgbXV0YXRpb24pO1xuICBpZiAobXV0YXRpb24udHlwZSA9PT0gXCJkZWxldGVcIilcbiAgICByZXR1cm4gZGVsKGRvY3VtZW50LCBtdXRhdGlvbik7XG4gIGlmIChtdXRhdGlvbi50eXBlID09PSBcImNyZWF0ZU9yUmVwbGFjZVwiKVxuICAgIHJldHVybiBjcmVhdGVPclJlcGxhY2UoZG9jdW1lbnQsIG11dGF0aW9uKTtcbiAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwicGF0Y2hcIilcbiAgICByZXR1cm4gcGF0Y2goZG9jdW1lbnQsIG11dGF0aW9uKTtcbiAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG11dGF0aW9uIHR5cGU6ICR7bXV0YXRpb24udHlwZX1gKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZShkb2N1bWVudCwgbXV0YXRpb24pIHtcbiAgaWYgKGRvY3VtZW50KVxuICAgIHJldHVybiB7IHN0YXR1czogXCJlcnJvclwiLCBtZXNzYWdlOiBcIkRvY3VtZW50IGFscmVhZHkgZXhpc3RcIiB9O1xuICBjb25zdCByZXN1bHQgPSBhc3NpZ25JZChtdXRhdGlvbi5kb2N1bWVudCwgbmFub2lkKTtcbiAgcmV0dXJuIHsgc3RhdHVzOiBcImNyZWF0ZWRcIiwgaWQ6IHJlc3VsdC5faWQsIGFmdGVyOiByZXN1bHQgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUlmTm90RXhpc3RzKGRvY3VtZW50LCBtdXRhdGlvbikge1xuICByZXR1cm4gaGFzSWQobXV0YXRpb24uZG9jdW1lbnQpID8gZG9jdW1lbnQgPyB7IHN0YXR1czogXCJub29wXCIgfSA6IHsgc3RhdHVzOiBcImNyZWF0ZWRcIiwgaWQ6IG11dGF0aW9uLmRvY3VtZW50Ll9pZCwgYWZ0ZXI6IG11dGF0aW9uLmRvY3VtZW50IH0gOiB7XG4gICAgc3RhdHVzOiBcImVycm9yXCIsXG4gICAgbWVzc2FnZTogXCJDYW5ub3QgY3JlYXRlSWZOb3RFeGlzdHMgb24gZG9jdW1lbnQgd2l0aG91dCBfaWRcIlxuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlT3JSZXBsYWNlKGRvY3VtZW50LCBtdXRhdGlvbikge1xuICByZXR1cm4gaGFzSWQobXV0YXRpb24uZG9jdW1lbnQpID8gZG9jdW1lbnQgPyB7XG4gICAgc3RhdHVzOiBcInVwZGF0ZWRcIixcbiAgICBpZDogbXV0YXRpb24uZG9jdW1lbnQuX2lkLFxuICAgIGJlZm9yZTogZG9jdW1lbnQsXG4gICAgYWZ0ZXI6IG11dGF0aW9uLmRvY3VtZW50XG4gIH0gOiB7IHN0YXR1czogXCJjcmVhdGVkXCIsIGlkOiBtdXRhdGlvbi5kb2N1bWVudC5faWQsIGFmdGVyOiBtdXRhdGlvbi5kb2N1bWVudCB9IDoge1xuICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgIG1lc3NhZ2U6IFwiQ2Fubm90IGNyZWF0ZUlmTm90RXhpc3RzIG9uIGRvY3VtZW50IHdpdGhvdXQgX2lkXCJcbiAgfTtcbn1cbmZ1bmN0aW9uIGRlbChkb2N1bWVudCwgbXV0YXRpb24pIHtcbiAgcmV0dXJuIGRvY3VtZW50ID8gbXV0YXRpb24uaWQgIT09IGRvY3VtZW50Ll9pZCA/IHsgc3RhdHVzOiBcImVycm9yXCIsIG1lc3NhZ2U6IFwiRGVsZXRlIG11dGF0aW9uIHRhcmdldGVkIHdyb25nIGRvY3VtZW50XCIgfSA6IHtcbiAgICBzdGF0dXM6IFwiZGVsZXRlZFwiLFxuICAgIGlkOiBtdXRhdGlvbi5pZCxcbiAgICBiZWZvcmU6IGRvY3VtZW50LFxuICAgIGFmdGVyOiB2b2lkIDBcbiAgfSA6IHsgc3RhdHVzOiBcIm5vb3BcIiB9O1xufVxuZnVuY3Rpb24gcGF0Y2goZG9jdW1lbnQsIG11dGF0aW9uKSB7XG4gIGlmICghZG9jdW1lbnQpXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1czogXCJlcnJvclwiLFxuICAgICAgbWVzc2FnZTogXCJDYW5ub3QgYXBwbHkgcGF0Y2ggb24gbm9uZXhpc3RlbnQgZG9jdW1lbnRcIlxuICAgIH07XG4gIGNvbnN0IG5leHQgPSBhcHBseVBhdGNoTXV0YXRpb24obXV0YXRpb24sIGRvY3VtZW50KTtcbiAgcmV0dXJuIGRvY3VtZW50ID09PSBuZXh0ID8geyBzdGF0dXM6IFwibm9vcFwiIH0gOiB7IHN0YXR1czogXCJ1cGRhdGVkXCIsIGlkOiBtdXRhdGlvbi5pZCwgYmVmb3JlOiBkb2N1bWVudCwgYWZ0ZXI6IG5leHQgfTtcbn1cbmZ1bmN0aW9uIGFwcGx5TXV0YXRpb25zKG11dGF0aW9ucywgZGF0YXNldCkge1xuICBjb25zdCB1cGRhdGVkRG9jcyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9ucykge1xuICAgIGNvbnN0IGRvY3VtZW50SWQgPSBnZXRNdXRhdGlvbkRvY3VtZW50SWQobXV0YXRpb24pO1xuICAgIGlmICghZG9jdW1lbnRJZClcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBnZXQgZG9jdW1lbnQgaWQgZnJvbSBtdXRhdGlvblwiKTtcbiAgICBjb25zdCBiZWZvcmUgPSB1cGRhdGVkRG9jc1tkb2N1bWVudElkXT8uYWZ0ZXIgfHwgZGF0YXNldC5nZXQoZG9jdW1lbnRJZCksIHJlcyA9IGFwcGx5RG9jdW1lbnRNdXRhdGlvbihiZWZvcmUsIG11dGF0aW9uKTtcbiAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKHJlcy5tZXNzYWdlKTtcbiAgICByZXMuc3RhdHVzICE9PSBcIm5vb3BcIiAmJiAocmVzLnN0YXR1cyA9PT0gXCJ1cGRhdGVkXCIgfHwgcmVzLnN0YXR1cyA9PT0gXCJjcmVhdGVkXCIgfHwgcmVzLnN0YXR1cyA9PT0gXCJkZWxldGVkXCIpICYmIChkb2N1bWVudElkIGluIHVwZGF0ZWREb2NzIHx8ICh1cGRhdGVkRG9jc1tkb2N1bWVudElkXSA9IHsgYmVmb3JlLCBhZnRlcjogdm9pZCAwLCBtdXRzOiBbXSB9KSwgdXBkYXRlZERvY3NbZG9jdW1lbnRJZF0uYWZ0ZXIgPSByZXMuYWZ0ZXIpO1xuICB9XG4gIHJldHVybiBPYmplY3QuZW50cmllcyh1cGRhdGVkRG9jcykubWFwKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1zaGFkb3dcbiAgICAoW2lkLCB7IGJlZm9yZSwgYWZ0ZXIsIG11dHMgfV0pID0+ICh7XG4gICAgICBpZCxcbiAgICAgIHN0YXR1czogYWZ0ZXIgPyBiZWZvcmUgPyBcInVwZGF0ZWRcIiA6IFwiY3JlYXRlZFwiIDogXCJkZWxldGVkXCIsXG4gICAgICBtdXRhdGlvbnM6IG11dHMsXG4gICAgICBiZWZvcmUsXG4gICAgICBhZnRlclxuICAgIH0pXG4gICk7XG59XG5mdW5jdGlvbiBjb21taXQocmVzdWx0cywgZGF0YXNldCkge1xuICByZXN1bHRzLmZvckVhY2goKHJlc3VsdCkgPT4ge1xuICAgIChyZXN1bHQuc3RhdHVzID09PSBcImNyZWF0ZWRcIiB8fCByZXN1bHQuc3RhdHVzID09PSBcInVwZGF0ZWRcIikgJiYgZGF0YXNldC5zZXQocmVzdWx0LmlkLCByZXN1bHQuYWZ0ZXIpLCByZXN1bHQuc3RhdHVzID09PSBcImRlbGV0ZWRcIiAmJiBkYXRhc2V0LmRlbGV0ZShyZXN1bHQuaWQpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHRha2VVbnRpbFJpZ2h0KGFyciwgcHJlZGljYXRlLCBvcHRzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyLnNsaWNlKCkucmV2ZXJzZSgpKSB7XG4gICAgaWYgKHByZWRpY2F0ZShpdGVtKSlcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgcmVzdWx0LnB1c2goaXRlbSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdC5yZXZlcnNlKCk7XG59XG5mdW5jdGlvbiBpc0VxdWFsUGF0aChwMSwgcDIpIHtcbiAgcmV0dXJuIHN0cmluZ2lmeShwMSkgPT09IHN0cmluZ2lmeShwMik7XG59XG5mdW5jdGlvbiBzdXBlcnNlZGVzKGxhdGVyLCBlYXJsaWVyKSB7XG4gIHJldHVybiAoZWFybGllci50eXBlID09PSBcInNldFwiIHx8IGVhcmxpZXIudHlwZSA9PT0gXCJ1bnNldFwiKSAmJiAobGF0ZXIudHlwZSA9PT0gXCJzZXRcIiB8fCBsYXRlci50eXBlID09PSBcInVuc2V0XCIpO1xufVxuZnVuY3Rpb24gc3F1YXNoTm9kZVBhdGNoZXMocGF0Y2hlcykge1xuICByZXR1cm4gY29tcGFjdFNldElmTWlzc2luZ1BhdGNoZXMoXG4gICAgY29tcGFjdFNldFBhdGNoZXMoY29tcGFjdFVuc2V0UGF0Y2hlcyhwYXRjaGVzKSlcbiAgKTtcbn1cbmZ1bmN0aW9uIGNvbXBhY3RVbnNldFBhdGNoZXMocGF0Y2hlcykge1xuICByZXR1cm4gcGF0Y2hlcy5yZWR1Y2UoXG4gICAgKGVhcmxpZXJQYXRjaGVzLCBsYXRlclBhdGNoKSA9PiB7XG4gICAgICBpZiAobGF0ZXJQYXRjaC5vcC50eXBlICE9PSBcInVuc2V0XCIpXG4gICAgICAgIHJldHVybiBlYXJsaWVyUGF0Y2hlcy5wdXNoKGxhdGVyUGF0Y2gpLCBlYXJsaWVyUGF0Y2hlcztcbiAgICAgIGNvbnN0IHVuYWZmZWN0ZWQgPSBlYXJsaWVyUGF0Y2hlcy5maWx0ZXIoXG4gICAgICAgIChlYXJsaWVyUGF0Y2gpID0+ICFzdGFydHNXaXRoKGxhdGVyUGF0Y2gucGF0aCwgZWFybGllclBhdGNoLnBhdGgpXG4gICAgICApO1xuICAgICAgcmV0dXJuIHVuYWZmZWN0ZWQucHVzaChsYXRlclBhdGNoKSwgdW5hZmZlY3RlZDtcbiAgICB9LFxuICAgIFtdXG4gICk7XG59XG5mdW5jdGlvbiBjb21wYWN0U2V0UGF0Y2hlcyhwYXRjaGVzKSB7XG4gIHJldHVybiBwYXRjaGVzLnJlZHVjZVJpZ2h0KFxuICAgIChsYXRlclBhdGNoZXMsIGVhcmxpZXJQYXRjaCkgPT4gKGxhdGVyUGF0Y2hlcy5maW5kKFxuICAgICAgKGxhdGVyKSA9PiBzdXBlcnNlZGVzKGxhdGVyLm9wLCBlYXJsaWVyUGF0Y2gub3ApICYmIGlzRXF1YWxQYXRoKGxhdGVyLnBhdGgsIGVhcmxpZXJQYXRjaC5wYXRoKVxuICAgICkgfHwgbGF0ZXJQYXRjaGVzLnVuc2hpZnQoZWFybGllclBhdGNoKSwgbGF0ZXJQYXRjaGVzKSxcbiAgICBbXVxuICApO1xufVxuZnVuY3Rpb24gY29tcGFjdFNldElmTWlzc2luZ1BhdGNoZXMocGF0Y2hlcykge1xuICByZXR1cm4gcGF0Y2hlcy5yZWR1Y2UoXG4gICAgKHByZXZpb3VzUGF0Y2hlcywgbGF0ZXJQYXRjaCkgPT4gbGF0ZXJQYXRjaC5vcC50eXBlICE9PSBcInNldElmTWlzc2luZ1wiID8gKHByZXZpb3VzUGF0Y2hlcy5wdXNoKGxhdGVyUGF0Y2gpLCBwcmV2aW91c1BhdGNoZXMpIDogKHRha2VVbnRpbFJpZ2h0KFxuICAgICAgcHJldmlvdXNQYXRjaGVzLFxuICAgICAgKHBhdGNoMikgPT4gcGF0Y2gyLm9wLnR5cGUgPT09IFwidW5zZXRcIlxuICAgICkuZmluZChcbiAgICAgIChwcmVjZWRpbmdQYXRjaCkgPT4gcHJlY2VkaW5nUGF0Y2gub3AudHlwZSA9PT0gXCJzZXRJZk1pc3NpbmdcIiAmJiBpc0VxdWFsUGF0aChwcmVjZWRpbmdQYXRjaC5wYXRoLCBsYXRlclBhdGNoLnBhdGgpXG4gICAgKSB8fCBwcmV2aW91c1BhdGNoZXMucHVzaChsYXRlclBhdGNoKSwgcHJldmlvdXNQYXRjaGVzKSxcbiAgICBbXVxuICApO1xufVxuZnVuY3Rpb24gY29tcGFjdERNUFNldFBhdGNoZXMoYmFzZSwgcGF0Y2hlcykge1xuICBsZXQgZWRnZSA9IGJhc2U7XG4gIHJldHVybiBwYXRjaGVzLnJlZHVjZShcbiAgICAoZWFybGllclBhdGNoZXMsIGxhdGVyUGF0Y2gpID0+IHtcbiAgICAgIGNvbnN0IGJlZm9yZSA9IGVkZ2U7XG4gICAgICBpZiAoZWRnZSA9IGFwcGx5Tm9kZVBhdGNoKGxhdGVyUGF0Y2gsIGVkZ2UpLCBsYXRlclBhdGNoLm9wLnR5cGUgPT09IFwic2V0XCIgJiYgdHlwZW9mIGxhdGVyUGF0Y2gub3AudmFsdWUgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICBjb25zdCBjdXJyZW50ID0gZ2V0QXRQYXRoKGxhdGVyUGF0Y2gucGF0aCwgYmVmb3JlKTtcbiAgICAgICAgaWYgKHR5cGVvZiBjdXJyZW50ID09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICBjb25zdCByZXBsYWNlZCA9IHtcbiAgICAgICAgICAgIC4uLmxhdGVyUGF0Y2gsXG4gICAgICAgICAgICBvcDoge1xuICAgICAgICAgICAgICB0eXBlOiBcImRpZmZNYXRjaFBhdGNoXCIsXG4gICAgICAgICAgICAgIHZhbHVlOiBzdHJpbmdpZnlQYXRjaGVzKFxuICAgICAgICAgICAgICAgIG1ha2VQYXRjaGVzKGN1cnJlbnQsIGxhdGVyUGF0Y2gub3AudmFsdWUpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiBlYXJsaWVyUGF0Y2hlcy5mbGF0TWFwKChlcCkgPT4gaXNFcXVhbFBhdGgoZXAucGF0aCwgbGF0ZXJQYXRjaC5wYXRoKSAmJiBlcC5vcC50eXBlID09PSBcImRpZmZNYXRjaFBhdGNoXCIgPyBbXSA6IGVwKS5jb25jYXQocmVwbGFjZWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZWFybGllclBhdGNoZXMucHVzaChsYXRlclBhdGNoKSwgZWFybGllclBhdGNoZXM7XG4gICAgfSxcbiAgICBbXVxuICApO1xufVxuZnVuY3Rpb24gc3F1YXNoRE1QU3RyaW5ncyhyZW1vdGUsIG11dGF0aW9uR3JvdXBzKSB7XG4gIHJldHVybiBtdXRhdGlvbkdyb3Vwcy5tYXAoKG11dGF0aW9uR3JvdXApID0+ICh7XG4gICAgLi4ubXV0YXRpb25Hcm91cCxcbiAgICBtdXRhdGlvbnM6IGRtcElmeU11dGF0aW9ucyhyZW1vdGUsIG11dGF0aW9uR3JvdXAubXV0YXRpb25zKVxuICB9KSk7XG59XG5mdW5jdGlvbiBkbXBJZnlNdXRhdGlvbnMoc3RvcmUsIG11dGF0aW9ucykge1xuICByZXR1cm4gbXV0YXRpb25zLm1hcCgobXV0YXRpb24sIGkpID0+IG11dGF0aW9uLnR5cGUgPT09IFwicGF0Y2hcIiA/IGRtcGlmeVBhdGNoTXV0YXRpb24oc3RvcmUuZ2V0KG11dGF0aW9uLmlkKSwgbXV0YXRpb24pIDogbXV0YXRpb24pO1xufVxuZnVuY3Rpb24gZG1waWZ5UGF0Y2hNdXRhdGlvbihiYXNlLCBtdXRhdGlvbikge1xuICByZXR1cm4gYmFzZSA/IHtcbiAgICAuLi5tdXRhdGlvbixcbiAgICBwYXRjaGVzOiBjb21wYWN0RE1QU2V0UGF0Y2hlcyhiYXNlLCBtdXRhdGlvbi5wYXRjaGVzKVxuICB9IDogbXV0YXRpb247XG59XG5mdW5jdGlvbiBtZXJnZU11dGF0aW9uR3JvdXBzKG11dGF0aW9uR3JvdXBzKSB7XG4gIHJldHVybiBjaHVua1doaWxlKG11dGF0aW9uR3JvdXBzLCAoZ3JvdXApID0+ICFncm91cC50cmFuc2FjdGlvbikuZmxhdE1hcChcbiAgICAoY2h1bmspID0+ICh7XG4gICAgICAuLi5jaHVua1swXSxcbiAgICAgIG11dGF0aW9uczogY2h1bmsuZmxhdE1hcCgoYykgPT4gYy5tdXRhdGlvbnMpXG4gICAgfSlcbiAgKTtcbn1cbmZ1bmN0aW9uIGNodW5rV2hpbGUoYXJyLCBwcmVkaWNhdGUpIHtcbiAgY29uc3QgcmVzID0gW107XG4gIGxldCBjdXJyZW50Q2h1bmsgPSBbXTtcbiAgcmV0dXJuIGFyci5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgcHJlZGljYXRlKGl0ZW0pID8gY3VycmVudENodW5rLnB1c2goaXRlbSkgOiAoY3VycmVudENodW5rLmxlbmd0aCA+IDAgJiYgcmVzLnB1c2goY3VycmVudENodW5rKSwgY3VycmVudENodW5rID0gW10sIHJlcy5wdXNoKFtpdGVtXSkpO1xuICB9KSwgY3VycmVudENodW5rLmxlbmd0aCA+IDAgJiYgcmVzLnB1c2goY3VycmVudENodW5rKSwgcmVzO1xufVxuZnVuY3Rpb24gc3F1YXNoTXV0YXRpb25Hcm91cHMoc3RhZ2VkKSB7XG4gIHJldHVybiBtZXJnZU11dGF0aW9uR3JvdXBzKHN0YWdlZCkubWFwKCh0cmFuc2FjdGlvbikgPT4gKHtcbiAgICAuLi50cmFuc2FjdGlvbixcbiAgICBtdXRhdGlvbnM6IHNxdWFzaE11dGF0aW9ucyh0cmFuc2FjdGlvbi5tdXRhdGlvbnMpXG4gIH0pKS5tYXAoKHRyYW5zYWN0aW9uKSA9PiAoe1xuICAgIC4uLnRyYW5zYWN0aW9uLFxuICAgIG11dGF0aW9uczogdHJhbnNhY3Rpb24ubXV0YXRpb25zLm1hcCgobXV0YXRpb24pID0+IG11dGF0aW9uLnR5cGUgIT09IFwicGF0Y2hcIiA/IG11dGF0aW9uIDoge1xuICAgICAgLi4ubXV0YXRpb24sXG4gICAgICBwYXRjaGVzOiBzcXVhc2hOb2RlUGF0Y2hlcyhtdXRhdGlvbi5wYXRjaGVzKVxuICAgIH0pXG4gIH0pKTtcbn1cbmZ1bmN0aW9uIHNxdWFzaE11dGF0aW9ucyhtdXRhdGlvbnMpIHtcbiAgY29uc3QgYnlEb2N1bWVudCA9IGdyb3VwQnkobXV0YXRpb25zLCBnZXRNdXRhdGlvbkRvY3VtZW50SWQpO1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhieURvY3VtZW50KS5mbGF0TWFwKChkb2N1bWVudE11dGF0aW9ucykgPT4gc3F1YXNoQ3JlYXRlSWZOb3RFeGlzdHMoc3F1YXNoRGVsZXRlKGRvY3VtZW50TXV0YXRpb25zKSkuZmxhdCgpLnJlZHVjZSgoYWNjLCBkb2NNdXRhdGlvbikgPT4ge1xuICAgIGNvbnN0IHByZXYgPSBhY2NbYWNjLmxlbmd0aCAtIDFdO1xuICAgIHJldHVybiAoIXByZXYgfHwgcHJldi50eXBlID09PSBcInBhdGNoXCIpICYmIGRvY011dGF0aW9uLnR5cGUgPT09IFwicGF0Y2hcIiA/IGFjYy5zbGljZSgwLCAtMSkuY29uY2F0KHtcbiAgICAgIC4uLmRvY011dGF0aW9uLFxuICAgICAgcGF0Y2hlczogKHByZXY/LnBhdGNoZXMgfHwgW10pLmNvbmNhdChkb2NNdXRhdGlvbi5wYXRjaGVzKVxuICAgIH0pIDogYWNjLmNvbmNhdChkb2NNdXRhdGlvbik7XG4gIH0sIFtdKSk7XG59XG5mdW5jdGlvbiBzcXVhc2hDcmVhdGVJZk5vdEV4aXN0cyhtdXRhdGlvbnMpIHtcbiAgcmV0dXJuIG11dGF0aW9ucy5sZW5ndGggPT09IDAgPyBtdXRhdGlvbnMgOiBtdXRhdGlvbnMucmVkdWNlKChwcmV2aW91c011dHMsIGxhdGVyTXV0KSA9PiBsYXRlck11dC50eXBlICE9PSBcImNyZWF0ZUlmTm90RXhpc3RzXCIgPyAocHJldmlvdXNNdXRzLnB1c2gobGF0ZXJNdXQpLCBwcmV2aW91c011dHMpIDogKHRha2VVbnRpbFJpZ2h0KHByZXZpb3VzTXV0cywgKG0pID0+IG0udHlwZSA9PT0gXCJkZWxldGVcIikuZmluZChcbiAgICAocHJlY2VkaW5nUGF0Y2gpID0+IHByZWNlZGluZ1BhdGNoLnR5cGUgPT09IFwiY3JlYXRlSWZOb3RFeGlzdHNcIlxuICApIHx8IHByZXZpb3VzTXV0cy5wdXNoKGxhdGVyTXV0KSwgcHJldmlvdXNNdXRzKSwgW10pO1xufVxuZnVuY3Rpb24gc3F1YXNoRGVsZXRlKG11dGF0aW9ucykge1xuICByZXR1cm4gbXV0YXRpb25zLmxlbmd0aCA9PT0gMCA/IG11dGF0aW9ucyA6IG11dGF0aW9ucy5yZWR1Y2UoKHByZXZpb3VzTXV0cywgbGF0ZXJNdXQpID0+IGxhdGVyTXV0LnR5cGUgPT09IFwiZGVsZXRlXCIgPyBbbGF0ZXJNdXRdIDogKHByZXZpb3VzTXV0cy5wdXNoKGxhdGVyTXV0KSwgcHJldmlvdXNNdXRzKSwgW10pO1xufVxuZnVuY3Rpb24gcmViYXNlKGRvY3VtZW50SWQsIG9sZEJhc2UsIG5ld0Jhc2UsIHN0YWdlZE11dGF0aW9ucykge1xuICBsZXQgZWRnZSA9IG9sZEJhc2U7XG4gIGNvbnN0IGRtcGlmaWVkID0gc3RhZ2VkTXV0YXRpb25zLm1hcCgodHJhbnNhY3Rpb24pID0+IHtcbiAgICBjb25zdCBtdXRhdGlvbnMgPSB0cmFuc2FjdGlvbi5tdXRhdGlvbnMuZmxhdE1hcCgobXV0KSA9PiB7XG4gICAgICBpZiAoZ2V0TXV0YXRpb25Eb2N1bWVudElkKG11dCkgIT09IGRvY3VtZW50SWQpXG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIGNvbnN0IGJlZm9yZSA9IGVkZ2U7XG4gICAgICByZXR1cm4gZWRnZSA9IGFwcGx5QWxsKGVkZ2UsIFttdXRdKSwgIWJlZm9yZSB8fCBtdXQudHlwZSAhPT0gXCJwYXRjaFwiID8gbXV0IDoge1xuICAgICAgICB0eXBlOiBcImRtcGlmaWVkXCIsXG4gICAgICAgIG11dGF0aW9uOiB7XG4gICAgICAgICAgLi4ubXV0LFxuICAgICAgICAgIC8vIFRvZG86IG1ha2UgY29tcGFjdERNUFNldFBhdGNoZXMgcmV0dXJuIHBhaXJzIG9mIHBhdGNoZXMgdGhhdCB3YXMgZG1waWZpZWQgd2l0aCB0aGVpclxuICAgICAgICAgIC8vICBvcmlnaW5hbCBhcyBkbXBQYXRjaGVzIGFuZCBvcmlnaW5hbCBpcyBub3QgMToxIChlLi5nIHNvbWUgb2YgdGhlIG9yaWdpbmFsIG1heSBub3QgYmUgZG1waWZpZWQpXG4gICAgICAgICAgZG1wUGF0Y2hlczogY29tcGFjdERNUFNldFBhdGNoZXMoYmVmb3JlLCBtdXQucGF0Y2hlcyksXG4gICAgICAgICAgb3JpZ2luYWw6IG11dC5wYXRjaGVzXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gICAgcmV0dXJuIHsgLi4udHJhbnNhY3Rpb24sIG11dGF0aW9ucyB9O1xuICB9KTtcbiAgbGV0IG5ld0Jhc2VXaXRoRE1QRm9yT2xkQmFzZUFwcGxpZWQgPSBuZXdCYXNlO1xuICByZXR1cm4gZG1waWZpZWQubWFwKCh0cmFuc2FjdGlvbikgPT4ge1xuICAgIGNvbnN0IGFwcGxpZWQgPSBbXTtcbiAgICByZXR1cm4gdHJhbnNhY3Rpb24ubXV0YXRpb25zLmZvckVhY2goKG11dCkgPT4ge1xuICAgICAgaWYgKG11dC50eXBlID09PSBcImRtcGlmaWVkXCIpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbmV3QmFzZVdpdGhETVBGb3JPbGRCYXNlQXBwbGllZCA9IGFwcGx5UGF0Y2hlcyhcbiAgICAgICAgICAgIG11dC5tdXRhdGlvbi5kbXBQYXRjaGVzLFxuICAgICAgICAgICAgbmV3QmFzZVdpdGhETVBGb3JPbGRCYXNlQXBwbGllZFxuICAgICAgICAgICksIGFwcGxpZWQucHVzaChtdXQpO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gYXBwbHkgZG1wIHBhdGNoLCBmYWxsaW5nIGJhY2sgdG8gb3JpZ2luYWxcIik7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5ld0Jhc2VXaXRoRE1QRm9yT2xkQmFzZUFwcGxpZWQgPSBhcHBseVBhdGNoZXMoXG4gICAgICAgICAgICAgIG11dC5tdXRhdGlvbi5vcmlnaW5hbCxcbiAgICAgICAgICAgICAgbmV3QmFzZVdpdGhETVBGb3JPbGRCYXNlQXBwbGllZFxuICAgICAgICAgICAgKSwgYXBwbGllZC5wdXNoKG11dCk7XG4gICAgICAgICAgfSBjYXRjaCAoc2Vjb25kKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIGBGYWlsZWQgdG8gYXBwbHkgcGF0Y2ggZm9yIGRvY3VtZW50IFwiJHtkb2N1bWVudElkfVwiOiAke3NlY29uZC5tZXNzYWdlfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBlbHNlXG4gICAgICAgIG5ld0Jhc2VXaXRoRE1QRm9yT2xkQmFzZUFwcGxpZWQgPSBhcHBseUFsbChcbiAgICAgICAgICBuZXdCYXNlV2l0aERNUEZvck9sZEJhc2VBcHBsaWVkLFxuICAgICAgICAgIFttdXRdXG4gICAgICAgICk7XG4gICAgfSk7XG4gIH0pLCBbc3RhZ2VkTXV0YXRpb25zLm1hcCgodHJhbnNhY3Rpb24pID0+ICh7XG4gICAgLi4udHJhbnNhY3Rpb24sXG4gICAgbXV0YXRpb25zOiB0cmFuc2FjdGlvbi5tdXRhdGlvbnMubWFwKChtdXQpID0+IG11dC50eXBlICE9PSBcInBhdGNoXCIgfHwgZ2V0TXV0YXRpb25Eb2N1bWVudElkKG11dCkgIT09IGRvY3VtZW50SWQgPyBtdXQgOiB7XG4gICAgICAuLi5tdXQsXG4gICAgICBwYXRjaGVzOiBtdXQucGF0Y2hlcy5tYXAoKHBhdGNoMikgPT4gcGF0Y2gyLm9wLnR5cGUgIT09IFwic2V0XCIgPyBwYXRjaDIgOiB7XG4gICAgICAgIC4uLnBhdGNoMixcbiAgICAgICAgb3A6IHtcbiAgICAgICAgICAuLi5wYXRjaDIub3AsXG4gICAgICAgICAgdmFsdWU6IGdldEF0UGF0aChwYXRjaDIucGF0aCwgbmV3QmFzZVdpdGhETVBGb3JPbGRCYXNlQXBwbGllZClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuICB9KSksIG5ld0Jhc2VXaXRoRE1QRm9yT2xkQmFzZUFwcGxpZWRdO1xufVxuZnVuY3Rpb24gdG9UcmFuc2FjdGlvbnMoZ3JvdXBzKSB7XG4gIHJldHVybiBncm91cHMubWFwKChncm91cCkgPT4gZ3JvdXAudHJhbnNhY3Rpb24gJiYgZ3JvdXAuaWQgIT09IHZvaWQgMCA/IHsgaWQ6IGdyb3VwLmlkLCBtdXRhdGlvbnM6IGdyb3VwLm11dGF0aW9ucyB9IDogeyBtdXRhdGlvbnM6IGdyb3VwLm11dGF0aW9ucyB9KTtcbn1cbmV4cG9ydCB7XG4gIGFwcGx5TXV0YXRpb25zLFxuICBjb21taXQsXG4gIGdldE11dGF0aW9uRG9jdW1lbnRJZCxcbiAgcmViYXNlLFxuICBzcXVhc2hETVBTdHJpbmdzLFxuICBzcXVhc2hNdXRhdGlvbkdyb3VwcyxcbiAgdG9UcmFuc2FjdGlvbnNcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b1RyYW5zYWN0aW9ucy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/toTransactions.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/utils.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/utils.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyNodePatch: () => (/* binding */ applyNodePatch),\n/* harmony export */   applyOp: () => (/* binding */ applyOp),\n/* harmony export */   applyPatchMutation: () => (/* binding */ applyPatchMutation),\n/* harmony export */   applyPatches: () => (/* binding */ applyPatches),\n/* harmony export */   assignId: () => (/* binding */ assignId),\n/* harmony export */   hasId: () => (/* binding */ hasId),\n/* harmony export */   nanoid: () => (/* binding */ nanoid),\n/* harmony export */   splice: () => (/* binding */ splice)\n/* harmony export */ });\n/* harmony import */ var _stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./stringify.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/stringify.js\");\n/* harmony import */ var _isObject_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./isObject.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/isObject.js\");\n/* harmony import */ var _sanity_diff_match_patch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sanity/diff-match-patch */ \"(ssr)/./node_modules/@sanity/diff-match-patch/dist/index.js\");\n/* harmony import */ var node_crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! node:crypto */ \"node:crypto\");\n\n\n\n\nfunction keyOf(value) {\n  return value !== null && typeof value == \"object\" && typeof value._key == \"string\" && value._key || null;\n}\nfunction findTargetIndex(array, pathSegment) {\n  if (typeof pathSegment == \"number\")\n    return normalizeIndex(array.length, pathSegment);\n  if ((0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__.isKeyedElement)(pathSegment)) {\n    const idx = array.findIndex((value) => keyOf(value) === pathSegment._key);\n    return idx === -1 ? null : idx;\n  }\n  throw new Error(\n    `Expected path segment to be addressing a single array item either by numeric index or by '_key'. Instead saw ${JSON.stringify(\n      pathSegment\n    )}`\n  );\n}\nfunction getTargetIdx(position, index) {\n  return position === \"before\" ? index : index + 1;\n}\nfunction normalizeIndex(length, index) {\n  if (length === 0 && (index === -1 || index === 0))\n    return 0;\n  const normalized = index < 0 ? length + index : index;\n  return normalized >= length || normalized < 0 ? null : normalized;\n}\nfunction splice(arr, start, deleteCount, items) {\n  const copy = arr.slice();\n  return copy.splice(start, deleteCount, ...items || []), copy;\n}\nfunction insert(op, currentValue) {\n  if (!Array.isArray(currentValue))\n    throw new TypeError('Cannot apply \"insert()\" on non-array value');\n  const index = findTargetIndex(currentValue, op.referenceItem);\n  if (index === null)\n    throw new Error(`Found no matching array element to insert ${op.position}`);\n  return currentValue.length === 0 ? op.items : splice(currentValue, getTargetIdx(op.position, index), 0, op.items);\n}\nfunction upsert(op, currentValue) {\n  if (!Array.isArray(currentValue))\n    throw new TypeError('Cannot apply \"upsert()\" on non-array value');\n  if (op.items.length === 0)\n    return currentValue;\n  const replaceItemsMap = [], insertItems = [];\n  if (op.items.forEach((itemToBeUpserted, i) => {\n    const existingIndex = currentValue.findIndex(\n      (existingItem) => existingItem?._key === itemToBeUpserted._key\n    );\n    existingIndex >= 0 ? replaceItemsMap[existingIndex] = i : insertItems.push(itemToBeUpserted);\n  }), replaceItemsMap.length === 0 && insertItems.length == 0)\n    return currentValue;\n  const next = [...currentValue];\n  for (const i of replaceItemsMap)\n    next[i] = op.items[replaceItemsMap[i]];\n  return insert(\n    {\n      type: \"insert\",\n      items: insertItems,\n      referenceItem: op.referenceItem,\n      position: op.position\n    },\n    next\n  );\n}\nfunction replace(op, currentValue) {\n  if (!Array.isArray(currentValue))\n    throw new TypeError('Cannot apply \"replace()\" on non-array value');\n  const index = findTargetIndex(currentValue, op.referenceItem);\n  if (index === null)\n    throw new Error(\"Found no matching array element to replace\");\n  return splice(currentValue, index, op.items.length, op.items);\n}\nfunction remove(op, currentValue) {\n  if (!Array.isArray(currentValue))\n    throw new TypeError('Cannot apply \"remove()\" on non-array value');\n  const index = findTargetIndex(currentValue, op.referenceItem);\n  if (index === null)\n    throw new Error(\"Found no matching array element to replace\");\n  return splice(currentValue, index, 1, []);\n}\nfunction truncate(op, currentValue) {\n  if (!Array.isArray(currentValue))\n    throw new TypeError('Cannot apply \"truncate()\" on non-array value');\n  return typeof op.endIndex == \"number\" ? currentValue.slice(0, op.startIndex).concat(currentValue.slice(op.endIndex)) : currentValue.slice(0, op.startIndex);\n}\nfunction set(op, currentValue) {\n  return op.value;\n}\nfunction setIfMissing(op, currentValue) {\n  return currentValue ?? op.value;\n}\nfunction unset(op) {\n}\nfunction inc(op, currentValue) {\n  if (typeof currentValue != \"number\")\n    throw new TypeError('Cannot apply \"inc()\" on non-numeric value');\n  return currentValue + op.amount;\n}\nfunction dec(op, currentValue) {\n  if (typeof currentValue != \"number\")\n    throw new TypeError('Cannot apply \"dec()\" on non-numeric value');\n  return currentValue - op.amount;\n}\nconst hasOwn = Object.prototype.hasOwnProperty.call.bind(\n  Object.prototype.hasOwnProperty\n);\nfunction isEmpty(v) {\n  for (const key in v)\n    if (hasOwn(v, key))\n      return !1;\n  return !0;\n}\nfunction omit(val, props) {\n  const copy = { ...val };\n  for (const prop of props)\n    delete copy[prop];\n  return copy;\n}\nfunction unassign(op, currentValue) {\n  if (!(0,_isObject_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(currentValue))\n    throw new TypeError('Cannot apply \"unassign()\" on non-object value');\n  return op.keys.length === 0 ? currentValue : omit(currentValue, op.keys);\n}\nfunction assign(op, currentValue) {\n  if (!(0,_isObject_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(currentValue))\n    throw new TypeError('Cannot apply \"assign()\" on non-object value');\n  return isEmpty(op.value) ? currentValue : { ...currentValue, ...op.value };\n}\nfunction diffMatchPatch(op, currentValue) {\n  if (typeof currentValue != \"string\")\n    throw new TypeError('Cannot apply \"diffMatchPatch()\" on non-string value');\n  return (0,_sanity_diff_match_patch__WEBPACK_IMPORTED_MODULE_3__.applyPatches)((0,_sanity_diff_match_patch__WEBPACK_IMPORTED_MODULE_3__.parsePatch)(op.value), currentValue)[0];\n}\nvar operations = /* @__PURE__ */ Object.freeze({\n  __proto__: null,\n  assign,\n  dec,\n  diffMatchPatch,\n  inc,\n  insert,\n  remove,\n  replace,\n  set,\n  setIfMissing,\n  truncate,\n  unassign,\n  unset,\n  upsert\n});\nfunction applyOp(op, currentValue) {\n  if (!(op.type in operations))\n    throw new Error(`Invalid operation type: \"${op.type}\"`);\n  return operations[op.type](op, currentValue);\n}\nfunction applyPatches(patches, document) {\n  return patches.reduce(\n    (prev, patch) => applyNodePatch(patch, prev),\n    document\n  );\n}\nfunction applyNodePatch(patch, document) {\n  return applyAtPath(patch.path, patch.op, document);\n}\nfunction applyAtPath(path, op, value) {\n  if (!isNonEmptyArray(path))\n    return applyOp(op, value);\n  const [head, ...tail] = path;\n  if ((0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__.isArrayElement)(head) && Array.isArray(value))\n    return applyInArray(head, tail, op, value);\n  if ((0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__.isPropertyElement)(head) && (0,_isObject_js__WEBPACK_IMPORTED_MODULE_2__.isObject)(value))\n    return applyInObject(head, tail, op, value);\n  throw new Error(\n    `Cannot apply operation of type \"${op.type}\" to path ${(0,_stringify_js__WEBPACK_IMPORTED_MODULE_1__.stringify)(\n      path\n    )} on ${typeof value} value`\n  );\n}\nfunction applyInObject(head, tail, op, object) {\n  const current = object[head];\n  if (current === void 0 && tail.length > 0)\n    return object;\n  const patchedValue = applyAtPath(tail, op, current);\n  return patchedValue === current ? object : { ...object, [head]: patchedValue };\n}\nfunction applyInArray(head, tail, op, value) {\n  const index = findTargetIndex(value, head);\n  if (index === null || index === -1)\n    return value;\n  const current = value[index], patchedItem = applyAtPath(tail, op, current);\n  return patchedItem === current ? value : splice(value, index, 1, [patchedItem]);\n}\nfunction isNonEmptyArray(a) {\n  return a.length > 0;\n}\nfunction applyPatchMutation(mutation, document) {\n  if (mutation.options?.ifRevision && document._rev !== mutation.options.ifRevision)\n    throw new Error(\"Revision mismatch\");\n  if (mutation.id !== document._id)\n    throw new Error(\n      `Document id mismatch. Refusing to apply mutation for document with id=\"${mutation.id}\" on the given document with id=\"${document._id}\"`\n    );\n  return applyPatches(mutation.patches, document);\n}\nconst urlAlphabet = \"useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict\", POOL_SIZE_MULTIPLIER = 128;\nlet pool, poolOffset;\nfunction fillPool(bytes) {\n  !pool || pool.length < bytes ? (pool = Buffer.allocUnsafe(bytes * POOL_SIZE_MULTIPLIER), node_crypto__WEBPACK_IMPORTED_MODULE_0__.webcrypto.getRandomValues(pool), poolOffset = 0) : poolOffset + bytes > pool.length && (node_crypto__WEBPACK_IMPORTED_MODULE_0__.webcrypto.getRandomValues(pool), poolOffset = 0), poolOffset += bytes;\n}\nfunction nanoid(size = 21) {\n  fillPool(size -= 0);\n  let id = \"\";\n  for (let i = poolOffset - size; i < poolOffset; i++)\n    id += urlAlphabet[pool[i] & 63];\n  return id;\n}\nfunction hasId(doc) {\n  return \"_id\" in doc;\n}\nfunction assignId(doc, generateId) {\n  return hasId(doc) ? doc : { ...doc, _id: generateId() };\n}\n\n//# sourceMappingURL=utils.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX2NodW5rcy1lcy91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBOEY7QUFDckQ7QUFDNkM7QUFDOUM7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSw2REFBYztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9IQUFvSDtBQUNwSDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLFlBQVk7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sc0RBQVE7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sc0RBQVE7QUFDZjtBQUNBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsc0VBQWMsQ0FBQyxvRUFBVTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsZ0RBQWdELFFBQVE7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSw2REFBYztBQUNwQjtBQUNBLE1BQU0sZ0VBQWlCLFVBQVUsc0RBQVE7QUFDekM7QUFDQTtBQUNBLHVDQUF1QyxRQUFRLFlBQVksd0RBQVM7QUFDcEU7QUFDQSxPQUFPLEtBQUssY0FBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdGQUFnRixZQUFZLG1DQUFtQyxhQUFhO0FBQzVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJGQUEyRixrREFBUywrRUFBK0Usa0RBQVM7QUFDNUw7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsZ0JBQWdCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBVUU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL25vdXJlbGRpbm1haG1vdWQvZnJlc2hjYXJ0L2RlcGxveS9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX2NodW5rcy1lcy91dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc0tleWVkRWxlbWVudCwgaXNBcnJheUVsZW1lbnQsIGlzUHJvcGVydHlFbGVtZW50LCBzdHJpbmdpZnkgfSBmcm9tIFwiLi9zdHJpbmdpZnkuanNcIjtcbmltcG9ydCB7IGlzT2JqZWN0IH0gZnJvbSBcIi4vaXNPYmplY3QuanNcIjtcbmltcG9ydCB7IGFwcGx5UGF0Y2hlcyBhcyBhcHBseVBhdGNoZXMkMSwgcGFyc2VQYXRjaCB9IGZyb20gXCJAc2FuaXR5L2RpZmYtbWF0Y2gtcGF0Y2hcIjtcbmltcG9ydCB7IHdlYmNyeXB0byB9IGZyb20gXCJub2RlOmNyeXB0b1wiO1xuZnVuY3Rpb24ga2V5T2YodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiB2YWx1ZS5fa2V5ID09IFwic3RyaW5nXCIgJiYgdmFsdWUuX2tleSB8fCBudWxsO1xufVxuZnVuY3Rpb24gZmluZFRhcmdldEluZGV4KGFycmF5LCBwYXRoU2VnbWVudCkge1xuICBpZiAodHlwZW9mIHBhdGhTZWdtZW50ID09IFwibnVtYmVyXCIpXG4gICAgcmV0dXJuIG5vcm1hbGl6ZUluZGV4KGFycmF5Lmxlbmd0aCwgcGF0aFNlZ21lbnQpO1xuICBpZiAoaXNLZXllZEVsZW1lbnQocGF0aFNlZ21lbnQpKSB7XG4gICAgY29uc3QgaWR4ID0gYXJyYXkuZmluZEluZGV4KCh2YWx1ZSkgPT4ga2V5T2YodmFsdWUpID09PSBwYXRoU2VnbWVudC5fa2V5KTtcbiAgICByZXR1cm4gaWR4ID09PSAtMSA/IG51bGwgOiBpZHg7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFxuICAgIGBFeHBlY3RlZCBwYXRoIHNlZ21lbnQgdG8gYmUgYWRkcmVzc2luZyBhIHNpbmdsZSBhcnJheSBpdGVtIGVpdGhlciBieSBudW1lcmljIGluZGV4IG9yIGJ5ICdfa2V5Jy4gSW5zdGVhZCBzYXcgJHtKU09OLnN0cmluZ2lmeShcbiAgICAgIHBhdGhTZWdtZW50XG4gICAgKX1gXG4gICk7XG59XG5mdW5jdGlvbiBnZXRUYXJnZXRJZHgocG9zaXRpb24sIGluZGV4KSB7XG4gIHJldHVybiBwb3NpdGlvbiA9PT0gXCJiZWZvcmVcIiA/IGluZGV4IDogaW5kZXggKyAxO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplSW5kZXgobGVuZ3RoLCBpbmRleCkge1xuICBpZiAobGVuZ3RoID09PSAwICYmIChpbmRleCA9PT0gLTEgfHwgaW5kZXggPT09IDApKVxuICAgIHJldHVybiAwO1xuICBjb25zdCBub3JtYWxpemVkID0gaW5kZXggPCAwID8gbGVuZ3RoICsgaW5kZXggOiBpbmRleDtcbiAgcmV0dXJuIG5vcm1hbGl6ZWQgPj0gbGVuZ3RoIHx8IG5vcm1hbGl6ZWQgPCAwID8gbnVsbCA6IG5vcm1hbGl6ZWQ7XG59XG5mdW5jdGlvbiBzcGxpY2UoYXJyLCBzdGFydCwgZGVsZXRlQ291bnQsIGl0ZW1zKSB7XG4gIGNvbnN0IGNvcHkgPSBhcnIuc2xpY2UoKTtcbiAgcmV0dXJuIGNvcHkuc3BsaWNlKHN0YXJ0LCBkZWxldGVDb3VudCwgLi4uaXRlbXMgfHwgW10pLCBjb3B5O1xufVxuZnVuY3Rpb24gaW5zZXJ0KG9wLCBjdXJyZW50VmFsdWUpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGN1cnJlbnRWYWx1ZSkpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGFwcGx5IFwiaW5zZXJ0KClcIiBvbiBub24tYXJyYXkgdmFsdWUnKTtcbiAgY29uc3QgaW5kZXggPSBmaW5kVGFyZ2V0SW5kZXgoY3VycmVudFZhbHVlLCBvcC5yZWZlcmVuY2VJdGVtKTtcbiAgaWYgKGluZGV4ID09PSBudWxsKVxuICAgIHRocm93IG5ldyBFcnJvcihgRm91bmQgbm8gbWF0Y2hpbmcgYXJyYXkgZWxlbWVudCB0byBpbnNlcnQgJHtvcC5wb3NpdGlvbn1gKTtcbiAgcmV0dXJuIGN1cnJlbnRWYWx1ZS5sZW5ndGggPT09IDAgPyBvcC5pdGVtcyA6IHNwbGljZShjdXJyZW50VmFsdWUsIGdldFRhcmdldElkeChvcC5wb3NpdGlvbiwgaW5kZXgpLCAwLCBvcC5pdGVtcyk7XG59XG5mdW5jdGlvbiB1cHNlcnQob3AsIGN1cnJlbnRWYWx1ZSkge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoY3VycmVudFZhbHVlKSlcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgYXBwbHkgXCJ1cHNlcnQoKVwiIG9uIG5vbi1hcnJheSB2YWx1ZScpO1xuICBpZiAob3AuaXRlbXMubGVuZ3RoID09PSAwKVxuICAgIHJldHVybiBjdXJyZW50VmFsdWU7XG4gIGNvbnN0IHJlcGxhY2VJdGVtc01hcCA9IFtdLCBpbnNlcnRJdGVtcyA9IFtdO1xuICBpZiAob3AuaXRlbXMuZm9yRWFjaCgoaXRlbVRvQmVVcHNlcnRlZCwgaSkgPT4ge1xuICAgIGNvbnN0IGV4aXN0aW5nSW5kZXggPSBjdXJyZW50VmFsdWUuZmluZEluZGV4KFxuICAgICAgKGV4aXN0aW5nSXRlbSkgPT4gZXhpc3RpbmdJdGVtPy5fa2V5ID09PSBpdGVtVG9CZVVwc2VydGVkLl9rZXlcbiAgICApO1xuICAgIGV4aXN0aW5nSW5kZXggPj0gMCA/IHJlcGxhY2VJdGVtc01hcFtleGlzdGluZ0luZGV4XSA9IGkgOiBpbnNlcnRJdGVtcy5wdXNoKGl0ZW1Ub0JlVXBzZXJ0ZWQpO1xuICB9KSwgcmVwbGFjZUl0ZW1zTWFwLmxlbmd0aCA9PT0gMCAmJiBpbnNlcnRJdGVtcy5sZW5ndGggPT0gMClcbiAgICByZXR1cm4gY3VycmVudFZhbHVlO1xuICBjb25zdCBuZXh0ID0gWy4uLmN1cnJlbnRWYWx1ZV07XG4gIGZvciAoY29uc3QgaSBvZiByZXBsYWNlSXRlbXNNYXApXG4gICAgbmV4dFtpXSA9IG9wLml0ZW1zW3JlcGxhY2VJdGVtc01hcFtpXV07XG4gIHJldHVybiBpbnNlcnQoXG4gICAge1xuICAgICAgdHlwZTogXCJpbnNlcnRcIixcbiAgICAgIGl0ZW1zOiBpbnNlcnRJdGVtcyxcbiAgICAgIHJlZmVyZW5jZUl0ZW06IG9wLnJlZmVyZW5jZUl0ZW0sXG4gICAgICBwb3NpdGlvbjogb3AucG9zaXRpb25cbiAgICB9LFxuICAgIG5leHRcbiAgKTtcbn1cbmZ1bmN0aW9uIHJlcGxhY2Uob3AsIGN1cnJlbnRWYWx1ZSkge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoY3VycmVudFZhbHVlKSlcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgYXBwbHkgXCJyZXBsYWNlKClcIiBvbiBub24tYXJyYXkgdmFsdWUnKTtcbiAgY29uc3QgaW5kZXggPSBmaW5kVGFyZ2V0SW5kZXgoY3VycmVudFZhbHVlLCBvcC5yZWZlcmVuY2VJdGVtKTtcbiAgaWYgKGluZGV4ID09PSBudWxsKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkZvdW5kIG5vIG1hdGNoaW5nIGFycmF5IGVsZW1lbnQgdG8gcmVwbGFjZVwiKTtcbiAgcmV0dXJuIHNwbGljZShjdXJyZW50VmFsdWUsIGluZGV4LCBvcC5pdGVtcy5sZW5ndGgsIG9wLml0ZW1zKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZShvcCwgY3VycmVudFZhbHVlKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShjdXJyZW50VmFsdWUpKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBhcHBseSBcInJlbW92ZSgpXCIgb24gbm9uLWFycmF5IHZhbHVlJyk7XG4gIGNvbnN0IGluZGV4ID0gZmluZFRhcmdldEluZGV4KGN1cnJlbnRWYWx1ZSwgb3AucmVmZXJlbmNlSXRlbSk7XG4gIGlmIChpbmRleCA9PT0gbnVsbClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGb3VuZCBubyBtYXRjaGluZyBhcnJheSBlbGVtZW50IHRvIHJlcGxhY2VcIik7XG4gIHJldHVybiBzcGxpY2UoY3VycmVudFZhbHVlLCBpbmRleCwgMSwgW10pO1xufVxuZnVuY3Rpb24gdHJ1bmNhdGUob3AsIGN1cnJlbnRWYWx1ZSkge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoY3VycmVudFZhbHVlKSlcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgYXBwbHkgXCJ0cnVuY2F0ZSgpXCIgb24gbm9uLWFycmF5IHZhbHVlJyk7XG4gIHJldHVybiB0eXBlb2Ygb3AuZW5kSW5kZXggPT0gXCJudW1iZXJcIiA/IGN1cnJlbnRWYWx1ZS5zbGljZSgwLCBvcC5zdGFydEluZGV4KS5jb25jYXQoY3VycmVudFZhbHVlLnNsaWNlKG9wLmVuZEluZGV4KSkgOiBjdXJyZW50VmFsdWUuc2xpY2UoMCwgb3Auc3RhcnRJbmRleCk7XG59XG5mdW5jdGlvbiBzZXQob3AsIGN1cnJlbnRWYWx1ZSkge1xuICByZXR1cm4gb3AudmFsdWU7XG59XG5mdW5jdGlvbiBzZXRJZk1pc3Npbmcob3AsIGN1cnJlbnRWYWx1ZSkge1xuICByZXR1cm4gY3VycmVudFZhbHVlID8/IG9wLnZhbHVlO1xufVxuZnVuY3Rpb24gdW5zZXQob3ApIHtcbn1cbmZ1bmN0aW9uIGluYyhvcCwgY3VycmVudFZhbHVlKSB7XG4gIGlmICh0eXBlb2YgY3VycmVudFZhbHVlICE9IFwibnVtYmVyXCIpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGFwcGx5IFwiaW5jKClcIiBvbiBub24tbnVtZXJpYyB2YWx1ZScpO1xuICByZXR1cm4gY3VycmVudFZhbHVlICsgb3AuYW1vdW50O1xufVxuZnVuY3Rpb24gZGVjKG9wLCBjdXJyZW50VmFsdWUpIHtcbiAgaWYgKHR5cGVvZiBjdXJyZW50VmFsdWUgIT0gXCJudW1iZXJcIilcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgYXBwbHkgXCJkZWMoKVwiIG9uIG5vbi1udW1lcmljIHZhbHVlJyk7XG4gIHJldHVybiBjdXJyZW50VmFsdWUgLSBvcC5hbW91bnQ7XG59XG5jb25zdCBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwuYmluZChcbiAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eVxuKTtcbmZ1bmN0aW9uIGlzRW1wdHkodikge1xuICBmb3IgKGNvbnN0IGtleSBpbiB2KVxuICAgIGlmIChoYXNPd24odiwga2V5KSlcbiAgICAgIHJldHVybiAhMTtcbiAgcmV0dXJuICEwO1xufVxuZnVuY3Rpb24gb21pdCh2YWwsIHByb3BzKSB7XG4gIGNvbnN0IGNvcHkgPSB7IC4uLnZhbCB9O1xuICBmb3IgKGNvbnN0IHByb3Agb2YgcHJvcHMpXG4gICAgZGVsZXRlIGNvcHlbcHJvcF07XG4gIHJldHVybiBjb3B5O1xufVxuZnVuY3Rpb24gdW5hc3NpZ24ob3AsIGN1cnJlbnRWYWx1ZSkge1xuICBpZiAoIWlzT2JqZWN0KGN1cnJlbnRWYWx1ZSkpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGFwcGx5IFwidW5hc3NpZ24oKVwiIG9uIG5vbi1vYmplY3QgdmFsdWUnKTtcbiAgcmV0dXJuIG9wLmtleXMubGVuZ3RoID09PSAwID8gY3VycmVudFZhbHVlIDogb21pdChjdXJyZW50VmFsdWUsIG9wLmtleXMpO1xufVxuZnVuY3Rpb24gYXNzaWduKG9wLCBjdXJyZW50VmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdChjdXJyZW50VmFsdWUpKVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBhcHBseSBcImFzc2lnbigpXCIgb24gbm9uLW9iamVjdCB2YWx1ZScpO1xuICByZXR1cm4gaXNFbXB0eShvcC52YWx1ZSkgPyBjdXJyZW50VmFsdWUgOiB7IC4uLmN1cnJlbnRWYWx1ZSwgLi4ub3AudmFsdWUgfTtcbn1cbmZ1bmN0aW9uIGRpZmZNYXRjaFBhdGNoKG9wLCBjdXJyZW50VmFsdWUpIHtcbiAgaWYgKHR5cGVvZiBjdXJyZW50VmFsdWUgIT0gXCJzdHJpbmdcIilcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgYXBwbHkgXCJkaWZmTWF0Y2hQYXRjaCgpXCIgb24gbm9uLXN0cmluZyB2YWx1ZScpO1xuICByZXR1cm4gYXBwbHlQYXRjaGVzJDEocGFyc2VQYXRjaChvcC52YWx1ZSksIGN1cnJlbnRWYWx1ZSlbMF07XG59XG52YXIgb3BlcmF0aW9ucyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBhc3NpZ24sXG4gIGRlYyxcbiAgZGlmZk1hdGNoUGF0Y2gsXG4gIGluYyxcbiAgaW5zZXJ0LFxuICByZW1vdmUsXG4gIHJlcGxhY2UsXG4gIHNldCxcbiAgc2V0SWZNaXNzaW5nLFxuICB0cnVuY2F0ZSxcbiAgdW5hc3NpZ24sXG4gIHVuc2V0LFxuICB1cHNlcnRcbn0pO1xuZnVuY3Rpb24gYXBwbHlPcChvcCwgY3VycmVudFZhbHVlKSB7XG4gIGlmICghKG9wLnR5cGUgaW4gb3BlcmF0aW9ucykpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG9wZXJhdGlvbiB0eXBlOiBcIiR7b3AudHlwZX1cImApO1xuICByZXR1cm4gb3BlcmF0aW9uc1tvcC50eXBlXShvcCwgY3VycmVudFZhbHVlKTtcbn1cbmZ1bmN0aW9uIGFwcGx5UGF0Y2hlcyhwYXRjaGVzLCBkb2N1bWVudCkge1xuICByZXR1cm4gcGF0Y2hlcy5yZWR1Y2UoXG4gICAgKHByZXYsIHBhdGNoKSA9PiBhcHBseU5vZGVQYXRjaChwYXRjaCwgcHJldiksXG4gICAgZG9jdW1lbnRcbiAgKTtcbn1cbmZ1bmN0aW9uIGFwcGx5Tm9kZVBhdGNoKHBhdGNoLCBkb2N1bWVudCkge1xuICByZXR1cm4gYXBwbHlBdFBhdGgocGF0Y2gucGF0aCwgcGF0Y2gub3AsIGRvY3VtZW50KTtcbn1cbmZ1bmN0aW9uIGFwcGx5QXRQYXRoKHBhdGgsIG9wLCB2YWx1ZSkge1xuICBpZiAoIWlzTm9uRW1wdHlBcnJheShwYXRoKSlcbiAgICByZXR1cm4gYXBwbHlPcChvcCwgdmFsdWUpO1xuICBjb25zdCBbaGVhZCwgLi4udGFpbF0gPSBwYXRoO1xuICBpZiAoaXNBcnJheUVsZW1lbnQoaGVhZCkgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZSkpXG4gICAgcmV0dXJuIGFwcGx5SW5BcnJheShoZWFkLCB0YWlsLCBvcCwgdmFsdWUpO1xuICBpZiAoaXNQcm9wZXJ0eUVsZW1lbnQoaGVhZCkgJiYgaXNPYmplY3QodmFsdWUpKVxuICAgIHJldHVybiBhcHBseUluT2JqZWN0KGhlYWQsIHRhaWwsIG9wLCB2YWx1ZSk7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICBgQ2Fubm90IGFwcGx5IG9wZXJhdGlvbiBvZiB0eXBlIFwiJHtvcC50eXBlfVwiIHRvIHBhdGggJHtzdHJpbmdpZnkoXG4gICAgICBwYXRoXG4gICAgKX0gb24gJHt0eXBlb2YgdmFsdWV9IHZhbHVlYFxuICApO1xufVxuZnVuY3Rpb24gYXBwbHlJbk9iamVjdChoZWFkLCB0YWlsLCBvcCwgb2JqZWN0KSB7XG4gIGNvbnN0IGN1cnJlbnQgPSBvYmplY3RbaGVhZF07XG4gIGlmIChjdXJyZW50ID09PSB2b2lkIDAgJiYgdGFpbC5sZW5ndGggPiAwKVxuICAgIHJldHVybiBvYmplY3Q7XG4gIGNvbnN0IHBhdGNoZWRWYWx1ZSA9IGFwcGx5QXRQYXRoKHRhaWwsIG9wLCBjdXJyZW50KTtcbiAgcmV0dXJuIHBhdGNoZWRWYWx1ZSA9PT0gY3VycmVudCA/IG9iamVjdCA6IHsgLi4ub2JqZWN0LCBbaGVhZF06IHBhdGNoZWRWYWx1ZSB9O1xufVxuZnVuY3Rpb24gYXBwbHlJbkFycmF5KGhlYWQsIHRhaWwsIG9wLCB2YWx1ZSkge1xuICBjb25zdCBpbmRleCA9IGZpbmRUYXJnZXRJbmRleCh2YWx1ZSwgaGVhZCk7XG4gIGlmIChpbmRleCA9PT0gbnVsbCB8fCBpbmRleCA9PT0gLTEpXG4gICAgcmV0dXJuIHZhbHVlO1xuICBjb25zdCBjdXJyZW50ID0gdmFsdWVbaW5kZXhdLCBwYXRjaGVkSXRlbSA9IGFwcGx5QXRQYXRoKHRhaWwsIG9wLCBjdXJyZW50KTtcbiAgcmV0dXJuIHBhdGNoZWRJdGVtID09PSBjdXJyZW50ID8gdmFsdWUgOiBzcGxpY2UodmFsdWUsIGluZGV4LCAxLCBbcGF0Y2hlZEl0ZW1dKTtcbn1cbmZ1bmN0aW9uIGlzTm9uRW1wdHlBcnJheShhKSB7XG4gIHJldHVybiBhLmxlbmd0aCA+IDA7XG59XG5mdW5jdGlvbiBhcHBseVBhdGNoTXV0YXRpb24obXV0YXRpb24sIGRvY3VtZW50KSB7XG4gIGlmIChtdXRhdGlvbi5vcHRpb25zPy5pZlJldmlzaW9uICYmIGRvY3VtZW50Ll9yZXYgIT09IG11dGF0aW9uLm9wdGlvbnMuaWZSZXZpc2lvbilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZXZpc2lvbiBtaXNtYXRjaFwiKTtcbiAgaWYgKG11dGF0aW9uLmlkICE9PSBkb2N1bWVudC5faWQpXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYERvY3VtZW50IGlkIG1pc21hdGNoLiBSZWZ1c2luZyB0byBhcHBseSBtdXRhdGlvbiBmb3IgZG9jdW1lbnQgd2l0aCBpZD1cIiR7bXV0YXRpb24uaWR9XCIgb24gdGhlIGdpdmVuIGRvY3VtZW50IHdpdGggaWQ9XCIke2RvY3VtZW50Ll9pZH1cImBcbiAgICApO1xuICByZXR1cm4gYXBwbHlQYXRjaGVzKG11dGF0aW9uLnBhdGNoZXMsIGRvY3VtZW50KTtcbn1cbmNvbnN0IHVybEFscGhhYmV0ID0gXCJ1c2VhbmRvbS0yNlQxOTgzNDBQWDc1cHhKQUNLVkVSWU1JTkRCVVNIV09MRl9HUVpiZmdoamtscXZ3eXpyaWN0XCIsIFBPT0xfU0laRV9NVUxUSVBMSUVSID0gMTI4O1xubGV0IHBvb2wsIHBvb2xPZmZzZXQ7XG5mdW5jdGlvbiBmaWxsUG9vbChieXRlcykge1xuICAhcG9vbCB8fCBwb29sLmxlbmd0aCA8IGJ5dGVzID8gKHBvb2wgPSBCdWZmZXIuYWxsb2NVbnNhZmUoYnl0ZXMgKiBQT09MX1NJWkVfTVVMVElQTElFUiksIHdlYmNyeXB0by5nZXRSYW5kb21WYWx1ZXMocG9vbCksIHBvb2xPZmZzZXQgPSAwKSA6IHBvb2xPZmZzZXQgKyBieXRlcyA+IHBvb2wubGVuZ3RoICYmICh3ZWJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHBvb2wpLCBwb29sT2Zmc2V0ID0gMCksIHBvb2xPZmZzZXQgKz0gYnl0ZXM7XG59XG5mdW5jdGlvbiBuYW5vaWQoc2l6ZSA9IDIxKSB7XG4gIGZpbGxQb29sKHNpemUgLT0gMCk7XG4gIGxldCBpZCA9IFwiXCI7XG4gIGZvciAobGV0IGkgPSBwb29sT2Zmc2V0IC0gc2l6ZTsgaSA8IHBvb2xPZmZzZXQ7IGkrKylcbiAgICBpZCArPSB1cmxBbHBoYWJldFtwb29sW2ldICYgNjNdO1xuICByZXR1cm4gaWQ7XG59XG5mdW5jdGlvbiBoYXNJZChkb2MpIHtcbiAgcmV0dXJuIFwiX2lkXCIgaW4gZG9jO1xufVxuZnVuY3Rpb24gYXNzaWduSWQoZG9jLCBnZW5lcmF0ZUlkKSB7XG4gIHJldHVybiBoYXNJZChkb2MpID8gZG9jIDogeyAuLi5kb2MsIF9pZDogZ2VuZXJhdGVJZCgpIH07XG59XG5leHBvcnQge1xuICBhcHBseU5vZGVQYXRjaCxcbiAgYXBwbHlPcCxcbiAgYXBwbHlQYXRjaE11dGF0aW9uLFxuICBhcHBseVBhdGNoZXMsXG4gIGFzc2lnbklkLFxuICBoYXNJZCxcbiAgbmFub2lkLFxuICBzcGxpY2Vcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlscy5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_unstable_machine.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_unstable_machine.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyMutations: () => (/* reexport safe */ _chunks_es_toTransactions_js__WEBPACK_IMPORTED_MODULE_5__.applyMutations),\n/* harmony export */   commit: () => (/* reexport safe */ _chunks_es_toTransactions_js__WEBPACK_IMPORTED_MODULE_5__.commit),\n/* harmony export */   createSharedListener: () => (/* binding */ createSharedListener),\n/* harmony export */   documentMutatorMachine: () => (/* binding */ documentMutatorMachine),\n/* harmony export */   rebase: () => (/* reexport safe */ _chunks_es_toTransactions_js__WEBPACK_IMPORTED_MODULE_5__.rebase),\n/* harmony export */   squashDMPStrings: () => (/* reexport safe */ _chunks_es_toTransactions_js__WEBPACK_IMPORTED_MODULE_5__.squashDMPStrings),\n/* harmony export */   squashMutationGroups: () => (/* reexport safe */ _chunks_es_toTransactions_js__WEBPACK_IMPORTED_MODULE_5__.squashMutationGroups),\n/* harmony export */   toTransactions: () => (/* reexport safe */ _chunks_es_toTransactions_js__WEBPACK_IMPORTED_MODULE_5__.toTransactions)\n/* harmony export */ });\n/* harmony import */ var _chunks_es_toTransactions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./_chunks-es/toTransactions.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/toTransactions.js\");\n/* harmony import */ var mendoza__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! mendoza */ \"(ssr)/./node_modules/mendoza/dist/index.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/cjs/index.js\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! xstate */ \"(ssr)/./node_modules/xstate/dist/xstate.development.esm.js\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! xstate */ \"(ssr)/./node_modules/xstate/dist/assign-f4c801fe.development.esm.js\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! xstate */ \"(ssr)/./node_modules/xstate/dist/raise-b2a9750b.development.esm.js\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! xstate */ \"(ssr)/./node_modules/xstate/dist/log-2269452a.development.esm.js\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! xstate */ \"(ssr)/./node_modules/xstate/actors/dist/xstate-actors.development.esm.js\");\n/* harmony import */ var _chunks_es_encode_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./_chunks-es/encode.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/encode.js\");\n\n\n\n\n\nfunction createSharedListener(client) {\n  const allEvents$ = client.listen(\n    '*[!(_id in path(\"_.**\"))]',\n    {},\n    {\n      events: [\"welcome\", \"mutation\", \"reconnect\"],\n      includeResult: !1,\n      includePreviousRevision: !1,\n      visibility: \"transaction\",\n      effectFormat: \"mendoza\",\n      includeMutations: !1\n    }\n  ).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_0__.share)({ resetOnRefCountZero: !0 })), reconnect = allEvents$.pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_0__.filter)((event) => event.type === \"reconnect\")\n  ), welcome = allEvents$.pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_0__.filter)((event) => event.type === \"welcome\")\n  ), mutations = allEvents$.pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_0__.filter)((event) => event.type === \"mutation\")\n  ), replayWelcome = (0,rxjs__WEBPACK_IMPORTED_MODULE_0__.merge)(welcome, reconnect).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_0__.shareReplay)({ bufferSize: 1, refCount: !0 })\n  ).pipe(\n    (0,rxjs__WEBPACK_IMPORTED_MODULE_0__.filter)((latestConnectionEvent) => latestConnectionEvent.type === \"welcome\")\n  );\n  return (0,rxjs__WEBPACK_IMPORTED_MODULE_0__.merge)(replayWelcome, mutations, reconnect);\n}\nconst documentMutatorMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_1__.setup)({\n  types: {},\n  actions: {\n    \"assign error to context\": (0,xstate__WEBPACK_IMPORTED_MODULE_2__.a)({ error: ({ event }) => event }),\n    \"clear error from context\": (0,xstate__WEBPACK_IMPORTED_MODULE_2__.a)({ error: void 0 }),\n    \"connect to server-sent events\": (0,xstate__WEBPACK_IMPORTED_MODULE_3__.r)({ type: \"connect\" }),\n    \"listen to server-sent events\": (0,xstate__WEBPACK_IMPORTED_MODULE_3__.b)(\"server-sent events\", {\n      id: \"listener\",\n      input: ({ context }) => ({\n        listener: context.sharedListener || createSharedListener(context.client),\n        id: context.id\n      })\n    }),\n    \"stop listening to server-sent events\": (0,xstate__WEBPACK_IMPORTED_MODULE_3__.s)(\"listener\"),\n    \"buffer remote mutation events\": (0,xstate__WEBPACK_IMPORTED_MODULE_2__.a)({\n      mutationEvents: ({ event, context }) => ((0,xstate__WEBPACK_IMPORTED_MODULE_1__.assertEvent)(event, \"mutation\"), [...context.mutationEvents, event])\n    }),\n    \"restore stashed changes\": (0,xstate__WEBPACK_IMPORTED_MODULE_2__.a)({\n      stagedChanges: ({ event, context }) => ((0,xstate__WEBPACK_IMPORTED_MODULE_1__.assertEvent)(event, \"xstate.done.actor.submitTransactions\"), context.stashedChanges),\n      stashedChanges: []\n    }),\n    \"rebase fetched remote snapshot\": (0,xstate__WEBPACK_IMPORTED_MODULE_4__.e)(({ enqueue }) => {\n      enqueue.assign(({ event, context }) => {\n        (0,xstate__WEBPACK_IMPORTED_MODULE_1__.assertEvent)(event, \"xstate.done.actor.getDocument\");\n        const previousRemote = context.remote;\n        let nextRemote = event.output, seenCurrentRev = !1;\n        for (const patch of context.mutationEvents)\n          !patch.effects?.apply || !patch.previousRev && patch.transition !== \"appear\" || (!seenCurrentRev && patch.previousRev === nextRemote?._rev && (seenCurrentRev = !0), seenCurrentRev && (nextRemote = applyMendozaPatch(\n            nextRemote,\n            patch.effects.apply,\n            patch.resultRev\n          )));\n        context.cache && // If the shared cache don't have the document already we can just set it\n        (!context.cache.has(context.id) || // But when it's in the cache, make sure it's necessary to update it\n        context.cache.get(context.id)._rev !== nextRemote?._rev) && context.cache.set(context.id, nextRemote);\n        const [stagedChanges, local] = (0,_chunks_es_toTransactions_js__WEBPACK_IMPORTED_MODULE_5__.rebase)(\n          context.id,\n          // It's annoying to convert between null and undefined, reach consensus\n          previousRemote === null ? void 0 : previousRemote,\n          nextRemote === null ? void 0 : nextRemote,\n          context.stagedChanges\n        );\n        return {\n          remote: nextRemote,\n          local,\n          stagedChanges,\n          // Since the snapshot handler applies all the patches they are no longer needed, allow GC\n          mutationEvents: []\n        };\n      }), enqueue.sendParent(\n        ({ context }) => ({\n          type: \"rebased.remote\",\n          id: context.id,\n          document: context.remote\n        })\n      );\n    }),\n    \"apply mendoza patch\": (0,xstate__WEBPACK_IMPORTED_MODULE_2__.a)(({ event, context }) => {\n      (0,xstate__WEBPACK_IMPORTED_MODULE_1__.assertEvent)(event, \"mutation\");\n      const previousRemote = context.remote;\n      if (event.transactionId === previousRemote?._rev)\n        return {};\n      const nextRemote = applyMendozaPatch(\n        previousRemote,\n        event.effects.apply,\n        event.resultRev\n      );\n      context.cache && // If the shared cache don't have the document already we can just set it\n      (!context.cache.has(context.id) || // But when it's in the cache, make sure it's necessary to update it\n      context.cache.get(context.id)._rev !== nextRemote?._rev) && context.cache.set(context.id, nextRemote);\n      const [stagedChanges, local] = (0,_chunks_es_toTransactions_js__WEBPACK_IMPORTED_MODULE_5__.rebase)(\n        context.id,\n        // It's annoying to convert between null and undefined, reach consensus\n        previousRemote === null ? void 0 : previousRemote,\n        nextRemote === null ? void 0 : nextRemote,\n        context.stagedChanges\n      );\n      return {\n        remote: nextRemote,\n        local,\n        stagedChanges\n      };\n    }),\n    \"increment fetch attempts\": (0,xstate__WEBPACK_IMPORTED_MODULE_2__.a)({\n      fetchRemoteSnapshotAttempts: ({ context }) => context.fetchRemoteSnapshotAttempts + 1\n    }),\n    \"reset fetch attempts\": (0,xstate__WEBPACK_IMPORTED_MODULE_2__.a)({\n      fetchRemoteSnapshotAttempts: 0\n    }),\n    \"increment submit attempts\": (0,xstate__WEBPACK_IMPORTED_MODULE_2__.a)({\n      submitTransactionsAttempts: ({ context }) => context.submitTransactionsAttempts + 1\n    }),\n    \"reset submit attempts\": (0,xstate__WEBPACK_IMPORTED_MODULE_2__.a)({\n      submitTransactionsAttempts: 0\n    }),\n    \"stage mutation\": (0,xstate__WEBPACK_IMPORTED_MODULE_2__.a)({\n      stagedChanges: ({ event, context }) => ((0,xstate__WEBPACK_IMPORTED_MODULE_1__.assertEvent)(event, \"mutate\"), [\n        ...context.stagedChanges,\n        { transaction: !1, mutations: event.mutations }\n      ])\n    }),\n    \"stash mutation\": (0,xstate__WEBPACK_IMPORTED_MODULE_2__.a)({\n      stashedChanges: ({ event, context }) => ((0,xstate__WEBPACK_IMPORTED_MODULE_1__.assertEvent)(event, \"mutate\"), [\n        ...context.stashedChanges,\n        { transaction: !1, mutations: event.mutations }\n      ])\n    }),\n    \"rebase local snapshot\": (0,xstate__WEBPACK_IMPORTED_MODULE_4__.e)(({ enqueue }) => {\n      enqueue.assign({\n        local: ({ event, context }) => {\n          (0,xstate__WEBPACK_IMPORTED_MODULE_1__.assertEvent)(event, \"mutate\");\n          const localDataset = /* @__PURE__ */ new Map();\n          context.local && localDataset.set(context.id, context.local);\n          const results = (0,_chunks_es_toTransactions_js__WEBPACK_IMPORTED_MODULE_5__.applyMutations)(event.mutations, localDataset);\n          return (0,_chunks_es_toTransactions_js__WEBPACK_IMPORTED_MODULE_5__.commit)(results, localDataset), localDataset.get(context.id);\n        }\n      }), enqueue.sendParent(\n        ({ context }) => ({\n          type: \"rebased.local\",\n          id: context.id,\n          document: context.local\n        })\n      );\n    }),\n    \"send pristine event to parent\": (0,xstate__WEBPACK_IMPORTED_MODULE_4__.b)(\n      ({ context }) => ({\n        type: \"pristine\",\n        id: context.id\n      })\n    ),\n    \"send sync event to parent\": (0,xstate__WEBPACK_IMPORTED_MODULE_4__.b)(\n      ({ context }) => ({\n        type: \"sync\",\n        id: context.id,\n        document: context.remote\n      })\n    ),\n    \"send mutation event to parent\": (0,xstate__WEBPACK_IMPORTED_MODULE_4__.b)(({ context, event }) => ((0,xstate__WEBPACK_IMPORTED_MODULE_1__.assertEvent)(event, \"mutation\"), {\n      type: \"mutation\",\n      id: context.id,\n      previousRev: event.previousRev,\n      resultRev: event.resultRev,\n      effects: event.effects\n    }))\n  },\n  actors: {\n    \"server-sent events\": (0,xstate__WEBPACK_IMPORTED_MODULE_6__.fromEventObservable)(\n      ({\n        input\n      }) => {\n        const { listener, id } = input;\n        return (0,rxjs__WEBPACK_IMPORTED_MODULE_0__.defer)(() => listener).pipe(\n          (0,rxjs__WEBPACK_IMPORTED_MODULE_0__.filter)(\n            (event) => event.type === \"welcome\" || event.type === \"reconnect\" || event.type === \"mutation\" && event.documentId === id\n          ),\n          // This is necessary to avoid sync emitted events from `shareReplay` from happening before the actor is ready to receive them\n          (0,rxjs__WEBPACK_IMPORTED_MODULE_0__.observeOn)(rxjs__WEBPACK_IMPORTED_MODULE_0__.asapScheduler)\n        );\n      }\n    ),\n    \"fetch remote snapshot\": (0,xstate__WEBPACK_IMPORTED_MODULE_6__.fromPromise)(\n      async ({\n        input,\n        signal\n      }) => {\n        const { client, id } = input;\n        return await client.getDocument(id, {\n          signal\n        }).catch((e) => {\n          if (!(e instanceof Error && e.name === \"AbortError\"))\n            throw e;\n        });\n      }\n    ),\n    \"submit mutations as transactions\": (0,xstate__WEBPACK_IMPORTED_MODULE_6__.fromPromise)(\n      async ({\n        input,\n        signal\n      }) => {\n        const { client, transactions } = input;\n        for (const transaction of transactions) {\n          if (signal.aborted) return;\n          await client.dataRequest(\"mutate\", (0,_chunks_es_encode_js__WEBPACK_IMPORTED_MODULE_7__.encodeTransaction)(transaction), {\n            visibility: \"async\",\n            returnDocuments: !1,\n            signal\n          }).catch((e) => {\n            if (!(e instanceof Error && e.name === \"AbortError\"))\n              throw e;\n          });\n        }\n      }\n    )\n  },\n  delays: {\n    // Exponential backoff delay function\n    fetchRemoteSnapshotTimeout: ({ context }) => Math.pow(2, context.fetchRemoteSnapshotAttempts) * 1e3,\n    submitTransactionsTimeout: ({ context }) => Math.pow(2, context.submitTransactionsAttempts) * 1e3\n  }\n}).createMachine({\n  /** @xstate-layout N4IgpgJg5mDOIC5QQPYGMCuBbMA7ALgLRYb4CG+KATgMQnn5gDaADALqKgAOKsAlvj4pcnEAA9EADhYAWAHQA2GSwUBmAKwBOaQEZJkhQBoQAT0Q6ATAF8rx1JhwFipCtTkQ+sNMNxg0jCBpvXF9-Vg4kEB5+QWFRCQQLFhY5PQB2dRU1SQsdGSVjMwRlHTkWNM00nR1VKryKmzt0bDwielcqOWDQwVwoGgB3MAAbbxxw0WiBIRFIhPUKuQ1NVU0tTU0WFdVCxAt1dTlNhX2WdRltGUk061sQexandspO7r9e-qo-H3eJyKnYrNQPNJJollpVutNttdghVCo5MoTgoMpo8jIkqpGvdmo42i4Xl0fv4+H0aGAqFRqH9uLxpnE5ogFrCLFd5CtNBYFJkdOpuaosXcHnjnAw3G9-AAxMh8YYYL5BYn4GlROmA+KIFEs1R6ORpZYWHIXGR6bHC1qijpyL4Sj6DEZjZjsSZqmYaxK1ORcvlc-ZqSoyNKwnRpGTyK4WDK5BQ6BQ5BRm3EW55uG1K0n9ClUqgqgFuxketJe7nIv2rUNB0x7LmSL2qGMsSySevcmSJhzJgnipWQOgEma510M4HmcqHZYyWqaOMqTQyWGh0osVSGiwC5uGyftx74sWvHuBNMhX7O-5DoHiPae72lvnlwPBydFlRVS7qPIl7cilP74-+SByMMKBkB4ZKoL4cikgAbigADWYByDA+AACJJgQg4xPmI7FHkZQrKGsjqKcCiaMG9YpJOxySBiCiyPoX6dnuRJ-gEgHAaBmaUm4XDDBQABm1BYIhYAoWhyqnrSmHDpeCAKCicjUbU6g6nkFichYsJrLWVxaPsk7KdICZCmJlqEraAFASBvbPAOEmqlJF4JJURbVDcy4Yvk1GVkUsabApMjKZGqjNg2kgMU8Xa-j0FnsQBXBUJ4vRgH2DBOhEkn0o5TLKV6y6WDG6lhkYVYIDoKzyBkeR8pUDZqOFu5WuZEBsVZzUeFQ+AmDQsAYAARlgAgYZl7o6I2tYLJINSSO+3JaMGlQpGkhFhryo2jW2xkdhFTFNS1EAAT1-UCHa4EIdBcEIYdA34AAKlQZC4LAZAksIsBDeqBbrdpym8iuByxlcLK5BYqQLBUZyTcFvL1aZ3YsTFrVyFdx0ZuSXGdDx-GCUjfXXXdD1PS9j3vVhMnrWCFRxtNaRLdcfIsiwuS5fkgZaOUlhpDDP7MdFzWWftzXI-gdrPGlLoOSNyiHFstRySisjcgzahyFoUYBbRsac5tO6w1F7wIwLONHfg0qyvKyVfPgVAmCT0kJGt41pJD02xgcpElUkcZ6rI+q5JcckbU0W0NWZB57QduMCKbcoKmIsCpXIZB8YwVAABRC-jj3PYCsA3XwOAoKQACUNDmttjVh-zEfG9H5u21lpVjSrTtTTNbsstUYJJAFWgA37XORTz+t8+xtcKpb1v1+6KJFopGQqRi6nBlstYcqNK5riusYDztlejzKMfJXHCdJynqd8SJaAABYAEpgFgKCMAAyrgZBcLAV+P3nBfF6XJnc7tfmY8xZnglgWGe-klILzUhYDSJVRpnCONNOcWxWRKBRDYO4uAUD7XgJEMuIdqDi2GgWQgOhgxMyRKyFc8IuQkXUDvK0HgvAHmIR9bCD4SoeSWCoLkoZpxrmXIw0OLEMxsNJgkSc418KhnrHyG4oZYTcPhMifhJx4SCiDjrABSpgHiLtogAUhwW77DRIGXkk55wexKCrJQsg1jBTnPsYRqZviiL6PohuORgyhhBhGKMsZYzxhcXrf8EBPHulUJOPCtRlABWIu7IoORVBIIhMpNYGJyghKHmEvaYjQEkOwhkxQrJtBES0JDOBPlkgKD1JYZSjZORyTXNkwBsVwkFPYTJVYS58JxPKbOYM0gUj7FjGcEMOpciaJxMHXWOTWJV2avFRKpIwARILJRGJBF4mZBIkDE0KtIxLSSDkDYGhWl70Ru1Tq6zsLURBkoLyWRmz8PmlUZmcY1zXDKdMghcy2mIyFh8W5ZN4RFmOFyKaZwiLeT2GVJcy5pBrguCiMK2tvyDwBYbIWejOkSMQBkeQORJq0RNCUDIDNondxuGpPQmRqIXPhiPECuKMpdMkbILZ-SEnLxyjqOJMZsj1jRTYIAA */\n  id: \"document-mutator\",\n  context: ({ input }) => ({\n    client: input.client.withConfig({ allowReconfigure: !1 }),\n    sharedListener: input.sharedListener,\n    id: input.id,\n    remote: void 0,\n    local: void 0,\n    mutationEvents: [],\n    stagedChanges: [],\n    stashedChanges: [],\n    error: void 0,\n    fetchRemoteSnapshotAttempts: 0,\n    submitTransactionsAttempts: 0,\n    cache: input.cache\n  }),\n  // Auto start the connection by default\n  entry: [\"connect to server-sent events\"],\n  on: {\n    mutate: {\n      actions: [\"rebase local snapshot\", \"stage mutation\"]\n    }\n  },\n  initial: \"disconnected\",\n  states: {\n    disconnected: {\n      on: {\n        connect: {\n          target: \"connecting\",\n          actions: [\"listen to server-sent events\"]\n        }\n      }\n    },\n    connecting: {\n      on: {\n        welcome: \"connected\",\n        reconnect: \"reconnecting\",\n        error: \"connectFailure\"\n      },\n      tags: [\"busy\"]\n    },\n    connectFailure: {\n      on: {\n        connect: {\n          target: \"connecting\",\n          actions: [\"listen to server-sent events\"]\n        }\n      },\n      entry: [\n        \"stop listening to server-sent events\",\n        \"assign error to context\"\n      ],\n      exit: [\"clear error from context\"],\n      tags: [\"error\"]\n    },\n    reconnecting: {\n      on: {\n        welcome: {\n          target: \"connected\"\n        },\n        error: {\n          target: \"connectFailure\"\n        }\n      },\n      tags: [\"busy\", \"error\"]\n    },\n    connected: {\n      on: {\n        mutation: {\n          actions: [\"buffer remote mutation events\"]\n        },\n        reconnect: \"reconnecting\"\n      },\n      entry: [\"clear error from context\"],\n      initial: \"loading\",\n      states: {\n        loading: {\n          invoke: {\n            src: \"fetch remote snapshot\",\n            id: \"getDocument\",\n            input: ({ context }) => ({\n              client: context.client,\n              id: context.id\n            }),\n            onError: {\n              target: \"loadFailure\"\n            },\n            onDone: {\n              target: \"loaded\",\n              actions: [\n                \"rebase fetched remote snapshot\",\n                \"reset fetch attempts\"\n              ]\n            }\n          },\n          tags: [\"busy\"]\n        },\n        loaded: {\n          entry: [\"send sync event to parent\"],\n          on: {\n            mutation: {\n              actions: [\"apply mendoza patch\", \"send mutation event to parent\"]\n            }\n          },\n          initial: \"pristine\",\n          states: {\n            pristine: {\n              on: {\n                mutate: {\n                  actions: [\"rebase local snapshot\", \"stage mutation\"],\n                  target: \"dirty\"\n                }\n              },\n              tags: [\"ready\"]\n            },\n            dirty: {\n              on: {\n                submit: \"submitting\"\n              },\n              tags: [\"ready\"]\n            },\n            submitting: {\n              on: {\n                mutate: {\n                  actions: [\"rebase local snapshot\", \"stash mutation\"]\n                }\n              },\n              invoke: {\n                src: \"submit mutations as transactions\",\n                id: \"submitTransactions\",\n                input: ({ context }) => {\n                  const remoteDataset = /* @__PURE__ */ new Map();\n                  return remoteDataset.set(context.id, context.remote), {\n                    client: context.client,\n                    transactions: (0,_chunks_es_toTransactions_js__WEBPACK_IMPORTED_MODULE_5__.toTransactions)(\n                      // Squashing DMP strings is the last thing we do before submitting\n                      (0,_chunks_es_toTransactions_js__WEBPACK_IMPORTED_MODULE_5__.squashDMPStrings)(\n                        remoteDataset,\n                        (0,_chunks_es_toTransactions_js__WEBPACK_IMPORTED_MODULE_5__.squashMutationGroups)(context.stagedChanges)\n                      )\n                    )\n                  };\n                },\n                onError: {\n                  target: \"submitFailure\"\n                },\n                onDone: {\n                  target: \"pristine\",\n                  actions: [\n                    \"restore stashed changes\",\n                    \"reset submit attempts\",\n                    \"send pristine event to parent\"\n                  ]\n                }\n              },\n              /**\n               * 'busy' means we should show a spinner, 'ready' means we can still accept mutations, they'll be applied optimistically right away, and queued for submissions after the current submission settles\n               */\n              tags: [\"busy\", \"ready\"]\n            },\n            submitFailure: {\n              exit: [\"clear error from context\"],\n              after: {\n                submitTransactionsTimeout: {\n                  actions: [\"increment submit attempts\"],\n                  target: \"submitting\"\n                }\n              },\n              on: {\n                retry: \"submitting\"\n              },\n              /**\n               * How can it be both `ready` and `error`? `ready` means it can receive mutations, optimistically apply them, and queue them for submission. `error` means it failed to submit previously applied mutations.\n               * It's completely fine to keep queueing up more mutations and applying them optimistically, while showing UI that notifies that mutations didn't submit, and show a count down until the next automatic retry.\n               */\n              tags: [\"error\", \"ready\"]\n            }\n          }\n        },\n        loadFailure: {\n          exit: [\"clear error from context\"],\n          after: {\n            fetchRemoteSnapshotTimeout: {\n              actions: [\"increment fetch attempts\"],\n              target: \"loading\"\n            }\n          },\n          on: {\n            retry: \"loading\"\n          },\n          tags: [\"error\"]\n        }\n      }\n    }\n  }\n});\nfunction applyMendozaPatch(document, patch, nextRevision) {\n  const next = (0,mendoza__WEBPACK_IMPORTED_MODULE_8__.applyPatch)(omitRev(document), patch);\n  return next ? Object.assign(next, { _rev: nextRevision }) : null;\n}\nfunction omitRev(document) {\n  if (!document)\n    return null;\n  const { _rev, ...doc } = document;\n  return doc;\n}\n\n//# sourceMappingURL=_unstable_machine.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX3Vuc3RhYmxlX21hY2hpbmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0k7QUFDbkc7QUFDcUQ7QUFDc0Q7QUFDckY7QUFDM0Q7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDJDQUFLLEdBQUcseUJBQXlCO0FBQzFDLElBQUksNENBQU07QUFDVjtBQUNBLElBQUksNENBQU07QUFDVjtBQUNBLElBQUksNENBQU07QUFDVixxQkFBcUIsMkNBQUs7QUFDMUIsSUFBSSxpREFBVyxHQUFHLDZCQUE2QjtBQUMvQztBQUNBLElBQUksNENBQU07QUFDVjtBQUNBLFNBQVMsMkNBQUs7QUFDZDtBQUNBLCtCQUErQiw2Q0FBSztBQUNwQyxXQUFXO0FBQ1g7QUFDQSwrQkFBK0IseUNBQU0sR0FBRyxVQUFVLE9BQU8sWUFBWTtBQUNyRSxnQ0FBZ0MseUNBQU0sR0FBRyxlQUFlO0FBQ3hELHFDQUFxQyx5Q0FBSyxHQUFHLGlCQUFpQjtBQUM5RCxvQ0FBb0MseUNBQVU7QUFDOUM7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCw0Q0FBNEMseUNBQVM7QUFDckQscUNBQXFDLHlDQUFNO0FBQzNDLHlCQUF5QixnQkFBZ0IsTUFBTSxtREFBVztBQUMxRCxLQUFLO0FBQ0wsK0JBQStCLHlDQUFNO0FBQ3JDLHdCQUF3QixnQkFBZ0IsTUFBTSxtREFBVztBQUN6RDtBQUNBLEtBQUs7QUFDTCxzQ0FBc0MseUNBQWMsSUFBSSxTQUFTO0FBQ2pFLHdCQUF3QixnQkFBZ0I7QUFDeEMsUUFBUSxtREFBVztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVD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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLGVBQWUsbURBQVU7QUFDekIsc0NBQXNDLG9CQUFvQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZUFBZTtBQUN6QjtBQUNBO0FBVUU7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL25vdXJlbGRpbm1haG1vdWQvZnJlc2hjYXJ0L2RlcGxveS9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvX3Vuc3RhYmxlX21hY2hpbmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmViYXNlLCBhcHBseU11dGF0aW9ucywgY29tbWl0LCB0b1RyYW5zYWN0aW9ucywgc3F1YXNoRE1QU3RyaW5ncywgc3F1YXNoTXV0YXRpb25Hcm91cHMgfSBmcm9tIFwiLi9fY2h1bmtzLWVzL3RvVHJhbnNhY3Rpb25zLmpzXCI7XG5pbXBvcnQgeyBhcHBseVBhdGNoIH0gZnJvbSBcIm1lbmRvemFcIjtcbmltcG9ydCB7IHNoYXJlLCBmaWx0ZXIsIG1lcmdlLCBzaGFyZVJlcGxheSwgZGVmZXIsIG9ic2VydmVPbiwgYXNhcFNjaGVkdWxlciB9IGZyb20gXCJyeGpzXCI7XG5pbXBvcnQgeyBzZXR1cCwgYXNzaWduLCByYWlzZSwgc3Bhd25DaGlsZCwgc3RvcENoaWxkLCBhc3NlcnRFdmVudCwgZW5xdWV1ZUFjdGlvbnMsIHNlbmRQYXJlbnQsIGZyb21FdmVudE9ic2VydmFibGUsIGZyb21Qcm9taXNlIH0gZnJvbSBcInhzdGF0ZVwiO1xuaW1wb3J0IHsgZW5jb2RlVHJhbnNhY3Rpb24gfSBmcm9tIFwiLi9fY2h1bmtzLWVzL2VuY29kZS5qc1wiO1xuZnVuY3Rpb24gY3JlYXRlU2hhcmVkTGlzdGVuZXIoY2xpZW50KSB7XG4gIGNvbnN0IGFsbEV2ZW50cyQgPSBjbGllbnQubGlzdGVuKFxuICAgICcqWyEoX2lkIGluIHBhdGgoXCJfLioqXCIpKV0nLFxuICAgIHt9LFxuICAgIHtcbiAgICAgIGV2ZW50czogW1wid2VsY29tZVwiLCBcIm11dGF0aW9uXCIsIFwicmVjb25uZWN0XCJdLFxuICAgICAgaW5jbHVkZVJlc3VsdDogITEsXG4gICAgICBpbmNsdWRlUHJldmlvdXNSZXZpc2lvbjogITEsXG4gICAgICB2aXNpYmlsaXR5OiBcInRyYW5zYWN0aW9uXCIsXG4gICAgICBlZmZlY3RGb3JtYXQ6IFwibWVuZG96YVwiLFxuICAgICAgaW5jbHVkZU11dGF0aW9uczogITFcbiAgICB9XG4gICkucGlwZShzaGFyZSh7IHJlc2V0T25SZWZDb3VudFplcm86ICEwIH0pKSwgcmVjb25uZWN0ID0gYWxsRXZlbnRzJC5waXBlKFxuICAgIGZpbHRlcigoZXZlbnQpID0+IGV2ZW50LnR5cGUgPT09IFwicmVjb25uZWN0XCIpXG4gICksIHdlbGNvbWUgPSBhbGxFdmVudHMkLnBpcGUoXG4gICAgZmlsdGVyKChldmVudCkgPT4gZXZlbnQudHlwZSA9PT0gXCJ3ZWxjb21lXCIpXG4gICksIG11dGF0aW9ucyA9IGFsbEV2ZW50cyQucGlwZShcbiAgICBmaWx0ZXIoKGV2ZW50KSA9PiBldmVudC50eXBlID09PSBcIm11dGF0aW9uXCIpXG4gICksIHJlcGxheVdlbGNvbWUgPSBtZXJnZSh3ZWxjb21lLCByZWNvbm5lY3QpLnBpcGUoXG4gICAgc2hhcmVSZXBsYXkoeyBidWZmZXJTaXplOiAxLCByZWZDb3VudDogITAgfSlcbiAgKS5waXBlKFxuICAgIGZpbHRlcigobGF0ZXN0Q29ubmVjdGlvbkV2ZW50KSA9PiBsYXRlc3RDb25uZWN0aW9uRXZlbnQudHlwZSA9PT0gXCJ3ZWxjb21lXCIpXG4gICk7XG4gIHJldHVybiBtZXJnZShyZXBsYXlXZWxjb21lLCBtdXRhdGlvbnMsIHJlY29ubmVjdCk7XG59XG5jb25zdCBkb2N1bWVudE11dGF0b3JNYWNoaW5lID0gc2V0dXAoe1xuICB0eXBlczoge30sXG4gIGFjdGlvbnM6IHtcbiAgICBcImFzc2lnbiBlcnJvciB0byBjb250ZXh0XCI6IGFzc2lnbih7IGVycm9yOiAoeyBldmVudCB9KSA9PiBldmVudCB9KSxcbiAgICBcImNsZWFyIGVycm9yIGZyb20gY29udGV4dFwiOiBhc3NpZ24oeyBlcnJvcjogdm9pZCAwIH0pLFxuICAgIFwiY29ubmVjdCB0byBzZXJ2ZXItc2VudCBldmVudHNcIjogcmFpc2UoeyB0eXBlOiBcImNvbm5lY3RcIiB9KSxcbiAgICBcImxpc3RlbiB0byBzZXJ2ZXItc2VudCBldmVudHNcIjogc3Bhd25DaGlsZChcInNlcnZlci1zZW50IGV2ZW50c1wiLCB7XG4gICAgICBpZDogXCJsaXN0ZW5lclwiLFxuICAgICAgaW5wdXQ6ICh7IGNvbnRleHQgfSkgPT4gKHtcbiAgICAgICAgbGlzdGVuZXI6IGNvbnRleHQuc2hhcmVkTGlzdGVuZXIgfHwgY3JlYXRlU2hhcmVkTGlzdGVuZXIoY29udGV4dC5jbGllbnQpLFxuICAgICAgICBpZDogY29udGV4dC5pZFxuICAgICAgfSlcbiAgICB9KSxcbiAgICBcInN0b3AgbGlzdGVuaW5nIHRvIHNlcnZlci1zZW50IGV2ZW50c1wiOiBzdG9wQ2hpbGQoXCJsaXN0ZW5lclwiKSxcbiAgICBcImJ1ZmZlciByZW1vdGUgbXV0YXRpb24gZXZlbnRzXCI6IGFzc2lnbih7XG4gICAgICBtdXRhdGlvbkV2ZW50czogKHsgZXZlbnQsIGNvbnRleHQgfSkgPT4gKGFzc2VydEV2ZW50KGV2ZW50LCBcIm11dGF0aW9uXCIpLCBbLi4uY29udGV4dC5tdXRhdGlvbkV2ZW50cywgZXZlbnRdKVxuICAgIH0pLFxuICAgIFwicmVzdG9yZSBzdGFzaGVkIGNoYW5nZXNcIjogYXNzaWduKHtcbiAgICAgIHN0YWdlZENoYW5nZXM6ICh7IGV2ZW50LCBjb250ZXh0IH0pID0+IChhc3NlcnRFdmVudChldmVudCwgXCJ4c3RhdGUuZG9uZS5hY3Rvci5zdWJtaXRUcmFuc2FjdGlvbnNcIiksIGNvbnRleHQuc3Rhc2hlZENoYW5nZXMpLFxuICAgICAgc3Rhc2hlZENoYW5nZXM6IFtdXG4gICAgfSksXG4gICAgXCJyZWJhc2UgZmV0Y2hlZCByZW1vdGUgc25hcHNob3RcIjogZW5xdWV1ZUFjdGlvbnMoKHsgZW5xdWV1ZSB9KSA9PiB7XG4gICAgICBlbnF1ZXVlLmFzc2lnbigoeyBldmVudCwgY29udGV4dCB9KSA9PiB7XG4gICAgICAgIGFzc2VydEV2ZW50KGV2ZW50LCBcInhzdGF0ZS5kb25lLmFjdG9yLmdldERvY3VtZW50XCIpO1xuICAgICAgICBjb25zdCBwcmV2aW91c1JlbW90ZSA9IGNvbnRleHQucmVtb3RlO1xuICAgICAgICBsZXQgbmV4dFJlbW90ZSA9IGV2ZW50Lm91dHB1dCwgc2VlbkN1cnJlbnRSZXYgPSAhMTtcbiAgICAgICAgZm9yIChjb25zdCBwYXRjaCBvZiBjb250ZXh0Lm11dGF0aW9uRXZlbnRzKVxuICAgICAgICAgICFwYXRjaC5lZmZlY3RzPy5hcHBseSB8fCAhcGF0Y2gucHJldmlvdXNSZXYgJiYgcGF0Y2gudHJhbnNpdGlvbiAhPT0gXCJhcHBlYXJcIiB8fCAoIXNlZW5DdXJyZW50UmV2ICYmIHBhdGNoLnByZXZpb3VzUmV2ID09PSBuZXh0UmVtb3RlPy5fcmV2ICYmIChzZWVuQ3VycmVudFJldiA9ICEwKSwgc2VlbkN1cnJlbnRSZXYgJiYgKG5leHRSZW1vdGUgPSBhcHBseU1lbmRvemFQYXRjaChcbiAgICAgICAgICAgIG5leHRSZW1vdGUsXG4gICAgICAgICAgICBwYXRjaC5lZmZlY3RzLmFwcGx5LFxuICAgICAgICAgICAgcGF0Y2gucmVzdWx0UmV2XG4gICAgICAgICAgKSkpO1xuICAgICAgICBjb250ZXh0LmNhY2hlICYmIC8vIElmIHRoZSBzaGFyZWQgY2FjaGUgZG9uJ3QgaGF2ZSB0aGUgZG9jdW1lbnQgYWxyZWFkeSB3ZSBjYW4ganVzdCBzZXQgaXRcbiAgICAgICAgKCFjb250ZXh0LmNhY2hlLmhhcyhjb250ZXh0LmlkKSB8fCAvLyBCdXQgd2hlbiBpdCdzIGluIHRoZSBjYWNoZSwgbWFrZSBzdXJlIGl0J3MgbmVjZXNzYXJ5IHRvIHVwZGF0ZSBpdFxuICAgICAgICBjb250ZXh0LmNhY2hlLmdldChjb250ZXh0LmlkKS5fcmV2ICE9PSBuZXh0UmVtb3RlPy5fcmV2KSAmJiBjb250ZXh0LmNhY2hlLnNldChjb250ZXh0LmlkLCBuZXh0UmVtb3RlKTtcbiAgICAgICAgY29uc3QgW3N0YWdlZENoYW5nZXMsIGxvY2FsXSA9IHJlYmFzZShcbiAgICAgICAgICBjb250ZXh0LmlkLFxuICAgICAgICAgIC8vIEl0J3MgYW5ub3lpbmcgdG8gY29udmVydCBiZXR3ZWVuIG51bGwgYW5kIHVuZGVmaW5lZCwgcmVhY2ggY29uc2Vuc3VzXG4gICAgICAgICAgcHJldmlvdXNSZW1vdGUgPT09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c1JlbW90ZSxcbiAgICAgICAgICBuZXh0UmVtb3RlID09PSBudWxsID8gdm9pZCAwIDogbmV4dFJlbW90ZSxcbiAgICAgICAgICBjb250ZXh0LnN0YWdlZENoYW5nZXNcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZW1vdGU6IG5leHRSZW1vdGUsXG4gICAgICAgICAgbG9jYWwsXG4gICAgICAgICAgc3RhZ2VkQ2hhbmdlcyxcbiAgICAgICAgICAvLyBTaW5jZSB0aGUgc25hcHNob3QgaGFuZGxlciBhcHBsaWVzIGFsbCB0aGUgcGF0Y2hlcyB0aGV5IGFyZSBubyBsb25nZXIgbmVlZGVkLCBhbGxvdyBHQ1xuICAgICAgICAgIG11dGF0aW9uRXZlbnRzOiBbXVxuICAgICAgICB9O1xuICAgICAgfSksIGVucXVldWUuc2VuZFBhcmVudChcbiAgICAgICAgKHsgY29udGV4dCB9KSA9PiAoe1xuICAgICAgICAgIHR5cGU6IFwicmViYXNlZC5yZW1vdGVcIixcbiAgICAgICAgICBpZDogY29udGV4dC5pZCxcbiAgICAgICAgICBkb2N1bWVudDogY29udGV4dC5yZW1vdGVcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSksXG4gICAgXCJhcHBseSBtZW5kb3phIHBhdGNoXCI6IGFzc2lnbigoeyBldmVudCwgY29udGV4dCB9KSA9PiB7XG4gICAgICBhc3NlcnRFdmVudChldmVudCwgXCJtdXRhdGlvblwiKTtcbiAgICAgIGNvbnN0IHByZXZpb3VzUmVtb3RlID0gY29udGV4dC5yZW1vdGU7XG4gICAgICBpZiAoZXZlbnQudHJhbnNhY3Rpb25JZCA9PT0gcHJldmlvdXNSZW1vdGU/Ll9yZXYpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICAgIGNvbnN0IG5leHRSZW1vdGUgPSBhcHBseU1lbmRvemFQYXRjaChcbiAgICAgICAgcHJldmlvdXNSZW1vdGUsXG4gICAgICAgIGV2ZW50LmVmZmVjdHMuYXBwbHksXG4gICAgICAgIGV2ZW50LnJlc3VsdFJldlxuICAgICAgKTtcbiAgICAgIGNvbnRleHQuY2FjaGUgJiYgLy8gSWYgdGhlIHNoYXJlZCBjYWNoZSBkb24ndCBoYXZlIHRoZSBkb2N1bWVudCBhbHJlYWR5IHdlIGNhbiBqdXN0IHNldCBpdFxuICAgICAgKCFjb250ZXh0LmNhY2hlLmhhcyhjb250ZXh0LmlkKSB8fCAvLyBCdXQgd2hlbiBpdCdzIGluIHRoZSBjYWNoZSwgbWFrZSBzdXJlIGl0J3MgbmVjZXNzYXJ5IHRvIHVwZGF0ZSBpdFxuICAgICAgY29udGV4dC5jYWNoZS5nZXQoY29udGV4dC5pZCkuX3JldiAhPT0gbmV4dFJlbW90ZT8uX3JldikgJiYgY29udGV4dC5jYWNoZS5zZXQoY29udGV4dC5pZCwgbmV4dFJlbW90ZSk7XG4gICAgICBjb25zdCBbc3RhZ2VkQ2hhbmdlcywgbG9jYWxdID0gcmViYXNlKFxuICAgICAgICBjb250ZXh0LmlkLFxuICAgICAgICAvLyBJdCdzIGFubm95aW5nIHRvIGNvbnZlcnQgYmV0d2VlbiBudWxsIGFuZCB1bmRlZmluZWQsIHJlYWNoIGNvbnNlbnN1c1xuICAgICAgICBwcmV2aW91c1JlbW90ZSA9PT0gbnVsbCA/IHZvaWQgMCA6IHByZXZpb3VzUmVtb3RlLFxuICAgICAgICBuZXh0UmVtb3RlID09PSBudWxsID8gdm9pZCAwIDogbmV4dFJlbW90ZSxcbiAgICAgICAgY29udGV4dC5zdGFnZWRDaGFuZ2VzXG4gICAgICApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3RlOiBuZXh0UmVtb3RlLFxuICAgICAgICBsb2NhbCxcbiAgICAgICAgc3RhZ2VkQ2hhbmdlc1xuICAgICAgfTtcbiAgICB9KSxcbiAgICBcImluY3JlbWVudCBmZXRjaCBhdHRlbXB0c1wiOiBhc3NpZ24oe1xuICAgICAgZmV0Y2hSZW1vdGVTbmFwc2hvdEF0dGVtcHRzOiAoeyBjb250ZXh0IH0pID0+IGNvbnRleHQuZmV0Y2hSZW1vdGVTbmFwc2hvdEF0dGVtcHRzICsgMVxuICAgIH0pLFxuICAgIFwicmVzZXQgZmV0Y2ggYXR0ZW1wdHNcIjogYXNzaWduKHtcbiAgICAgIGZldGNoUmVtb3RlU25hcHNob3RBdHRlbXB0czogMFxuICAgIH0pLFxuICAgIFwiaW5jcmVtZW50IHN1Ym1pdCBhdHRlbXB0c1wiOiBhc3NpZ24oe1xuICAgICAgc3VibWl0VHJhbnNhY3Rpb25zQXR0ZW1wdHM6ICh7IGNvbnRleHQgfSkgPT4gY29udGV4dC5zdWJtaXRUcmFuc2FjdGlvbnNBdHRlbXB0cyArIDFcbiAgICB9KSxcbiAgICBcInJlc2V0IHN1Ym1pdCBhdHRlbXB0c1wiOiBhc3NpZ24oe1xuICAgICAgc3VibWl0VHJhbnNhY3Rpb25zQXR0ZW1wdHM6IDBcbiAgICB9KSxcbiAgICBcInN0YWdlIG11dGF0aW9uXCI6IGFzc2lnbih7XG4gICAgICBzdGFnZWRDaGFuZ2VzOiAoeyBldmVudCwgY29udGV4dCB9KSA9PiAoYXNzZXJ0RXZlbnQoZXZlbnQsIFwibXV0YXRlXCIpLCBbXG4gICAgICAgIC4uLmNvbnRleHQuc3RhZ2VkQ2hhbmdlcyxcbiAgICAgICAgeyB0cmFuc2FjdGlvbjogITEsIG11dGF0aW9uczogZXZlbnQubXV0YXRpb25zIH1cbiAgICAgIF0pXG4gICAgfSksXG4gICAgXCJzdGFzaCBtdXRhdGlvblwiOiBhc3NpZ24oe1xuICAgICAgc3Rhc2hlZENoYW5nZXM6ICh7IGV2ZW50LCBjb250ZXh0IH0pID0+IChhc3NlcnRFdmVudChldmVudCwgXCJtdXRhdGVcIiksIFtcbiAgICAgICAgLi4uY29udGV4dC5zdGFzaGVkQ2hhbmdlcyxcbiAgICAgICAgeyB0cmFuc2FjdGlvbjogITEsIG11dGF0aW9uczogZXZlbnQubXV0YXRpb25zIH1cbiAgICAgIF0pXG4gICAgfSksXG4gICAgXCJyZWJhc2UgbG9jYWwgc25hcHNob3RcIjogZW5xdWV1ZUFjdGlvbnMoKHsgZW5xdWV1ZSB9KSA9PiB7XG4gICAgICBlbnF1ZXVlLmFzc2lnbih7XG4gICAgICAgIGxvY2FsOiAoeyBldmVudCwgY29udGV4dCB9KSA9PiB7XG4gICAgICAgICAgYXNzZXJ0RXZlbnQoZXZlbnQsIFwibXV0YXRlXCIpO1xuICAgICAgICAgIGNvbnN0IGxvY2FsRGF0YXNldCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgICAgY29udGV4dC5sb2NhbCAmJiBsb2NhbERhdGFzZXQuc2V0KGNvbnRleHQuaWQsIGNvbnRleHQubG9jYWwpO1xuICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhcHBseU11dGF0aW9ucyhldmVudC5tdXRhdGlvbnMsIGxvY2FsRGF0YXNldCk7XG4gICAgICAgICAgcmV0dXJuIGNvbW1pdChyZXN1bHRzLCBsb2NhbERhdGFzZXQpLCBsb2NhbERhdGFzZXQuZ2V0KGNvbnRleHQuaWQpO1xuICAgICAgICB9XG4gICAgICB9KSwgZW5xdWV1ZS5zZW5kUGFyZW50KFxuICAgICAgICAoeyBjb250ZXh0IH0pID0+ICh7XG4gICAgICAgICAgdHlwZTogXCJyZWJhc2VkLmxvY2FsXCIsXG4gICAgICAgICAgaWQ6IGNvbnRleHQuaWQsXG4gICAgICAgICAgZG9jdW1lbnQ6IGNvbnRleHQubG9jYWxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSksXG4gICAgXCJzZW5kIHByaXN0aW5lIGV2ZW50IHRvIHBhcmVudFwiOiBzZW5kUGFyZW50KFxuICAgICAgKHsgY29udGV4dCB9KSA9PiAoe1xuICAgICAgICB0eXBlOiBcInByaXN0aW5lXCIsXG4gICAgICAgIGlkOiBjb250ZXh0LmlkXG4gICAgICB9KVxuICAgICksXG4gICAgXCJzZW5kIHN5bmMgZXZlbnQgdG8gcGFyZW50XCI6IHNlbmRQYXJlbnQoXG4gICAgICAoeyBjb250ZXh0IH0pID0+ICh7XG4gICAgICAgIHR5cGU6IFwic3luY1wiLFxuICAgICAgICBpZDogY29udGV4dC5pZCxcbiAgICAgICAgZG9jdW1lbnQ6IGNvbnRleHQucmVtb3RlXG4gICAgICB9KVxuICAgICksXG4gICAgXCJzZW5kIG11dGF0aW9uIGV2ZW50IHRvIHBhcmVudFwiOiBzZW5kUGFyZW50KCh7IGNvbnRleHQsIGV2ZW50IH0pID0+IChhc3NlcnRFdmVudChldmVudCwgXCJtdXRhdGlvblwiKSwge1xuICAgICAgdHlwZTogXCJtdXRhdGlvblwiLFxuICAgICAgaWQ6IGNvbnRleHQuaWQsXG4gICAgICBwcmV2aW91c1JldjogZXZlbnQucHJldmlvdXNSZXYsXG4gICAgICByZXN1bHRSZXY6IGV2ZW50LnJlc3VsdFJldixcbiAgICAgIGVmZmVjdHM6IGV2ZW50LmVmZmVjdHNcbiAgICB9KSlcbiAgfSxcbiAgYWN0b3JzOiB7XG4gICAgXCJzZXJ2ZXItc2VudCBldmVudHNcIjogZnJvbUV2ZW50T2JzZXJ2YWJsZShcbiAgICAgICh7XG4gICAgICAgIGlucHV0XG4gICAgICB9KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgbGlzdGVuZXIsIGlkIH0gPSBpbnB1dDtcbiAgICAgICAgcmV0dXJuIGRlZmVyKCgpID0+IGxpc3RlbmVyKS5waXBlKFxuICAgICAgICAgIGZpbHRlcihcbiAgICAgICAgICAgIChldmVudCkgPT4gZXZlbnQudHlwZSA9PT0gXCJ3ZWxjb21lXCIgfHwgZXZlbnQudHlwZSA9PT0gXCJyZWNvbm5lY3RcIiB8fCBldmVudC50eXBlID09PSBcIm11dGF0aW9uXCIgJiYgZXZlbnQuZG9jdW1lbnRJZCA9PT0gaWRcbiAgICAgICAgICApLFxuICAgICAgICAgIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGF2b2lkIHN5bmMgZW1pdHRlZCBldmVudHMgZnJvbSBgc2hhcmVSZXBsYXlgIGZyb20gaGFwcGVuaW5nIGJlZm9yZSB0aGUgYWN0b3IgaXMgcmVhZHkgdG8gcmVjZWl2ZSB0aGVtXG4gICAgICAgICAgb2JzZXJ2ZU9uKGFzYXBTY2hlZHVsZXIpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgKSxcbiAgICBcImZldGNoIHJlbW90ZSBzbmFwc2hvdFwiOiBmcm9tUHJvbWlzZShcbiAgICAgIGFzeW5jICh7XG4gICAgICAgIGlucHV0LFxuICAgICAgICBzaWduYWxcbiAgICAgIH0pID0+IHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQsIGlkIH0gPSBpbnB1dDtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNsaWVudC5nZXREb2N1bWVudChpZCwge1xuICAgICAgICAgIHNpZ25hbFxuICAgICAgICB9KS5jYXRjaCgoZSkgPT4ge1xuICAgICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSlcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICksXG4gICAgXCJzdWJtaXQgbXV0YXRpb25zIGFzIHRyYW5zYWN0aW9uc1wiOiBmcm9tUHJvbWlzZShcbiAgICAgIGFzeW5jICh7XG4gICAgICAgIGlucHV0LFxuICAgICAgICBzaWduYWxcbiAgICAgIH0pID0+IHtcbiAgICAgICAgY29uc3QgeyBjbGllbnQsIHRyYW5zYWN0aW9ucyB9ID0gaW5wdXQ7XG4gICAgICAgIGZvciAoY29uc3QgdHJhbnNhY3Rpb24gb2YgdHJhbnNhY3Rpb25zKSB7XG4gICAgICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSByZXR1cm47XG4gICAgICAgICAgYXdhaXQgY2xpZW50LmRhdGFSZXF1ZXN0KFwibXV0YXRlXCIsIGVuY29kZVRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKSwge1xuICAgICAgICAgICAgdmlzaWJpbGl0eTogXCJhc3luY1wiLFxuICAgICAgICAgICAgcmV0dXJuRG9jdW1lbnRzOiAhMSxcbiAgICAgICAgICAgIHNpZ25hbFxuICAgICAgICAgIH0pLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5uYW1lID09PSBcIkFib3J0RXJyb3JcIikpXG4gICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApXG4gIH0sXG4gIGRlbGF5czoge1xuICAgIC8vIEV4cG9uZW50aWFsIGJhY2tvZmYgZGVsYXkgZnVuY3Rpb25cbiAgICBmZXRjaFJlbW90ZVNuYXBzaG90VGltZW91dDogKHsgY29udGV4dCB9KSA9PiBNYXRoLnBvdygyLCBjb250ZXh0LmZldGNoUmVtb3RlU25hcHNob3RBdHRlbXB0cykgKiAxZTMsXG4gICAgc3VibWl0VHJhbnNhY3Rpb25zVGltZW91dDogKHsgY29udGV4dCB9KSA9PiBNYXRoLnBvdygyLCBjb250ZXh0LnN1Ym1pdFRyYW5zYWN0aW9uc0F0dGVtcHRzKSAqIDFlM1xuICB9XG59KS5jcmVhdGVNYWNoaW5lKHtcbiAgLyoqIEB4c3RhdGUtbGF5b3V0IE40SWdwZ0pnNW1ET0lDNVFRUFlHTUN1QmJNQTdBTGdMUlliNENHK0tBVGdNUW5uNWdEYUFEQUxxS2dBT0tzQWx2ajRwY25FQUE5RUFEaFlBV0FIUUEyR1N3VUJtQUt3Qk9hUUVaSmtoUUJvUUFUMFE2QVRBRjhyeDFKaHdGaXBDdFRrUStzTk1OeGcwakNCcHZYRjktVmc0a0VCNStRV0ZSQ1FRTEZoWTVQUUIyZFJVMVNRc2RHU1ZqTXdSbEhUa1dOTTAwblIxVktyeUttenQwYkR3aWVsY3FPV0RRd1Z3b0dnQjNNQUFiYnh4dzBXaUJJUkZJaFBVS3VRMU5WVTB0VFUwV0ZkVkN4QXQxZFRsTmhYMldkUmx0R1VrMDYxc1FleGFuZHNwTzdyOWUtcW8tSDNlSnlLbllyTlFQTkpKb2xscFZ1dE50dGRnaFZDbzVNb1Rnb01wbzhqSWtxcEd2ZG1vNDJpNFhsMGZ2NCtIMGFHQXFGUnFIOXVMeHBuRTVvZ0ZyQ0xGZDVDdE5CWUZKa2RPcHVhb3NYY0huam5BdzNHOS1BQXhNaDhZWVlMNUJZbjRHbFJPbUErS0lGRXMxUjZPUnBaWVdISVhHUjZiSEMxcWlqcHlMNFNqNkRFWmpaanNTWnFtWWF4SzFPUmN2bGMtWnFTb3lOS3duUnBHVHlLNFdESzVCUTZCUTVCUm0zRVc1NXVHMUswbjlDbFVxZ3FnRnV4a2V0SmU3bkl2MnJVTkIweDdMbVNMMnFHTXNTeVNldmNtU0poekpnbmlwV1FPZ0VtYTUxME00SG1jcUhaWXlXcWFPTXFUUXlXR2gwb3NWU0dpd0M1dUd5ZnR4NzRzV3ZIdUJOTWhYN08tNURvSGlQYWU3Mmx2bmx3UEJ5ZEZsUlZTN3FQSWw3Y2lsUDc0LStTQnlNTUtCa0I0WktvTDRjaWtnQWJpZ0FEV1lCeURBK0FBQ0pKZ1FnNHhQbUk3RkhrWlFyS0dzanFLY0NpYU1HOVlwSk94eVNCaUNpeVBvWDZkbnVSSi1nRWdIQWFCbWFVbTRYRERCUUFCbTFCWUloWUFvV2h5cW5yU21IRHBlQ0FLQ2ljalViVTZnNm5rRmljaFlzSnJMV1Z4YVBzazdLZElDWkNtSmxxRXJhQUZBU0J2YlBBT0VtcWxKRjRKSlVSYlZEY3k0WXZrMUdWa1VzYWJBcE1qS1pHcWpOZzJrZ01VOFhhLWowRm5zUUJYQlVKNHZSZ0gyREJPaEVrbjBvNVRMS1Y2eTZXREc2bGhrWVZZSURvS3p5QmtlUjhwVURacU9GdTVXdVpFQnNWWnpVZUZRK0FtRFFzQVlBQVJsZ0FnWVpsN282STJ0WUxKSU5TU08rM0phTUdsUXBHa2hGaHJ5bzJqVzJ4a2RoRlRGTlMxRUFBVDEtVUNIYTRFSWRCY0VJWWRBMzRBQUtsUVpDNExBWkFrc0lzQkRlcUJicmRweW04aXVCeXhsY0xLNUJZcVFMQlVaeVRjRnZMMWFaM1lzVEZyVnlGZHgwWnVTWEdkRHgtR0NVamZYWFhkRDFQUzlqM3ZWaE1ucldDRlJ4dE5hUkxkY2ZJc2l3dVM1ZmtnWmFPVWxocEREUDdNZEZ6V1dmdHpYSS1nZHJQR2xMb09TTnlpSEZzdFJ5U2lzamNnemFoeUZvVVlCYlJzYWM1dE82dzFGN3dJd0xPTkhmZzBxeXZLeVZmUGdWQW1DVDBrSkd0NDFwSkQwMnhnY3BFbFVrY1o2ckkrcTVKY2NrYlUwVzBOV1pCNTdRZHVNQ0tiY29LbUlzQ3BYSVpCOFl3VkFBQlJDLWpqM1BZQ3NBM1h3T0FvS1FBQ1VORG10dGpWaC16RWZHOUg1dTIxbHBWalNyVHRUVE5ic3N0VVlKSkFGV2dBMzdYT1JUeit0OCt4dGNLcGIxdjErNktKRm9wR1FxUmk2bkJsc3RZY3FOSzVyaXVzWUR6dGxlanpLTWZKWEhDZEp5bnFkOFNKYUFBQllBRXBnRmdLQ01BQXlyZ1pCY0xBVitQM25CZkY2WEpuYzd0Zm1ZOHhabmdsZ1dHZS1rbElMelVoWURTSlZScG5DT05OT2NXeFdSS0JSRFlPNHVBVUQ3WGdKRU11SWRxRGkyR2dXUWdPaGd4TXlSS3lGYzhJdVFrWFVEdkswSGd2QUhtSVI5YkNENFNvZVNXQ29Ma29acHhybVhJdzBPTEVNeHNOSmdrU2M0MThLaG5ySHlHNG9aWVRjUGhNaWZoSng0U0NpRGpyQUJTcGdIaUx0b2dBVWh3Vzc3RFJJR1hrazU1d2V4S0NySlFzZzFqQlRuUHNZUnFadmlpTDZQb2h1T1JneWhoQmhHS01zWll6eGhjWHJmOEVCUEh1bFVKT1BDdFJsQUJXSXU3SW9PUlZCSUloTXBOWUdKeWdoS0htRXZhWWpRRWtPd2hreFFySnRCRVMwSkRPQlBsa2dLRDFKWVpTalpPUnlUWE5rd0JzVndrRlBZVEpWWVM1OEp4UEtiT1lNMGdVajdGakdjRU1PcGNpYUp4TUhYV09UV0pWMmF2RlJLcEl3QVJJTEpSR0pCRjRtWkJJa0RFMEt0SXhMU1NEa0RZR2hXbDcwUnUxVHE2enNMVVJCa29MeVdSbXo4UG1sVVptY1kxelhES2RNZ2hjeTJtSXlGaDhXNVpONFJGbU9GeUthWndpTGVUMkdWSmN5NXBCcmd1Q2lNSzJ0dnlEd0JZYklXZWpPa1NNUUJrZVFPUkpxMFJOQ1VESUROb25keHVHcFBRbVJxSVhQaGlQRUN1S01wZE1rYklMWi1TRW5MeHlqcU9KTVpzajFqUlRZSUFBICovXG4gIGlkOiBcImRvY3VtZW50LW11dGF0b3JcIixcbiAgY29udGV4dDogKHsgaW5wdXQgfSkgPT4gKHtcbiAgICBjbGllbnQ6IGlucHV0LmNsaWVudC53aXRoQ29uZmlnKHsgYWxsb3dSZWNvbmZpZ3VyZTogITEgfSksXG4gICAgc2hhcmVkTGlzdGVuZXI6IGlucHV0LnNoYXJlZExpc3RlbmVyLFxuICAgIGlkOiBpbnB1dC5pZCxcbiAgICByZW1vdGU6IHZvaWQgMCxcbiAgICBsb2NhbDogdm9pZCAwLFxuICAgIG11dGF0aW9uRXZlbnRzOiBbXSxcbiAgICBzdGFnZWRDaGFuZ2VzOiBbXSxcbiAgICBzdGFzaGVkQ2hhbmdlczogW10sXG4gICAgZXJyb3I6IHZvaWQgMCxcbiAgICBmZXRjaFJlbW90ZVNuYXBzaG90QXR0ZW1wdHM6IDAsXG4gICAgc3VibWl0VHJhbnNhY3Rpb25zQXR0ZW1wdHM6IDAsXG4gICAgY2FjaGU6IGlucHV0LmNhY2hlXG4gIH0pLFxuICAvLyBBdXRvIHN0YXJ0IHRoZSBjb25uZWN0aW9uIGJ5IGRlZmF1bHRcbiAgZW50cnk6IFtcImNvbm5lY3QgdG8gc2VydmVyLXNlbnQgZXZlbnRzXCJdLFxuICBvbjoge1xuICAgIG11dGF0ZToge1xuICAgICAgYWN0aW9uczogW1wicmViYXNlIGxvY2FsIHNuYXBzaG90XCIsIFwic3RhZ2UgbXV0YXRpb25cIl1cbiAgICB9XG4gIH0sXG4gIGluaXRpYWw6IFwiZGlzY29ubmVjdGVkXCIsXG4gIHN0YXRlczoge1xuICAgIGRpc2Nvbm5lY3RlZDoge1xuICAgICAgb246IHtcbiAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgIHRhcmdldDogXCJjb25uZWN0aW5nXCIsXG4gICAgICAgICAgYWN0aW9uczogW1wibGlzdGVuIHRvIHNlcnZlci1zZW50IGV2ZW50c1wiXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBjb25uZWN0aW5nOiB7XG4gICAgICBvbjoge1xuICAgICAgICB3ZWxjb21lOiBcImNvbm5lY3RlZFwiLFxuICAgICAgICByZWNvbm5lY3Q6IFwicmVjb25uZWN0aW5nXCIsXG4gICAgICAgIGVycm9yOiBcImNvbm5lY3RGYWlsdXJlXCJcbiAgICAgIH0sXG4gICAgICB0YWdzOiBbXCJidXN5XCJdXG4gICAgfSxcbiAgICBjb25uZWN0RmFpbHVyZToge1xuICAgICAgb246IHtcbiAgICAgICAgY29ubmVjdDoge1xuICAgICAgICAgIHRhcmdldDogXCJjb25uZWN0aW5nXCIsXG4gICAgICAgICAgYWN0aW9uczogW1wibGlzdGVuIHRvIHNlcnZlci1zZW50IGV2ZW50c1wiXVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZW50cnk6IFtcbiAgICAgICAgXCJzdG9wIGxpc3RlbmluZyB0byBzZXJ2ZXItc2VudCBldmVudHNcIixcbiAgICAgICAgXCJhc3NpZ24gZXJyb3IgdG8gY29udGV4dFwiXG4gICAgICBdLFxuICAgICAgZXhpdDogW1wiY2xlYXIgZXJyb3IgZnJvbSBjb250ZXh0XCJdLFxuICAgICAgdGFnczogW1wiZXJyb3JcIl1cbiAgICB9LFxuICAgIHJlY29ubmVjdGluZzoge1xuICAgICAgb246IHtcbiAgICAgICAgd2VsY29tZToge1xuICAgICAgICAgIHRhcmdldDogXCJjb25uZWN0ZWRcIlxuICAgICAgICB9LFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIHRhcmdldDogXCJjb25uZWN0RmFpbHVyZVwiXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB0YWdzOiBbXCJidXN5XCIsIFwiZXJyb3JcIl1cbiAgICB9LFxuICAgIGNvbm5lY3RlZDoge1xuICAgICAgb246IHtcbiAgICAgICAgbXV0YXRpb246IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJidWZmZXIgcmVtb3RlIG11dGF0aW9uIGV2ZW50c1wiXVxuICAgICAgICB9LFxuICAgICAgICByZWNvbm5lY3Q6IFwicmVjb25uZWN0aW5nXCJcbiAgICAgIH0sXG4gICAgICBlbnRyeTogW1wiY2xlYXIgZXJyb3IgZnJvbSBjb250ZXh0XCJdLFxuICAgICAgaW5pdGlhbDogXCJsb2FkaW5nXCIsXG4gICAgICBzdGF0ZXM6IHtcbiAgICAgICAgbG9hZGluZzoge1xuICAgICAgICAgIGludm9rZToge1xuICAgICAgICAgICAgc3JjOiBcImZldGNoIHJlbW90ZSBzbmFwc2hvdFwiLFxuICAgICAgICAgICAgaWQ6IFwiZ2V0RG9jdW1lbnRcIixcbiAgICAgICAgICAgIGlucHV0OiAoeyBjb250ZXh0IH0pID0+ICh7XG4gICAgICAgICAgICAgIGNsaWVudDogY29udGV4dC5jbGllbnQsXG4gICAgICAgICAgICAgIGlkOiBjb250ZXh0LmlkXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG9uRXJyb3I6IHtcbiAgICAgICAgICAgICAgdGFyZ2V0OiBcImxvYWRGYWlsdXJlXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkRvbmU6IHtcbiAgICAgICAgICAgICAgdGFyZ2V0OiBcImxvYWRlZFwiLFxuICAgICAgICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgICAgICAgXCJyZWJhc2UgZmV0Y2hlZCByZW1vdGUgc25hcHNob3RcIixcbiAgICAgICAgICAgICAgICBcInJlc2V0IGZldGNoIGF0dGVtcHRzXCJcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGFnczogW1wiYnVzeVwiXVxuICAgICAgICB9LFxuICAgICAgICBsb2FkZWQ6IHtcbiAgICAgICAgICBlbnRyeTogW1wic2VuZCBzeW5jIGV2ZW50IHRvIHBhcmVudFwiXSxcbiAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgbXV0YXRpb246IHtcbiAgICAgICAgICAgICAgYWN0aW9uczogW1wiYXBwbHkgbWVuZG96YSBwYXRjaFwiLCBcInNlbmQgbXV0YXRpb24gZXZlbnQgdG8gcGFyZW50XCJdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbml0aWFsOiBcInByaXN0aW5lXCIsXG4gICAgICAgICAgc3RhdGVzOiB7XG4gICAgICAgICAgICBwcmlzdGluZToge1xuICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgIG11dGF0ZToge1xuICAgICAgICAgICAgICAgICAgYWN0aW9uczogW1wicmViYXNlIGxvY2FsIHNuYXBzaG90XCIsIFwic3RhZ2UgbXV0YXRpb25cIl0sXG4gICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwiZGlydHlcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdGFnczogW1wicmVhZHlcIl1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkaXJ0eToge1xuICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgIHN1Ym1pdDogXCJzdWJtaXR0aW5nXCJcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdGFnczogW1wicmVhZHlcIl1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWJtaXR0aW5nOiB7XG4gICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgbXV0YXRlOiB7XG4gICAgICAgICAgICAgICAgICBhY3Rpb25zOiBbXCJyZWJhc2UgbG9jYWwgc25hcHNob3RcIiwgXCJzdGFzaCBtdXRhdGlvblwiXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgaW52b2tlOiB7XG4gICAgICAgICAgICAgICAgc3JjOiBcInN1Ym1pdCBtdXRhdGlvbnMgYXMgdHJhbnNhY3Rpb25zXCIsXG4gICAgICAgICAgICAgICAgaWQ6IFwic3VibWl0VHJhbnNhY3Rpb25zXCIsXG4gICAgICAgICAgICAgICAgaW5wdXQ6ICh7IGNvbnRleHQgfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgcmVtb3RlRGF0YXNldCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmVtb3RlRGF0YXNldC5zZXQoY29udGV4dC5pZCwgY29udGV4dC5yZW1vdGUpLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWVudDogY29udGV4dC5jbGllbnQsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uczogdG9UcmFuc2FjdGlvbnMoXG4gICAgICAgICAgICAgICAgICAgICAgLy8gU3F1YXNoaW5nIERNUCBzdHJpbmdzIGlzIHRoZSBsYXN0IHRoaW5nIHdlIGRvIGJlZm9yZSBzdWJtaXR0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgc3F1YXNoRE1QU3RyaW5ncyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZURhdGFzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzcXVhc2hNdXRhdGlvbkdyb3Vwcyhjb250ZXh0LnN0YWdlZENoYW5nZXMpXG4gICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25FcnJvcjoge1xuICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcInN1Ym1pdEZhaWx1cmVcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb25Eb25lOiB7XG4gICAgICAgICAgICAgICAgICB0YXJnZXQ6IFwicHJpc3RpbmVcIixcbiAgICAgICAgICAgICAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgXCJyZXN0b3JlIHN0YXNoZWQgY2hhbmdlc1wiLFxuICAgICAgICAgICAgICAgICAgICBcInJlc2V0IHN1Ym1pdCBhdHRlbXB0c1wiLFxuICAgICAgICAgICAgICAgICAgICBcInNlbmQgcHJpc3RpbmUgZXZlbnQgdG8gcGFyZW50XCJcbiAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgKiAnYnVzeScgbWVhbnMgd2Ugc2hvdWxkIHNob3cgYSBzcGlubmVyLCAncmVhZHknIG1lYW5zIHdlIGNhbiBzdGlsbCBhY2NlcHQgbXV0YXRpb25zLCB0aGV5J2xsIGJlIGFwcGxpZWQgb3B0aW1pc3RpY2FsbHkgcmlnaHQgYXdheSwgYW5kIHF1ZXVlZCBmb3Igc3VibWlzc2lvbnMgYWZ0ZXIgdGhlIGN1cnJlbnQgc3VibWlzc2lvbiBzZXR0bGVzXG4gICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICB0YWdzOiBbXCJidXN5XCIsIFwicmVhZHlcIl1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWJtaXRGYWlsdXJlOiB7XG4gICAgICAgICAgICAgIGV4aXQ6IFtcImNsZWFyIGVycm9yIGZyb20gY29udGV4dFwiXSxcbiAgICAgICAgICAgICAgYWZ0ZXI6IHtcbiAgICAgICAgICAgICAgICBzdWJtaXRUcmFuc2FjdGlvbnNUaW1lb3V0OiB7XG4gICAgICAgICAgICAgICAgICBhY3Rpb25zOiBbXCJpbmNyZW1lbnQgc3VibWl0IGF0dGVtcHRzXCJdLFxuICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBcInN1Ym1pdHRpbmdcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICByZXRyeTogXCJzdWJtaXR0aW5nXCJcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAqIEhvdyBjYW4gaXQgYmUgYm90aCBgcmVhZHlgIGFuZCBgZXJyb3JgPyBgcmVhZHlgIG1lYW5zIGl0IGNhbiByZWNlaXZlIG11dGF0aW9ucywgb3B0aW1pc3RpY2FsbHkgYXBwbHkgdGhlbSwgYW5kIHF1ZXVlIHRoZW0gZm9yIHN1Ym1pc3Npb24uIGBlcnJvcmAgbWVhbnMgaXQgZmFpbGVkIHRvIHN1Ym1pdCBwcmV2aW91c2x5IGFwcGxpZWQgbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgKiBJdCdzIGNvbXBsZXRlbHkgZmluZSB0byBrZWVwIHF1ZXVlaW5nIHVwIG1vcmUgbXV0YXRpb25zIGFuZCBhcHBseWluZyB0aGVtIG9wdGltaXN0aWNhbGx5LCB3aGlsZSBzaG93aW5nIFVJIHRoYXQgbm90aWZpZXMgdGhhdCBtdXRhdGlvbnMgZGlkbid0IHN1Ym1pdCwgYW5kIHNob3cgYSBjb3VudCBkb3duIHVudGlsIHRoZSBuZXh0IGF1dG9tYXRpYyByZXRyeS5cbiAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgIHRhZ3M6IFtcImVycm9yXCIsIFwicmVhZHlcIl1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGxvYWRGYWlsdXJlOiB7XG4gICAgICAgICAgZXhpdDogW1wiY2xlYXIgZXJyb3IgZnJvbSBjb250ZXh0XCJdLFxuICAgICAgICAgIGFmdGVyOiB7XG4gICAgICAgICAgICBmZXRjaFJlbW90ZVNuYXBzaG90VGltZW91dDoge1xuICAgICAgICAgICAgICBhY3Rpb25zOiBbXCJpbmNyZW1lbnQgZmV0Y2ggYXR0ZW1wdHNcIl0sXG4gICAgICAgICAgICAgIHRhcmdldDogXCJsb2FkaW5nXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICByZXRyeTogXCJsb2FkaW5nXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRhZ3M6IFtcImVycm9yXCJdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pO1xuZnVuY3Rpb24gYXBwbHlNZW5kb3phUGF0Y2goZG9jdW1lbnQsIHBhdGNoLCBuZXh0UmV2aXNpb24pIHtcbiAgY29uc3QgbmV4dCA9IGFwcGx5UGF0Y2gob21pdFJldihkb2N1bWVudCksIHBhdGNoKTtcbiAgcmV0dXJuIG5leHQgPyBPYmplY3QuYXNzaWduKG5leHQsIHsgX3JldjogbmV4dFJldmlzaW9uIH0pIDogbnVsbDtcbn1cbmZ1bmN0aW9uIG9taXRSZXYoZG9jdW1lbnQpIHtcbiAgaWYgKCFkb2N1bWVudClcbiAgICByZXR1cm4gbnVsbDtcbiAgY29uc3QgeyBfcmV2LCAuLi5kb2MgfSA9IGRvY3VtZW50O1xuICByZXR1cm4gZG9jO1xufVxuZXhwb3J0IHtcbiAgYXBwbHlNdXRhdGlvbnMsXG4gIGNvbW1pdCxcbiAgY3JlYXRlU2hhcmVkTGlzdGVuZXIsXG4gIGRvY3VtZW50TXV0YXRvck1hY2hpbmUsXG4gIHJlYmFzZSxcbiAgc3F1YXNoRE1QU3RyaW5ncyxcbiAgc3F1YXNoTXV0YXRpb25Hcm91cHMsXG4gIHRvVHJhbnNhY3Rpb25zXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9X3Vuc3RhYmxlX21hY2hpbmUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_unstable_machine.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/index.js":
/*!****************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/mutate/dist/index.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CompactEncoder: () => (/* binding */ index$1),\n/* harmony export */   CompactFormatter: () => (/* binding */ compact),\n/* harmony export */   SanityEncoder: () => (/* binding */ index),\n/* harmony export */   append: () => (/* binding */ append),\n/* harmony export */   assign: () => (/* binding */ assign),\n/* harmony export */   at: () => (/* binding */ at),\n/* harmony export */   autoKeys: () => (/* binding */ autoKeys),\n/* harmony export */   create: () => (/* binding */ create),\n/* harmony export */   createIfNotExists: () => (/* binding */ createIfNotExists),\n/* harmony export */   createOrReplace: () => (/* binding */ createOrReplace),\n/* harmony export */   dec: () => (/* binding */ dec),\n/* harmony export */   del: () => (/* binding */ del),\n/* harmony export */   delete_: () => (/* binding */ delete_),\n/* harmony export */   destroy: () => (/* binding */ destroy),\n/* harmony export */   diffMatchPatch: () => (/* binding */ diffMatchPatch),\n/* harmony export */   inc: () => (/* binding */ inc),\n/* harmony export */   insert: () => (/* binding */ insert),\n/* harmony export */   insertAfter: () => (/* binding */ insertAfter),\n/* harmony export */   insertBefore: () => (/* binding */ insertBefore),\n/* harmony export */   patch: () => (/* binding */ patch),\n/* harmony export */   prepend: () => (/* binding */ prepend),\n/* harmony export */   remove: () => (/* binding */ remove),\n/* harmony export */   replace: () => (/* binding */ replace),\n/* harmony export */   set: () => (/* binding */ set),\n/* harmony export */   setIfMissing: () => (/* binding */ setIfMissing),\n/* harmony export */   truncate: () => (/* binding */ truncate),\n/* harmony export */   unassign: () => (/* binding */ unassign),\n/* harmony export */   unset: () => (/* binding */ unset),\n/* harmony export */   upsert: () => (/* binding */ upsert)\n/* harmony export */ });\n/* harmony import */ var _chunks_es_parse_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_chunks-es/parse.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/parse.js\");\n/* harmony import */ var _chunks_es_stringify_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_chunks-es/stringify.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/stringify.js\");\n/* harmony import */ var _chunks_es_decode_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_chunks-es/decode.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/decode.js\");\n/* harmony import */ var _chunks_es_encode_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./_chunks-es/encode.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/encode.js\");\n/* harmony import */ var _chunks_es_isObject_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./_chunks-es/isObject.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/isObject.js\");\n/* harmony import */ var _chunks_es_arrify_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./_chunks-es/arrify.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_chunks-es/arrify.js\");\n\n\n\n\n\n\nfunction decode(mutations) {\n  return mutations.map(decodeMutation);\n}\nfunction decodeMutation(mutation) {\n  const [type] = mutation;\n  if (type === \"delete\") {\n    const [, id] = mutation;\n    return { id, type };\n  } else if (type === \"create\") {\n    const [, document] = mutation;\n    return { type, document };\n  } else if (type === \"createIfNotExists\") {\n    const [, document] = mutation;\n    return { type, document };\n  } else if (type === \"createOrReplace\") {\n    const [, document] = mutation;\n    return { type, document };\n  } else if (type === \"patch\")\n    return decodePatchMutation(mutation);\n  throw new Error(`Unrecognized mutation: ${JSON.stringify(mutation)}`);\n}\nfunction decodePatchMutation(mutation) {\n  const [, type, id, serializedPath, , revisionId] = mutation, path = (0,_chunks_es_parse_js__WEBPACK_IMPORTED_MODULE_0__.parse)(serializedPath);\n  if (type === \"dec\" || type === \"inc\") {\n    const [, , , , [amount]] = mutation;\n    return {\n      type: \"patch\",\n      id,\n      patches: [{ path, op: { type: \"inc\", amount } }],\n      ...createOpts(revisionId)\n    };\n  }\n  if (type === \"unset\")\n    return {\n      type: \"patch\",\n      id,\n      patches: [{ path, op: { type: \"unset\" } }],\n      ...createOpts(revisionId)\n    };\n  if (type === \"insert\") {\n    const [, , , , [position, ref, items]] = mutation;\n    return {\n      type: \"patch\",\n      id,\n      patches: [\n        {\n          path,\n          op: {\n            type: \"insert\",\n            position,\n            items,\n            referenceItem: typeof ref == \"string\" ? { _key: ref } : ref\n          }\n        }\n      ],\n      ...createOpts(revisionId)\n    };\n  }\n  if (type === \"set\") {\n    const [, , , , [value]] = mutation;\n    return {\n      type: \"patch\",\n      id,\n      patches: [{ path, op: { type: \"set\", value } }],\n      ...createOpts(revisionId)\n    };\n  }\n  if (type === \"setIfMissing\") {\n    const [, , , , [value]] = mutation;\n    return {\n      type: \"patch\",\n      id,\n      patches: [{ path, op: { type: \"setIfMissing\", value } }],\n      ...createOpts(revisionId)\n    };\n  }\n  if (type === \"diffMatchPatch\") {\n    const [, , , , [value]] = mutation;\n    return {\n      type: \"patch\",\n      id,\n      patches: [{ path, op: { type: \"diffMatchPatch\", value } }],\n      ...createOpts(revisionId)\n    };\n  }\n  if (type === \"truncate\") {\n    const [, , , , [startIndex, endIndex]] = mutation;\n    return {\n      type: \"patch\",\n      id,\n      patches: [{ path, op: { type: \"truncate\", startIndex, endIndex } }],\n      ...createOpts(revisionId)\n    };\n  }\n  if (type === \"assign\") {\n    const [, , , , [value]] = mutation;\n    return {\n      type: \"patch\",\n      id,\n      patches: [{ path, op: { type: \"assign\", value } }],\n      ...createOpts(revisionId)\n    };\n  }\n  if (type === \"replace\") {\n    const [, , , , [ref, items]] = mutation;\n    return {\n      type: \"patch\",\n      id,\n      patches: [\n        { path, op: { type: \"replace\", items, referenceItem: decodeItemRef(ref) } }\n      ],\n      ...createOpts(revisionId)\n    };\n  }\n  if (type === \"upsert\") {\n    const [, , , , [position, referenceItem, items]] = mutation;\n    return {\n      type: \"patch\",\n      id,\n      patches: [\n        {\n          path,\n          op: {\n            type: \"upsert\",\n            items,\n            referenceItem: decodeItemRef(referenceItem),\n            position\n          }\n        }\n      ],\n      ...createOpts(revisionId)\n    };\n  }\n  throw new Error(`Invalid mutation type: ${type}`);\n}\nfunction decodeItemRef(ref) {\n  return typeof ref == \"string\" ? { _key: ref } : ref;\n}\nfunction createOpts(revisionId) {\n  return revisionId ? { options: { ifRevision: revisionId } } : null;\n}\nfunction encode(mutations) {\n  return mutations.flatMap((m) => encodeMutation$1(m));\n}\nfunction encodeItemRef$1(ref) {\n  return typeof ref == \"number\" ? ref : ref._key;\n}\nfunction encodeMutation$1(mutation) {\n  if (mutation.type === \"create\" || mutation.type === \"createIfNotExists\" || mutation.type === \"createOrReplace\")\n    return [[mutation.type, mutation.document]];\n  if (mutation.type === \"delete\")\n    return [[\"delete\", mutation.id]];\n  if (mutation.type === \"patch\")\n    return mutation.patches.map(\n      (patch2) => maybeAddRevision(\n        mutation.options?.ifRevision,\n        encodePatchMutation(mutation.id, patch2)\n      )\n    );\n  throw new Error(`Invalid mutation type: ${mutation.type}`);\n}\nfunction encodePatchMutation(id, patch2) {\n  const { op } = patch2, path = (0,_chunks_es_stringify_js__WEBPACK_IMPORTED_MODULE_1__.stringify)(patch2.path);\n  if (op.type === \"unset\")\n    return [\"patch\", \"unset\", id, path, []];\n  if (op.type === \"diffMatchPatch\")\n    return [\"patch\", \"diffMatchPatch\", id, path, [op.value]];\n  if (op.type === \"inc\" || op.type === \"dec\")\n    return [\"patch\", op.type, id, path, [op.amount]];\n  if (op.type === \"set\")\n    return [\"patch\", op.type, id, path, [op.value]];\n  if (op.type === \"setIfMissing\")\n    return [\"patch\", op.type, id, path, [op.value]];\n  if (op.type === \"insert\")\n    return [\n      \"patch\",\n      \"insert\",\n      id,\n      path,\n      [op.position, encodeItemRef$1(op.referenceItem), op.items]\n    ];\n  if (op.type === \"upsert\")\n    return [\n      \"patch\",\n      \"upsert\",\n      id,\n      path,\n      [op.position, encodeItemRef$1(op.referenceItem), op.items]\n    ];\n  if (op.type === \"assign\")\n    return [\"patch\", \"assign\", id, path, [op.value]];\n  if (op.type === \"unassign\")\n    return [\"patch\", \"assign\", id, path, [op.keys]];\n  if (op.type === \"replace\")\n    return [\n      \"patch\",\n      \"replace\",\n      id,\n      path,\n      [encodeItemRef$1(op.referenceItem), op.items]\n    ];\n  if (op.type === \"truncate\")\n    return [\"patch\", \"truncate\", id, path, [op.startIndex, op.endIndex]];\n  if (op.type === \"remove\")\n    return [\"patch\", \"remove\", id, path, [encodeItemRef$1(op.referenceItem)]];\n  throw new Error(`Invalid operation type: ${op.type}`);\n}\nfunction maybeAddRevision(revision, mut) {\n  const [mutType, patchType, id, path, args] = mut;\n  return revision ? [mutType, patchType, id, path, args, revision] : mut;\n}\nvar index$1 = /* @__PURE__ */ Object.freeze({\n  __proto__: null,\n  decode,\n  encode\n}), index = /* @__PURE__ */ Object.freeze({\n  __proto__: null,\n  decode: _chunks_es_decode_js__WEBPACK_IMPORTED_MODULE_2__.decode,\n  decodeAll: _chunks_es_decode_js__WEBPACK_IMPORTED_MODULE_2__.decodeAll,\n  encode: _chunks_es_encode_js__WEBPACK_IMPORTED_MODULE_3__.encode,\n  encodeAll: _chunks_es_encode_js__WEBPACK_IMPORTED_MODULE_3__.encodeAll,\n  encodeMutation: _chunks_es_encode_js__WEBPACK_IMPORTED_MODULE_3__.encodeMutation,\n  encodeTransaction: _chunks_es_encode_js__WEBPACK_IMPORTED_MODULE_3__.encodeTransaction\n});\nfunction format(mutations) {\n  return mutations.flatMap((m) => encodeMutation(m)).join(`\n`);\n}\nfunction encodeItemRef(ref) {\n  return typeof ref == \"number\" ? ref : ref._key;\n}\nfunction encodeMutation(mutation) {\n  if (mutation.type === \"create\" || mutation.type === \"createIfNotExists\" || mutation.type === \"createOrReplace\")\n    return [mutation.type, \": \", JSON.stringify(mutation.document)].join(\"\");\n  if (mutation.type === \"delete\")\n    return [\"delete \", mutation.id].join(\": \");\n  if (mutation.type === \"patch\") {\n    const ifRevision = mutation.options?.ifRevision;\n    return [\n      \"patch\",\n      \" \",\n      `id=${mutation.id}`,\n      ifRevision ? ` (if revision==${ifRevision})` : \"\",\n      `:\n`,\n      mutation.patches.map((nodePatch) => `  ${formatPatchMutation(nodePatch)}`).join(`\n`)\n    ].join(\"\");\n  }\n  throw new Error(`Invalid mutation type: ${mutation.type}`);\n}\nfunction formatPatchMutation(patch2) {\n  const { op } = patch2, path = (0,_chunks_es_stringify_js__WEBPACK_IMPORTED_MODULE_1__.stringify)(patch2.path);\n  if (op.type === \"unset\")\n    return [path, \"unset()\"].join(\": \");\n  if (op.type === \"diffMatchPatch\")\n    return [path, `diffMatchPatch(${op.value})`].join(\": \");\n  if (op.type === \"inc\" || op.type === \"dec\")\n    return [path, `${op.type}(${op.amount})`].join(\": \");\n  if (op.type === \"set\" || op.type === \"setIfMissing\")\n    return [path, `${op.type}(${JSON.stringify(op.value)})`].join(\": \");\n  if (op.type === \"assign\")\n    return [path, `${op.type}(${JSON.stringify(op.value)})`].join(\": \");\n  if (op.type === \"unassign\")\n    return [path, `${op.type}(${JSON.stringify(op.keys)})`].join(\": \");\n  if (op.type === \"insert\" || op.type === \"upsert\")\n    return [\n      path,\n      `${op.type}(${op.position}, ${encodeItemRef(\n        op.referenceItem\n      )}, ${JSON.stringify(op.items)})`\n    ].join(\": \");\n  if (op.type === \"replace\")\n    return [\n      path,\n      `replace(${encodeItemRef(op.referenceItem)}, ${JSON.stringify(\n        op.items\n      )})`\n    ].join(\": \");\n  if (op.type === \"truncate\")\n    return [path, `truncate(${op.startIndex}, ${op.endIndex}`].join(\": \");\n  if (op.type === \"remove\")\n    return [path, `remove(${encodeItemRef(op.referenceItem)})`].join(\": \");\n  throw new Error(`Invalid operation type: ${op.type}`);\n}\nvar compact = /* @__PURE__ */ Object.freeze({\n  __proto__: null,\n  format\n});\nconst set = (value) => ({ type: \"set\", value }), assign = (value) => ({\n  type: \"assign\",\n  value\n}), unassign = (keys) => ({\n  type: \"unassign\",\n  keys\n}), setIfMissing = (value) => ({\n  type: \"setIfMissing\",\n  value\n}), unset = () => ({ type: \"unset\" }), inc = (amount = 1) => ({\n  type: \"inc\",\n  amount\n}), dec = (amount = 1) => ({\n  type: \"dec\",\n  amount\n}), diffMatchPatch = (value) => ({\n  type: \"diffMatchPatch\",\n  value\n});\nfunction insert(items, position, indexOrReferenceItem) {\n  return {\n    type: \"insert\",\n    referenceItem: indexOrReferenceItem,\n    position,\n    items: (0,_chunks_es_arrify_js__WEBPACK_IMPORTED_MODULE_4__.arrify)(items)\n  };\n}\nfunction append(items) {\n  return insert(items, \"after\", -1);\n}\nfunction prepend(items) {\n  return insert(items, \"before\", 0);\n}\nfunction insertBefore(items, indexOrReferenceItem) {\n  return insert(items, \"before\", indexOrReferenceItem);\n}\nconst insertAfter = (items, indexOrReferenceItem) => insert(items, \"after\", indexOrReferenceItem);\nfunction truncate(startIndex, endIndex) {\n  return {\n    type: \"truncate\",\n    startIndex,\n    endIndex\n  };\n}\nfunction replace(items, referenceItem) {\n  return {\n    type: \"replace\",\n    referenceItem,\n    items: (0,_chunks_es_arrify_js__WEBPACK_IMPORTED_MODULE_4__.arrify)(items)\n  };\n}\nfunction remove(referenceItem) {\n  return {\n    type: \"remove\",\n    referenceItem\n  };\n}\nfunction upsert(items, position, referenceItem) {\n  return {\n    type: \"upsert\",\n    items: (0,_chunks_es_arrify_js__WEBPACK_IMPORTED_MODULE_4__.arrify)(items),\n    referenceItem,\n    position\n  };\n}\nfunction autoKeys(generateKey) {\n  const ensureKeys = createEnsureKeys(generateKey), insert$1 = (position, referenceItem, items) => insert(ensureKeys(items), position, referenceItem), upsert$1 = (items, position, referenceItem) => upsert(ensureKeys(items), position, referenceItem), replace$1 = (items, position, referenceItem) => replace(ensureKeys(items), referenceItem), insertBefore2 = (ref, items) => insert$1(\"before\", ref, items);\n  return { insert: insert$1, upsert: upsert$1, replace: replace$1, insertBefore: insertBefore2, prepend: (items) => insertBefore2(0, items), insertAfter: (ref, items) => insert$1(\"after\", ref, items), append: (items) => insert$1(\"after\", -1, items) };\n}\nfunction hasKey(item) {\n  return \"_key\" in item;\n}\nfunction createEnsureKeys(generateKey) {\n  return (array) => {\n    let didModify = !1;\n    const withKeys = array.map((item) => needsKey(item) ? (didModify = !0, { ...item, _key: generateKey(item) }) : item);\n    return didModify ? withKeys : array;\n  };\n}\nfunction needsKey(arrayItem) {\n  return (0,_chunks_es_isObject_js__WEBPACK_IMPORTED_MODULE_5__.isObject)(arrayItem) && !hasKey(arrayItem);\n}\nfunction create(document) {\n  return { type: \"create\", document };\n}\nfunction patch(id, patches, options) {\n  return {\n    type: \"patch\",\n    id,\n    patches: (0,_chunks_es_arrify_js__WEBPACK_IMPORTED_MODULE_4__.arrify)(patches),\n    ...options ? { options } : {}\n  };\n}\nfunction at(path, operation) {\n  return {\n    path: typeof path == \"string\" ? (0,_chunks_es_parse_js__WEBPACK_IMPORTED_MODULE_0__.parse)(path) : path,\n    op: operation\n  };\n}\nfunction createIfNotExists(document) {\n  return { type: \"createIfNotExists\", document };\n}\nfunction createOrReplace(document) {\n  return { type: \"createOrReplace\", document };\n}\nfunction delete_(id) {\n  return { type: \"delete\", id };\n}\nconst del = delete_, destroy = delete_;\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvbXV0YXRlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEM7QUFDUTtBQUNpQjtBQUN1RDtBQUMxRTtBQUNKO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLElBQUk7QUFDSjtBQUNBLGFBQWE7QUFDYixJQUFJO0FBQ0o7QUFDQSxhQUFhO0FBQ2IsSUFBSTtBQUNKO0FBQ0EsYUFBYTtBQUNiLElBQUk7QUFDSjtBQUNBLDRDQUE0Qyx5QkFBeUI7QUFDckU7QUFDQTtBQUNBLHNFQUFzRSwwREFBSztBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFlBQVksdUJBQXVCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFlBQVksaUJBQWlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0QsWUFBWTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFlBQVksc0JBQXNCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsWUFBWSwrQkFBK0I7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixZQUFZLGlDQUFpQztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFlBQVksMENBQTBDO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsWUFBWSx5QkFB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsNERBQU07QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFLGtDQUFrQztBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsZ0VBQVE7QUFDakI7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw0REFBTTtBQUNuQixtQkFBbUIsVUFBVTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywwREFBSztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQStCRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbm91cmVsZGlubWFobW91ZC9mcmVzaGNhcnQvZGVwbG95L25vZGVfbW9kdWxlcy9uZXh0LXNhbml0eS9ub2RlX21vZHVsZXMvQHNhbml0eS9tdXRhdGUvZGlzdC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwYXJzZSB9IGZyb20gXCIuL19jaHVua3MtZXMvcGFyc2UuanNcIjtcbmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gXCIuL19jaHVua3MtZXMvc3RyaW5naWZ5LmpzXCI7XG5pbXBvcnQgeyBkZWNvZGUgYXMgZGVjb2RlJDEsIGRlY29kZUFsbCB9IGZyb20gXCIuL19jaHVua3MtZXMvZGVjb2RlLmpzXCI7XG5pbXBvcnQgeyBlbmNvZGUgYXMgZW5jb2RlJDEsIGVuY29kZUFsbCwgZW5jb2RlTXV0YXRpb24gYXMgZW5jb2RlTXV0YXRpb24kMiwgZW5jb2RlVHJhbnNhY3Rpb24gfSBmcm9tIFwiLi9fY2h1bmtzLWVzL2VuY29kZS5qc1wiO1xuaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tIFwiLi9fY2h1bmtzLWVzL2lzT2JqZWN0LmpzXCI7XG5pbXBvcnQgeyBhcnJpZnkgfSBmcm9tIFwiLi9fY2h1bmtzLWVzL2FycmlmeS5qc1wiO1xuZnVuY3Rpb24gZGVjb2RlKG11dGF0aW9ucykge1xuICByZXR1cm4gbXV0YXRpb25zLm1hcChkZWNvZGVNdXRhdGlvbik7XG59XG5mdW5jdGlvbiBkZWNvZGVNdXRhdGlvbihtdXRhdGlvbikge1xuICBjb25zdCBbdHlwZV0gPSBtdXRhdGlvbjtcbiAgaWYgKHR5cGUgPT09IFwiZGVsZXRlXCIpIHtcbiAgICBjb25zdCBbLCBpZF0gPSBtdXRhdGlvbjtcbiAgICByZXR1cm4geyBpZCwgdHlwZSB9O1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiY3JlYXRlXCIpIHtcbiAgICBjb25zdCBbLCBkb2N1bWVudF0gPSBtdXRhdGlvbjtcbiAgICByZXR1cm4geyB0eXBlLCBkb2N1bWVudCB9O1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IFwiY3JlYXRlSWZOb3RFeGlzdHNcIikge1xuICAgIGNvbnN0IFssIGRvY3VtZW50XSA9IG11dGF0aW9uO1xuICAgIHJldHVybiB7IHR5cGUsIGRvY3VtZW50IH07XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJjcmVhdGVPclJlcGxhY2VcIikge1xuICAgIGNvbnN0IFssIGRvY3VtZW50XSA9IG11dGF0aW9uO1xuICAgIHJldHVybiB7IHR5cGUsIGRvY3VtZW50IH07XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJwYXRjaFwiKVxuICAgIHJldHVybiBkZWNvZGVQYXRjaE11dGF0aW9uKG11dGF0aW9uKTtcbiAgdGhyb3cgbmV3IEVycm9yKGBVbnJlY29nbml6ZWQgbXV0YXRpb246ICR7SlNPTi5zdHJpbmdpZnkobXV0YXRpb24pfWApO1xufVxuZnVuY3Rpb24gZGVjb2RlUGF0Y2hNdXRhdGlvbihtdXRhdGlvbikge1xuICBjb25zdCBbLCB0eXBlLCBpZCwgc2VyaWFsaXplZFBhdGgsICwgcmV2aXNpb25JZF0gPSBtdXRhdGlvbiwgcGF0aCA9IHBhcnNlKHNlcmlhbGl6ZWRQYXRoKTtcbiAgaWYgKHR5cGUgPT09IFwiZGVjXCIgfHwgdHlwZSA9PT0gXCJpbmNcIikge1xuICAgIGNvbnN0IFssICwgLCAsIFthbW91bnRdXSA9IG11dGF0aW9uO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcInBhdGNoXCIsXG4gICAgICBpZCxcbiAgICAgIHBhdGNoZXM6IFt7IHBhdGgsIG9wOiB7IHR5cGU6IFwiaW5jXCIsIGFtb3VudCB9IH1dLFxuICAgICAgLi4uY3JlYXRlT3B0cyhyZXZpc2lvbklkKVxuICAgIH07XG4gIH1cbiAgaWYgKHR5cGUgPT09IFwidW5zZXRcIilcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJwYXRjaFwiLFxuICAgICAgaWQsXG4gICAgICBwYXRjaGVzOiBbeyBwYXRoLCBvcDogeyB0eXBlOiBcInVuc2V0XCIgfSB9XSxcbiAgICAgIC4uLmNyZWF0ZU9wdHMocmV2aXNpb25JZClcbiAgICB9O1xuICBpZiAodHlwZSA9PT0gXCJpbnNlcnRcIikge1xuICAgIGNvbnN0IFssICwgLCAsIFtwb3NpdGlvbiwgcmVmLCBpdGVtc11dID0gbXV0YXRpb247XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwicGF0Y2hcIixcbiAgICAgIGlkLFxuICAgICAgcGF0Y2hlczogW1xuICAgICAgICB7XG4gICAgICAgICAgcGF0aCxcbiAgICAgICAgICBvcDoge1xuICAgICAgICAgICAgdHlwZTogXCJpbnNlcnRcIixcbiAgICAgICAgICAgIHBvc2l0aW9uLFxuICAgICAgICAgICAgaXRlbXMsXG4gICAgICAgICAgICByZWZlcmVuY2VJdGVtOiB0eXBlb2YgcmVmID09IFwic3RyaW5nXCIgPyB7IF9rZXk6IHJlZiB9IDogcmVmXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgLi4uY3JlYXRlT3B0cyhyZXZpc2lvbklkKVxuICAgIH07XG4gIH1cbiAgaWYgKHR5cGUgPT09IFwic2V0XCIpIHtcbiAgICBjb25zdCBbLCAsICwgLCBbdmFsdWVdXSA9IG11dGF0aW9uO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcInBhdGNoXCIsXG4gICAgICBpZCxcbiAgICAgIHBhdGNoZXM6IFt7IHBhdGgsIG9wOiB7IHR5cGU6IFwic2V0XCIsIHZhbHVlIH0gfV0sXG4gICAgICAuLi5jcmVhdGVPcHRzKHJldmlzaW9uSWQpXG4gICAgfTtcbiAgfVxuICBpZiAodHlwZSA9PT0gXCJzZXRJZk1pc3NpbmdcIikge1xuICAgIGNvbnN0IFssICwgLCAsIFt2YWx1ZV1dID0gbXV0YXRpb247XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6IFwicGF0Y2hcIixcbiAgICAgIGlkLFxuICAgICAgcGF0Y2hlczogW3sgcGF0aCwgb3A6IHsgdHlwZTogXCJzZXRJZk1pc3NpbmdcIiwgdmFsdWUgfSB9XSxcbiAgICAgIC4uLmNyZWF0ZU9wdHMocmV2aXNpb25JZClcbiAgICB9O1xuICB9XG4gIGlmICh0eXBlID09PSBcImRpZmZNYXRjaFBhdGNoXCIpIHtcbiAgICBjb25zdCBbLCAsICwgLCBbdmFsdWVdXSA9IG11dGF0aW9uO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcInBhdGNoXCIsXG4gICAgICBpZCxcbiAgICAgIHBhdGNoZXM6IFt7IHBhdGgsIG9wOiB7IHR5cGU6IFwiZGlmZk1hdGNoUGF0Y2hcIiwgdmFsdWUgfSB9XSxcbiAgICAgIC4uLmNyZWF0ZU9wdHMocmV2aXNpb25JZClcbiAgICB9O1xuICB9XG4gIGlmICh0eXBlID09PSBcInRydW5jYXRlXCIpIHtcbiAgICBjb25zdCBbLCAsICwgLCBbc3RhcnRJbmRleCwgZW5kSW5kZXhdXSA9IG11dGF0aW9uO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcInBhdGNoXCIsXG4gICAgICBpZCxcbiAgICAgIHBhdGNoZXM6IFt7IHBhdGgsIG9wOiB7IHR5cGU6IFwidHJ1bmNhdGVcIiwgc3RhcnRJbmRleCwgZW5kSW5kZXggfSB9XSxcbiAgICAgIC4uLmNyZWF0ZU9wdHMocmV2aXNpb25JZClcbiAgICB9O1xuICB9XG4gIGlmICh0eXBlID09PSBcImFzc2lnblwiKSB7XG4gICAgY29uc3QgWywgLCAsICwgW3ZhbHVlXV0gPSBtdXRhdGlvbjtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJwYXRjaFwiLFxuICAgICAgaWQsXG4gICAgICBwYXRjaGVzOiBbeyBwYXRoLCBvcDogeyB0eXBlOiBcImFzc2lnblwiLCB2YWx1ZSB9IH1dLFxuICAgICAgLi4uY3JlYXRlT3B0cyhyZXZpc2lvbklkKVxuICAgIH07XG4gIH1cbiAgaWYgKHR5cGUgPT09IFwicmVwbGFjZVwiKSB7XG4gICAgY29uc3QgWywgLCAsICwgW3JlZiwgaXRlbXNdXSA9IG11dGF0aW9uO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcInBhdGNoXCIsXG4gICAgICBpZCxcbiAgICAgIHBhdGNoZXM6IFtcbiAgICAgICAgeyBwYXRoLCBvcDogeyB0eXBlOiBcInJlcGxhY2VcIiwgaXRlbXMsIHJlZmVyZW5jZUl0ZW06IGRlY29kZUl0ZW1SZWYocmVmKSB9IH1cbiAgICAgIF0sXG4gICAgICAuLi5jcmVhdGVPcHRzKHJldmlzaW9uSWQpXG4gICAgfTtcbiAgfVxuICBpZiAodHlwZSA9PT0gXCJ1cHNlcnRcIikge1xuICAgIGNvbnN0IFssICwgLCAsIFtwb3NpdGlvbiwgcmVmZXJlbmNlSXRlbSwgaXRlbXNdXSA9IG11dGF0aW9uO1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcInBhdGNoXCIsXG4gICAgICBpZCxcbiAgICAgIHBhdGNoZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgb3A6IHtcbiAgICAgICAgICAgIHR5cGU6IFwidXBzZXJ0XCIsXG4gICAgICAgICAgICBpdGVtcyxcbiAgICAgICAgICAgIHJlZmVyZW5jZUl0ZW06IGRlY29kZUl0ZW1SZWYocmVmZXJlbmNlSXRlbSksXG4gICAgICAgICAgICBwb3NpdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIC4uLmNyZWF0ZU9wdHMocmV2aXNpb25JZClcbiAgICB9O1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBtdXRhdGlvbiB0eXBlOiAke3R5cGV9YCk7XG59XG5mdW5jdGlvbiBkZWNvZGVJdGVtUmVmKHJlZikge1xuICByZXR1cm4gdHlwZW9mIHJlZiA9PSBcInN0cmluZ1wiID8geyBfa2V5OiByZWYgfSA6IHJlZjtcbn1cbmZ1bmN0aW9uIGNyZWF0ZU9wdHMocmV2aXNpb25JZCkge1xuICByZXR1cm4gcmV2aXNpb25JZCA/IHsgb3B0aW9uczogeyBpZlJldmlzaW9uOiByZXZpc2lvbklkIH0gfSA6IG51bGw7XG59XG5mdW5jdGlvbiBlbmNvZGUobXV0YXRpb25zKSB7XG4gIHJldHVybiBtdXRhdGlvbnMuZmxhdE1hcCgobSkgPT4gZW5jb2RlTXV0YXRpb24kMShtKSk7XG59XG5mdW5jdGlvbiBlbmNvZGVJdGVtUmVmJDEocmVmKSB7XG4gIHJldHVybiB0eXBlb2YgcmVmID09IFwibnVtYmVyXCIgPyByZWYgOiByZWYuX2tleTtcbn1cbmZ1bmN0aW9uIGVuY29kZU11dGF0aW9uJDEobXV0YXRpb24pIHtcbiAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwiY3JlYXRlXCIgfHwgbXV0YXRpb24udHlwZSA9PT0gXCJjcmVhdGVJZk5vdEV4aXN0c1wiIHx8IG11dGF0aW9uLnR5cGUgPT09IFwiY3JlYXRlT3JSZXBsYWNlXCIpXG4gICAgcmV0dXJuIFtbbXV0YXRpb24udHlwZSwgbXV0YXRpb24uZG9jdW1lbnRdXTtcbiAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwiZGVsZXRlXCIpXG4gICAgcmV0dXJuIFtbXCJkZWxldGVcIiwgbXV0YXRpb24uaWRdXTtcbiAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwicGF0Y2hcIilcbiAgICByZXR1cm4gbXV0YXRpb24ucGF0Y2hlcy5tYXAoXG4gICAgICAocGF0Y2gyKSA9PiBtYXliZUFkZFJldmlzaW9uKFxuICAgICAgICBtdXRhdGlvbi5vcHRpb25zPy5pZlJldmlzaW9uLFxuICAgICAgICBlbmNvZGVQYXRjaE11dGF0aW9uKG11dGF0aW9uLmlkLCBwYXRjaDIpXG4gICAgICApXG4gICAgKTtcbiAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG11dGF0aW9uIHR5cGU6ICR7bXV0YXRpb24udHlwZX1gKTtcbn1cbmZ1bmN0aW9uIGVuY29kZVBhdGNoTXV0YXRpb24oaWQsIHBhdGNoMikge1xuICBjb25zdCB7IG9wIH0gPSBwYXRjaDIsIHBhdGggPSBzdHJpbmdpZnkocGF0Y2gyLnBhdGgpO1xuICBpZiAob3AudHlwZSA9PT0gXCJ1bnNldFwiKVxuICAgIHJldHVybiBbXCJwYXRjaFwiLCBcInVuc2V0XCIsIGlkLCBwYXRoLCBbXV07XG4gIGlmIChvcC50eXBlID09PSBcImRpZmZNYXRjaFBhdGNoXCIpXG4gICAgcmV0dXJuIFtcInBhdGNoXCIsIFwiZGlmZk1hdGNoUGF0Y2hcIiwgaWQsIHBhdGgsIFtvcC52YWx1ZV1dO1xuICBpZiAob3AudHlwZSA9PT0gXCJpbmNcIiB8fCBvcC50eXBlID09PSBcImRlY1wiKVxuICAgIHJldHVybiBbXCJwYXRjaFwiLCBvcC50eXBlLCBpZCwgcGF0aCwgW29wLmFtb3VudF1dO1xuICBpZiAob3AudHlwZSA9PT0gXCJzZXRcIilcbiAgICByZXR1cm4gW1wicGF0Y2hcIiwgb3AudHlwZSwgaWQsIHBhdGgsIFtvcC52YWx1ZV1dO1xuICBpZiAob3AudHlwZSA9PT0gXCJzZXRJZk1pc3NpbmdcIilcbiAgICByZXR1cm4gW1wicGF0Y2hcIiwgb3AudHlwZSwgaWQsIHBhdGgsIFtvcC52YWx1ZV1dO1xuICBpZiAob3AudHlwZSA9PT0gXCJpbnNlcnRcIilcbiAgICByZXR1cm4gW1xuICAgICAgXCJwYXRjaFwiLFxuICAgICAgXCJpbnNlcnRcIixcbiAgICAgIGlkLFxuICAgICAgcGF0aCxcbiAgICAgIFtvcC5wb3NpdGlvbiwgZW5jb2RlSXRlbVJlZiQxKG9wLnJlZmVyZW5jZUl0ZW0pLCBvcC5pdGVtc11cbiAgICBdO1xuICBpZiAob3AudHlwZSA9PT0gXCJ1cHNlcnRcIilcbiAgICByZXR1cm4gW1xuICAgICAgXCJwYXRjaFwiLFxuICAgICAgXCJ1cHNlcnRcIixcbiAgICAgIGlkLFxuICAgICAgcGF0aCxcbiAgICAgIFtvcC5wb3NpdGlvbiwgZW5jb2RlSXRlbVJlZiQxKG9wLnJlZmVyZW5jZUl0ZW0pLCBvcC5pdGVtc11cbiAgICBdO1xuICBpZiAob3AudHlwZSA9PT0gXCJhc3NpZ25cIilcbiAgICByZXR1cm4gW1wicGF0Y2hcIiwgXCJhc3NpZ25cIiwgaWQsIHBhdGgsIFtvcC52YWx1ZV1dO1xuICBpZiAob3AudHlwZSA9PT0gXCJ1bmFzc2lnblwiKVxuICAgIHJldHVybiBbXCJwYXRjaFwiLCBcImFzc2lnblwiLCBpZCwgcGF0aCwgW29wLmtleXNdXTtcbiAgaWYgKG9wLnR5cGUgPT09IFwicmVwbGFjZVwiKVxuICAgIHJldHVybiBbXG4gICAgICBcInBhdGNoXCIsXG4gICAgICBcInJlcGxhY2VcIixcbiAgICAgIGlkLFxuICAgICAgcGF0aCxcbiAgICAgIFtlbmNvZGVJdGVtUmVmJDEob3AucmVmZXJlbmNlSXRlbSksIG9wLml0ZW1zXVxuICAgIF07XG4gIGlmIChvcC50eXBlID09PSBcInRydW5jYXRlXCIpXG4gICAgcmV0dXJuIFtcInBhdGNoXCIsIFwidHJ1bmNhdGVcIiwgaWQsIHBhdGgsIFtvcC5zdGFydEluZGV4LCBvcC5lbmRJbmRleF1dO1xuICBpZiAob3AudHlwZSA9PT0gXCJyZW1vdmVcIilcbiAgICByZXR1cm4gW1wicGF0Y2hcIiwgXCJyZW1vdmVcIiwgaWQsIHBhdGgsIFtlbmNvZGVJdGVtUmVmJDEob3AucmVmZXJlbmNlSXRlbSldXTtcbiAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG9wZXJhdGlvbiB0eXBlOiAke29wLnR5cGV9YCk7XG59XG5mdW5jdGlvbiBtYXliZUFkZFJldmlzaW9uKHJldmlzaW9uLCBtdXQpIHtcbiAgY29uc3QgW211dFR5cGUsIHBhdGNoVHlwZSwgaWQsIHBhdGgsIGFyZ3NdID0gbXV0O1xuICByZXR1cm4gcmV2aXNpb24gPyBbbXV0VHlwZSwgcGF0Y2hUeXBlLCBpZCwgcGF0aCwgYXJncywgcmV2aXNpb25dIDogbXV0O1xufVxudmFyIGluZGV4JDEgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmZyZWV6ZSh7XG4gIF9fcHJvdG9fXzogbnVsbCxcbiAgZGVjb2RlLFxuICBlbmNvZGVcbn0pLCBpbmRleCA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBkZWNvZGU6IGRlY29kZSQxLFxuICBkZWNvZGVBbGwsXG4gIGVuY29kZTogZW5jb2RlJDEsXG4gIGVuY29kZUFsbCxcbiAgZW5jb2RlTXV0YXRpb246IGVuY29kZU11dGF0aW9uJDIsXG4gIGVuY29kZVRyYW5zYWN0aW9uXG59KTtcbmZ1bmN0aW9uIGZvcm1hdChtdXRhdGlvbnMpIHtcbiAgcmV0dXJuIG11dGF0aW9ucy5mbGF0TWFwKChtKSA9PiBlbmNvZGVNdXRhdGlvbihtKSkuam9pbihgXG5gKTtcbn1cbmZ1bmN0aW9uIGVuY29kZUl0ZW1SZWYocmVmKSB7XG4gIHJldHVybiB0eXBlb2YgcmVmID09IFwibnVtYmVyXCIgPyByZWYgOiByZWYuX2tleTtcbn1cbmZ1bmN0aW9uIGVuY29kZU11dGF0aW9uKG11dGF0aW9uKSB7XG4gIGlmIChtdXRhdGlvbi50eXBlID09PSBcImNyZWF0ZVwiIHx8IG11dGF0aW9uLnR5cGUgPT09IFwiY3JlYXRlSWZOb3RFeGlzdHNcIiB8fCBtdXRhdGlvbi50eXBlID09PSBcImNyZWF0ZU9yUmVwbGFjZVwiKVxuICAgIHJldHVybiBbbXV0YXRpb24udHlwZSwgXCI6IFwiLCBKU09OLnN0cmluZ2lmeShtdXRhdGlvbi5kb2N1bWVudCldLmpvaW4oXCJcIik7XG4gIGlmIChtdXRhdGlvbi50eXBlID09PSBcImRlbGV0ZVwiKVxuICAgIHJldHVybiBbXCJkZWxldGUgXCIsIG11dGF0aW9uLmlkXS5qb2luKFwiOiBcIik7XG4gIGlmIChtdXRhdGlvbi50eXBlID09PSBcInBhdGNoXCIpIHtcbiAgICBjb25zdCBpZlJldmlzaW9uID0gbXV0YXRpb24ub3B0aW9ucz8uaWZSZXZpc2lvbjtcbiAgICByZXR1cm4gW1xuICAgICAgXCJwYXRjaFwiLFxuICAgICAgXCIgXCIsXG4gICAgICBgaWQ9JHttdXRhdGlvbi5pZH1gLFxuICAgICAgaWZSZXZpc2lvbiA/IGAgKGlmIHJldmlzaW9uPT0ke2lmUmV2aXNpb259KWAgOiBcIlwiLFxuICAgICAgYDpcbmAsXG4gICAgICBtdXRhdGlvbi5wYXRjaGVzLm1hcCgobm9kZVBhdGNoKSA9PiBgICAke2Zvcm1hdFBhdGNoTXV0YXRpb24obm9kZVBhdGNoKX1gKS5qb2luKGBcbmApXG4gICAgXS5qb2luKFwiXCIpO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBtdXRhdGlvbiB0eXBlOiAke211dGF0aW9uLnR5cGV9YCk7XG59XG5mdW5jdGlvbiBmb3JtYXRQYXRjaE11dGF0aW9uKHBhdGNoMikge1xuICBjb25zdCB7IG9wIH0gPSBwYXRjaDIsIHBhdGggPSBzdHJpbmdpZnkocGF0Y2gyLnBhdGgpO1xuICBpZiAob3AudHlwZSA9PT0gXCJ1bnNldFwiKVxuICAgIHJldHVybiBbcGF0aCwgXCJ1bnNldCgpXCJdLmpvaW4oXCI6IFwiKTtcbiAgaWYgKG9wLnR5cGUgPT09IFwiZGlmZk1hdGNoUGF0Y2hcIilcbiAgICByZXR1cm4gW3BhdGgsIGBkaWZmTWF0Y2hQYXRjaCgke29wLnZhbHVlfSlgXS5qb2luKFwiOiBcIik7XG4gIGlmIChvcC50eXBlID09PSBcImluY1wiIHx8IG9wLnR5cGUgPT09IFwiZGVjXCIpXG4gICAgcmV0dXJuIFtwYXRoLCBgJHtvcC50eXBlfSgke29wLmFtb3VudH0pYF0uam9pbihcIjogXCIpO1xuICBpZiAob3AudHlwZSA9PT0gXCJzZXRcIiB8fCBvcC50eXBlID09PSBcInNldElmTWlzc2luZ1wiKVxuICAgIHJldHVybiBbcGF0aCwgYCR7b3AudHlwZX0oJHtKU09OLnN0cmluZ2lmeShvcC52YWx1ZSl9KWBdLmpvaW4oXCI6IFwiKTtcbiAgaWYgKG9wLnR5cGUgPT09IFwiYXNzaWduXCIpXG4gICAgcmV0dXJuIFtwYXRoLCBgJHtvcC50eXBlfSgke0pTT04uc3RyaW5naWZ5KG9wLnZhbHVlKX0pYF0uam9pbihcIjogXCIpO1xuICBpZiAob3AudHlwZSA9PT0gXCJ1bmFzc2lnblwiKVxuICAgIHJldHVybiBbcGF0aCwgYCR7b3AudHlwZX0oJHtKU09OLnN0cmluZ2lmeShvcC5rZXlzKX0pYF0uam9pbihcIjogXCIpO1xuICBpZiAob3AudHlwZSA9PT0gXCJpbnNlcnRcIiB8fCBvcC50eXBlID09PSBcInVwc2VydFwiKVxuICAgIHJldHVybiBbXG4gICAgICBwYXRoLFxuICAgICAgYCR7b3AudHlwZX0oJHtvcC5wb3NpdGlvbn0sICR7ZW5jb2RlSXRlbVJlZihcbiAgICAgICAgb3AucmVmZXJlbmNlSXRlbVxuICAgICAgKX0sICR7SlNPTi5zdHJpbmdpZnkob3AuaXRlbXMpfSlgXG4gICAgXS5qb2luKFwiOiBcIik7XG4gIGlmIChvcC50eXBlID09PSBcInJlcGxhY2VcIilcbiAgICByZXR1cm4gW1xuICAgICAgcGF0aCxcbiAgICAgIGByZXBsYWNlKCR7ZW5jb2RlSXRlbVJlZihvcC5yZWZlcmVuY2VJdGVtKX0sICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgIG9wLml0ZW1zXG4gICAgICApfSlgXG4gICAgXS5qb2luKFwiOiBcIik7XG4gIGlmIChvcC50eXBlID09PSBcInRydW5jYXRlXCIpXG4gICAgcmV0dXJuIFtwYXRoLCBgdHJ1bmNhdGUoJHtvcC5zdGFydEluZGV4fSwgJHtvcC5lbmRJbmRleH1gXS5qb2luKFwiOiBcIik7XG4gIGlmIChvcC50eXBlID09PSBcInJlbW92ZVwiKVxuICAgIHJldHVybiBbcGF0aCwgYHJlbW92ZSgke2VuY29kZUl0ZW1SZWYob3AucmVmZXJlbmNlSXRlbSl9KWBdLmpvaW4oXCI6IFwiKTtcbiAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIG9wZXJhdGlvbiB0eXBlOiAke29wLnR5cGV9YCk7XG59XG52YXIgY29tcGFjdCA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuZnJlZXplKHtcbiAgX19wcm90b19fOiBudWxsLFxuICBmb3JtYXRcbn0pO1xuY29uc3Qgc2V0ID0gKHZhbHVlKSA9PiAoeyB0eXBlOiBcInNldFwiLCB2YWx1ZSB9KSwgYXNzaWduID0gKHZhbHVlKSA9PiAoe1xuICB0eXBlOiBcImFzc2lnblwiLFxuICB2YWx1ZVxufSksIHVuYXNzaWduID0gKGtleXMpID0+ICh7XG4gIHR5cGU6IFwidW5hc3NpZ25cIixcbiAga2V5c1xufSksIHNldElmTWlzc2luZyA9ICh2YWx1ZSkgPT4gKHtcbiAgdHlwZTogXCJzZXRJZk1pc3NpbmdcIixcbiAgdmFsdWVcbn0pLCB1bnNldCA9ICgpID0+ICh7IHR5cGU6IFwidW5zZXRcIiB9KSwgaW5jID0gKGFtb3VudCA9IDEpID0+ICh7XG4gIHR5cGU6IFwiaW5jXCIsXG4gIGFtb3VudFxufSksIGRlYyA9IChhbW91bnQgPSAxKSA9PiAoe1xuICB0eXBlOiBcImRlY1wiLFxuICBhbW91bnRcbn0pLCBkaWZmTWF0Y2hQYXRjaCA9ICh2YWx1ZSkgPT4gKHtcbiAgdHlwZTogXCJkaWZmTWF0Y2hQYXRjaFwiLFxuICB2YWx1ZVxufSk7XG5mdW5jdGlvbiBpbnNlcnQoaXRlbXMsIHBvc2l0aW9uLCBpbmRleE9yUmVmZXJlbmNlSXRlbSkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwiaW5zZXJ0XCIsXG4gICAgcmVmZXJlbmNlSXRlbTogaW5kZXhPclJlZmVyZW5jZUl0ZW0sXG4gICAgcG9zaXRpb24sXG4gICAgaXRlbXM6IGFycmlmeShpdGVtcylcbiAgfTtcbn1cbmZ1bmN0aW9uIGFwcGVuZChpdGVtcykge1xuICByZXR1cm4gaW5zZXJ0KGl0ZW1zLCBcImFmdGVyXCIsIC0xKTtcbn1cbmZ1bmN0aW9uIHByZXBlbmQoaXRlbXMpIHtcbiAgcmV0dXJuIGluc2VydChpdGVtcywgXCJiZWZvcmVcIiwgMCk7XG59XG5mdW5jdGlvbiBpbnNlcnRCZWZvcmUoaXRlbXMsIGluZGV4T3JSZWZlcmVuY2VJdGVtKSB7XG4gIHJldHVybiBpbnNlcnQoaXRlbXMsIFwiYmVmb3JlXCIsIGluZGV4T3JSZWZlcmVuY2VJdGVtKTtcbn1cbmNvbnN0IGluc2VydEFmdGVyID0gKGl0ZW1zLCBpbmRleE9yUmVmZXJlbmNlSXRlbSkgPT4gaW5zZXJ0KGl0ZW1zLCBcImFmdGVyXCIsIGluZGV4T3JSZWZlcmVuY2VJdGVtKTtcbmZ1bmN0aW9uIHRydW5jYXRlKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJ0cnVuY2F0ZVwiLFxuICAgIHN0YXJ0SW5kZXgsXG4gICAgZW5kSW5kZXhcbiAgfTtcbn1cbmZ1bmN0aW9uIHJlcGxhY2UoaXRlbXMsIHJlZmVyZW5jZUl0ZW0pIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiBcInJlcGxhY2VcIixcbiAgICByZWZlcmVuY2VJdGVtLFxuICAgIGl0ZW1zOiBhcnJpZnkoaXRlbXMpXG4gIH07XG59XG5mdW5jdGlvbiByZW1vdmUocmVmZXJlbmNlSXRlbSkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwicmVtb3ZlXCIsXG4gICAgcmVmZXJlbmNlSXRlbVxuICB9O1xufVxuZnVuY3Rpb24gdXBzZXJ0KGl0ZW1zLCBwb3NpdGlvbiwgcmVmZXJlbmNlSXRlbSkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwidXBzZXJ0XCIsXG4gICAgaXRlbXM6IGFycmlmeShpdGVtcyksXG4gICAgcmVmZXJlbmNlSXRlbSxcbiAgICBwb3NpdGlvblxuICB9O1xufVxuZnVuY3Rpb24gYXV0b0tleXMoZ2VuZXJhdGVLZXkpIHtcbiAgY29uc3QgZW5zdXJlS2V5cyA9IGNyZWF0ZUVuc3VyZUtleXMoZ2VuZXJhdGVLZXkpLCBpbnNlcnQkMSA9IChwb3NpdGlvbiwgcmVmZXJlbmNlSXRlbSwgaXRlbXMpID0+IGluc2VydChlbnN1cmVLZXlzKGl0ZW1zKSwgcG9zaXRpb24sIHJlZmVyZW5jZUl0ZW0pLCB1cHNlcnQkMSA9IChpdGVtcywgcG9zaXRpb24sIHJlZmVyZW5jZUl0ZW0pID0+IHVwc2VydChlbnN1cmVLZXlzKGl0ZW1zKSwgcG9zaXRpb24sIHJlZmVyZW5jZUl0ZW0pLCByZXBsYWNlJDEgPSAoaXRlbXMsIHBvc2l0aW9uLCByZWZlcmVuY2VJdGVtKSA9PiByZXBsYWNlKGVuc3VyZUtleXMoaXRlbXMpLCByZWZlcmVuY2VJdGVtKSwgaW5zZXJ0QmVmb3JlMiA9IChyZWYsIGl0ZW1zKSA9PiBpbnNlcnQkMShcImJlZm9yZVwiLCByZWYsIGl0ZW1zKTtcbiAgcmV0dXJuIHsgaW5zZXJ0OiBpbnNlcnQkMSwgdXBzZXJ0OiB1cHNlcnQkMSwgcmVwbGFjZTogcmVwbGFjZSQxLCBpbnNlcnRCZWZvcmU6IGluc2VydEJlZm9yZTIsIHByZXBlbmQ6IChpdGVtcykgPT4gaW5zZXJ0QmVmb3JlMigwLCBpdGVtcyksIGluc2VydEFmdGVyOiAocmVmLCBpdGVtcykgPT4gaW5zZXJ0JDEoXCJhZnRlclwiLCByZWYsIGl0ZW1zKSwgYXBwZW5kOiAoaXRlbXMpID0+IGluc2VydCQxKFwiYWZ0ZXJcIiwgLTEsIGl0ZW1zKSB9O1xufVxuZnVuY3Rpb24gaGFzS2V5KGl0ZW0pIHtcbiAgcmV0dXJuIFwiX2tleVwiIGluIGl0ZW07XG59XG5mdW5jdGlvbiBjcmVhdGVFbnN1cmVLZXlzKGdlbmVyYXRlS2V5KSB7XG4gIHJldHVybiAoYXJyYXkpID0+IHtcbiAgICBsZXQgZGlkTW9kaWZ5ID0gITE7XG4gICAgY29uc3Qgd2l0aEtleXMgPSBhcnJheS5tYXAoKGl0ZW0pID0+IG5lZWRzS2V5KGl0ZW0pID8gKGRpZE1vZGlmeSA9ICEwLCB7IC4uLml0ZW0sIF9rZXk6IGdlbmVyYXRlS2V5KGl0ZW0pIH0pIDogaXRlbSk7XG4gICAgcmV0dXJuIGRpZE1vZGlmeSA/IHdpdGhLZXlzIDogYXJyYXk7XG4gIH07XG59XG5mdW5jdGlvbiBuZWVkc0tleShhcnJheUl0ZW0pIHtcbiAgcmV0dXJuIGlzT2JqZWN0KGFycmF5SXRlbSkgJiYgIWhhc0tleShhcnJheUl0ZW0pO1xufVxuZnVuY3Rpb24gY3JlYXRlKGRvY3VtZW50KSB7XG4gIHJldHVybiB7IHR5cGU6IFwiY3JlYXRlXCIsIGRvY3VtZW50IH07XG59XG5mdW5jdGlvbiBwYXRjaChpZCwgcGF0Y2hlcywgb3B0aW9ucykge1xuICByZXR1cm4ge1xuICAgIHR5cGU6IFwicGF0Y2hcIixcbiAgICBpZCxcbiAgICBwYXRjaGVzOiBhcnJpZnkocGF0Y2hlcyksXG4gICAgLi4ub3B0aW9ucyA/IHsgb3B0aW9ucyB9IDoge31cbiAgfTtcbn1cbmZ1bmN0aW9uIGF0KHBhdGgsIG9wZXJhdGlvbikge1xuICByZXR1cm4ge1xuICAgIHBhdGg6IHR5cGVvZiBwYXRoID09IFwic3RyaW5nXCIgPyBwYXJzZShwYXRoKSA6IHBhdGgsXG4gICAgb3A6IG9wZXJhdGlvblxuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlSWZOb3RFeGlzdHMoZG9jdW1lbnQpIHtcbiAgcmV0dXJuIHsgdHlwZTogXCJjcmVhdGVJZk5vdEV4aXN0c1wiLCBkb2N1bWVudCB9O1xufVxuZnVuY3Rpb24gY3JlYXRlT3JSZXBsYWNlKGRvY3VtZW50KSB7XG4gIHJldHVybiB7IHR5cGU6IFwiY3JlYXRlT3JSZXBsYWNlXCIsIGRvY3VtZW50IH07XG59XG5mdW5jdGlvbiBkZWxldGVfKGlkKSB7XG4gIHJldHVybiB7IHR5cGU6IFwiZGVsZXRlXCIsIGlkIH07XG59XG5jb25zdCBkZWwgPSBkZWxldGVfLCBkZXN0cm95ID0gZGVsZXRlXztcbmV4cG9ydCB7XG4gIGluZGV4JDEgYXMgQ29tcGFjdEVuY29kZXIsXG4gIGNvbXBhY3QgYXMgQ29tcGFjdEZvcm1hdHRlcixcbiAgaW5kZXggYXMgU2FuaXR5RW5jb2RlcixcbiAgYXBwZW5kLFxuICBhc3NpZ24sXG4gIGF0LFxuICBhdXRvS2V5cyxcbiAgY3JlYXRlLFxuICBjcmVhdGVJZk5vdEV4aXN0cyxcbiAgY3JlYXRlT3JSZXBsYWNlLFxuICBkZWMsXG4gIGRlbCxcbiAgZGVsZXRlXyxcbiAgZGVzdHJveSxcbiAgZGlmZk1hdGNoUGF0Y2gsXG4gIGluYyxcbiAgaW5zZXJ0LFxuICBpbnNlcnRBZnRlcixcbiAgaW5zZXJ0QmVmb3JlLFxuICBwYXRjaCxcbiAgcHJlcGVuZCxcbiAgcmVtb3ZlLFxuICByZXBsYWNlLFxuICBzZXQsXG4gIHNldElmTWlzc2luZyxcbiAgdHJ1bmNhdGUsXG4gIHVuYXNzaWduLFxuICB1bnNldCxcbiAgdXBzZXJ0XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/PointerEvents.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/PointerEvents.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InsertMenu: () => (/* binding */ InsertMenu),\n/* harmony export */   InsertMenuPopover: () => (/* binding */ InsertMenuPopover),\n/* harmony export */   PointerEvents: () => (/* binding */ PointerEvents),\n/* harmony export */   PopoverBackground: () => (/* binding */ PopoverBackground),\n/* harmony export */   PopoverPortal: () => (/* binding */ PopoverPortal),\n/* harmony export */   TelemetryContext: () => (/* binding */ TelemetryContext),\n/* harmony export */   events: () => (/* binding */ events),\n/* harmony export */   getNodeIcon: () => (/* binding */ getNodeIcon),\n/* harmony export */   useTelemetry: () => (/* binding */ useTelemetry)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_compiler_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-compiler-runtime */ \"(ssr)/./node_modules/react-compiler-runtime/dist/index.js\");\n/* harmony import */ var _sanity_insert_menu__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @sanity/insert-menu */ \"(ssr)/./node_modules/@sanity/insert-menu/dist/index.js\");\n/* harmony import */ var _sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @sanity/ui/_visual-editing */ \"(ssr)/./node_modules/@sanity/ui/dist/_chunks-es/_visual-editing.mjs\");\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! styled-components */ \"(ssr)/./node_modules/styled-components/dist/styled-components.esm.js\");\n/* harmony import */ var _sanity_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sanity/icons */ \"(ssr)/./node_modules/@sanity/icons/dist/index.js\");\n\n\n\n\n\n\n\nfunction getNodeIcon(option) {\n  if (!option) return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_3__.CubeIcon, {});\n  if (option.type === \"string\")\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_3__.StringIcon, {});\n  if (option.type === \"number\")\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_3__.NumberIcon, {});\n  const {\n    value: node\n  } = option;\n  if (\"icon\" in option && option.icon)\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { dangerouslySetInnerHTML: {\n      __html: option.icon\n    } });\n  const {\n    type\n  } = node;\n  if (type === \"string\")\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_3__.StringIcon, {});\n  if (type === \"boolean\")\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_3__.CheckmarkCircleIcon, {});\n  if (type === \"number\")\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_3__.NumberIcon, {});\n  if (type === \"array\" || type === \"union\")\n    return (Array.isArray(node.of) ? node.of : [node.of]).some((n) => \"name\" in n && n.name === \"block\") ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_3__.BlockContentIcon, {}) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_3__.ThListIcon, {});\n  if (type === \"object\") {\n    if (option.name === \"image\")\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_3__.ImageIcon, {});\n    if (option.name === \"block\")\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_3__.StringIcon, {});\n  }\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_3__.CubeIcon, {});\n}\nconst scrollBlockStyles = (0,styled_components__WEBPACK_IMPORTED_MODULE_4__.css)`\n  overflow-y: scroll;\n  overscroll-behavior: contain;\n  -ms-overflow-style: none;\n  scrollbar-width: none;\n\n  &:before {\n    content: '';\n    display: block;\n    height: calc(100% + 1px);\n    position: absolute;\n    top: 0;\n    width: 100%;\n    z-index: -1;\n  }\n`, PortalContainer = styled_components__WEBPACK_IMPORTED_MODULE_4__.styled.div`\n  height: 100%;\n  inset: 0;\n  pointer-events: all;\n  position: fixed;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  ${(props) => props.$blockScroll && scrollBlockStyles}\n`, PortalBackground = styled_components__WEBPACK_IMPORTED_MODULE_4__.styled.div`\n  background: transparent;\n  height: 100%;\n  inset: 0;\n  position: absolute;\n  width: 100%;\n`, PopoverPortal = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_2__.c)(2);\n  let t0;\n  return $[0] !== props ? (t0 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_5__.Portal, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PopoverBackground, { ...props }) }), $[0] = props, $[1] = t0) : t0 = $[1], t0;\n}, PopoverBackground = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_2__.c)(7), {\n    children,\n    onDismiss,\n    setBoundaryElement,\n    blockScroll: t0\n  } = props, blockScroll = t0 === void 0 ? !0 : t0, handleClick = _temp$1;\n  let t1;\n  $[0] !== onDismiss ? (t1 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PortalBackground, { onMouseDownCapture: () => {\n    onDismiss?.();\n  } }), $[0] = onDismiss, $[1] = t1) : t1 = $[1];\n  let t2;\n  return $[2] !== blockScroll || $[3] !== children || $[4] !== setBoundaryElement || $[5] !== t1 ? (t2 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(PortalContainer, { \"data-sanity-overlay-element\": !0, ref: setBoundaryElement, onClick: handleClick, $blockScroll: blockScroll, children: [\n    t1,\n    children\n  ] }), $[2] = blockScroll, $[3] = children, $[4] = setBoundaryElement, $[5] = t1, $[6] = t2) : t2 = $[6], t2;\n};\nfunction _temp$1(event) {\n  event.stopPropagation();\n}\nfunction defineEvent(options) {\n  return {\n    type: \"log\",\n    name: options.name,\n    version: options.version,\n    description: options.description,\n    maxSampleRate: options.maxSampleRate,\n    schema: void 0\n  };\n}\nconst events = {\n  \"Visual Editing Drag Sequence Completed\": defineEvent({\n    name: \"Visual Editing Drag Sequence Completed\",\n    description: \"An array is successfully reordered using drag and drop.\",\n    version: 1\n  }),\n  \"Visual Editing Drag Minimap Enabled\": defineEvent({\n    name: \"Visual Editing Drag Minimap Enabled\",\n    description: \"The zoomed-out minimap view is enabled during a drag sequence.\",\n    version: 1\n  }),\n  \"Visual Editing Context Menu Item Removed\": defineEvent({\n    name: \"Visual Editing Context Menu Item Removed\",\n    description: \"An item is removed using the Context Menu.\",\n    version: 1\n  }),\n  \"Visual Editing Context Menu Item Duplicated\": defineEvent({\n    name: \"Visual Editing Context Menu Item Duplicated\",\n    description: \"An item is duplicated using the Context Menu.\",\n    version: 1\n  }),\n  \"Visual Editing Context Menu Item Moved\": defineEvent({\n    name: \"Visual Editing Context Menu Item Moved\",\n    description: \"An item is moved using the Context Menu.\",\n    version: 1\n  }),\n  \"Visual Editing Context Menu Item Inserted\": defineEvent({\n    name: \"Visual Editing Context Menu Item Inserted\",\n    description: \"An item is inserted using the Context Menu.\",\n    version: 1\n  }),\n  \"Visual Editing Insert Menu Item Inserted\": defineEvent({\n    name: \"Visual Editing Insert Menu Item Inserted\",\n    description: \"An item is inserted using the Insert Menu.\",\n    version: 1\n  }),\n  \"Visual Editing Overlay Clicked\": defineEvent({\n    name: \"Visual Editing Overlay Clicked\",\n    description: \"An Overlay is clicked.\",\n    version: 1\n  })\n}, TelemetryContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)(void 0);\nfunction useTelemetry() {\n  const context = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(TelemetryContext);\n  if (!context)\n    throw new Error(\"Telemetry context is missing\");\n  return context;\n}\nconst labels = {\n  \"insert-menu.filter.all-items\": \"All\",\n  \"insert-menu.search.no-results\": \"No results\",\n  \"insert-menu.search.placeholder\": \"Filter types\\u2026\",\n  \"insert-menu.toggle-grid-view.tooltip\": \"Toggle grid view\",\n  \"insert-menu.toggle-list-view.tooltip\": \"Toggle list view\"\n}, InsertMenu = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_2__.c)(11), {\n    node,\n    onSelect\n  } = props;\n  let t0;\n  $[0] !== node.options?.insertMenu ? (t0 = node.options?.insertMenu || {}, $[0] = node.options?.insertMenu, $[1] = t0) : t0 = $[1];\n  const insertMenuOptions = t0;\n  let t1;\n  $[2] !== insertMenuOptions.views ? (t1 = insertMenuOptions.views?.map(_temp), $[2] = insertMenuOptions.views, $[3] = t1) : t1 = $[3];\n  const views = t1;\n  let t2;\n  $[4] !== node.of ? (t2 = node.of.map(_temp2), $[4] = node.of, $[5] = t2) : t2 = $[5];\n  let t3;\n  return $[6] !== insertMenuOptions || $[7] !== onSelect || $[8] !== t2 || $[9] !== views ? (t3 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_sanity_insert_menu__WEBPACK_IMPORTED_MODULE_6__.InsertMenu, { ...insertMenuOptions, labels, schemaTypes: t2, onSelect, views }), $[6] = insertMenuOptions, $[7] = onSelect, $[8] = t2, $[9] = views, $[10] = t3) : t3 = $[10], t3;\n}, InsertMenuPopover = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_2__.c)(11), {\n    node,\n    onDismiss,\n    onSelect,\n    referenceElement\n  } = props;\n  let t0;\n  $[0] !== node || $[1] !== onSelect ? (t0 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(InsertMenu, { node, onSelect }), $[0] = node, $[1] = onSelect, $[2] = t0) : t0 = $[2];\n  const popoverContent = t0, width = (node.options?.insertMenu || {}).views?.some(_temp3) ? 0 : void 0;\n  let t1;\n  $[3] === Symbol.for(\"react.memo_cache_sentinel\") ? (t1 = [\"bottom\"], $[3] = t1) : t1 = $[3];\n  let t2;\n  $[4] !== popoverContent || $[5] !== referenceElement || $[6] !== width ? (t2 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_5__.Popover, { animate: !0, constrainSize: !0, content: popoverContent, fallbackPlacements: t1, open: !0, placement: \"top\", preventOverflow: !0, referenceElement, width }), $[4] = popoverContent, $[5] = referenceElement, $[6] = width, $[7] = t2) : t2 = $[7];\n  let t3;\n  return $[8] !== onDismiss || $[9] !== t2 ? (t3 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(PopoverPortal, { onDismiss, children: t2 }), $[8] = onDismiss, $[9] = t2, $[10] = t3) : t3 = $[10], t3;\n};\nfunction _temp(view) {\n  return view.name === \"grid\" ? {\n    ...view,\n    previewImageUrl: (name) => view.previewImageUrls?.[name]\n  } : view;\n}\nfunction _temp2(type) {\n  return {\n    ...type,\n    icon: getNodeIcon(type)\n  };\n}\nfunction _temp3(view) {\n  return view.name === \"grid\";\n}\nconst PointerEvents = (t0) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_2__.c)(10);\n  let children, rest, style;\n  $[0] !== t0 ? ({\n    children,\n    style,\n    ...rest\n  } = t0, $[0] = t0, $[1] = children, $[2] = rest, $[3] = style) : (children = $[1], rest = $[2], style = $[3]);\n  let t1;\n  $[4] !== style ? (t1 = {\n    ...style,\n    pointerEvents: \"all\"\n  }, $[4] = style, $[5] = t1) : t1 = $[5];\n  let t2;\n  return $[6] !== children || $[7] !== rest || $[8] !== t1 ? (t2 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", { style: t1, \"data-sanity-overlay-element\": !0, ...rest, children }), $[6] = children, $[7] = rest, $[8] = t1, $[9] = t2) : t2 = $[9], t2;\n};\n\n//# sourceMappingURL=PointerEvents.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvdmlzdWFsLWVkaXRpbmcvZGlzdC9fY2h1bmtzLWVzL1BvaW50ZXJFdmVudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFrRDtBQUNKO0FBQ0g7QUFDc0I7QUFDSjtBQUNiO0FBQytFO0FBQy9IO0FBQ0Esc0NBQXNDLHNEQUFHLENBQUMsbURBQVEsSUFBSTtBQUN0RDtBQUNBLDJCQUEyQixzREFBRyxDQUFDLHFEQUFVLElBQUk7QUFDN0M7QUFDQSwyQkFBMkIsc0RBQUcsQ0FBQyxxREFBVSxJQUFJO0FBQzdDO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSwyQkFBMkIsc0RBQUcsVUFBVTtBQUN4QztBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsMkJBQTJCLHNEQUFHLENBQUMscURBQVUsSUFBSTtBQUM3QztBQUNBLDJCQUEyQixzREFBRyxDQUFDLDhEQUFtQixJQUFJO0FBQ3REO0FBQ0EsMkJBQTJCLHNEQUFHLENBQUMscURBQVUsSUFBSTtBQUM3QztBQUNBLDJIQUEySCxzREFBRyxDQUFDLDJEQUFnQixJQUFJLG9CQUFvQixzREFBRyxDQUFDLHFEQUFVLElBQUk7QUFDekw7QUFDQTtBQUNBLDZCQUE2QixzREFBRyxDQUFDLG9EQUFTLElBQUk7QUFDOUM7QUFDQSw2QkFBNkIsc0RBQUcsQ0FBQyxxREFBVSxJQUFJO0FBQy9DO0FBQ0EseUJBQXlCLHNEQUFHLENBQUMsbURBQVEsSUFBSTtBQUN6QztBQUNBLDBCQUEwQixzREFBRztBQUM3QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIscURBQU07QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxJQUFJO0FBQ0osc0JBQXNCLHFEQUFNO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseURBQUM7QUFDYjtBQUNBLGdEQUFnRCxzREFBRyxDQUFDLDZEQUFNLElBQUksMEJBQTBCLHNEQUFHLHNCQUFzQixVQUFVLEdBQUc7QUFDOUgsQ0FBQztBQUNELFlBQVkseURBQUM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLDZDQUE2QyxzREFBRyxxQkFBcUI7QUFDckU7QUFDQSxLQUFLO0FBQ0w7QUFDQSx5SEFBeUgsdURBQUksb0JBQW9CO0FBQ2pKO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQyxxQkFBcUIsb0RBQWE7QUFDbkM7QUFDQSxrQkFBa0IsaURBQVU7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsWUFBWSx5REFBQztBQUNiO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSwwRUFBMEU7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrSEFBa0gsc0RBQUcsQ0FBQywyREFBWSxJQUFJLGdFQUFnRTtBQUN0TSxDQUFDO0FBQ0QsWUFBWSx5REFBQztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsNkRBQTZELHNEQUFHLGVBQWUsZ0JBQWdCO0FBQy9GLG9FQUFvRTtBQUNwRTtBQUNBO0FBQ0E7QUFDQSxpR0FBaUcsc0RBQUcsQ0FBQyw4REFBTyxJQUFJLDJKQUEySjtBQUMzUTtBQUNBLG1FQUFtRSxzREFBRyxrQkFBa0IseUJBQXlCO0FBQ2pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseURBQUM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsbUZBQW1GLHNEQUFHLFVBQVUsaUVBQWlFO0FBQ2pLO0FBV0U7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL25vdXJlbGRpbm1haG1vdWQvZnJlc2hjYXJ0L2RlcGxveS9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvdmlzdWFsLWVkaXRpbmcvZGlzdC9fY2h1bmtzLWVzL1BvaW50ZXJFdmVudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsganN4LCBqc3hzIH0gZnJvbSBcInJlYWN0L2pzeC1ydW50aW1lXCI7XG5pbXBvcnQgeyBjIH0gZnJvbSBcInJlYWN0LWNvbXBpbGVyLXJ1bnRpbWVcIjtcbmltcG9ydCB7IEluc2VydE1lbnUgYXMgSW5zZXJ0TWVudSQxIH0gZnJvbSBcIkBzYW5pdHkvaW5zZXJ0LW1lbnVcIjtcbmltcG9ydCB7IFBvcnRhbCwgUG9wb3ZlciB9IGZyb20gXCJAc2FuaXR5L3VpL192aXN1YWwtZWRpdGluZ1wiO1xuaW1wb3J0IHsgY3NzLCBzdHlsZWQgfSBmcm9tIFwic3R5bGVkLWNvbXBvbmVudHNcIjtcbmltcG9ydCB7IEN1YmVJY29uLCBTdHJpbmdJY29uLCBOdW1iZXJJY29uLCBDaGVja21hcmtDaXJjbGVJY29uLCBCbG9ja0NvbnRlbnRJY29uLCBUaExpc3RJY29uLCBJbWFnZUljb24gfSBmcm9tIFwiQHNhbml0eS9pY29uc1wiO1xuZnVuY3Rpb24gZ2V0Tm9kZUljb24ob3B0aW9uKSB7XG4gIGlmICghb3B0aW9uKSByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChDdWJlSWNvbiwge30pO1xuICBpZiAob3B0aW9uLnR5cGUgPT09IFwic3RyaW5nXCIpXG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goU3RyaW5nSWNvbiwge30pO1xuICBpZiAob3B0aW9uLnR5cGUgPT09IFwibnVtYmVyXCIpXG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goTnVtYmVySWNvbiwge30pO1xuICBjb25zdCB7XG4gICAgdmFsdWU6IG5vZGVcbiAgfSA9IG9wdGlvbjtcbiAgaWYgKFwiaWNvblwiIGluIG9wdGlvbiAmJiBvcHRpb24uaWNvbilcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7XG4gICAgICBfX2h0bWw6IG9wdGlvbi5pY29uXG4gICAgfSB9KTtcbiAgY29uc3Qge1xuICAgIHR5cGVcbiAgfSA9IG5vZGU7XG4gIGlmICh0eXBlID09PSBcInN0cmluZ1wiKVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFN0cmluZ0ljb24sIHt9KTtcbiAgaWYgKHR5cGUgPT09IFwiYm9vbGVhblwiKVxuICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KENoZWNrbWFya0NpcmNsZUljb24sIHt9KTtcbiAgaWYgKHR5cGUgPT09IFwibnVtYmVyXCIpXG4gICAgcmV0dXJuIC8qIEBfX1BVUkVfXyAqLyBqc3goTnVtYmVySWNvbiwge30pO1xuICBpZiAodHlwZSA9PT0gXCJhcnJheVwiIHx8IHR5cGUgPT09IFwidW5pb25cIilcbiAgICByZXR1cm4gKEFycmF5LmlzQXJyYXkobm9kZS5vZikgPyBub2RlLm9mIDogW25vZGUub2ZdKS5zb21lKChuKSA9PiBcIm5hbWVcIiBpbiBuICYmIG4ubmFtZSA9PT0gXCJibG9ja1wiKSA/IC8qIEBfX1BVUkVfXyAqLyBqc3goQmxvY2tDb250ZW50SWNvbiwge30pIDogLyogQF9fUFVSRV9fICovIGpzeChUaExpc3RJY29uLCB7fSk7XG4gIGlmICh0eXBlID09PSBcIm9iamVjdFwiKSB7XG4gICAgaWYgKG9wdGlvbi5uYW1lID09PSBcImltYWdlXCIpXG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChJbWFnZUljb24sIHt9KTtcbiAgICBpZiAob3B0aW9uLm5hbWUgPT09IFwiYmxvY2tcIilcbiAgICAgIHJldHVybiAvKiBAX19QVVJFX18gKi8ganN4KFN0cmluZ0ljb24sIHt9KTtcbiAgfVxuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChDdWJlSWNvbiwge30pO1xufVxuY29uc3Qgc2Nyb2xsQmxvY2tTdHlsZXMgPSBjc3NgXG4gIG92ZXJmbG93LXk6IHNjcm9sbDtcbiAgb3ZlcnNjcm9sbC1iZWhhdmlvcjogY29udGFpbjtcbiAgLW1zLW92ZXJmbG93LXN0eWxlOiBub25lO1xuICBzY3JvbGxiYXItd2lkdGg6IG5vbmU7XG5cbiAgJjpiZWZvcmUge1xuICAgIGNvbnRlbnQ6ICcnO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIGhlaWdodDogY2FsYygxMDAlICsgMXB4KTtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHotaW5kZXg6IC0xO1xuICB9XG5gLCBQb3J0YWxDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICBoZWlnaHQ6IDEwMCU7XG4gIGluc2V0OiAwO1xuICBwb2ludGVyLWV2ZW50czogYWxsO1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAkeyhwcm9wcykgPT4gcHJvcHMuJGJsb2NrU2Nyb2xsICYmIHNjcm9sbEJsb2NrU3R5bGVzfVxuYCwgUG9ydGFsQmFja2dyb3VuZCA9IHN0eWxlZC5kaXZgXG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBoZWlnaHQ6IDEwMCU7XG4gIGluc2V0OiAwO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAxMDAlO1xuYCwgUG9wb3ZlclBvcnRhbCA9IChwcm9wcykgPT4ge1xuICBjb25zdCAkID0gYygyKTtcbiAgbGV0IHQwO1xuICByZXR1cm4gJFswXSAhPT0gcHJvcHMgPyAodDAgPSAvKiBAX19QVVJFX18gKi8ganN4KFBvcnRhbCwgeyBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChQb3BvdmVyQmFja2dyb3VuZCwgeyAuLi5wcm9wcyB9KSB9KSwgJFswXSA9IHByb3BzLCAkWzFdID0gdDApIDogdDAgPSAkWzFdLCB0MDtcbn0sIFBvcG92ZXJCYWNrZ3JvdW5kID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0ICQgPSBjKDcpLCB7XG4gICAgY2hpbGRyZW4sXG4gICAgb25EaXNtaXNzLFxuICAgIHNldEJvdW5kYXJ5RWxlbWVudCxcbiAgICBibG9ja1Njcm9sbDogdDBcbiAgfSA9IHByb3BzLCBibG9ja1Njcm9sbCA9IHQwID09PSB2b2lkIDAgPyAhMCA6IHQwLCBoYW5kbGVDbGljayA9IF90ZW1wJDE7XG4gIGxldCB0MTtcbiAgJFswXSAhPT0gb25EaXNtaXNzID8gKHQxID0gLyogQF9fUFVSRV9fICovIGpzeChQb3J0YWxCYWNrZ3JvdW5kLCB7IG9uTW91c2VEb3duQ2FwdHVyZTogKCkgPT4ge1xuICAgIG9uRGlzbWlzcz8uKCk7XG4gIH0gfSksICRbMF0gPSBvbkRpc21pc3MsICRbMV0gPSB0MSkgOiB0MSA9ICRbMV07XG4gIGxldCB0MjtcbiAgcmV0dXJuICRbMl0gIT09IGJsb2NrU2Nyb2xsIHx8ICRbM10gIT09IGNoaWxkcmVuIHx8ICRbNF0gIT09IHNldEJvdW5kYXJ5RWxlbWVudCB8fCAkWzVdICE9PSB0MSA/ICh0MiA9IC8qIEBfX1BVUkVfXyAqLyBqc3hzKFBvcnRhbENvbnRhaW5lciwgeyBcImRhdGEtc2FuaXR5LW92ZXJsYXktZWxlbWVudFwiOiAhMCwgcmVmOiBzZXRCb3VuZGFyeUVsZW1lbnQsIG9uQ2xpY2s6IGhhbmRsZUNsaWNrLCAkYmxvY2tTY3JvbGw6IGJsb2NrU2Nyb2xsLCBjaGlsZHJlbjogW1xuICAgIHQxLFxuICAgIGNoaWxkcmVuXG4gIF0gfSksICRbMl0gPSBibG9ja1Njcm9sbCwgJFszXSA9IGNoaWxkcmVuLCAkWzRdID0gc2V0Qm91bmRhcnlFbGVtZW50LCAkWzVdID0gdDEsICRbNl0gPSB0MikgOiB0MiA9ICRbNl0sIHQyO1xufTtcbmZ1bmN0aW9uIF90ZW1wJDEoZXZlbnQpIHtcbiAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG59XG5mdW5jdGlvbiBkZWZpbmVFdmVudChvcHRpb25zKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogXCJsb2dcIixcbiAgICBuYW1lOiBvcHRpb25zLm5hbWUsXG4gICAgdmVyc2lvbjogb3B0aW9ucy52ZXJzaW9uLFxuICAgIGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uLFxuICAgIG1heFNhbXBsZVJhdGU6IG9wdGlvbnMubWF4U2FtcGxlUmF0ZSxcbiAgICBzY2hlbWE6IHZvaWQgMFxuICB9O1xufVxuY29uc3QgZXZlbnRzID0ge1xuICBcIlZpc3VhbCBFZGl0aW5nIERyYWcgU2VxdWVuY2UgQ29tcGxldGVkXCI6IGRlZmluZUV2ZW50KHtcbiAgICBuYW1lOiBcIlZpc3VhbCBFZGl0aW5nIERyYWcgU2VxdWVuY2UgQ29tcGxldGVkXCIsXG4gICAgZGVzY3JpcHRpb246IFwiQW4gYXJyYXkgaXMgc3VjY2Vzc2Z1bGx5IHJlb3JkZXJlZCB1c2luZyBkcmFnIGFuZCBkcm9wLlwiLFxuICAgIHZlcnNpb246IDFcbiAgfSksXG4gIFwiVmlzdWFsIEVkaXRpbmcgRHJhZyBNaW5pbWFwIEVuYWJsZWRcIjogZGVmaW5lRXZlbnQoe1xuICAgIG5hbWU6IFwiVmlzdWFsIEVkaXRpbmcgRHJhZyBNaW5pbWFwIEVuYWJsZWRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJUaGUgem9vbWVkLW91dCBtaW5pbWFwIHZpZXcgaXMgZW5hYmxlZCBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLlwiLFxuICAgIHZlcnNpb246IDFcbiAgfSksXG4gIFwiVmlzdWFsIEVkaXRpbmcgQ29udGV4dCBNZW51IEl0ZW0gUmVtb3ZlZFwiOiBkZWZpbmVFdmVudCh7XG4gICAgbmFtZTogXCJWaXN1YWwgRWRpdGluZyBDb250ZXh0IE1lbnUgSXRlbSBSZW1vdmVkXCIsXG4gICAgZGVzY3JpcHRpb246IFwiQW4gaXRlbSBpcyByZW1vdmVkIHVzaW5nIHRoZSBDb250ZXh0IE1lbnUuXCIsXG4gICAgdmVyc2lvbjogMVxuICB9KSxcbiAgXCJWaXN1YWwgRWRpdGluZyBDb250ZXh0IE1lbnUgSXRlbSBEdXBsaWNhdGVkXCI6IGRlZmluZUV2ZW50KHtcbiAgICBuYW1lOiBcIlZpc3VhbCBFZGl0aW5nIENvbnRleHQgTWVudSBJdGVtIER1cGxpY2F0ZWRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJBbiBpdGVtIGlzIGR1cGxpY2F0ZWQgdXNpbmcgdGhlIENvbnRleHQgTWVudS5cIixcbiAgICB2ZXJzaW9uOiAxXG4gIH0pLFxuICBcIlZpc3VhbCBFZGl0aW5nIENvbnRleHQgTWVudSBJdGVtIE1vdmVkXCI6IGRlZmluZUV2ZW50KHtcbiAgICBuYW1lOiBcIlZpc3VhbCBFZGl0aW5nIENvbnRleHQgTWVudSBJdGVtIE1vdmVkXCIsXG4gICAgZGVzY3JpcHRpb246IFwiQW4gaXRlbSBpcyBtb3ZlZCB1c2luZyB0aGUgQ29udGV4dCBNZW51LlwiLFxuICAgIHZlcnNpb246IDFcbiAgfSksXG4gIFwiVmlzdWFsIEVkaXRpbmcgQ29udGV4dCBNZW51IEl0ZW0gSW5zZXJ0ZWRcIjogZGVmaW5lRXZlbnQoe1xuICAgIG5hbWU6IFwiVmlzdWFsIEVkaXRpbmcgQ29udGV4dCBNZW51IEl0ZW0gSW5zZXJ0ZWRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJBbiBpdGVtIGlzIGluc2VydGVkIHVzaW5nIHRoZSBDb250ZXh0IE1lbnUuXCIsXG4gICAgdmVyc2lvbjogMVxuICB9KSxcbiAgXCJWaXN1YWwgRWRpdGluZyBJbnNlcnQgTWVudSBJdGVtIEluc2VydGVkXCI6IGRlZmluZUV2ZW50KHtcbiAgICBuYW1lOiBcIlZpc3VhbCBFZGl0aW5nIEluc2VydCBNZW51IEl0ZW0gSW5zZXJ0ZWRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJBbiBpdGVtIGlzIGluc2VydGVkIHVzaW5nIHRoZSBJbnNlcnQgTWVudS5cIixcbiAgICB2ZXJzaW9uOiAxXG4gIH0pLFxuICBcIlZpc3VhbCBFZGl0aW5nIE92ZXJsYXkgQ2xpY2tlZFwiOiBkZWZpbmVFdmVudCh7XG4gICAgbmFtZTogXCJWaXN1YWwgRWRpdGluZyBPdmVybGF5IENsaWNrZWRcIixcbiAgICBkZXNjcmlwdGlvbjogXCJBbiBPdmVybGF5IGlzIGNsaWNrZWQuXCIsXG4gICAgdmVyc2lvbjogMVxuICB9KVxufSwgVGVsZW1ldHJ5Q29udGV4dCA9IGNyZWF0ZUNvbnRleHQodm9pZCAwKTtcbmZ1bmN0aW9uIHVzZVRlbGVtZXRyeSgpIHtcbiAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoVGVsZW1ldHJ5Q29udGV4dCk7XG4gIGlmICghY29udGV4dClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUZWxlbWV0cnkgY29udGV4dCBpcyBtaXNzaW5nXCIpO1xuICByZXR1cm4gY29udGV4dDtcbn1cbmNvbnN0IGxhYmVscyA9IHtcbiAgXCJpbnNlcnQtbWVudS5maWx0ZXIuYWxsLWl0ZW1zXCI6IFwiQWxsXCIsXG4gIFwiaW5zZXJ0LW1lbnUuc2VhcmNoLm5vLXJlc3VsdHNcIjogXCJObyByZXN1bHRzXCIsXG4gIFwiaW5zZXJ0LW1lbnUuc2VhcmNoLnBsYWNlaG9sZGVyXCI6IFwiRmlsdGVyIHR5cGVzXFx1MjAyNlwiLFxuICBcImluc2VydC1tZW51LnRvZ2dsZS1ncmlkLXZpZXcudG9vbHRpcFwiOiBcIlRvZ2dsZSBncmlkIHZpZXdcIixcbiAgXCJpbnNlcnQtbWVudS50b2dnbGUtbGlzdC12aWV3LnRvb2x0aXBcIjogXCJUb2dnbGUgbGlzdCB2aWV3XCJcbn0sIEluc2VydE1lbnUgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgJCA9IGMoMTEpLCB7XG4gICAgbm9kZSxcbiAgICBvblNlbGVjdFxuICB9ID0gcHJvcHM7XG4gIGxldCB0MDtcbiAgJFswXSAhPT0gbm9kZS5vcHRpb25zPy5pbnNlcnRNZW51ID8gKHQwID0gbm9kZS5vcHRpb25zPy5pbnNlcnRNZW51IHx8IHt9LCAkWzBdID0gbm9kZS5vcHRpb25zPy5pbnNlcnRNZW51LCAkWzFdID0gdDApIDogdDAgPSAkWzFdO1xuICBjb25zdCBpbnNlcnRNZW51T3B0aW9ucyA9IHQwO1xuICBsZXQgdDE7XG4gICRbMl0gIT09IGluc2VydE1lbnVPcHRpb25zLnZpZXdzID8gKHQxID0gaW5zZXJ0TWVudU9wdGlvbnMudmlld3M/Lm1hcChfdGVtcCksICRbMl0gPSBpbnNlcnRNZW51T3B0aW9ucy52aWV3cywgJFszXSA9IHQxKSA6IHQxID0gJFszXTtcbiAgY29uc3Qgdmlld3MgPSB0MTtcbiAgbGV0IHQyO1xuICAkWzRdICE9PSBub2RlLm9mID8gKHQyID0gbm9kZS5vZi5tYXAoX3RlbXAyKSwgJFs0XSA9IG5vZGUub2YsICRbNV0gPSB0MikgOiB0MiA9ICRbNV07XG4gIGxldCB0MztcbiAgcmV0dXJuICRbNl0gIT09IGluc2VydE1lbnVPcHRpb25zIHx8ICRbN10gIT09IG9uU2VsZWN0IHx8ICRbOF0gIT09IHQyIHx8ICRbOV0gIT09IHZpZXdzID8gKHQzID0gLyogQF9fUFVSRV9fICovIGpzeChJbnNlcnRNZW51JDEsIHsgLi4uaW5zZXJ0TWVudU9wdGlvbnMsIGxhYmVscywgc2NoZW1hVHlwZXM6IHQyLCBvblNlbGVjdCwgdmlld3MgfSksICRbNl0gPSBpbnNlcnRNZW51T3B0aW9ucywgJFs3XSA9IG9uU2VsZWN0LCAkWzhdID0gdDIsICRbOV0gPSB2aWV3cywgJFsxMF0gPSB0MykgOiB0MyA9ICRbMTBdLCB0Mztcbn0sIEluc2VydE1lbnVQb3BvdmVyID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0ICQgPSBjKDExKSwge1xuICAgIG5vZGUsXG4gICAgb25EaXNtaXNzLFxuICAgIG9uU2VsZWN0LFxuICAgIHJlZmVyZW5jZUVsZW1lbnRcbiAgfSA9IHByb3BzO1xuICBsZXQgdDA7XG4gICRbMF0gIT09IG5vZGUgfHwgJFsxXSAhPT0gb25TZWxlY3QgPyAodDAgPSAvKiBAX19QVVJFX18gKi8ganN4KEluc2VydE1lbnUsIHsgbm9kZSwgb25TZWxlY3QgfSksICRbMF0gPSBub2RlLCAkWzFdID0gb25TZWxlY3QsICRbMl0gPSB0MCkgOiB0MCA9ICRbMl07XG4gIGNvbnN0IHBvcG92ZXJDb250ZW50ID0gdDAsIHdpZHRoID0gKG5vZGUub3B0aW9ucz8uaW5zZXJ0TWVudSB8fCB7fSkudmlld3M/LnNvbWUoX3RlbXAzKSA/IDAgOiB2b2lkIDA7XG4gIGxldCB0MTtcbiAgJFszXSA9PT0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDEgPSBbXCJib3R0b21cIl0sICRbM10gPSB0MSkgOiB0MSA9ICRbM107XG4gIGxldCB0MjtcbiAgJFs0XSAhPT0gcG9wb3ZlckNvbnRlbnQgfHwgJFs1XSAhPT0gcmVmZXJlbmNlRWxlbWVudCB8fCAkWzZdICE9PSB3aWR0aCA/ICh0MiA9IC8qIEBfX1BVUkVfXyAqLyBqc3goUG9wb3ZlciwgeyBhbmltYXRlOiAhMCwgY29uc3RyYWluU2l6ZTogITAsIGNvbnRlbnQ6IHBvcG92ZXJDb250ZW50LCBmYWxsYmFja1BsYWNlbWVudHM6IHQxLCBvcGVuOiAhMCwgcGxhY2VtZW50OiBcInRvcFwiLCBwcmV2ZW50T3ZlcmZsb3c6ICEwLCByZWZlcmVuY2VFbGVtZW50LCB3aWR0aCB9KSwgJFs0XSA9IHBvcG92ZXJDb250ZW50LCAkWzVdID0gcmVmZXJlbmNlRWxlbWVudCwgJFs2XSA9IHdpZHRoLCAkWzddID0gdDIpIDogdDIgPSAkWzddO1xuICBsZXQgdDM7XG4gIHJldHVybiAkWzhdICE9PSBvbkRpc21pc3MgfHwgJFs5XSAhPT0gdDIgPyAodDMgPSAvKiBAX19QVVJFX18gKi8ganN4KFBvcG92ZXJQb3J0YWwsIHsgb25EaXNtaXNzLCBjaGlsZHJlbjogdDIgfSksICRbOF0gPSBvbkRpc21pc3MsICRbOV0gPSB0MiwgJFsxMF0gPSB0MykgOiB0MyA9ICRbMTBdLCB0Mztcbn07XG5mdW5jdGlvbiBfdGVtcCh2aWV3KSB7XG4gIHJldHVybiB2aWV3Lm5hbWUgPT09IFwiZ3JpZFwiID8ge1xuICAgIC4uLnZpZXcsXG4gICAgcHJldmlld0ltYWdlVXJsOiAobmFtZSkgPT4gdmlldy5wcmV2aWV3SW1hZ2VVcmxzPy5bbmFtZV1cbiAgfSA6IHZpZXc7XG59XG5mdW5jdGlvbiBfdGVtcDIodHlwZSkge1xuICByZXR1cm4ge1xuICAgIC4uLnR5cGUsXG4gICAgaWNvbjogZ2V0Tm9kZUljb24odHlwZSlcbiAgfTtcbn1cbmZ1bmN0aW9uIF90ZW1wMyh2aWV3KSB7XG4gIHJldHVybiB2aWV3Lm5hbWUgPT09IFwiZ3JpZFwiO1xufVxuY29uc3QgUG9pbnRlckV2ZW50cyA9ICh0MCkgPT4ge1xuICBjb25zdCAkID0gYygxMCk7XG4gIGxldCBjaGlsZHJlbiwgcmVzdCwgc3R5bGU7XG4gICRbMF0gIT09IHQwID8gKHtcbiAgICBjaGlsZHJlbixcbiAgICBzdHlsZSxcbiAgICAuLi5yZXN0XG4gIH0gPSB0MCwgJFswXSA9IHQwLCAkWzFdID0gY2hpbGRyZW4sICRbMl0gPSByZXN0LCAkWzNdID0gc3R5bGUpIDogKGNoaWxkcmVuID0gJFsxXSwgcmVzdCA9ICRbMl0sIHN0eWxlID0gJFszXSk7XG4gIGxldCB0MTtcbiAgJFs0XSAhPT0gc3R5bGUgPyAodDEgPSB7XG4gICAgLi4uc3R5bGUsXG4gICAgcG9pbnRlckV2ZW50czogXCJhbGxcIlxuICB9LCAkWzRdID0gc3R5bGUsICRbNV0gPSB0MSkgOiB0MSA9ICRbNV07XG4gIGxldCB0MjtcbiAgcmV0dXJuICRbNl0gIT09IGNoaWxkcmVuIHx8ICRbN10gIT09IHJlc3QgfHwgJFs4XSAhPT0gdDEgPyAodDIgPSAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgc3R5bGU6IHQxLCBcImRhdGEtc2FuaXR5LW92ZXJsYXktZWxlbWVudFwiOiAhMCwgLi4ucmVzdCwgY2hpbGRyZW4gfSksICRbNl0gPSBjaGlsZHJlbiwgJFs3XSA9IHJlc3QsICRbOF0gPSB0MSwgJFs5XSA9IHQyKSA6IHQyID0gJFs5XSwgdDI7XG59O1xuZXhwb3J0IHtcbiAgSW5zZXJ0TWVudSxcbiAgSW5zZXJ0TWVudVBvcG92ZXIsXG4gIFBvaW50ZXJFdmVudHMsXG4gIFBvcG92ZXJCYWNrZ3JvdW5kLFxuICBQb3BvdmVyUG9ydGFsLFxuICBUZWxlbWV0cnlDb250ZXh0LFxuICBldmVudHMsXG4gIGdldE5vZGVJY29uLFxuICB1c2VUZWxlbWV0cnlcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb2ludGVyRXZlbnRzLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/PointerEvents.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/SharedStateContext.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/SharedStateContext.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SharedStateContext: () => (/* binding */ SharedStateContext),\n/* harmony export */   createOverlayController: () => (/* binding */ createOverlayController),\n/* harmony export */   sanityNodesExistInSameArray: () => (/* binding */ sanityNodesExistInSameArray),\n/* harmony export */   useOptimistic: () => (/* binding */ useOptimistic),\n/* harmony export */   v4: () => (/* binding */ v4)\n/* harmony export */ });\n/* harmony import */ var react_compiler_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-compiler-runtime */ \"(ssr)/./node_modules/react-compiler-runtime/dist/index.js\");\n/* harmony import */ var _sanity_client_csm__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @sanity/client/csm */ \"(ssr)/./node_modules/@sanity/client/dist/_chunks-es/resolveEditInfo.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./context.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/context.js\");\n/* harmony import */ var _mutations_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./mutations.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/mutations.js\");\n/* harmony import */ var _sanity_visual_editing_csm__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @sanity/visual-editing-csm */ \"(ssr)/./node_modules/@sanity/visual-editing-csm/dist/index.js\");\n/* harmony import */ var _vercel_stega__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @vercel/stega */ \"(ssr)/./node_modules/@vercel/stega/dist/index.mjs\");\n\n\n\n\n\n\n\nfunction useOptimistic(passthrough, reducer) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_0__.c)(17), [pristine, setPristine] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(!0), [optimistic, setOptimistic] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(passthrough), [lastEvent, setLastEvent] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null), [lastPassthrough, setLastPassthrough] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(passthrough), actor = (0,_mutations_js__WEBPACK_IMPORTED_MODULE_3__.useOptimisticActor)(), reduceStateFromActionRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  let t0, t1;\n  $[0] !== reducer ? (t0 = () => {\n    reduceStateFromActionRef.current = (action, prevState) => (Array.isArray(reducer) ? reducer : [reducer]).reduce((acc, reducer_0) => reducer_0(acc, {\n      document: action.document,\n      id: (0,_sanity_client_csm__WEBPACK_IMPORTED_MODULE_4__.getPublishedId)(action.id),\n      originalId: action.id,\n      type: action.type\n    }), prevState);\n  }, t1 = [reducer], $[0] = reducer, $[1] = t0, $[2] = t1) : (t0 = $[1], t1 = $[2]), (0,react__WEBPACK_IMPORTED_MODULE_1__.useInsertionEffect)(t0, t1);\n  let t2;\n  $[3] !== passthrough ? (t2 = () => setLastPassthrough(passthrough), $[3] = passthrough, $[4] = t2) : t2 = $[4];\n  const updateLastPassthroughRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(t2);\n  let t3, t4;\n  $[5] !== passthrough ? (t3 = () => {\n    updateLastPassthroughRef.current = () => setLastPassthrough(passthrough);\n  }, t4 = [passthrough], $[5] = passthrough, $[6] = t3, $[7] = t4) : (t3 = $[6], t4 = $[7]), (0,react__WEBPACK_IMPORTED_MODULE_1__.useInsertionEffect)(t3, t4);\n  let t5, t6;\n  $[8] !== actor ? (t5 = () => {\n    if ((0,_context_js__WEBPACK_IMPORTED_MODULE_5__.isEmptyActor)(actor))\n      return;\n    let pristineTimeout;\n    const rebasedSub = actor.on(\"rebased.local\", (_event) => {\n      const event = {\n        document: _event.document,\n        id: _event.id,\n        originalId: (0,_sanity_client_csm__WEBPACK_IMPORTED_MODULE_4__.getPublishedId)(_event.id),\n        type: \"mutate\"\n      };\n      setOptimistic((prevState_0) => reduceStateFromActionRef.current ? reduceStateFromActionRef.current(event, prevState_0) : prevState_0), setLastEvent(event), updateLastPassthroughRef.current(), setPristine(!1), clearTimeout(pristineTimeout);\n    }), pristineSub = actor.on(\"pristine\", () => {\n      pristineTimeout = setTimeout(() => {\n        (0,react__WEBPACK_IMPORTED_MODULE_1__.startTransition)(() => setPristine(!0));\n      }, 15e3);\n    });\n    return () => {\n      rebasedSub.unsubscribe(), pristineSub.unsubscribe();\n    };\n  }, t6 = [actor], $[8] = actor, $[9] = t5, $[10] = t6) : (t5 = $[9], t6 = $[10]), (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(t5, t6);\n  let t7, t8;\n  return $[11] !== lastEvent || $[12] !== lastPassthrough || $[13] !== passthrough || $[14] !== pristine ? (t7 = () => {\n    if (!pristine) {\n      if (!lastEvent)\n        throw new Error(\"No last event found when syncing passthrough\");\n      lastPassthrough !== passthrough && (0,react__WEBPACK_IMPORTED_MODULE_1__.startTransition)(() => {\n        setOptimistic(reduceStateFromActionRef.current ? reduceStateFromActionRef.current(lastEvent, passthrough) : passthrough), setLastPassthrough(passthrough);\n      });\n    }\n  }, t8 = [lastEvent, lastPassthrough, passthrough, pristine], $[11] = lastEvent, $[12] = lastPassthrough, $[13] = passthrough, $[14] = pristine, $[15] = t7, $[16] = t8) : (t7 = $[15], t8 = $[16]), (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(t7, t8), pristine ? passthrough : optimistic;\n}\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i)\n  byteToHex.push((i + 256).toString(16).slice(1));\nfunction unsafeStringify(arr, offset = 0) {\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + \"-\" + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + \"-\" + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + \"-\" + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + \"-\" + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nfunction rng() {\n  if (!getRandomValues) {\n    if (typeof crypto > \"u\" || !crypto.getRandomValues)\n      throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");\n    getRandomValues = crypto.getRandomValues.bind(crypto);\n  }\n  return getRandomValues(rnds8);\n}\nconst randomUUID = typeof crypto < \"u\" && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nvar native = {\n  randomUUID\n};\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !options)\n    return native.randomUUID();\n  options = options || {};\n  const rnds = options.random ?? options.rng?.() ?? rng();\n  if (rnds.length < 16)\n    throw new Error(\"Random bytes length must be >= 16\");\n  return rnds[6] = rnds[6] & 15 | 64, rnds[8] = rnds[8] & 63 | 128, unsafeStringify(rnds);\n}\nfunction getRect(element) {\n  const domRect = element.getBoundingClientRect();\n  return {\n    x: domRect.x + scrollX,\n    y: domRect.y + scrollY,\n    w: domRect.width,\n    h: domRect.height\n  };\n}\nfunction offsetRect(rect, px, axis) {\n  return axis === \"x\" ? {\n    x: rect.x + px,\n    y: rect.y,\n    w: rect.w - 2 * px,\n    h: rect.h\n  } : {\n    x: rect.x,\n    y: rect.y + px,\n    w: rect.w,\n    h: rect.h - 2 * px\n  };\n}\nfunction rayIntersect(l1, l2) {\n  const {\n    x1,\n    y1,\n    x2,\n    y2\n  } = l1, {\n    x1: x3,\n    y1: y3,\n    x2: x4,\n    y2: y4\n  } = l2;\n  if (x1 === x2 && y1 === y2 || x3 === x4 && y3 === y4)\n    return !1;\n  const denominator = (y4 - y3) * (x2 - x1) - (x4 - x3) * (y2 - y1);\n  if (denominator === 0)\n    return !1;\n  const ua = ((x4 - x3) * (y1 - y3) - (y4 - y3) * (x1 - x3)) / denominator, ub = ((x2 - x1) * (y1 - y3) - (y2 - y1) * (x1 - x3)) / denominator;\n  if (ua < 0 || ua > 1 || ub < 0 || ub > 1)\n    return !1;\n  const x = x1 + ua * (x2 - x1), y = y1 + ua * (y2 - y1);\n  return {\n    x,\n    y\n  };\n}\nfunction rectEqual(r1, r2) {\n  return r1.x === r2.x && r1.y === r2.y && r1.w === r2.w && r1.h === r2.h;\n}\nfunction rayRectIntersections(line, rect) {\n  const rectLines = [{\n    x1: rect.x,\n    y1: rect.y,\n    x2: rect.x + rect.w,\n    y2: rect.y\n  }, {\n    x1: rect.x + rect.w,\n    y1: rect.y,\n    x2: rect.x + rect.w,\n    y2: rect.y + rect.h\n  }, {\n    x1: rect.x + rect.w,\n    y1: rect.y + rect.h,\n    x2: rect.x,\n    y2: rect.y + rect.h\n  }, {\n    x1: rect.x,\n    y1: rect.y + rect.h,\n    x2: rect.x,\n    y2: rect.y\n  }], intersections = [];\n  for (let i = 0; i < rectLines.length; i++) {\n    const intersection = rayIntersect(line, rectLines[i]);\n    if (intersection) {\n      let isDuplicate = !1;\n      for (let j = 0; j < intersections.length; j++)\n        intersections[j].x === intersection.x && intersections[j].y === intersection.y && (isDuplicate = !0);\n      isDuplicate || intersections.push(intersection);\n    }\n  }\n  return intersections.length === 0 ? !1 : intersections.sort((a, b) => pointDist(a, {\n    x: line.x1,\n    y: line.y1\n  }) - pointDist(b, {\n    x: line.x1,\n    y: line.y1\n  }));\n}\nfunction pointDist(p1, p2) {\n  const a = p1.x - p2.x, b = p1.y - p2.y;\n  return Math.sqrt(a * a + b * b);\n}\nfunction pointInBounds(point, bounds) {\n  const withinX = point.x >= bounds.x && point.x <= bounds.x + bounds.w, withinY = point.y >= bounds.y && point.y <= bounds.y + bounds.h;\n  return withinX && withinY;\n}\nfunction findClosestIntersection(ray, targets, flow) {\n  const rayOrigin = {\n    x: ray.x1,\n    y: ray.y1\n  };\n  if (targets.some((t) => pointInBounds(rayOrigin, offsetRect(t, Math.min(t.w, t.h) / 10, flow === \"horizontal\" ? \"x\" : \"y\")))) return null;\n  let closestIntersection, closestRect;\n  for (const target of targets) {\n    const intersections = rayRectIntersections(ray, offsetRect(target, Math.min(target.w, target.h) / 10, flow === \"horizontal\" ? \"x\" : \"y\"));\n    if (intersections) {\n      const firstIntersection = intersections[0];\n      closestIntersection ? pointDist(rayOrigin, firstIntersection) < pointDist(rayOrigin, closestIntersection) && (closestIntersection = firstIntersection, closestRect = target) : (closestIntersection = firstIntersection, closestRect = target);\n    }\n  }\n  return closestRect || null;\n}\nfunction scaleRect(rect, scale, origin) {\n  const {\n    x,\n    y,\n    w,\n    h\n  } = rect, {\n    x: originX,\n    y: originY\n  } = origin, newX = originX + (x - originX) * scale, newY = originY + (y - originY) * scale, newWidth = w * scale, newHeight = h * scale;\n  return {\n    x: newX,\n    y: newY,\n    w: newWidth,\n    h: newHeight\n  };\n}\nfunction getRectGroupXExtent(rects) {\n  const minGroupX = Math.max(0, Math.min(...rects.map((r) => r.x))), maxGroupX = Math.min(document.body.offsetWidth, Math.max(...rects.map((r) => r.x + r.w)));\n  return {\n    min: minGroupX,\n    max: maxGroupX,\n    width: maxGroupX - minGroupX\n  };\n}\nfunction getRectGroupYExtent(rects) {\n  const minGroupY = Math.max(0, Math.min(...rects.map((r) => r.y))), maxGroupY = Math.min(document.body.scrollHeight, Math.max(...rects.map((r) => r.y + r.h)));\n  return {\n    min: minGroupY,\n    max: maxGroupY,\n    height: maxGroupY - minGroupY\n  };\n}\nfunction calcTargetFlow(targets) {\n  return targets.some((t1) => targets.filter((t2) => !rectEqual(t1, t2)).some((t2) => t1.y === t2.y)) ? \"horizontal\" : \"vertical\";\n}\nfunction calcInsertPosition(origin, targets, flow) {\n  if (flow === \"horizontal\") {\n    const rayLeft = {\n      x1: origin.x,\n      y1: origin.y,\n      x2: origin.x - 1e8,\n      y2: origin.y\n    }, rayRight = {\n      x1: origin.x,\n      y1: origin.y,\n      x2: origin.x + 1e8,\n      y2: origin.y\n    };\n    return {\n      left: findClosestIntersection(rayLeft, targets, flow),\n      right: findClosestIntersection(rayRight, targets, flow)\n    };\n  } else {\n    const rayTop = {\n      x1: origin.x,\n      y1: origin.y,\n      x2: origin.x,\n      y2: origin.y - 1e8\n    }, rayBottom = {\n      x1: origin.x,\n      y1: origin.y,\n      x2: origin.x,\n      y2: origin.y + 1e8\n    };\n    return {\n      top: findClosestIntersection(rayTop, targets, flow),\n      bottom: findClosestIntersection(rayBottom, targets, flow)\n    };\n  }\n}\nfunction findRectSanityData(rect, overlayGroup) {\n  return overlayGroup.find((e) => rectEqual(getRect(e.elements.element), rect))?.sanity;\n}\nfunction resolveInsertPosition(overlayGroup, insertPosition, flow) {\n  return Object.values(insertPosition).every((v) => v === null) ? null : flow === \"horizontal\" ? {\n    left: insertPosition.left ? {\n      rect: insertPosition.left,\n      sanity: findRectSanityData(insertPosition.left, overlayGroup)\n    } : null,\n    right: insertPosition.right ? {\n      rect: insertPosition.right,\n      sanity: findRectSanityData(insertPosition.right, overlayGroup)\n    } : null\n  } : {\n    top: insertPosition.top ? {\n      rect: insertPosition.top,\n      sanity: findRectSanityData(insertPosition.top, overlayGroup)\n    } : null,\n    bottom: insertPosition.bottom ? {\n      rect: insertPosition.bottom,\n      sanity: findRectSanityData(insertPosition.bottom, overlayGroup)\n    } : null\n  };\n}\nfunction calcMousePos(e) {\n  const bodyBounds = document.body.getBoundingClientRect();\n  return {\n    x: Math.max(bodyBounds.x, Math.min(e.clientX, bodyBounds.x + bodyBounds.width)),\n    y: e.clientY + window.scrollY\n  };\n}\nfunction calcMousePosInverseTransform(mousePos2) {\n  const body = document.body, transform = window.getComputedStyle(body).transform;\n  if (transform === \"none\")\n    return {\n      x: mousePos2.x,\n      y: mousePos2.y\n    };\n  const inverseMatrix = new DOMMatrix(transform).inverse(), transformedPoint = new DOMPoint(mousePos2.x, mousePos2.y).matrixTransform(inverseMatrix);\n  return {\n    x: transformedPoint.x,\n    y: transformedPoint.y\n  };\n}\nfunction buildPreviewSkeleton(mousePos2, element, scaleFactor) {\n  const bounds = getRect(element), children = [...element.querySelectorAll(\":where(h1, h2, h3, h4, p, a, img, span, button):not(:has(*))\")];\n  mousePos2.x <= bounds.x && (mousePos2.x = bounds.x), mousePos2.x >= bounds.x + bounds.w && (mousePos2.x = bounds.x + bounds.w), mousePos2.y >= bounds.y + bounds.h && (mousePos2.y = bounds.y + bounds.h), mousePos2.y <= bounds.y && (mousePos2.y = bounds.y);\n  const childRects = children.map((child) => {\n    const rect = scaleRect(getRect(child), scaleFactor, {\n      x: bounds.x,\n      y: bounds.y\n    });\n    return {\n      x: rect.x - bounds.x,\n      y: rect.y - bounds.y,\n      w: rect.w,\n      h: rect.h,\n      tagName: child.tagName\n    };\n  });\n  return {\n    offsetX: (bounds.x - mousePos2.x) * scaleFactor,\n    offsetY: (bounds.y - mousePos2.y) * scaleFactor,\n    w: bounds.w * scaleFactor,\n    h: bounds.h * scaleFactor,\n    maxWidth: bounds.w * scaleFactor * 0.75,\n    childRects\n  };\n}\nconst minDragDelta = 4;\nasync function applyMinimapWrapperTransform(target, scaleFactor, minYScaled, handler, rectUpdateFrequency) {\n  return new Promise((resolve) => {\n    target.addEventListener(\"transitionend\", () => {\n      setTimeout(() => {\n        handler({\n          type: \"overlay/dragEndMinimapTransition\"\n        });\n      }, rectUpdateFrequency * 2), resolve();\n    }, {\n      once: !0\n    }), handler({\n      type: \"overlay/dragStartMinimapTransition\"\n    }), handler({\n      type: \"overlay/dragToggleMinimap\",\n      display: !0\n    }), document.body.style.overflow = \"hidden\", document.body.style.height = \"100%\", document.documentElement.style.overflow = \"initial\", document.documentElement.style.height = \"100%\", setTimeout(() => {\n      target.style.transformOrigin = \"50% 0px\", target.style.transition = \"transform 150ms ease\", target.style.transform = `translate3d(0px, ${-minYScaled + scrollY}px, 0px) scale(${scaleFactor})`;\n    }, 25);\n  });\n}\nfunction calcMinimapTransformValues(rects, groupHeightOverride) {\n  let groupHeight = groupHeightOverride || getRectGroupYExtent(rects).height;\n  const padding = 100;\n  groupHeight += padding * 2;\n  const scaleFactor = groupHeight > window.innerHeight ? window.innerHeight / groupHeight : 1, scaledRects = rects.map((r) => scaleRect(r, scaleFactor, {\n    x: window.innerWidth / 2,\n    y: 0\n  })), {\n    min: minYScaled\n  } = getRectGroupYExtent(scaledRects);\n  return {\n    scaleFactor,\n    minYScaled: minYScaled - padding * scaleFactor\n  };\n}\nfunction calcGroupBoundsPreview(rects) {\n  const groupBoundsX = getRectGroupXExtent(rects), groupBoundsY = getRectGroupYExtent(rects), offsetDist = 8, canOffsetX = groupBoundsX.min > offsetDist && groupBoundsX.min + groupBoundsX.width <= window.innerWidth - offsetDist, canOffsetY = groupBoundsY.min > offsetDist && groupBoundsY.min + groupBoundsY.height <= document.body.scrollHeight - offsetDist, canOffset = canOffsetX && canOffsetY;\n  return {\n    x: canOffset ? groupBoundsX.min - offsetDist : groupBoundsX.min,\n    y: canOffset ? groupBoundsY.min - offsetDist : groupBoundsY.min,\n    w: canOffset ? groupBoundsX.width + offsetDist * 2 : groupBoundsX.width,\n    h: canOffset ? groupBoundsY.height + offsetDist * 2 : groupBoundsY.height\n  };\n}\nasync function resetMinimapWrapperTransform(endYOrigin, target, prescaleHeight2, handler, rectUpdateFrequency, previousRootStyleValues2) {\n  return new Promise((resolve) => {\n    const transform = window.getComputedStyle(target).transform;\n    if (new DOMMatrix(transform).a === 1) return;\n    const maxScroll = prescaleHeight2 - window.innerHeight, prevScrollY = scrollY;\n    endYOrigin -= window.innerHeight / 2, endYOrigin < 0 && (endYOrigin = 0), target.addEventListener(\"transitionend\", () => {\n      target.style.transition = \"none\", target.style.transform = \"none\", scrollTo({\n        top: endYOrigin,\n        behavior: \"instant\"\n      }), setTimeout(() => {\n        handler({\n          type: \"overlay/dragEndMinimapTransition\"\n        }), handler({\n          type: \"overlay/dragToggleMinimap\",\n          display: !1\n        });\n      }, rectUpdateFrequency * 2), resolve();\n    }, {\n      once: !0\n    }), handler({\n      type: \"overlay/dragStartMinimapTransition\"\n    }), target.style.transform = `translateY(${Math.max(prevScrollY - endYOrigin, -maxScroll + prevScrollY)}px) scale(1)`, previousRootStyleValues2 && (document.body.style.overflow = previousRootStyleValues2.body.overflow, document.body.style.height = previousRootStyleValues2.body.height, document.documentElement.style.overflow = previousRootStyleValues2.documentElement.overflow, document.documentElement.style.height = previousRootStyleValues2.documentElement.height);\n  });\n}\nlet minimapScaleApplied = !1, mousePosInverseTransform = {\n  y: 0\n}, mousePos = {\n  x: 0,\n  y: 0\n}, prescaleHeight = typeof document > \"u\" ? 0 : document.documentElement.scrollHeight, previousRootStyleValues = null;\nfunction handleOverlayDrag(opts) {\n  const {\n    mouseEvent,\n    element,\n    overlayGroup,\n    handler,\n    target,\n    onSequenceStart,\n    onSequenceEnd\n  } = opts;\n  if (mouseEvent.button !== 0) return;\n  window.focus();\n  const rectUpdateFrequency = 150;\n  let rects = overlayGroup.map((e) => getRect(e.elements.element));\n  const flow = element.getAttribute(\"data-sanity-drag-flow\") || calcTargetFlow(rects), dragGroup = element.getAttribute(\"data-sanity-drag-group\"), disableMinimap = !!element.getAttribute(\"data-sanity-drag-minimap-disable\"), preventInsertDefault = !!element.getAttribute(\"data-sanity-drag-prevent-default\"), documentHeightOverride = element.getAttribute(\"data-unstable_sanity-drag-document-height\"), groupHeightOverride = element.getAttribute(\"data-unstable_sanity-drag-group-height\");\n  let insertPosition = null;\n  const initialMousePos = calcMousePos(mouseEvent), scaleTarget = document.body, {\n    minYScaled,\n    scaleFactor\n  } = calcMinimapTransformValues(rects, groupHeightOverride ? ~~groupHeightOverride : null);\n  let sequenceStarted = !1, minimapPromptShown = !1, mousedown = !0;\n  minimapScaleApplied || (previousRootStyleValues = {\n    body: {\n      overflow: window.getComputedStyle(document.body).overflow,\n      height: window.getComputedStyle(document.body).height\n    },\n    documentElement: {\n      overflow: window.getComputedStyle(document.documentElement).overflow,\n      height: window.getComputedStyle(document.documentElement).height\n    }\n  }, prescaleHeight = documentHeightOverride ? ~~documentHeightOverride : document.documentElement.scrollHeight);\n  const rectsInterval = setInterval(() => {\n    rects = overlayGroup.map((e) => getRect(e.elements.element));\n  }, rectUpdateFrequency), applyMinimap = () => {\n    if (scaleFactor >= 1) return;\n    const skeleton = buildPreviewSkeleton(mousePos, element, scaleFactor);\n    handler({\n      type: \"overlay/dragUpdateSkeleton\",\n      skeleton\n    }), handler({\n      type: \"overlay/dragToggleMinimapPrompt\",\n      display: !1\n    }), applyMinimapWrapperTransform(scaleTarget, scaleFactor, minYScaled, handler, rectUpdateFrequency).then(() => {\n      setTimeout(() => {\n        handler({\n          type: \"overlay/dragUpdateGroupRect\",\n          groupRect: calcGroupBoundsPreview(rects)\n        });\n      }, rectUpdateFrequency * 2);\n    });\n  }, handleScroll = (e) => {\n    Math.abs(e.deltaY) >= 10 && scaleFactor < 1 && !minimapScaleApplied && !minimapPromptShown && !disableMinimap && mousedown && (handler({\n      type: \"overlay/dragToggleMinimapPrompt\",\n      display: !0\n    }), minimapPromptShown = !0), e.shiftKey && !minimapScaleApplied && !disableMinimap && (window.dispatchEvent(new CustomEvent(\"unstable_sanity/dragApplyMinimap\")), minimapScaleApplied = !0, setTimeout(() => {\n      applyMinimap();\n    }, 50));\n  }, handleMouseMove = (e) => {\n    if (e.preventDefault(), mousePos = calcMousePos(e), mousePosInverseTransform = calcMousePosInverseTransform(mousePos), Math.abs(pointDist(mousePos, initialMousePos)) < minDragDelta) return;\n    if (!sequenceStarted) {\n      const groupRect = calcGroupBoundsPreview(rects), skeleton = buildPreviewSkeleton(mousePos, element, 1);\n      handler({\n        type: \"overlay/dragStart\",\n        flow\n      }), handler({\n        type: \"overlay/dragUpdateSkeleton\",\n        skeleton\n      }), handler({\n        type: \"overlay/dragUpdateGroupRect\",\n        groupRect\n      }), sequenceStarted = !0, onSequenceStart();\n    }\n    handler({\n      type: \"overlay/dragUpdateCursorPosition\",\n      x: mousePos.x,\n      y: mousePos.y\n    }), e.shiftKey && !minimapScaleApplied && !disableMinimap && (window.dispatchEvent(new CustomEvent(\"unstable_sanity/dragApplyMinimap\")), minimapScaleApplied = !0, setTimeout(() => {\n      applyMinimap();\n    }, 50));\n    const newInsertPosition = calcInsertPosition(mousePos, rects, flow);\n    JSON.stringify(insertPosition) !== JSON.stringify(newInsertPosition) && (insertPosition = newInsertPosition, handler({\n      type: \"overlay/dragUpdateInsertPosition\",\n      insertPosition: resolveInsertPosition(overlayGroup, insertPosition, flow)\n    }));\n  }, handleMouseUp = () => {\n    mousedown = !1, handler({\n      type: \"overlay/dragEnd\",\n      target,\n      insertPosition: insertPosition ? resolveInsertPosition(overlayGroup, insertPosition, flow) : null,\n      dragGroup,\n      flow,\n      preventInsertDefault\n    }), minimapPromptShown && handler({\n      type: \"overlay/dragToggleMinimapPrompt\",\n      display: !1\n    }), minimapScaleApplied || (clearInterval(rectsInterval), onSequenceEnd(), removeFrameListeners(), removeKeyListeners()), removeMouseListeners();\n  }, handleKeyup = (e) => {\n    if (e.key === \"Shift\" && minimapScaleApplied) {\n      minimapScaleApplied = !1;\n      const skeleton = buildPreviewSkeleton(mousePos, element, 1 / scaleFactor);\n      handler({\n        type: \"overlay/dragUpdateSkeleton\",\n        skeleton\n      }), window.dispatchEvent(new CustomEvent(\"unstable_sanity/dragResetMinimap\")), setTimeout(() => {\n        resetMinimapWrapperTransform(mousePosInverseTransform.y, scaleTarget, prescaleHeight, handler, rectUpdateFrequency, previousRootStyleValues);\n      }, 50), handler({\n        type: \"overlay/dragUpdateGroupRect\",\n        groupRect: null\n      }), mousedown || (clearInterval(rectsInterval), removeMouseListeners(), removeFrameListeners(), removeKeyListeners(), onSequenceEnd());\n    }\n  }, handleBlur = () => {\n    handler({\n      type: \"overlay/dragUpdateGroupRect\",\n      groupRect: null\n    }), window.dispatchEvent(new CustomEvent(\"unstable_sanity/dragResetMinimap\")), setTimeout(() => {\n      resetMinimapWrapperTransform(mousePosInverseTransform.y, scaleTarget, prescaleHeight, handler, rectUpdateFrequency, previousRootStyleValues).then(() => {\n        minimapScaleApplied = !1;\n      });\n    }, 50), clearInterval(rectsInterval), removeMouseListeners(), removeFrameListeners(), removeKeyListeners(), onSequenceEnd();\n  }, removeMouseListeners = () => {\n    window.removeEventListener(\"mousemove\", handleMouseMove), window.removeEventListener(\"wheel\", handleScroll), window.removeEventListener(\"mouseup\", handleMouseUp);\n  }, removeKeyListeners = () => {\n    window.removeEventListener(\"keyup\", handleKeyup);\n  }, removeFrameListeners = () => {\n    window.removeEventListener(\"blur\", handleBlur);\n  };\n  window.addEventListener(\"blur\", handleBlur), window.addEventListener(\"keyup\", handleKeyup), window.addEventListener(\"wheel\", handleScroll), window.addEventListener(\"mousemove\", handleMouseMove), window.addEventListener(\"mouseup\", handleMouseUp);\n}\nconst isElementNode$1 = (target) => target instanceof HTMLElement || target instanceof SVGElement;\nfunction findNonInlineElement(element) {\n  const {\n    display\n  } = window.getComputedStyle(element);\n  if (display !== \"inline\") return element;\n  const parent = element.parentElement;\n  return parent ? findNonInlineElement(parent) : null;\n}\nconst findOverlayElement = (el) => !el || !isElementNode$1(el) ? null : el.dataset?.sanityOverlayElement ? el : findOverlayElement(el.parentElement);\nfunction testVercelStegaRegex(input) {\n  return _vercel_stega__WEBPACK_IMPORTED_MODULE_2__.VERCEL_STEGA_REGEX.lastIndex = 0, _vercel_stega__WEBPACK_IMPORTED_MODULE_2__.VERCEL_STEGA_REGEX.test(input);\n}\nfunction decodeStega(str, isAltText = !1) {\n  try {\n    const decoded = (0,_vercel_stega__WEBPACK_IMPORTED_MODULE_2__.vercelStegaDecode)(str);\n    return !decoded || decoded.origin !== \"sanity.io\" ? null : (isAltText && (decoded.href = decoded.href?.replace(\".alt\", \"\")), decoded);\n  } catch (err) {\n    return console.error(\"Failed to decode stega for string: \", str, \"with the original error: \", err), null;\n  }\n}\nfunction testAndDecodeStega(str, isAltText = !1) {\n  return testVercelStegaRegex(str) ? decodeStega(str, isAltText) : null;\n}\nconst isElementNode = (node) => node.nodeType === Node.ELEMENT_NODE, isImgElement = (el) => el.tagName === \"IMG\", isTimeElement = (el) => el.tagName === \"TIME\", isSvgRootElement = (el) => el.tagName.toUpperCase() === \"SVG\";\nfunction isSanityNode(node) {\n  return \"path\" in node;\n}\nfunction findCommonPath(first, second) {\n  let firstParts = first.split(\".\"), secondParts = second.split(\".\");\n  const maxLength = Math.min(firstParts.length, secondParts.length);\n  return firstParts = firstParts.slice(0, maxLength).reverse(), secondParts = secondParts.slice(0, maxLength).reverse(), firstParts.reduce((parts, part, i) => part === secondParts[i] ? [...parts, part] : [], []).reverse().join(\".\");\n}\nfunction findCommonSanityData(nodes) {\n  if (!nodes.length || !nodes.map((n) => isSanityNode(n)).every((n, _i, arr) => n === arr[0]))\n    return;\n  if (!isSanityNode(nodes[0])) return nodes[0];\n  const sanityNodes = nodes.filter(isSanityNode);\n  let common = nodes[0];\n  const consistentValueKeys = [\"projectId\", \"dataset\", \"id\", \"baseUrl\", \"workspace\", \"tool\"];\n  for (let i = 1; i < sanityNodes.length; i++) {\n    const node = sanityNodes[i];\n    if (consistentValueKeys.some((key) => node[key] !== common?.[key])) {\n      common = void 0;\n      break;\n    }\n    common = {\n      ...common,\n      path: findCommonPath(common.path, node.path)\n    };\n  }\n  return common;\n}\nfunction findSanityNodes(el) {\n  const mainResults = [];\n  function createResolvedElement(element, data, reason, preventGrouping) {\n    const sanity = (0,_sanity_visual_editing_csm__WEBPACK_IMPORTED_MODULE_6__.decodeSanityNodeData)(data);\n    if (!sanity)\n      return;\n    const measureElement = findNonInlineElement(element);\n    if (measureElement)\n      return {\n        elements: {\n          element,\n          measureElement\n        },\n        sanity,\n        reason,\n        preventGrouping\n      };\n  }\n  function resolveNode(node) {\n    const {\n      nodeType,\n      parentElement,\n      textContent\n    } = node;\n    if (isElementNode(node) && node.dataset?.sanityEditTarget !== void 0) {\n      const nodesInTarget = findSanityNodes(node), commonData = findCommonSanityData(nodesInTarget.map((node2) => node2.type === \"element\" ? node2.commonSanity : void 0).filter((n) => n !== void 0));\n      if (commonData)\n        return {\n          reason: \"edit-target\",\n          elements: {\n            element: node,\n            measureElement: node\n          },\n          sanity: commonData\n        };\n    } else if (nodeType === Node.TEXT_NODE && parentElement && textContent) {\n      const data = testAndDecodeStega(textContent);\n      return data ? createResolvedElement(parentElement, data, \"stega-text\", !0) : void 0;\n    } else if (isElementNode(node)) {\n      if (node.tagName === \"SCRIPT\" || node.tagName === \"SANITY-VISUAL-EDITING\")\n        return;\n      if (node.dataset?.sanity)\n        return createResolvedElement(node, node.dataset.sanity, \"data-attribute\", !!(node.textContent && testVercelStegaRegex(node.textContent)));\n      if (node.dataset?.sanityEditInfo)\n        return createResolvedElement(node, node.dataset.sanityEditInfo, \"data-attribute\", !!(node.textContent && testVercelStegaRegex(node.textContent)));\n      if (isImgElement(node)) {\n        const data = testAndDecodeStega(node.alt, !0);\n        return data ? createResolvedElement(node, data, \"stega-attribute\") : void 0;\n      } else if (isTimeElement(node)) {\n        const data = testAndDecodeStega(node.dateTime, !0);\n        return data ? createResolvedElement(node, data, \"stega-attribute\") : void 0;\n      } else if (isSvgRootElement(node)) {\n        if (!node.ariaLabel) return;\n        const data = testAndDecodeStega(node.ariaLabel, !0);\n        return data ? createResolvedElement(node, data, \"stega-attribute\") : void 0;\n      }\n    }\n  }\n  function processNode(node, _parentGroup) {\n    const resolvedElement = resolveNode(node);\n    let parentGroup = _parentGroup;\n    if (isElementNode(node) && node.dataset?.sanityEditGroup !== void 0 && (parentGroup = {\n      type: \"group\",\n      elements: {\n        element: node,\n        measureElement: node\n      },\n      targets: []\n    }, mainResults.push(parentGroup)), resolvedElement) {\n      const target = {\n        elements: resolvedElement.elements,\n        sanity: resolvedElement.sanity,\n        reason: resolvedElement.reason\n      };\n      parentGroup && !resolvedElement.preventGrouping ? parentGroup.targets.push(target) : mainResults.push({\n        elements: resolvedElement.elements,\n        type: \"element\",\n        targets: [target]\n      });\n    }\n    if (isElementNode(node) && !isImgElement(node) && !(node.tagName === \"SCRIPT\" || node.tagName === \"SANITY-VISUAL-EDITING\"))\n      for (const childNode of node.childNodes)\n        processNode(childNode, parentGroup);\n  }\n  if (el)\n    for (const node of el.childNodes)\n      processNode(node, void 0);\n  return mainResults.map((node) => {\n    if (node.targets.length === 0 && node.type === \"group\")\n      return {\n        ...node,\n        commonSanity: void 0\n      };\n    const commonSanity = node.targets.length === 1 ? node.targets[0].sanity : findCommonSanityData(node.targets.map(({\n      sanity\n    }) => sanity).filter((n) => n !== void 0)) || node.targets[0].sanity;\n    return commonSanity ? {\n      ...node,\n      commonSanity\n    } : null;\n  }).filter((node) => node !== null);\n}\nfunction isSanityArrayPath(path) {\n  const lastDotIndex = path.lastIndexOf(\".\");\n  return path.substring(lastDotIndex, path.length).includes(\"[\");\n}\nfunction getSanityNodeArrayPath(path) {\n  if (!isSanityArrayPath(path)) return null;\n  const split = path.split(\".\");\n  return split[split.length - 1] = split[split.length - 1].replace(/\\[.*?\\]/g, \"[]\"), split.join(\".\");\n}\nfunction sanityNodesExistInSameArray(sanityNode1, sanityNode2) {\n  return !isSanityArrayPath(sanityNode1.path) || !isSanityArrayPath(sanityNode2.path) ? !1 : getSanityNodeArrayPath(sanityNode1.path) === getSanityNodeArrayPath(sanityNode2.path);\n}\nfunction resolveDragAndDropGroup(element, sanity, elementSet, elementsMap) {\n  if (!element.getAttribute(\"data-sanity\") || element.getAttribute(\"data-sanity-drag-disable\") || !sanity || !isSanityNode(sanity) || !isSanityArrayPath(sanity.path)) return null;\n  const targetDragGroup = element.getAttribute(\"data-sanity-drag-group\"), group = [...elementSet].reduce((acc, el) => {\n    const elData = elementsMap.get(el), elDragDisabled = el.getAttribute(\"data-sanity-drag-disable\"), elDragGroup = el.getAttribute(\"data-sanity-drag-group\"), elHasSanityAttribution = el.getAttribute(\"data-sanity\") !== null, sharedDragGroup = targetDragGroup !== null ? targetDragGroup === elDragGroup : !0;\n    return elData?.sanity && !elDragDisabled && isSanityNode(elData.sanity) && sanityNodesExistInSameArray(sanity, elData.sanity) && sharedDragGroup && elHasSanityAttribution && acc.push(elData), acc;\n  }, []);\n  return group.length <= 1 ? null : group;\n}\nfunction createOverlayController({\n  handler,\n  overlayElement,\n  inFrame,\n  inPopUp,\n  optimisticActorReady\n}) {\n  let activated = !1;\n  const elementIdMap = /* @__PURE__ */ new Map(), elementsMap = /* @__PURE__ */ new WeakMap(), elementSet = /* @__PURE__ */ new Set(), measureElements = /* @__PURE__ */ new WeakMap(), cursorMap = /* @__PURE__ */ new WeakMap();\n  let ro, io, mo, activeDragSequence = !1, hoverStack = [];\n  const getHoveredElement = () => hoverStack[hoverStack.length - 1];\n  function addEventHandlers(el, handlers) {\n    el.addEventListener(\"click\", handlers.click, {\n      capture: !0\n    }), el.addEventListener(\"contextmenu\", handlers.contextmenu, {\n      capture: !0\n    }), el.addEventListener(\"mousemove\", handlers.mousemove, {\n      once: !0,\n      capture: !0\n    }), el.addEventListener(\"mousedown\", handlers.mousedown, {\n      capture: !0\n    });\n  }\n  function removeEventHandlers(el, handlers) {\n    el.removeEventListener(\"click\", handlers.click, {\n      capture: !0\n    }), el.removeEventListener(\"contextmenu\", handlers.contextmenu, {\n      capture: !0\n    }), el.removeEventListener(\"mousemove\", handlers.mousemove, {\n      capture: !0\n    }), el.removeEventListener(\"mousedown\", handlers.mousedown, {\n      capture: !0\n    }), el.removeEventListener(\"mouseenter\", handlers.mouseenter), el.removeEventListener(\"mouseleave\", handlers.mouseleave);\n  }\n  function activateElement({\n    id,\n    elements,\n    handlers\n  }) {\n    const {\n      element,\n      measureElement\n    } = elements;\n    addEventHandlers(element, handlers), ro.observe(measureElement), handler({\n      type: \"element/activate\",\n      id\n    });\n  }\n  function deactivateElement({\n    id,\n    elements,\n    handlers\n  }) {\n    const {\n      element,\n      measureElement\n    } = elements;\n    removeEventHandlers(element, handlers), ro.unobserve(measureElement), hoverStack = hoverStack.filter((el) => el !== element), handler({\n      type: \"element/deactivate\",\n      id\n    });\n  }\n  function setOverlayCursor(element) {\n    if (!(!inFrame && !inPopUp || !optimisticActorReady))\n      for (const hoverstackElement of hoverStack) {\n        if (element === hoverstackElement) {\n          const targetSanityData = elementsMap.get(element)?.sanity;\n          if (!targetSanityData || !isSanityNode(targetSanityData)) return;\n          if (resolveDragAndDropGroup(element, targetSanityData, elementSet, elementsMap)) {\n            const existingCursor = element.style.cursor;\n            existingCursor && cursorMap.set(element, existingCursor), handler({\n              type: \"overlay/setCursor\",\n              element,\n              cursor: \"move\"\n            });\n            continue;\n          }\n        }\n        restoreOverlayCursor(hoverstackElement);\n      }\n  }\n  function restoreOverlayCursor(element) {\n    const previousCursor = cursorMap.get(element);\n    handler({\n      type: \"overlay/setCursor\",\n      element,\n      cursor: previousCursor\n    });\n  }\n  function registerElement({\n    type,\n    elements,\n    commonSanity,\n    targets\n  }) {\n    const {\n      element,\n      measureElement\n    } = elements, eventHandlers = {\n      click(event) {\n        const target = event.target;\n        if (element === getHoveredElement() && element.contains(target)) {\n          inFrame && (event.preventDefault(), event.stopPropagation());\n          const sanity = elementsMap.get(element)?.sanity;\n          sanity && !activeDragSequence && handler({\n            type: \"element/click\",\n            id,\n            sanity\n          });\n        }\n      },\n      contextmenu(event) {\n        if (!(\"path\" in commonSanity) || !inFrame && !inPopUp || !optimisticActorReady || !commonSanity.path.split(\".\").pop()?.includes(\"[_key==\")) return;\n        const target = event.target;\n        element === getHoveredElement() && element.contains(target) && ((inFrame || inPopUp) && (event.preventDefault(), event.stopPropagation()), handler({\n          type: \"element/contextmenu\",\n          id,\n          position: {\n            x: event.clientX,\n            y: event.clientY\n          },\n          sanity: commonSanity\n        }));\n      },\n      mousedown(event) {\n        if (event.preventDefault(), event.currentTarget !== hoverStack.at(-1) || element.getAttribute(\"data-sanity-drag-disable\") || !inFrame && !inPopUp || !optimisticActorReady) return;\n        const targetSanityData = elementsMap.get(element)?.sanity;\n        if (!targetSanityData || !isSanityNode(targetSanityData) || !isSanityArrayPath(targetSanityData.path)) return;\n        const dragGroup = resolveDragAndDropGroup(element, commonSanity, elementSet, elementsMap);\n        dragGroup && handleOverlayDrag({\n          element,\n          handler,\n          mouseEvent: event,\n          overlayGroup: dragGroup,\n          target: targetSanityData,\n          onSequenceStart: () => {\n            activeDragSequence = !0;\n          },\n          onSequenceEnd: () => {\n            setTimeout(() => {\n              activeDragSequence = !1;\n            }, 250);\n          }\n        });\n      },\n      mousemove(event) {\n        eventHandlers.mouseenter(event);\n        const el = event.currentTarget;\n        el && (el.addEventListener(\"mouseenter\", eventHandlers.mouseenter), el.addEventListener(\"mouseleave\", eventHandlers.mouseleave));\n      },\n      mouseenter() {\n        document.querySelector(\"vercel-live-feedback\") && element.closest(\"[data-vercel-edit-info]\") || element.closest(\"[data-vercel-edit-target]\") || (hoverStack.push(element), handler({\n          type: \"element/mouseenter\",\n          id,\n          rect: getRect(element)\n        }), setOverlayCursor(element));\n      },\n      mouseleave(e) {\n        function leave() {\n          hoverStack.pop();\n          const hoveredElement = getHoveredElement();\n          if (handler({\n            type: \"element/mouseleave\",\n            id\n          }), hoveredElement) {\n            setOverlayCursor(hoveredElement);\n            const overlayElement2 = elementsMap.get(hoveredElement);\n            overlayElement2 && handler({\n              type: \"element/mouseenter\",\n              id: overlayElement2.id,\n              rect: getRect(hoveredElement)\n            });\n          }\n          restoreOverlayCursor(element);\n        }\n        function addDeferredLeave(el) {\n          const deferredLeave = (e2) => {\n            const {\n              relatedTarget: relatedTarget2\n            } = e2;\n            findOverlayElement(relatedTarget2) ? relatedTarget2 && isElementNode$1(relatedTarget2) && (el.removeEventListener(\"mouseleave\", deferredLeave), addDeferredLeave(relatedTarget2)) : (el.removeEventListener(\"mouseleave\", deferredLeave), leave());\n          };\n          el.addEventListener(\"mouseleave\", deferredLeave);\n        }\n        const {\n          relatedTarget\n        } = e, container = findOverlayElement(relatedTarget), isInteractiveOverlayElement = overlayElement.contains(container);\n        if (isElementNode$1(container) && isInteractiveOverlayElement)\n          return addDeferredLeave(container);\n        leave();\n      }\n    }, id = v4(), sanityNode = {\n      type,\n      id,\n      elements,\n      sanity: commonSanity,\n      handlers: eventHandlers\n    };\n    elementSet.add(element), measureElements.set(measureElement, element), elementIdMap.set(id, element), elementsMap.set(element, sanityNode), io?.observe(element), handler({\n      type: \"element/register\",\n      elementType: type,\n      id,\n      element,\n      rect: getRect(element),\n      sanity: commonSanity,\n      dragDisabled: !!element.getAttribute(\"data-sanity-drag-disable\"),\n      targets: targets.map((target) => ({\n        sanity: target.sanity,\n        element: target.elements.element\n      }))\n    }), activated && activateElement(sanityNode);\n  }\n  function updateElement(resolvedElement) {\n    const {\n      element\n    } = resolvedElement.elements, overlayElement2 = elementsMap.get(element);\n    overlayElement2 && (elementsMap.set(element, {\n      ...overlayElement2,\n      sanity: resolvedElement.commonSanity\n    }), handler({\n      type: \"element/update\",\n      elementType: overlayElement2.type,\n      id: overlayElement2.id,\n      rect: getRect(element),\n      sanity: resolvedElement.commonSanity,\n      targets: resolvedElement.targets.map((target) => ({\n        sanity: target.sanity,\n        element: target.elements.element\n      }))\n    }));\n  }\n  function parseElements(node) {\n    const sanityNodes = findSanityNodes(node);\n    for (const sanityNode of sanityNodes) {\n      if (sanityNode.type === \"group\") {\n        for (const target of sanityNode.targets) {\n          const overlayElement2 = elementsMap.get(target.elements.element);\n          overlayElement2 && overlayElement2.type === \"element\" && unregisterElement(target.elements.element);\n        }\n        sanityNode.targets.length === 0 && unregisterElement(sanityNode.elements.element);\n      }\n      if (!sanityNode.commonSanity) continue;\n      const {\n        element\n      } = sanityNode.elements;\n      elementsMap.has(element) ? updateElement(sanityNode) : registerElement(sanityNode);\n    }\n  }\n  function unregisterElement(element) {\n    const overlayElement2 = elementsMap.get(element);\n    if (overlayElement2) {\n      const {\n        id,\n        handlers\n      } = overlayElement2;\n      removeEventHandlers(element, handlers), ro.unobserve(element), elementsMap.delete(element), elementSet.delete(element), elementIdMap.delete(id), handler({\n        type: \"element/unregister\",\n        id\n      });\n    }\n  }\n  function handleMutation(mutations) {\n    let mutationWasInScope = !1;\n    for (const mutation of mutations) {\n      const {\n        target,\n        type\n      } = mutation, node = type === \"characterData\" ? target.parentElement : target;\n      if (!(node === overlayElement || overlayElement.contains(node)) && (mutationWasInScope = !0, isElementNode$1(node))) {\n        const possibleGroupParent = node.parentElement?.closest(\"[data-sanity-edit-group]\") || null, updateNodeTarget = isElementNode$1(possibleGroupParent) ? possibleGroupParent : node;\n        parseElements({\n          childNodes: [updateNodeTarget]\n        });\n      }\n    }\n    if (mutationWasInScope)\n      for (const element of elementSet)\n        element.isConnected || unregisterElement(element), elementsMap.get(element)?.type === \"group\" && !element.hasAttribute(\"data-sanity-edit-group\") && unregisterElement(element);\n  }\n  function updateRect(el) {\n    const overlayElement2 = elementsMap.get(el);\n    overlayElement2 && handler({\n      type: \"element/updateRect\",\n      id: overlayElement2.id,\n      rect: getRect(el)\n    });\n  }\n  function handleResize(entries) {\n    for (const entry of entries) {\n      const target = entry.target;\n      if (isElementNode$1(target)) {\n        const element = measureElements.get(target);\n        if (!element) return;\n        updateRect(element);\n      }\n    }\n  }\n  function handleIntersection(entries) {\n    if (activated)\n      for (const entry of entries) {\n        const {\n          target\n        } = entry, match = isElementNode$1(target) && elementsMap.get(target);\n        match && (entry.isIntersecting ? activateElement(match) : deactivateElement(match));\n      }\n  }\n  function handleBlur(event) {\n    const element = findOverlayElement(event.target);\n    if (element) {\n      element.dataset.sanityOverlayElement === \"capture\" && (event.preventDefault(), event.stopPropagation());\n      return;\n    }\n    hoverStack = [], handler({\n      type: \"overlay/blur\"\n    });\n  }\n  function handleExclusivePluginClosed() {\n    hoverStack = [], handler({\n      type: \"overlay/reset-mouse-state\"\n    });\n  }\n  function handleWindowResize() {\n    for (const element of elementSet)\n      updateRect(element);\n  }\n  function handleKeydown(event) {\n    event.key === \"Escape\" && (hoverStack = [], handler({\n      type: \"overlay/blur\"\n    }));\n  }\n  function handleWindowScroll(event) {\n    const {\n      target\n    } = event;\n    if (!(target === window.document || !isElementNode$1(target)))\n      for (const element of elementSet)\n        target.contains(element) && updateRect(element);\n  }\n  function activate() {\n    activated || (io = new IntersectionObserver(handleIntersection, {\n      threshold: 0.3\n    }), elementSet.forEach((element) => io.observe(element)), handler({\n      type: \"overlay/activate\"\n    }), activated = !0);\n  }\n  function deactivate() {\n    activated && (io?.disconnect(), elementSet.forEach((element) => {\n      const overlayElement2 = elementsMap.get(element);\n      overlayElement2 && deactivateElement(overlayElement2);\n    }), handler({\n      type: \"overlay/deactivate\"\n    }), activated = !1);\n  }\n  function handleHeaderClick(event) {\n    const {\n      id\n    } = event.detail, element = elementIdMap.get(id);\n    if (!element) return;\n    const sanity = elementsMap.get(element)?.sanity;\n    sanity && handler({\n      type: \"element/click\",\n      id,\n      sanity\n    });\n  }\n  function destroy() {\n    window.removeEventListener(\"click\", handleBlur), window.removeEventListener(\"contextmenu\", handleBlur), window.removeEventListener(\"sanity-overlay/exclusive-plugin-closed\", handleExclusivePluginClosed), window.removeEventListener(\"sanity-overlay/label-click\", handleHeaderClick), window.removeEventListener(\"keydown\", handleKeydown), window.removeEventListener(\"resize\", handleWindowResize), window.removeEventListener(\"scroll\", handleWindowScroll), mo.disconnect(), ro.disconnect(), elementSet.forEach((element) => {\n      unregisterElement(element);\n    }), elementIdMap.clear(), elementSet.clear(), hoverStack = [], deactivate();\n  }\n  function create() {\n    window.addEventListener(\"click\", handleBlur), window.addEventListener(\"contextmenu\", handleBlur), window.addEventListener(\"sanity-overlay/exclusive-plugin-closed\", handleExclusivePluginClosed), window.addEventListener(\"sanity-overlay/label-click\", handleHeaderClick), window.addEventListener(\"keydown\", handleKeydown), window.addEventListener(\"resize\", handleWindowResize), window.addEventListener(\"scroll\", handleWindowScroll, {\n      capture: !0,\n      passive: !0\n    }), ro = new ResizeObserver(handleResize), mo = new MutationObserver(handleMutation), mo.observe(document.body, {\n      attributes: !0,\n      characterData: !0,\n      childList: !0,\n      subtree: !0\n    }), parseElements(document.body), activate();\n  }\n  return window.document.fonts.ready.then(() => {\n    for (const element of elementSet)\n      updateRect(element);\n  }), create(), {\n    activate,\n    deactivate,\n    destroy\n  };\n}\nconst SharedStateContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)(null);\n\n//# sourceMappingURL=SharedStateContext.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvdmlzdWFsLWVkaXRpbmcvZGlzdC9fY2h1bmtzLWVzL1NoYXJlZFN0YXRlQ29udGV4dC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBMkM7QUFDUztBQUNvRDtBQUM1RDtBQUNRO0FBQ2M7QUFDSTtBQUN0RTtBQUNBLFlBQVkseURBQUMsZ0NBQWdDLCtDQUFRLG9DQUFvQywrQ0FBUSwyQ0FBMkMsK0NBQVEsZ0RBQWdELCtDQUFRLHVCQUF1QixpRUFBa0IsK0JBQStCLDZDQUFNO0FBQzFSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxrRUFBYztBQUN4QjtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUcsa0ZBQWtGLHlEQUFrQjtBQUN2RztBQUNBO0FBQ0EsbUNBQW1DLDZDQUFNO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLEdBQUcsMEZBQTBGLHlEQUFrQjtBQUMvRztBQUNBO0FBQ0EsUUFBUSx5REFBWTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0VBQWM7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsUUFBUSxzREFBZTtBQUN2QixPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEdBQUcsZ0ZBQWdGLGdEQUFTO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsc0RBQWU7QUFDeEQ7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHLG1NQUFtTSxnREFBUztBQUMvTTtBQUNBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILGtCQUFrQixzQkFBc0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDBCQUEwQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCwrSUFBK0ksc0JBQXNCLGlCQUFpQixZQUFZO0FBQ2xNLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSywwQ0FBMEMsNkRBQTZEO0FBQzVHLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDZEQUFrQixnQkFBZ0IsNkRBQWtCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnRUFBaUI7QUFDckM7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isd0JBQXdCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixnRkFBb0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLG9EQUFhO0FBT3RDO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9ub3VyZWxkaW5tYWhtb3VkL2ZyZXNoY2FydC9kZXBsb3kvbm9kZV9tb2R1bGVzL25leHQtc2FuaXR5L25vZGVfbW9kdWxlcy9Ac2FuaXR5L3Zpc3VhbC1lZGl0aW5nL2Rpc3QvX2NodW5rcy1lcy9TaGFyZWRTdGF0ZUNvbnRleHQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYyB9IGZyb20gXCJyZWFjdC1jb21waWxlci1ydW50aW1lXCI7XG5pbXBvcnQgeyBnZXRQdWJsaXNoZWRJZCB9IGZyb20gXCJAc2FuaXR5L2NsaWVudC9jc21cIjtcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUluc2VydGlvbkVmZmVjdCwgdXNlRWZmZWN0LCBzdGFydFRyYW5zaXRpb24sIGNyZWF0ZUNvbnRleHQgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGlzRW1wdHlBY3RvciB9IGZyb20gXCIuL2NvbnRleHQuanNcIjtcbmltcG9ydCB7IHVzZU9wdGltaXN0aWNBY3RvciB9IGZyb20gXCIuL211dGF0aW9ucy5qc1wiO1xuaW1wb3J0IHsgZGVjb2RlU2FuaXR5Tm9kZURhdGEgfSBmcm9tIFwiQHNhbml0eS92aXN1YWwtZWRpdGluZy1jc21cIjtcbmltcG9ydCB7IFZFUkNFTF9TVEVHQV9SRUdFWCwgdmVyY2VsU3RlZ2FEZWNvZGUgfSBmcm9tIFwiQHZlcmNlbC9zdGVnYVwiO1xuZnVuY3Rpb24gdXNlT3B0aW1pc3RpYyhwYXNzdGhyb3VnaCwgcmVkdWNlcikge1xuICBjb25zdCAkID0gYygxNyksIFtwcmlzdGluZSwgc2V0UHJpc3RpbmVdID0gdXNlU3RhdGUoITApLCBbb3B0aW1pc3RpYywgc2V0T3B0aW1pc3RpY10gPSB1c2VTdGF0ZShwYXNzdGhyb3VnaCksIFtsYXN0RXZlbnQsIHNldExhc3RFdmVudF0gPSB1c2VTdGF0ZShudWxsKSwgW2xhc3RQYXNzdGhyb3VnaCwgc2V0TGFzdFBhc3N0aHJvdWdoXSA9IHVzZVN0YXRlKHBhc3N0aHJvdWdoKSwgYWN0b3IgPSB1c2VPcHRpbWlzdGljQWN0b3IoKSwgcmVkdWNlU3RhdGVGcm9tQWN0aW9uUmVmID0gdXNlUmVmKG51bGwpO1xuICBsZXQgdDAsIHQxO1xuICAkWzBdICE9PSByZWR1Y2VyID8gKHQwID0gKCkgPT4ge1xuICAgIHJlZHVjZVN0YXRlRnJvbUFjdGlvblJlZi5jdXJyZW50ID0gKGFjdGlvbiwgcHJldlN0YXRlKSA9PiAoQXJyYXkuaXNBcnJheShyZWR1Y2VyKSA/IHJlZHVjZXIgOiBbcmVkdWNlcl0pLnJlZHVjZSgoYWNjLCByZWR1Y2VyXzApID0+IHJlZHVjZXJfMChhY2MsIHtcbiAgICAgIGRvY3VtZW50OiBhY3Rpb24uZG9jdW1lbnQsXG4gICAgICBpZDogZ2V0UHVibGlzaGVkSWQoYWN0aW9uLmlkKSxcbiAgICAgIG9yaWdpbmFsSWQ6IGFjdGlvbi5pZCxcbiAgICAgIHR5cGU6IGFjdGlvbi50eXBlXG4gICAgfSksIHByZXZTdGF0ZSk7XG4gIH0sIHQxID0gW3JlZHVjZXJdLCAkWzBdID0gcmVkdWNlciwgJFsxXSA9IHQwLCAkWzJdID0gdDEpIDogKHQwID0gJFsxXSwgdDEgPSAkWzJdKSwgdXNlSW5zZXJ0aW9uRWZmZWN0KHQwLCB0MSk7XG4gIGxldCB0MjtcbiAgJFszXSAhPT0gcGFzc3Rocm91Z2ggPyAodDIgPSAoKSA9PiBzZXRMYXN0UGFzc3Rocm91Z2gocGFzc3Rocm91Z2gpLCAkWzNdID0gcGFzc3Rocm91Z2gsICRbNF0gPSB0MikgOiB0MiA9ICRbNF07XG4gIGNvbnN0IHVwZGF0ZUxhc3RQYXNzdGhyb3VnaFJlZiA9IHVzZVJlZih0Mik7XG4gIGxldCB0MywgdDQ7XG4gICRbNV0gIT09IHBhc3N0aHJvdWdoID8gKHQzID0gKCkgPT4ge1xuICAgIHVwZGF0ZUxhc3RQYXNzdGhyb3VnaFJlZi5jdXJyZW50ID0gKCkgPT4gc2V0TGFzdFBhc3N0aHJvdWdoKHBhc3N0aHJvdWdoKTtcbiAgfSwgdDQgPSBbcGFzc3Rocm91Z2hdLCAkWzVdID0gcGFzc3Rocm91Z2gsICRbNl0gPSB0MywgJFs3XSA9IHQ0KSA6ICh0MyA9ICRbNl0sIHQ0ID0gJFs3XSksIHVzZUluc2VydGlvbkVmZmVjdCh0MywgdDQpO1xuICBsZXQgdDUsIHQ2O1xuICAkWzhdICE9PSBhY3RvciA/ICh0NSA9ICgpID0+IHtcbiAgICBpZiAoaXNFbXB0eUFjdG9yKGFjdG9yKSlcbiAgICAgIHJldHVybjtcbiAgICBsZXQgcHJpc3RpbmVUaW1lb3V0O1xuICAgIGNvbnN0IHJlYmFzZWRTdWIgPSBhY3Rvci5vbihcInJlYmFzZWQubG9jYWxcIiwgKF9ldmVudCkgPT4ge1xuICAgICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICAgIGRvY3VtZW50OiBfZXZlbnQuZG9jdW1lbnQsXG4gICAgICAgIGlkOiBfZXZlbnQuaWQsXG4gICAgICAgIG9yaWdpbmFsSWQ6IGdldFB1Ymxpc2hlZElkKF9ldmVudC5pZCksXG4gICAgICAgIHR5cGU6IFwibXV0YXRlXCJcbiAgICAgIH07XG4gICAgICBzZXRPcHRpbWlzdGljKChwcmV2U3RhdGVfMCkgPT4gcmVkdWNlU3RhdGVGcm9tQWN0aW9uUmVmLmN1cnJlbnQgPyByZWR1Y2VTdGF0ZUZyb21BY3Rpb25SZWYuY3VycmVudChldmVudCwgcHJldlN0YXRlXzApIDogcHJldlN0YXRlXzApLCBzZXRMYXN0RXZlbnQoZXZlbnQpLCB1cGRhdGVMYXN0UGFzc3Rocm91Z2hSZWYuY3VycmVudCgpLCBzZXRQcmlzdGluZSghMSksIGNsZWFyVGltZW91dChwcmlzdGluZVRpbWVvdXQpO1xuICAgIH0pLCBwcmlzdGluZVN1YiA9IGFjdG9yLm9uKFwicHJpc3RpbmVcIiwgKCkgPT4ge1xuICAgICAgcHJpc3RpbmVUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHN0YXJ0VHJhbnNpdGlvbigoKSA9PiBzZXRQcmlzdGluZSghMCkpO1xuICAgICAgfSwgMTVlMyk7XG4gICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJlYmFzZWRTdWIudW5zdWJzY3JpYmUoKSwgcHJpc3RpbmVTdWIudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICB9LCB0NiA9IFthY3Rvcl0sICRbOF0gPSBhY3RvciwgJFs5XSA9IHQ1LCAkWzEwXSA9IHQ2KSA6ICh0NSA9ICRbOV0sIHQ2ID0gJFsxMF0pLCB1c2VFZmZlY3QodDUsIHQ2KTtcbiAgbGV0IHQ3LCB0ODtcbiAgcmV0dXJuICRbMTFdICE9PSBsYXN0RXZlbnQgfHwgJFsxMl0gIT09IGxhc3RQYXNzdGhyb3VnaCB8fCAkWzEzXSAhPT0gcGFzc3Rocm91Z2ggfHwgJFsxNF0gIT09IHByaXN0aW5lID8gKHQ3ID0gKCkgPT4ge1xuICAgIGlmICghcHJpc3RpbmUpIHtcbiAgICAgIGlmICghbGFzdEV2ZW50KVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBsYXN0IGV2ZW50IGZvdW5kIHdoZW4gc3luY2luZyBwYXNzdGhyb3VnaFwiKTtcbiAgICAgIGxhc3RQYXNzdGhyb3VnaCAhPT0gcGFzc3Rocm91Z2ggJiYgc3RhcnRUcmFuc2l0aW9uKCgpID0+IHtcbiAgICAgICAgc2V0T3B0aW1pc3RpYyhyZWR1Y2VTdGF0ZUZyb21BY3Rpb25SZWYuY3VycmVudCA/IHJlZHVjZVN0YXRlRnJvbUFjdGlvblJlZi5jdXJyZW50KGxhc3RFdmVudCwgcGFzc3Rocm91Z2gpIDogcGFzc3Rocm91Z2gpLCBzZXRMYXN0UGFzc3Rocm91Z2gocGFzc3Rocm91Z2gpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB0OCA9IFtsYXN0RXZlbnQsIGxhc3RQYXNzdGhyb3VnaCwgcGFzc3Rocm91Z2gsIHByaXN0aW5lXSwgJFsxMV0gPSBsYXN0RXZlbnQsICRbMTJdID0gbGFzdFBhc3N0aHJvdWdoLCAkWzEzXSA9IHBhc3N0aHJvdWdoLCAkWzE0XSA9IHByaXN0aW5lLCAkWzE1XSA9IHQ3LCAkWzE2XSA9IHQ4KSA6ICh0NyA9ICRbMTVdLCB0OCA9ICRbMTZdKSwgdXNlRWZmZWN0KHQ3LCB0OCksIHByaXN0aW5lID8gcGFzc3Rocm91Z2ggOiBvcHRpbWlzdGljO1xufVxuY29uc3QgYnl0ZVRvSGV4ID0gW107XG5mb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgKytpKVxuICBieXRlVG9IZXgucHVzaCgoaSArIDI1NikudG9TdHJpbmcoMTYpLnNsaWNlKDEpKTtcbmZ1bmN0aW9uIHVuc2FmZVN0cmluZ2lmeShhcnIsIG9mZnNldCA9IDApIHtcbiAgcmV0dXJuIChieXRlVG9IZXhbYXJyW29mZnNldCArIDBdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDNdXSArIFwiLVwiICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDVdXSArIFwiLVwiICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArIFwiLVwiICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA4XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDldXSArIFwiLVwiICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMV1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxM11dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAxNV1dKS50b0xvd2VyQ2FzZSgpO1xufVxubGV0IGdldFJhbmRvbVZhbHVlcztcbmNvbnN0IHJuZHM4ID0gbmV3IFVpbnQ4QXJyYXkoMTYpO1xuZnVuY3Rpb24gcm5nKCkge1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIGlmICh0eXBlb2YgY3J5cHRvID4gXCJ1XCIgfHwgIWNyeXB0by5nZXRSYW5kb21WYWx1ZXMpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZFwiKTtcbiAgICBnZXRSYW5kb21WYWx1ZXMgPSBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKTtcbiAgfVxuICByZXR1cm4gZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbn1cbmNvbnN0IHJhbmRvbVVVSUQgPSB0eXBlb2YgY3J5cHRvIDwgXCJ1XCIgJiYgY3J5cHRvLnJhbmRvbVVVSUQgJiYgY3J5cHRvLnJhbmRvbVVVSUQuYmluZChjcnlwdG8pO1xudmFyIG5hdGl2ZSA9IHtcbiAgcmFuZG9tVVVJRFxufTtcbmZ1bmN0aW9uIHY0KG9wdGlvbnMsIGJ1Ziwgb2Zmc2V0KSB7XG4gIGlmIChuYXRpdmUucmFuZG9tVVVJRCAmJiAhb3B0aW9ucylcbiAgICByZXR1cm4gbmF0aXZlLnJhbmRvbVVVSUQoKTtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGNvbnN0IHJuZHMgPSBvcHRpb25zLnJhbmRvbSA/PyBvcHRpb25zLnJuZz8uKCkgPz8gcm5nKCk7XG4gIGlmIChybmRzLmxlbmd0aCA8IDE2KVxuICAgIHRocm93IG5ldyBFcnJvcihcIlJhbmRvbSBieXRlcyBsZW5ndGggbXVzdCBiZSA+PSAxNlwiKTtcbiAgcmV0dXJuIHJuZHNbNl0gPSBybmRzWzZdICYgMTUgfCA2NCwgcm5kc1s4XSA9IHJuZHNbOF0gJiA2MyB8IDEyOCwgdW5zYWZlU3RyaW5naWZ5KHJuZHMpO1xufVxuZnVuY3Rpb24gZ2V0UmVjdChlbGVtZW50KSB7XG4gIGNvbnN0IGRvbVJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICByZXR1cm4ge1xuICAgIHg6IGRvbVJlY3QueCArIHNjcm9sbFgsXG4gICAgeTogZG9tUmVjdC55ICsgc2Nyb2xsWSxcbiAgICB3OiBkb21SZWN0LndpZHRoLFxuICAgIGg6IGRvbVJlY3QuaGVpZ2h0XG4gIH07XG59XG5mdW5jdGlvbiBvZmZzZXRSZWN0KHJlY3QsIHB4LCBheGlzKSB7XG4gIHJldHVybiBheGlzID09PSBcInhcIiA/IHtcbiAgICB4OiByZWN0LnggKyBweCxcbiAgICB5OiByZWN0LnksXG4gICAgdzogcmVjdC53IC0gMiAqIHB4LFxuICAgIGg6IHJlY3QuaFxuICB9IDoge1xuICAgIHg6IHJlY3QueCxcbiAgICB5OiByZWN0LnkgKyBweCxcbiAgICB3OiByZWN0LncsXG4gICAgaDogcmVjdC5oIC0gMiAqIHB4XG4gIH07XG59XG5mdW5jdGlvbiByYXlJbnRlcnNlY3QobDEsIGwyKSB7XG4gIGNvbnN0IHtcbiAgICB4MSxcbiAgICB5MSxcbiAgICB4MixcbiAgICB5MlxuICB9ID0gbDEsIHtcbiAgICB4MTogeDMsXG4gICAgeTE6IHkzLFxuICAgIHgyOiB4NCxcbiAgICB5MjogeTRcbiAgfSA9IGwyO1xuICBpZiAoeDEgPT09IHgyICYmIHkxID09PSB5MiB8fCB4MyA9PT0geDQgJiYgeTMgPT09IHk0KVxuICAgIHJldHVybiAhMTtcbiAgY29uc3QgZGVub21pbmF0b3IgPSAoeTQgLSB5MykgKiAoeDIgLSB4MSkgLSAoeDQgLSB4MykgKiAoeTIgLSB5MSk7XG4gIGlmIChkZW5vbWluYXRvciA9PT0gMClcbiAgICByZXR1cm4gITE7XG4gIGNvbnN0IHVhID0gKCh4NCAtIHgzKSAqICh5MSAtIHkzKSAtICh5NCAtIHkzKSAqICh4MSAtIHgzKSkgLyBkZW5vbWluYXRvciwgdWIgPSAoKHgyIC0geDEpICogKHkxIC0geTMpIC0gKHkyIC0geTEpICogKHgxIC0geDMpKSAvIGRlbm9taW5hdG9yO1xuICBpZiAodWEgPCAwIHx8IHVhID4gMSB8fCB1YiA8IDAgfHwgdWIgPiAxKVxuICAgIHJldHVybiAhMTtcbiAgY29uc3QgeCA9IHgxICsgdWEgKiAoeDIgLSB4MSksIHkgPSB5MSArIHVhICogKHkyIC0geTEpO1xuICByZXR1cm4ge1xuICAgIHgsXG4gICAgeVxuICB9O1xufVxuZnVuY3Rpb24gcmVjdEVxdWFsKHIxLCByMikge1xuICByZXR1cm4gcjEueCA9PT0gcjIueCAmJiByMS55ID09PSByMi55ICYmIHIxLncgPT09IHIyLncgJiYgcjEuaCA9PT0gcjIuaDtcbn1cbmZ1bmN0aW9uIHJheVJlY3RJbnRlcnNlY3Rpb25zKGxpbmUsIHJlY3QpIHtcbiAgY29uc3QgcmVjdExpbmVzID0gW3tcbiAgICB4MTogcmVjdC54LFxuICAgIHkxOiByZWN0LnksXG4gICAgeDI6IHJlY3QueCArIHJlY3QudyxcbiAgICB5MjogcmVjdC55XG4gIH0sIHtcbiAgICB4MTogcmVjdC54ICsgcmVjdC53LFxuICAgIHkxOiByZWN0LnksXG4gICAgeDI6IHJlY3QueCArIHJlY3QudyxcbiAgICB5MjogcmVjdC55ICsgcmVjdC5oXG4gIH0sIHtcbiAgICB4MTogcmVjdC54ICsgcmVjdC53LFxuICAgIHkxOiByZWN0LnkgKyByZWN0LmgsXG4gICAgeDI6IHJlY3QueCxcbiAgICB5MjogcmVjdC55ICsgcmVjdC5oXG4gIH0sIHtcbiAgICB4MTogcmVjdC54LFxuICAgIHkxOiByZWN0LnkgKyByZWN0LmgsXG4gICAgeDI6IHJlY3QueCxcbiAgICB5MjogcmVjdC55XG4gIH1dLCBpbnRlcnNlY3Rpb25zID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjdExpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgaW50ZXJzZWN0aW9uID0gcmF5SW50ZXJzZWN0KGxpbmUsIHJlY3RMaW5lc1tpXSk7XG4gICAgaWYgKGludGVyc2VjdGlvbikge1xuICAgICAgbGV0IGlzRHVwbGljYXRlID0gITE7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGludGVyc2VjdGlvbnMubGVuZ3RoOyBqKyspXG4gICAgICAgIGludGVyc2VjdGlvbnNbal0ueCA9PT0gaW50ZXJzZWN0aW9uLnggJiYgaW50ZXJzZWN0aW9uc1tqXS55ID09PSBpbnRlcnNlY3Rpb24ueSAmJiAoaXNEdXBsaWNhdGUgPSAhMCk7XG4gICAgICBpc0R1cGxpY2F0ZSB8fCBpbnRlcnNlY3Rpb25zLnB1c2goaW50ZXJzZWN0aW9uKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGludGVyc2VjdGlvbnMubGVuZ3RoID09PSAwID8gITEgOiBpbnRlcnNlY3Rpb25zLnNvcnQoKGEsIGIpID0+IHBvaW50RGlzdChhLCB7XG4gICAgeDogbGluZS54MSxcbiAgICB5OiBsaW5lLnkxXG4gIH0pIC0gcG9pbnREaXN0KGIsIHtcbiAgICB4OiBsaW5lLngxLFxuICAgIHk6IGxpbmUueTFcbiAgfSkpO1xufVxuZnVuY3Rpb24gcG9pbnREaXN0KHAxLCBwMikge1xuICBjb25zdCBhID0gcDEueCAtIHAyLngsIGIgPSBwMS55IC0gcDIueTtcbiAgcmV0dXJuIE1hdGguc3FydChhICogYSArIGIgKiBiKTtcbn1cbmZ1bmN0aW9uIHBvaW50SW5Cb3VuZHMocG9pbnQsIGJvdW5kcykge1xuICBjb25zdCB3aXRoaW5YID0gcG9pbnQueCA+PSBib3VuZHMueCAmJiBwb2ludC54IDw9IGJvdW5kcy54ICsgYm91bmRzLncsIHdpdGhpblkgPSBwb2ludC55ID49IGJvdW5kcy55ICYmIHBvaW50LnkgPD0gYm91bmRzLnkgKyBib3VuZHMuaDtcbiAgcmV0dXJuIHdpdGhpblggJiYgd2l0aGluWTtcbn1cbmZ1bmN0aW9uIGZpbmRDbG9zZXN0SW50ZXJzZWN0aW9uKHJheSwgdGFyZ2V0cywgZmxvdykge1xuICBjb25zdCByYXlPcmlnaW4gPSB7XG4gICAgeDogcmF5LngxLFxuICAgIHk6IHJheS55MVxuICB9O1xuICBpZiAodGFyZ2V0cy5zb21lKCh0KSA9PiBwb2ludEluQm91bmRzKHJheU9yaWdpbiwgb2Zmc2V0UmVjdCh0LCBNYXRoLm1pbih0LncsIHQuaCkgLyAxMCwgZmxvdyA9PT0gXCJob3Jpem9udGFsXCIgPyBcInhcIiA6IFwieVwiKSkpKSByZXR1cm4gbnVsbDtcbiAgbGV0IGNsb3Nlc3RJbnRlcnNlY3Rpb24sIGNsb3Nlc3RSZWN0O1xuICBmb3IgKGNvbnN0IHRhcmdldCBvZiB0YXJnZXRzKSB7XG4gICAgY29uc3QgaW50ZXJzZWN0aW9ucyA9IHJheVJlY3RJbnRlcnNlY3Rpb25zKHJheSwgb2Zmc2V0UmVjdCh0YXJnZXQsIE1hdGgubWluKHRhcmdldC53LCB0YXJnZXQuaCkgLyAxMCwgZmxvdyA9PT0gXCJob3Jpem9udGFsXCIgPyBcInhcIiA6IFwieVwiKSk7XG4gICAgaWYgKGludGVyc2VjdGlvbnMpIHtcbiAgICAgIGNvbnN0IGZpcnN0SW50ZXJzZWN0aW9uID0gaW50ZXJzZWN0aW9uc1swXTtcbiAgICAgIGNsb3Nlc3RJbnRlcnNlY3Rpb24gPyBwb2ludERpc3QocmF5T3JpZ2luLCBmaXJzdEludGVyc2VjdGlvbikgPCBwb2ludERpc3QocmF5T3JpZ2luLCBjbG9zZXN0SW50ZXJzZWN0aW9uKSAmJiAoY2xvc2VzdEludGVyc2VjdGlvbiA9IGZpcnN0SW50ZXJzZWN0aW9uLCBjbG9zZXN0UmVjdCA9IHRhcmdldCkgOiAoY2xvc2VzdEludGVyc2VjdGlvbiA9IGZpcnN0SW50ZXJzZWN0aW9uLCBjbG9zZXN0UmVjdCA9IHRhcmdldCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBjbG9zZXN0UmVjdCB8fCBudWxsO1xufVxuZnVuY3Rpb24gc2NhbGVSZWN0KHJlY3QsIHNjYWxlLCBvcmlnaW4pIHtcbiAgY29uc3Qge1xuICAgIHgsXG4gICAgeSxcbiAgICB3LFxuICAgIGhcbiAgfSA9IHJlY3QsIHtcbiAgICB4OiBvcmlnaW5YLFxuICAgIHk6IG9yaWdpbllcbiAgfSA9IG9yaWdpbiwgbmV3WCA9IG9yaWdpblggKyAoeCAtIG9yaWdpblgpICogc2NhbGUsIG5ld1kgPSBvcmlnaW5ZICsgKHkgLSBvcmlnaW5ZKSAqIHNjYWxlLCBuZXdXaWR0aCA9IHcgKiBzY2FsZSwgbmV3SGVpZ2h0ID0gaCAqIHNjYWxlO1xuICByZXR1cm4ge1xuICAgIHg6IG5ld1gsXG4gICAgeTogbmV3WSxcbiAgICB3OiBuZXdXaWR0aCxcbiAgICBoOiBuZXdIZWlnaHRcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldFJlY3RHcm91cFhFeHRlbnQocmVjdHMpIHtcbiAgY29uc3QgbWluR3JvdXBYID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oLi4ucmVjdHMubWFwKChyKSA9PiByLngpKSksIG1heEdyb3VwWCA9IE1hdGgubWluKGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGgsIE1hdGgubWF4KC4uLnJlY3RzLm1hcCgocikgPT4gci54ICsgci53KSkpO1xuICByZXR1cm4ge1xuICAgIG1pbjogbWluR3JvdXBYLFxuICAgIG1heDogbWF4R3JvdXBYLFxuICAgIHdpZHRoOiBtYXhHcm91cFggLSBtaW5Hcm91cFhcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldFJlY3RHcm91cFlFeHRlbnQocmVjdHMpIHtcbiAgY29uc3QgbWluR3JvdXBZID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oLi4ucmVjdHMubWFwKChyKSA9PiByLnkpKSksIG1heEdyb3VwWSA9IE1hdGgubWluKGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LCBNYXRoLm1heCguLi5yZWN0cy5tYXAoKHIpID0+IHIueSArIHIuaCkpKTtcbiAgcmV0dXJuIHtcbiAgICBtaW46IG1pbkdyb3VwWSxcbiAgICBtYXg6IG1heEdyb3VwWSxcbiAgICBoZWlnaHQ6IG1heEdyb3VwWSAtIG1pbkdyb3VwWVxuICB9O1xufVxuZnVuY3Rpb24gY2FsY1RhcmdldEZsb3codGFyZ2V0cykge1xuICByZXR1cm4gdGFyZ2V0cy5zb21lKCh0MSkgPT4gdGFyZ2V0cy5maWx0ZXIoKHQyKSA9PiAhcmVjdEVxdWFsKHQxLCB0MikpLnNvbWUoKHQyKSA9PiB0MS55ID09PSB0Mi55KSkgPyBcImhvcml6b250YWxcIiA6IFwidmVydGljYWxcIjtcbn1cbmZ1bmN0aW9uIGNhbGNJbnNlcnRQb3NpdGlvbihvcmlnaW4sIHRhcmdldHMsIGZsb3cpIHtcbiAgaWYgKGZsb3cgPT09IFwiaG9yaXpvbnRhbFwiKSB7XG4gICAgY29uc3QgcmF5TGVmdCA9IHtcbiAgICAgIHgxOiBvcmlnaW4ueCxcbiAgICAgIHkxOiBvcmlnaW4ueSxcbiAgICAgIHgyOiBvcmlnaW4ueCAtIDFlOCxcbiAgICAgIHkyOiBvcmlnaW4ueVxuICAgIH0sIHJheVJpZ2h0ID0ge1xuICAgICAgeDE6IG9yaWdpbi54LFxuICAgICAgeTE6IG9yaWdpbi55LFxuICAgICAgeDI6IG9yaWdpbi54ICsgMWU4LFxuICAgICAgeTI6IG9yaWdpbi55XG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgbGVmdDogZmluZENsb3Nlc3RJbnRlcnNlY3Rpb24ocmF5TGVmdCwgdGFyZ2V0cywgZmxvdyksXG4gICAgICByaWdodDogZmluZENsb3Nlc3RJbnRlcnNlY3Rpb24ocmF5UmlnaHQsIHRhcmdldHMsIGZsb3cpXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCByYXlUb3AgPSB7XG4gICAgICB4MTogb3JpZ2luLngsXG4gICAgICB5MTogb3JpZ2luLnksXG4gICAgICB4Mjogb3JpZ2luLngsXG4gICAgICB5Mjogb3JpZ2luLnkgLSAxZThcbiAgICB9LCByYXlCb3R0b20gPSB7XG4gICAgICB4MTogb3JpZ2luLngsXG4gICAgICB5MTogb3JpZ2luLnksXG4gICAgICB4Mjogb3JpZ2luLngsXG4gICAgICB5Mjogb3JpZ2luLnkgKyAxZThcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICB0b3A6IGZpbmRDbG9zZXN0SW50ZXJzZWN0aW9uKHJheVRvcCwgdGFyZ2V0cywgZmxvdyksXG4gICAgICBib3R0b206IGZpbmRDbG9zZXN0SW50ZXJzZWN0aW9uKHJheUJvdHRvbSwgdGFyZ2V0cywgZmxvdylcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBmaW5kUmVjdFNhbml0eURhdGEocmVjdCwgb3ZlcmxheUdyb3VwKSB7XG4gIHJldHVybiBvdmVybGF5R3JvdXAuZmluZCgoZSkgPT4gcmVjdEVxdWFsKGdldFJlY3QoZS5lbGVtZW50cy5lbGVtZW50KSwgcmVjdCkpPy5zYW5pdHk7XG59XG5mdW5jdGlvbiByZXNvbHZlSW5zZXJ0UG9zaXRpb24ob3ZlcmxheUdyb3VwLCBpbnNlcnRQb3NpdGlvbiwgZmxvdykge1xuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhpbnNlcnRQb3NpdGlvbikuZXZlcnkoKHYpID0+IHYgPT09IG51bGwpID8gbnVsbCA6IGZsb3cgPT09IFwiaG9yaXpvbnRhbFwiID8ge1xuICAgIGxlZnQ6IGluc2VydFBvc2l0aW9uLmxlZnQgPyB7XG4gICAgICByZWN0OiBpbnNlcnRQb3NpdGlvbi5sZWZ0LFxuICAgICAgc2FuaXR5OiBmaW5kUmVjdFNhbml0eURhdGEoaW5zZXJ0UG9zaXRpb24ubGVmdCwgb3ZlcmxheUdyb3VwKVxuICAgIH0gOiBudWxsLFxuICAgIHJpZ2h0OiBpbnNlcnRQb3NpdGlvbi5yaWdodCA/IHtcbiAgICAgIHJlY3Q6IGluc2VydFBvc2l0aW9uLnJpZ2h0LFxuICAgICAgc2FuaXR5OiBmaW5kUmVjdFNhbml0eURhdGEoaW5zZXJ0UG9zaXRpb24ucmlnaHQsIG92ZXJsYXlHcm91cClcbiAgICB9IDogbnVsbFxuICB9IDoge1xuICAgIHRvcDogaW5zZXJ0UG9zaXRpb24udG9wID8ge1xuICAgICAgcmVjdDogaW5zZXJ0UG9zaXRpb24udG9wLFxuICAgICAgc2FuaXR5OiBmaW5kUmVjdFNhbml0eURhdGEoaW5zZXJ0UG9zaXRpb24udG9wLCBvdmVybGF5R3JvdXApXG4gICAgfSA6IG51bGwsXG4gICAgYm90dG9tOiBpbnNlcnRQb3NpdGlvbi5ib3R0b20gPyB7XG4gICAgICByZWN0OiBpbnNlcnRQb3NpdGlvbi5ib3R0b20sXG4gICAgICBzYW5pdHk6IGZpbmRSZWN0U2FuaXR5RGF0YShpbnNlcnRQb3NpdGlvbi5ib3R0b20sIG92ZXJsYXlHcm91cClcbiAgICB9IDogbnVsbFxuICB9O1xufVxuZnVuY3Rpb24gY2FsY01vdXNlUG9zKGUpIHtcbiAgY29uc3QgYm9keUJvdW5kcyA9IGRvY3VtZW50LmJvZHkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiB7XG4gICAgeDogTWF0aC5tYXgoYm9keUJvdW5kcy54LCBNYXRoLm1pbihlLmNsaWVudFgsIGJvZHlCb3VuZHMueCArIGJvZHlCb3VuZHMud2lkdGgpKSxcbiAgICB5OiBlLmNsaWVudFkgKyB3aW5kb3cuc2Nyb2xsWVxuICB9O1xufVxuZnVuY3Rpb24gY2FsY01vdXNlUG9zSW52ZXJzZVRyYW5zZm9ybShtb3VzZVBvczIpIHtcbiAgY29uc3QgYm9keSA9IGRvY3VtZW50LmJvZHksIHRyYW5zZm9ybSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGJvZHkpLnRyYW5zZm9ybTtcbiAgaWYgKHRyYW5zZm9ybSA9PT0gXCJub25lXCIpXG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IG1vdXNlUG9zMi54LFxuICAgICAgeTogbW91c2VQb3MyLnlcbiAgICB9O1xuICBjb25zdCBpbnZlcnNlTWF0cml4ID0gbmV3IERPTU1hdHJpeCh0cmFuc2Zvcm0pLmludmVyc2UoKSwgdHJhbnNmb3JtZWRQb2ludCA9IG5ldyBET01Qb2ludChtb3VzZVBvczIueCwgbW91c2VQb3MyLnkpLm1hdHJpeFRyYW5zZm9ybShpbnZlcnNlTWF0cml4KTtcbiAgcmV0dXJuIHtcbiAgICB4OiB0cmFuc2Zvcm1lZFBvaW50LngsXG4gICAgeTogdHJhbnNmb3JtZWRQb2ludC55XG4gIH07XG59XG5mdW5jdGlvbiBidWlsZFByZXZpZXdTa2VsZXRvbihtb3VzZVBvczIsIGVsZW1lbnQsIHNjYWxlRmFjdG9yKSB7XG4gIGNvbnN0IGJvdW5kcyA9IGdldFJlY3QoZWxlbWVudCksIGNoaWxkcmVuID0gWy4uLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIjp3aGVyZShoMSwgaDIsIGgzLCBoNCwgcCwgYSwgaW1nLCBzcGFuLCBidXR0b24pOm5vdCg6aGFzKCopKVwiKV07XG4gIG1vdXNlUG9zMi54IDw9IGJvdW5kcy54ICYmIChtb3VzZVBvczIueCA9IGJvdW5kcy54KSwgbW91c2VQb3MyLnggPj0gYm91bmRzLnggKyBib3VuZHMudyAmJiAobW91c2VQb3MyLnggPSBib3VuZHMueCArIGJvdW5kcy53KSwgbW91c2VQb3MyLnkgPj0gYm91bmRzLnkgKyBib3VuZHMuaCAmJiAobW91c2VQb3MyLnkgPSBib3VuZHMueSArIGJvdW5kcy5oKSwgbW91c2VQb3MyLnkgPD0gYm91bmRzLnkgJiYgKG1vdXNlUG9zMi55ID0gYm91bmRzLnkpO1xuICBjb25zdCBjaGlsZFJlY3RzID0gY2hpbGRyZW4ubWFwKChjaGlsZCkgPT4ge1xuICAgIGNvbnN0IHJlY3QgPSBzY2FsZVJlY3QoZ2V0UmVjdChjaGlsZCksIHNjYWxlRmFjdG9yLCB7XG4gICAgICB4OiBib3VuZHMueCxcbiAgICAgIHk6IGJvdW5kcy55XG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IHJlY3QueCAtIGJvdW5kcy54LFxuICAgICAgeTogcmVjdC55IC0gYm91bmRzLnksXG4gICAgICB3OiByZWN0LncsXG4gICAgICBoOiByZWN0LmgsXG4gICAgICB0YWdOYW1lOiBjaGlsZC50YWdOYW1lXG4gICAgfTtcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgb2Zmc2V0WDogKGJvdW5kcy54IC0gbW91c2VQb3MyLngpICogc2NhbGVGYWN0b3IsXG4gICAgb2Zmc2V0WTogKGJvdW5kcy55IC0gbW91c2VQb3MyLnkpICogc2NhbGVGYWN0b3IsXG4gICAgdzogYm91bmRzLncgKiBzY2FsZUZhY3RvcixcbiAgICBoOiBib3VuZHMuaCAqIHNjYWxlRmFjdG9yLFxuICAgIG1heFdpZHRoOiBib3VuZHMudyAqIHNjYWxlRmFjdG9yICogMC43NSxcbiAgICBjaGlsZFJlY3RzXG4gIH07XG59XG5jb25zdCBtaW5EcmFnRGVsdGEgPSA0O1xuYXN5bmMgZnVuY3Rpb24gYXBwbHlNaW5pbWFwV3JhcHBlclRyYW5zZm9ybSh0YXJnZXQsIHNjYWxlRmFjdG9yLCBtaW5ZU2NhbGVkLCBoYW5kbGVyLCByZWN0VXBkYXRlRnJlcXVlbmN5KSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCAoKSA9PiB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaGFuZGxlcih7XG4gICAgICAgICAgdHlwZTogXCJvdmVybGF5L2RyYWdFbmRNaW5pbWFwVHJhbnNpdGlvblwiXG4gICAgICAgIH0pO1xuICAgICAgfSwgcmVjdFVwZGF0ZUZyZXF1ZW5jeSAqIDIpLCByZXNvbHZlKCk7XG4gICAgfSwge1xuICAgICAgb25jZTogITBcbiAgICB9KSwgaGFuZGxlcih7XG4gICAgICB0eXBlOiBcIm92ZXJsYXkvZHJhZ1N0YXJ0TWluaW1hcFRyYW5zaXRpb25cIlxuICAgIH0pLCBoYW5kbGVyKHtcbiAgICAgIHR5cGU6IFwib3ZlcmxheS9kcmFnVG9nZ2xlTWluaW1hcFwiLFxuICAgICAgZGlzcGxheTogITBcbiAgICB9KSwgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCIsIGRvY3VtZW50LmJvZHkuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCIsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9IFwiaW5pdGlhbFwiLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gXCIxMDAlXCIsIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IFwiNTAlIDBweFwiLCB0YXJnZXQuc3R5bGUudHJhbnNpdGlvbiA9IFwidHJhbnNmb3JtIDE1MG1zIGVhc2VcIiwgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgwcHgsICR7LW1pbllTY2FsZWQgKyBzY3JvbGxZfXB4LCAwcHgpIHNjYWxlKCR7c2NhbGVGYWN0b3J9KWA7XG4gICAgfSwgMjUpO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGNhbGNNaW5pbWFwVHJhbnNmb3JtVmFsdWVzKHJlY3RzLCBncm91cEhlaWdodE92ZXJyaWRlKSB7XG4gIGxldCBncm91cEhlaWdodCA9IGdyb3VwSGVpZ2h0T3ZlcnJpZGUgfHwgZ2V0UmVjdEdyb3VwWUV4dGVudChyZWN0cykuaGVpZ2h0O1xuICBjb25zdCBwYWRkaW5nID0gMTAwO1xuICBncm91cEhlaWdodCArPSBwYWRkaW5nICogMjtcbiAgY29uc3Qgc2NhbGVGYWN0b3IgPSBncm91cEhlaWdodCA+IHdpbmRvdy5pbm5lckhlaWdodCA/IHdpbmRvdy5pbm5lckhlaWdodCAvIGdyb3VwSGVpZ2h0IDogMSwgc2NhbGVkUmVjdHMgPSByZWN0cy5tYXAoKHIpID0+IHNjYWxlUmVjdChyLCBzY2FsZUZhY3Rvciwge1xuICAgIHg6IHdpbmRvdy5pbm5lcldpZHRoIC8gMixcbiAgICB5OiAwXG4gIH0pKSwge1xuICAgIG1pbjogbWluWVNjYWxlZFxuICB9ID0gZ2V0UmVjdEdyb3VwWUV4dGVudChzY2FsZWRSZWN0cyk7XG4gIHJldHVybiB7XG4gICAgc2NhbGVGYWN0b3IsXG4gICAgbWluWVNjYWxlZDogbWluWVNjYWxlZCAtIHBhZGRpbmcgKiBzY2FsZUZhY3RvclxuICB9O1xufVxuZnVuY3Rpb24gY2FsY0dyb3VwQm91bmRzUHJldmlldyhyZWN0cykge1xuICBjb25zdCBncm91cEJvdW5kc1ggPSBnZXRSZWN0R3JvdXBYRXh0ZW50KHJlY3RzKSwgZ3JvdXBCb3VuZHNZID0gZ2V0UmVjdEdyb3VwWUV4dGVudChyZWN0cyksIG9mZnNldERpc3QgPSA4LCBjYW5PZmZzZXRYID0gZ3JvdXBCb3VuZHNYLm1pbiA+IG9mZnNldERpc3QgJiYgZ3JvdXBCb3VuZHNYLm1pbiArIGdyb3VwQm91bmRzWC53aWR0aCA8PSB3aW5kb3cuaW5uZXJXaWR0aCAtIG9mZnNldERpc3QsIGNhbk9mZnNldFkgPSBncm91cEJvdW5kc1kubWluID4gb2Zmc2V0RGlzdCAmJiBncm91cEJvdW5kc1kubWluICsgZ3JvdXBCb3VuZHNZLmhlaWdodCA8PSBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCAtIG9mZnNldERpc3QsIGNhbk9mZnNldCA9IGNhbk9mZnNldFggJiYgY2FuT2Zmc2V0WTtcbiAgcmV0dXJuIHtcbiAgICB4OiBjYW5PZmZzZXQgPyBncm91cEJvdW5kc1gubWluIC0gb2Zmc2V0RGlzdCA6IGdyb3VwQm91bmRzWC5taW4sXG4gICAgeTogY2FuT2Zmc2V0ID8gZ3JvdXBCb3VuZHNZLm1pbiAtIG9mZnNldERpc3QgOiBncm91cEJvdW5kc1kubWluLFxuICAgIHc6IGNhbk9mZnNldCA/IGdyb3VwQm91bmRzWC53aWR0aCArIG9mZnNldERpc3QgKiAyIDogZ3JvdXBCb3VuZHNYLndpZHRoLFxuICAgIGg6IGNhbk9mZnNldCA/IGdyb3VwQm91bmRzWS5oZWlnaHQgKyBvZmZzZXREaXN0ICogMiA6IGdyb3VwQm91bmRzWS5oZWlnaHRcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIHJlc2V0TWluaW1hcFdyYXBwZXJUcmFuc2Zvcm0oZW5kWU9yaWdpbiwgdGFyZ2V0LCBwcmVzY2FsZUhlaWdodDIsIGhhbmRsZXIsIHJlY3RVcGRhdGVGcmVxdWVuY3ksIHByZXZpb3VzUm9vdFN0eWxlVmFsdWVzMikge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBjb25zdCB0cmFuc2Zvcm0gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLnRyYW5zZm9ybTtcbiAgICBpZiAobmV3IERPTU1hdHJpeCh0cmFuc2Zvcm0pLmEgPT09IDEpIHJldHVybjtcbiAgICBjb25zdCBtYXhTY3JvbGwgPSBwcmVzY2FsZUhlaWdodDIgLSB3aW5kb3cuaW5uZXJIZWlnaHQsIHByZXZTY3JvbGxZID0gc2Nyb2xsWTtcbiAgICBlbmRZT3JpZ2luIC09IHdpbmRvdy5pbm5lckhlaWdodCAvIDIsIGVuZFlPcmlnaW4gPCAwICYmIChlbmRZT3JpZ2luID0gMCksIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCAoKSA9PiB7XG4gICAgICB0YXJnZXQuc3R5bGUudHJhbnNpdGlvbiA9IFwibm9uZVwiLCB0YXJnZXQuc3R5bGUudHJhbnNmb3JtID0gXCJub25lXCIsIHNjcm9sbFRvKHtcbiAgICAgICAgdG9wOiBlbmRZT3JpZ2luLFxuICAgICAgICBiZWhhdmlvcjogXCJpbnN0YW50XCJcbiAgICAgIH0pLCBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaGFuZGxlcih7XG4gICAgICAgICAgdHlwZTogXCJvdmVybGF5L2RyYWdFbmRNaW5pbWFwVHJhbnNpdGlvblwiXG4gICAgICAgIH0pLCBoYW5kbGVyKHtcbiAgICAgICAgICB0eXBlOiBcIm92ZXJsYXkvZHJhZ1RvZ2dsZU1pbmltYXBcIixcbiAgICAgICAgICBkaXNwbGF5OiAhMVxuICAgICAgICB9KTtcbiAgICAgIH0sIHJlY3RVcGRhdGVGcmVxdWVuY3kgKiAyKSwgcmVzb2x2ZSgpO1xuICAgIH0sIHtcbiAgICAgIG9uY2U6ICEwXG4gICAgfSksIGhhbmRsZXIoe1xuICAgICAgdHlwZTogXCJvdmVybGF5L2RyYWdTdGFydE1pbmltYXBUcmFuc2l0aW9uXCJcbiAgICB9KSwgdGFyZ2V0LnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKCR7TWF0aC5tYXgocHJldlNjcm9sbFkgLSBlbmRZT3JpZ2luLCAtbWF4U2Nyb2xsICsgcHJldlNjcm9sbFkpfXB4KSBzY2FsZSgxKWAsIHByZXZpb3VzUm9vdFN0eWxlVmFsdWVzMiAmJiAoZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IHByZXZpb3VzUm9vdFN0eWxlVmFsdWVzMi5ib2R5Lm92ZXJmbG93LCBkb2N1bWVudC5ib2R5LnN0eWxlLmhlaWdodCA9IHByZXZpb3VzUm9vdFN0eWxlVmFsdWVzMi5ib2R5LmhlaWdodCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gcHJldmlvdXNSb290U3R5bGVWYWx1ZXMyLmRvY3VtZW50RWxlbWVudC5vdmVyZmxvdywgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLmhlaWdodCA9IHByZXZpb3VzUm9vdFN0eWxlVmFsdWVzMi5kb2N1bWVudEVsZW1lbnQuaGVpZ2h0KTtcbiAgfSk7XG59XG5sZXQgbWluaW1hcFNjYWxlQXBwbGllZCA9ICExLCBtb3VzZVBvc0ludmVyc2VUcmFuc2Zvcm0gPSB7XG4gIHk6IDBcbn0sIG1vdXNlUG9zID0ge1xuICB4OiAwLFxuICB5OiAwXG59LCBwcmVzY2FsZUhlaWdodCA9IHR5cGVvZiBkb2N1bWVudCA+IFwidVwiID8gMCA6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQsIHByZXZpb3VzUm9vdFN0eWxlVmFsdWVzID0gbnVsbDtcbmZ1bmN0aW9uIGhhbmRsZU92ZXJsYXlEcmFnKG9wdHMpIHtcbiAgY29uc3Qge1xuICAgIG1vdXNlRXZlbnQsXG4gICAgZWxlbWVudCxcbiAgICBvdmVybGF5R3JvdXAsXG4gICAgaGFuZGxlcixcbiAgICB0YXJnZXQsXG4gICAgb25TZXF1ZW5jZVN0YXJ0LFxuICAgIG9uU2VxdWVuY2VFbmRcbiAgfSA9IG9wdHM7XG4gIGlmIChtb3VzZUV2ZW50LmJ1dHRvbiAhPT0gMCkgcmV0dXJuO1xuICB3aW5kb3cuZm9jdXMoKTtcbiAgY29uc3QgcmVjdFVwZGF0ZUZyZXF1ZW5jeSA9IDE1MDtcbiAgbGV0IHJlY3RzID0gb3ZlcmxheUdyb3VwLm1hcCgoZSkgPT4gZ2V0UmVjdChlLmVsZW1lbnRzLmVsZW1lbnQpKTtcbiAgY29uc3QgZmxvdyA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zYW5pdHktZHJhZy1mbG93XCIpIHx8IGNhbGNUYXJnZXRGbG93KHJlY3RzKSwgZHJhZ0dyb3VwID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNhbml0eS1kcmFnLWdyb3VwXCIpLCBkaXNhYmxlTWluaW1hcCA9ICEhZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNhbml0eS1kcmFnLW1pbmltYXAtZGlzYWJsZVwiKSwgcHJldmVudEluc2VydERlZmF1bHQgPSAhIWVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zYW5pdHktZHJhZy1wcmV2ZW50LWRlZmF1bHRcIiksIGRvY3VtZW50SGVpZ2h0T3ZlcnJpZGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtdW5zdGFibGVfc2FuaXR5LWRyYWctZG9jdW1lbnQtaGVpZ2h0XCIpLCBncm91cEhlaWdodE92ZXJyaWRlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXVuc3RhYmxlX3Nhbml0eS1kcmFnLWdyb3VwLWhlaWdodFwiKTtcbiAgbGV0IGluc2VydFBvc2l0aW9uID0gbnVsbDtcbiAgY29uc3QgaW5pdGlhbE1vdXNlUG9zID0gY2FsY01vdXNlUG9zKG1vdXNlRXZlbnQpLCBzY2FsZVRhcmdldCA9IGRvY3VtZW50LmJvZHksIHtcbiAgICBtaW5ZU2NhbGVkLFxuICAgIHNjYWxlRmFjdG9yXG4gIH0gPSBjYWxjTWluaW1hcFRyYW5zZm9ybVZhbHVlcyhyZWN0cywgZ3JvdXBIZWlnaHRPdmVycmlkZSA/IH5+Z3JvdXBIZWlnaHRPdmVycmlkZSA6IG51bGwpO1xuICBsZXQgc2VxdWVuY2VTdGFydGVkID0gITEsIG1pbmltYXBQcm9tcHRTaG93biA9ICExLCBtb3VzZWRvd24gPSAhMDtcbiAgbWluaW1hcFNjYWxlQXBwbGllZCB8fCAocHJldmlvdXNSb290U3R5bGVWYWx1ZXMgPSB7XG4gICAgYm9keToge1xuICAgICAgb3ZlcmZsb3c6IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLm92ZXJmbG93LFxuICAgICAgaGVpZ2h0OiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5oZWlnaHRcbiAgICB9LFxuICAgIGRvY3VtZW50RWxlbWVudDoge1xuICAgICAgb3ZlcmZsb3c6IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkub3ZlcmZsb3csXG4gICAgICBoZWlnaHQ6IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuaGVpZ2h0XG4gICAgfVxuICB9LCBwcmVzY2FsZUhlaWdodCA9IGRvY3VtZW50SGVpZ2h0T3ZlcnJpZGUgPyB+fmRvY3VtZW50SGVpZ2h0T3ZlcnJpZGUgOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KTtcbiAgY29uc3QgcmVjdHNJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICByZWN0cyA9IG92ZXJsYXlHcm91cC5tYXAoKGUpID0+IGdldFJlY3QoZS5lbGVtZW50cy5lbGVtZW50KSk7XG4gIH0sIHJlY3RVcGRhdGVGcmVxdWVuY3kpLCBhcHBseU1pbmltYXAgPSAoKSA9PiB7XG4gICAgaWYgKHNjYWxlRmFjdG9yID49IDEpIHJldHVybjtcbiAgICBjb25zdCBza2VsZXRvbiA9IGJ1aWxkUHJldmlld1NrZWxldG9uKG1vdXNlUG9zLCBlbGVtZW50LCBzY2FsZUZhY3Rvcik7XG4gICAgaGFuZGxlcih7XG4gICAgICB0eXBlOiBcIm92ZXJsYXkvZHJhZ1VwZGF0ZVNrZWxldG9uXCIsXG4gICAgICBza2VsZXRvblxuICAgIH0pLCBoYW5kbGVyKHtcbiAgICAgIHR5cGU6IFwib3ZlcmxheS9kcmFnVG9nZ2xlTWluaW1hcFByb21wdFwiLFxuICAgICAgZGlzcGxheTogITFcbiAgICB9KSwgYXBwbHlNaW5pbWFwV3JhcHBlclRyYW5zZm9ybShzY2FsZVRhcmdldCwgc2NhbGVGYWN0b3IsIG1pbllTY2FsZWQsIGhhbmRsZXIsIHJlY3RVcGRhdGVGcmVxdWVuY3kpLnRoZW4oKCkgPT4ge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGhhbmRsZXIoe1xuICAgICAgICAgIHR5cGU6IFwib3ZlcmxheS9kcmFnVXBkYXRlR3JvdXBSZWN0XCIsXG4gICAgICAgICAgZ3JvdXBSZWN0OiBjYWxjR3JvdXBCb3VuZHNQcmV2aWV3KHJlY3RzKVxuICAgICAgICB9KTtcbiAgICAgIH0sIHJlY3RVcGRhdGVGcmVxdWVuY3kgKiAyKTtcbiAgICB9KTtcbiAgfSwgaGFuZGxlU2Nyb2xsID0gKGUpID0+IHtcbiAgICBNYXRoLmFicyhlLmRlbHRhWSkgPj0gMTAgJiYgc2NhbGVGYWN0b3IgPCAxICYmICFtaW5pbWFwU2NhbGVBcHBsaWVkICYmICFtaW5pbWFwUHJvbXB0U2hvd24gJiYgIWRpc2FibGVNaW5pbWFwICYmIG1vdXNlZG93biAmJiAoaGFuZGxlcih7XG4gICAgICB0eXBlOiBcIm92ZXJsYXkvZHJhZ1RvZ2dsZU1pbmltYXBQcm9tcHRcIixcbiAgICAgIGRpc3BsYXk6ICEwXG4gICAgfSksIG1pbmltYXBQcm9tcHRTaG93biA9ICEwKSwgZS5zaGlmdEtleSAmJiAhbWluaW1hcFNjYWxlQXBwbGllZCAmJiAhZGlzYWJsZU1pbmltYXAgJiYgKHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInVuc3RhYmxlX3Nhbml0eS9kcmFnQXBwbHlNaW5pbWFwXCIpKSwgbWluaW1hcFNjYWxlQXBwbGllZCA9ICEwLCBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGFwcGx5TWluaW1hcCgpO1xuICAgIH0sIDUwKSk7XG4gIH0sIGhhbmRsZU1vdXNlTW92ZSA9IChlKSA9PiB7XG4gICAgaWYgKGUucHJldmVudERlZmF1bHQoKSwgbW91c2VQb3MgPSBjYWxjTW91c2VQb3MoZSksIG1vdXNlUG9zSW52ZXJzZVRyYW5zZm9ybSA9IGNhbGNNb3VzZVBvc0ludmVyc2VUcmFuc2Zvcm0obW91c2VQb3MpLCBNYXRoLmFicyhwb2ludERpc3QobW91c2VQb3MsIGluaXRpYWxNb3VzZVBvcykpIDwgbWluRHJhZ0RlbHRhKSByZXR1cm47XG4gICAgaWYgKCFzZXF1ZW5jZVN0YXJ0ZWQpIHtcbiAgICAgIGNvbnN0IGdyb3VwUmVjdCA9IGNhbGNHcm91cEJvdW5kc1ByZXZpZXcocmVjdHMpLCBza2VsZXRvbiA9IGJ1aWxkUHJldmlld1NrZWxldG9uKG1vdXNlUG9zLCBlbGVtZW50LCAxKTtcbiAgICAgIGhhbmRsZXIoe1xuICAgICAgICB0eXBlOiBcIm92ZXJsYXkvZHJhZ1N0YXJ0XCIsXG4gICAgICAgIGZsb3dcbiAgICAgIH0pLCBoYW5kbGVyKHtcbiAgICAgICAgdHlwZTogXCJvdmVybGF5L2RyYWdVcGRhdGVTa2VsZXRvblwiLFxuICAgICAgICBza2VsZXRvblxuICAgICAgfSksIGhhbmRsZXIoe1xuICAgICAgICB0eXBlOiBcIm92ZXJsYXkvZHJhZ1VwZGF0ZUdyb3VwUmVjdFwiLFxuICAgICAgICBncm91cFJlY3RcbiAgICAgIH0pLCBzZXF1ZW5jZVN0YXJ0ZWQgPSAhMCwgb25TZXF1ZW5jZVN0YXJ0KCk7XG4gICAgfVxuICAgIGhhbmRsZXIoe1xuICAgICAgdHlwZTogXCJvdmVybGF5L2RyYWdVcGRhdGVDdXJzb3JQb3NpdGlvblwiLFxuICAgICAgeDogbW91c2VQb3MueCxcbiAgICAgIHk6IG1vdXNlUG9zLnlcbiAgICB9KSwgZS5zaGlmdEtleSAmJiAhbWluaW1hcFNjYWxlQXBwbGllZCAmJiAhZGlzYWJsZU1pbmltYXAgJiYgKHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcInVuc3RhYmxlX3Nhbml0eS9kcmFnQXBwbHlNaW5pbWFwXCIpKSwgbWluaW1hcFNjYWxlQXBwbGllZCA9ICEwLCBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGFwcGx5TWluaW1hcCgpO1xuICAgIH0sIDUwKSk7XG4gICAgY29uc3QgbmV3SW5zZXJ0UG9zaXRpb24gPSBjYWxjSW5zZXJ0UG9zaXRpb24obW91c2VQb3MsIHJlY3RzLCBmbG93KTtcbiAgICBKU09OLnN0cmluZ2lmeShpbnNlcnRQb3NpdGlvbikgIT09IEpTT04uc3RyaW5naWZ5KG5ld0luc2VydFBvc2l0aW9uKSAmJiAoaW5zZXJ0UG9zaXRpb24gPSBuZXdJbnNlcnRQb3NpdGlvbiwgaGFuZGxlcih7XG4gICAgICB0eXBlOiBcIm92ZXJsYXkvZHJhZ1VwZGF0ZUluc2VydFBvc2l0aW9uXCIsXG4gICAgICBpbnNlcnRQb3NpdGlvbjogcmVzb2x2ZUluc2VydFBvc2l0aW9uKG92ZXJsYXlHcm91cCwgaW5zZXJ0UG9zaXRpb24sIGZsb3cpXG4gICAgfSkpO1xuICB9LCBoYW5kbGVNb3VzZVVwID0gKCkgPT4ge1xuICAgIG1vdXNlZG93biA9ICExLCBoYW5kbGVyKHtcbiAgICAgIHR5cGU6IFwib3ZlcmxheS9kcmFnRW5kXCIsXG4gICAgICB0YXJnZXQsXG4gICAgICBpbnNlcnRQb3NpdGlvbjogaW5zZXJ0UG9zaXRpb24gPyByZXNvbHZlSW5zZXJ0UG9zaXRpb24ob3ZlcmxheUdyb3VwLCBpbnNlcnRQb3NpdGlvbiwgZmxvdykgOiBudWxsLFxuICAgICAgZHJhZ0dyb3VwLFxuICAgICAgZmxvdyxcbiAgICAgIHByZXZlbnRJbnNlcnREZWZhdWx0XG4gICAgfSksIG1pbmltYXBQcm9tcHRTaG93biAmJiBoYW5kbGVyKHtcbiAgICAgIHR5cGU6IFwib3ZlcmxheS9kcmFnVG9nZ2xlTWluaW1hcFByb21wdFwiLFxuICAgICAgZGlzcGxheTogITFcbiAgICB9KSwgbWluaW1hcFNjYWxlQXBwbGllZCB8fCAoY2xlYXJJbnRlcnZhbChyZWN0c0ludGVydmFsKSwgb25TZXF1ZW5jZUVuZCgpLCByZW1vdmVGcmFtZUxpc3RlbmVycygpLCByZW1vdmVLZXlMaXN0ZW5lcnMoKSksIHJlbW92ZU1vdXNlTGlzdGVuZXJzKCk7XG4gIH0sIGhhbmRsZUtleXVwID0gKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiU2hpZnRcIiAmJiBtaW5pbWFwU2NhbGVBcHBsaWVkKSB7XG4gICAgICBtaW5pbWFwU2NhbGVBcHBsaWVkID0gITE7XG4gICAgICBjb25zdCBza2VsZXRvbiA9IGJ1aWxkUHJldmlld1NrZWxldG9uKG1vdXNlUG9zLCBlbGVtZW50LCAxIC8gc2NhbGVGYWN0b3IpO1xuICAgICAgaGFuZGxlcih7XG4gICAgICAgIHR5cGU6IFwib3ZlcmxheS9kcmFnVXBkYXRlU2tlbGV0b25cIixcbiAgICAgICAgc2tlbGV0b25cbiAgICAgIH0pLCB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJ1bnN0YWJsZV9zYW5pdHkvZHJhZ1Jlc2V0TWluaW1hcFwiKSksIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICByZXNldE1pbmltYXBXcmFwcGVyVHJhbnNmb3JtKG1vdXNlUG9zSW52ZXJzZVRyYW5zZm9ybS55LCBzY2FsZVRhcmdldCwgcHJlc2NhbGVIZWlnaHQsIGhhbmRsZXIsIHJlY3RVcGRhdGVGcmVxdWVuY3ksIHByZXZpb3VzUm9vdFN0eWxlVmFsdWVzKTtcbiAgICAgIH0sIDUwKSwgaGFuZGxlcih7XG4gICAgICAgIHR5cGU6IFwib3ZlcmxheS9kcmFnVXBkYXRlR3JvdXBSZWN0XCIsXG4gICAgICAgIGdyb3VwUmVjdDogbnVsbFxuICAgICAgfSksIG1vdXNlZG93biB8fCAoY2xlYXJJbnRlcnZhbChyZWN0c0ludGVydmFsKSwgcmVtb3ZlTW91c2VMaXN0ZW5lcnMoKSwgcmVtb3ZlRnJhbWVMaXN0ZW5lcnMoKSwgcmVtb3ZlS2V5TGlzdGVuZXJzKCksIG9uU2VxdWVuY2VFbmQoKSk7XG4gICAgfVxuICB9LCBoYW5kbGVCbHVyID0gKCkgPT4ge1xuICAgIGhhbmRsZXIoe1xuICAgICAgdHlwZTogXCJvdmVybGF5L2RyYWdVcGRhdGVHcm91cFJlY3RcIixcbiAgICAgIGdyb3VwUmVjdDogbnVsbFxuICAgIH0pLCB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJ1bnN0YWJsZV9zYW5pdHkvZHJhZ1Jlc2V0TWluaW1hcFwiKSksIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgcmVzZXRNaW5pbWFwV3JhcHBlclRyYW5zZm9ybShtb3VzZVBvc0ludmVyc2VUcmFuc2Zvcm0ueSwgc2NhbGVUYXJnZXQsIHByZXNjYWxlSGVpZ2h0LCBoYW5kbGVyLCByZWN0VXBkYXRlRnJlcXVlbmN5LCBwcmV2aW91c1Jvb3RTdHlsZVZhbHVlcykudGhlbigoKSA9PiB7XG4gICAgICAgIG1pbmltYXBTY2FsZUFwcGxpZWQgPSAhMTtcbiAgICAgIH0pO1xuICAgIH0sIDUwKSwgY2xlYXJJbnRlcnZhbChyZWN0c0ludGVydmFsKSwgcmVtb3ZlTW91c2VMaXN0ZW5lcnMoKSwgcmVtb3ZlRnJhbWVMaXN0ZW5lcnMoKSwgcmVtb3ZlS2V5TGlzdGVuZXJzKCksIG9uU2VxdWVuY2VFbmQoKTtcbiAgfSwgcmVtb3ZlTW91c2VMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgaGFuZGxlTW91c2VNb3ZlKSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCBoYW5kbGVTY3JvbGwpLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgaGFuZGxlTW91c2VVcCk7XG4gIH0sIHJlbW92ZUtleUxpc3RlbmVycyA9ICgpID0+IHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGhhbmRsZUtleXVwKTtcbiAgfSwgcmVtb3ZlRnJhbWVMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIGhhbmRsZUJsdXIpO1xuICB9O1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgaGFuZGxlQmx1ciksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgaGFuZGxlS2V5dXApLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIGhhbmRsZVNjcm9sbCksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGhhbmRsZU1vdXNlTW92ZSksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBoYW5kbGVNb3VzZVVwKTtcbn1cbmNvbnN0IGlzRWxlbWVudE5vZGUkMSA9ICh0YXJnZXQpID0+IHRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IHx8IHRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQ7XG5mdW5jdGlvbiBmaW5kTm9uSW5saW5lRWxlbWVudChlbGVtZW50KSB7XG4gIGNvbnN0IHtcbiAgICBkaXNwbGF5XG4gIH0gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgaWYgKGRpc3BsYXkgIT09IFwiaW5saW5lXCIpIHJldHVybiBlbGVtZW50O1xuICBjb25zdCBwYXJlbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gIHJldHVybiBwYXJlbnQgPyBmaW5kTm9uSW5saW5lRWxlbWVudChwYXJlbnQpIDogbnVsbDtcbn1cbmNvbnN0IGZpbmRPdmVybGF5RWxlbWVudCA9IChlbCkgPT4gIWVsIHx8ICFpc0VsZW1lbnROb2RlJDEoZWwpID8gbnVsbCA6IGVsLmRhdGFzZXQ/LnNhbml0eU92ZXJsYXlFbGVtZW50ID8gZWwgOiBmaW5kT3ZlcmxheUVsZW1lbnQoZWwucGFyZW50RWxlbWVudCk7XG5mdW5jdGlvbiB0ZXN0VmVyY2VsU3RlZ2FSZWdleChpbnB1dCkge1xuICByZXR1cm4gVkVSQ0VMX1NURUdBX1JFR0VYLmxhc3RJbmRleCA9IDAsIFZFUkNFTF9TVEVHQV9SRUdFWC50ZXN0KGlucHV0KTtcbn1cbmZ1bmN0aW9uIGRlY29kZVN0ZWdhKHN0ciwgaXNBbHRUZXh0ID0gITEpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkZWNvZGVkID0gdmVyY2VsU3RlZ2FEZWNvZGUoc3RyKTtcbiAgICByZXR1cm4gIWRlY29kZWQgfHwgZGVjb2RlZC5vcmlnaW4gIT09IFwic2FuaXR5LmlvXCIgPyBudWxsIDogKGlzQWx0VGV4dCAmJiAoZGVjb2RlZC5ocmVmID0gZGVjb2RlZC5ocmVmPy5yZXBsYWNlKFwiLmFsdFwiLCBcIlwiKSksIGRlY29kZWQpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICByZXR1cm4gY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBkZWNvZGUgc3RlZ2EgZm9yIHN0cmluZzogXCIsIHN0ciwgXCJ3aXRoIHRoZSBvcmlnaW5hbCBlcnJvcjogXCIsIGVyciksIG51bGw7XG4gIH1cbn1cbmZ1bmN0aW9uIHRlc3RBbmREZWNvZGVTdGVnYShzdHIsIGlzQWx0VGV4dCA9ICExKSB7XG4gIHJldHVybiB0ZXN0VmVyY2VsU3RlZ2FSZWdleChzdHIpID8gZGVjb2RlU3RlZ2Eoc3RyLCBpc0FsdFRleHQpIDogbnVsbDtcbn1cbmNvbnN0IGlzRWxlbWVudE5vZGUgPSAobm9kZSkgPT4gbm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUsIGlzSW1nRWxlbWVudCA9IChlbCkgPT4gZWwudGFnTmFtZSA9PT0gXCJJTUdcIiwgaXNUaW1lRWxlbWVudCA9IChlbCkgPT4gZWwudGFnTmFtZSA9PT0gXCJUSU1FXCIsIGlzU3ZnUm9vdEVsZW1lbnQgPSAoZWwpID0+IGVsLnRhZ05hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJTVkdcIjtcbmZ1bmN0aW9uIGlzU2FuaXR5Tm9kZShub2RlKSB7XG4gIHJldHVybiBcInBhdGhcIiBpbiBub2RlO1xufVxuZnVuY3Rpb24gZmluZENvbW1vblBhdGgoZmlyc3QsIHNlY29uZCkge1xuICBsZXQgZmlyc3RQYXJ0cyA9IGZpcnN0LnNwbGl0KFwiLlwiKSwgc2Vjb25kUGFydHMgPSBzZWNvbmQuc3BsaXQoXCIuXCIpO1xuICBjb25zdCBtYXhMZW5ndGggPSBNYXRoLm1pbihmaXJzdFBhcnRzLmxlbmd0aCwgc2Vjb25kUGFydHMubGVuZ3RoKTtcbiAgcmV0dXJuIGZpcnN0UGFydHMgPSBmaXJzdFBhcnRzLnNsaWNlKDAsIG1heExlbmd0aCkucmV2ZXJzZSgpLCBzZWNvbmRQYXJ0cyA9IHNlY29uZFBhcnRzLnNsaWNlKDAsIG1heExlbmd0aCkucmV2ZXJzZSgpLCBmaXJzdFBhcnRzLnJlZHVjZSgocGFydHMsIHBhcnQsIGkpID0+IHBhcnQgPT09IHNlY29uZFBhcnRzW2ldID8gWy4uLnBhcnRzLCBwYXJ0XSA6IFtdLCBbXSkucmV2ZXJzZSgpLmpvaW4oXCIuXCIpO1xufVxuZnVuY3Rpb24gZmluZENvbW1vblNhbml0eURhdGEobm9kZXMpIHtcbiAgaWYgKCFub2Rlcy5sZW5ndGggfHwgIW5vZGVzLm1hcCgobikgPT4gaXNTYW5pdHlOb2RlKG4pKS5ldmVyeSgobiwgX2ksIGFycikgPT4gbiA9PT0gYXJyWzBdKSlcbiAgICByZXR1cm47XG4gIGlmICghaXNTYW5pdHlOb2RlKG5vZGVzWzBdKSkgcmV0dXJuIG5vZGVzWzBdO1xuICBjb25zdCBzYW5pdHlOb2RlcyA9IG5vZGVzLmZpbHRlcihpc1Nhbml0eU5vZGUpO1xuICBsZXQgY29tbW9uID0gbm9kZXNbMF07XG4gIGNvbnN0IGNvbnNpc3RlbnRWYWx1ZUtleXMgPSBbXCJwcm9qZWN0SWRcIiwgXCJkYXRhc2V0XCIsIFwiaWRcIiwgXCJiYXNlVXJsXCIsIFwid29ya3NwYWNlXCIsIFwidG9vbFwiXTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBzYW5pdHlOb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IG5vZGUgPSBzYW5pdHlOb2Rlc1tpXTtcbiAgICBpZiAoY29uc2lzdGVudFZhbHVlS2V5cy5zb21lKChrZXkpID0+IG5vZGVba2V5XSAhPT0gY29tbW9uPy5ba2V5XSkpIHtcbiAgICAgIGNvbW1vbiA9IHZvaWQgMDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjb21tb24gPSB7XG4gICAgICAuLi5jb21tb24sXG4gICAgICBwYXRoOiBmaW5kQ29tbW9uUGF0aChjb21tb24ucGF0aCwgbm9kZS5wYXRoKVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIGNvbW1vbjtcbn1cbmZ1bmN0aW9uIGZpbmRTYW5pdHlOb2RlcyhlbCkge1xuICBjb25zdCBtYWluUmVzdWx0cyA9IFtdO1xuICBmdW5jdGlvbiBjcmVhdGVSZXNvbHZlZEVsZW1lbnQoZWxlbWVudCwgZGF0YSwgcmVhc29uLCBwcmV2ZW50R3JvdXBpbmcpIHtcbiAgICBjb25zdCBzYW5pdHkgPSBkZWNvZGVTYW5pdHlOb2RlRGF0YShkYXRhKTtcbiAgICBpZiAoIXNhbml0eSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBtZWFzdXJlRWxlbWVudCA9IGZpbmROb25JbmxpbmVFbGVtZW50KGVsZW1lbnQpO1xuICAgIGlmIChtZWFzdXJlRWxlbWVudClcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGVsZW1lbnRzOiB7XG4gICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICBtZWFzdXJlRWxlbWVudFxuICAgICAgICB9LFxuICAgICAgICBzYW5pdHksXG4gICAgICAgIHJlYXNvbixcbiAgICAgICAgcHJldmVudEdyb3VwaW5nXG4gICAgICB9O1xuICB9XG4gIGZ1bmN0aW9uIHJlc29sdmVOb2RlKG5vZGUpIHtcbiAgICBjb25zdCB7XG4gICAgICBub2RlVHlwZSxcbiAgICAgIHBhcmVudEVsZW1lbnQsXG4gICAgICB0ZXh0Q29udGVudFxuICAgIH0gPSBub2RlO1xuICAgIGlmIChpc0VsZW1lbnROb2RlKG5vZGUpICYmIG5vZGUuZGF0YXNldD8uc2FuaXR5RWRpdFRhcmdldCAhPT0gdm9pZCAwKSB7XG4gICAgICBjb25zdCBub2Rlc0luVGFyZ2V0ID0gZmluZFNhbml0eU5vZGVzKG5vZGUpLCBjb21tb25EYXRhID0gZmluZENvbW1vblNhbml0eURhdGEobm9kZXNJblRhcmdldC5tYXAoKG5vZGUyKSA9PiBub2RlMi50eXBlID09PSBcImVsZW1lbnRcIiA/IG5vZGUyLmNvbW1vblNhbml0eSA6IHZvaWQgMCkuZmlsdGVyKChuKSA9PiBuICE9PSB2b2lkIDApKTtcbiAgICAgIGlmIChjb21tb25EYXRhKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlYXNvbjogXCJlZGl0LXRhcmdldFwiLFxuICAgICAgICAgIGVsZW1lbnRzOiB7XG4gICAgICAgICAgICBlbGVtZW50OiBub2RlLFxuICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQ6IG5vZGVcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNhbml0eTogY29tbW9uRGF0YVxuICAgICAgICB9O1xuICAgIH0gZWxzZSBpZiAobm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICYmIHBhcmVudEVsZW1lbnQgJiYgdGV4dENvbnRlbnQpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB0ZXN0QW5kRGVjb2RlU3RlZ2EodGV4dENvbnRlbnQpO1xuICAgICAgcmV0dXJuIGRhdGEgPyBjcmVhdGVSZXNvbHZlZEVsZW1lbnQocGFyZW50RWxlbWVudCwgZGF0YSwgXCJzdGVnYS10ZXh0XCIsICEwKSA6IHZvaWQgMDtcbiAgICB9IGVsc2UgaWYgKGlzRWxlbWVudE5vZGUobm9kZSkpIHtcbiAgICAgIGlmIChub2RlLnRhZ05hbWUgPT09IFwiU0NSSVBUXCIgfHwgbm9kZS50YWdOYW1lID09PSBcIlNBTklUWS1WSVNVQUwtRURJVElOR1wiKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAobm9kZS5kYXRhc2V0Py5zYW5pdHkpXG4gICAgICAgIHJldHVybiBjcmVhdGVSZXNvbHZlZEVsZW1lbnQobm9kZSwgbm9kZS5kYXRhc2V0LnNhbml0eSwgXCJkYXRhLWF0dHJpYnV0ZVwiLCAhIShub2RlLnRleHRDb250ZW50ICYmIHRlc3RWZXJjZWxTdGVnYVJlZ2V4KG5vZGUudGV4dENvbnRlbnQpKSk7XG4gICAgICBpZiAobm9kZS5kYXRhc2V0Py5zYW5pdHlFZGl0SW5mbylcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVJlc29sdmVkRWxlbWVudChub2RlLCBub2RlLmRhdGFzZXQuc2FuaXR5RWRpdEluZm8sIFwiZGF0YS1hdHRyaWJ1dGVcIiwgISEobm9kZS50ZXh0Q29udGVudCAmJiB0ZXN0VmVyY2VsU3RlZ2FSZWdleChub2RlLnRleHRDb250ZW50KSkpO1xuICAgICAgaWYgKGlzSW1nRWxlbWVudChub2RlKSkge1xuICAgICAgICBjb25zdCBkYXRhID0gdGVzdEFuZERlY29kZVN0ZWdhKG5vZGUuYWx0LCAhMCk7XG4gICAgICAgIHJldHVybiBkYXRhID8gY3JlYXRlUmVzb2x2ZWRFbGVtZW50KG5vZGUsIGRhdGEsIFwic3RlZ2EtYXR0cmlidXRlXCIpIDogdm9pZCAwO1xuICAgICAgfSBlbHNlIGlmIChpc1RpbWVFbGVtZW50KG5vZGUpKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0ZXN0QW5kRGVjb2RlU3RlZ2Eobm9kZS5kYXRlVGltZSwgITApO1xuICAgICAgICByZXR1cm4gZGF0YSA/IGNyZWF0ZVJlc29sdmVkRWxlbWVudChub2RlLCBkYXRhLCBcInN0ZWdhLWF0dHJpYnV0ZVwiKSA6IHZvaWQgMDtcbiAgICAgIH0gZWxzZSBpZiAoaXNTdmdSb290RWxlbWVudChub2RlKSkge1xuICAgICAgICBpZiAoIW5vZGUuYXJpYUxhYmVsKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0ZXN0QW5kRGVjb2RlU3RlZ2Eobm9kZS5hcmlhTGFiZWwsICEwKTtcbiAgICAgICAgcmV0dXJuIGRhdGEgPyBjcmVhdGVSZXNvbHZlZEVsZW1lbnQobm9kZSwgZGF0YSwgXCJzdGVnYS1hdHRyaWJ1dGVcIikgOiB2b2lkIDA7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHByb2Nlc3NOb2RlKG5vZGUsIF9wYXJlbnRHcm91cCkge1xuICAgIGNvbnN0IHJlc29sdmVkRWxlbWVudCA9IHJlc29sdmVOb2RlKG5vZGUpO1xuICAgIGxldCBwYXJlbnRHcm91cCA9IF9wYXJlbnRHcm91cDtcbiAgICBpZiAoaXNFbGVtZW50Tm9kZShub2RlKSAmJiBub2RlLmRhdGFzZXQ/LnNhbml0eUVkaXRHcm91cCAhPT0gdm9pZCAwICYmIChwYXJlbnRHcm91cCA9IHtcbiAgICAgIHR5cGU6IFwiZ3JvdXBcIixcbiAgICAgIGVsZW1lbnRzOiB7XG4gICAgICAgIGVsZW1lbnQ6IG5vZGUsXG4gICAgICAgIG1lYXN1cmVFbGVtZW50OiBub2RlXG4gICAgICB9LFxuICAgICAgdGFyZ2V0czogW11cbiAgICB9LCBtYWluUmVzdWx0cy5wdXNoKHBhcmVudEdyb3VwKSksIHJlc29sdmVkRWxlbWVudCkge1xuICAgICAgY29uc3QgdGFyZ2V0ID0ge1xuICAgICAgICBlbGVtZW50czogcmVzb2x2ZWRFbGVtZW50LmVsZW1lbnRzLFxuICAgICAgICBzYW5pdHk6IHJlc29sdmVkRWxlbWVudC5zYW5pdHksXG4gICAgICAgIHJlYXNvbjogcmVzb2x2ZWRFbGVtZW50LnJlYXNvblxuICAgICAgfTtcbiAgICAgIHBhcmVudEdyb3VwICYmICFyZXNvbHZlZEVsZW1lbnQucHJldmVudEdyb3VwaW5nID8gcGFyZW50R3JvdXAudGFyZ2V0cy5wdXNoKHRhcmdldCkgOiBtYWluUmVzdWx0cy5wdXNoKHtcbiAgICAgICAgZWxlbWVudHM6IHJlc29sdmVkRWxlbWVudC5lbGVtZW50cyxcbiAgICAgICAgdHlwZTogXCJlbGVtZW50XCIsXG4gICAgICAgIHRhcmdldHM6IFt0YXJnZXRdXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGlzRWxlbWVudE5vZGUobm9kZSkgJiYgIWlzSW1nRWxlbWVudChub2RlKSAmJiAhKG5vZGUudGFnTmFtZSA9PT0gXCJTQ1JJUFRcIiB8fCBub2RlLnRhZ05hbWUgPT09IFwiU0FOSVRZLVZJU1VBTC1FRElUSU5HXCIpKVxuICAgICAgZm9yIChjb25zdCBjaGlsZE5vZGUgb2Ygbm9kZS5jaGlsZE5vZGVzKVxuICAgICAgICBwcm9jZXNzTm9kZShjaGlsZE5vZGUsIHBhcmVudEdyb3VwKTtcbiAgfVxuICBpZiAoZWwpXG4gICAgZm9yIChjb25zdCBub2RlIG9mIGVsLmNoaWxkTm9kZXMpXG4gICAgICBwcm9jZXNzTm9kZShub2RlLCB2b2lkIDApO1xuICByZXR1cm4gbWFpblJlc3VsdHMubWFwKChub2RlKSA9PiB7XG4gICAgaWYgKG5vZGUudGFyZ2V0cy5sZW5ndGggPT09IDAgJiYgbm9kZS50eXBlID09PSBcImdyb3VwXCIpXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5ub2RlLFxuICAgICAgICBjb21tb25TYW5pdHk6IHZvaWQgMFxuICAgICAgfTtcbiAgICBjb25zdCBjb21tb25TYW5pdHkgPSBub2RlLnRhcmdldHMubGVuZ3RoID09PSAxID8gbm9kZS50YXJnZXRzWzBdLnNhbml0eSA6IGZpbmRDb21tb25TYW5pdHlEYXRhKG5vZGUudGFyZ2V0cy5tYXAoKHtcbiAgICAgIHNhbml0eVxuICAgIH0pID0+IHNhbml0eSkuZmlsdGVyKChuKSA9PiBuICE9PSB2b2lkIDApKSB8fCBub2RlLnRhcmdldHNbMF0uc2FuaXR5O1xuICAgIHJldHVybiBjb21tb25TYW5pdHkgPyB7XG4gICAgICAuLi5ub2RlLFxuICAgICAgY29tbW9uU2FuaXR5XG4gICAgfSA6IG51bGw7XG4gIH0pLmZpbHRlcigobm9kZSkgPT4gbm9kZSAhPT0gbnVsbCk7XG59XG5mdW5jdGlvbiBpc1Nhbml0eUFycmF5UGF0aChwYXRoKSB7XG4gIGNvbnN0IGxhc3REb3RJbmRleCA9IHBhdGgubGFzdEluZGV4T2YoXCIuXCIpO1xuICByZXR1cm4gcGF0aC5zdWJzdHJpbmcobGFzdERvdEluZGV4LCBwYXRoLmxlbmd0aCkuaW5jbHVkZXMoXCJbXCIpO1xufVxuZnVuY3Rpb24gZ2V0U2FuaXR5Tm9kZUFycmF5UGF0aChwYXRoKSB7XG4gIGlmICghaXNTYW5pdHlBcnJheVBhdGgocGF0aCkpIHJldHVybiBudWxsO1xuICBjb25zdCBzcGxpdCA9IHBhdGguc3BsaXQoXCIuXCIpO1xuICByZXR1cm4gc3BsaXRbc3BsaXQubGVuZ3RoIC0gMV0gPSBzcGxpdFtzcGxpdC5sZW5ndGggLSAxXS5yZXBsYWNlKC9cXFsuKj9cXF0vZywgXCJbXVwiKSwgc3BsaXQuam9pbihcIi5cIik7XG59XG5mdW5jdGlvbiBzYW5pdHlOb2Rlc0V4aXN0SW5TYW1lQXJyYXkoc2FuaXR5Tm9kZTEsIHNhbml0eU5vZGUyKSB7XG4gIHJldHVybiAhaXNTYW5pdHlBcnJheVBhdGgoc2FuaXR5Tm9kZTEucGF0aCkgfHwgIWlzU2FuaXR5QXJyYXlQYXRoKHNhbml0eU5vZGUyLnBhdGgpID8gITEgOiBnZXRTYW5pdHlOb2RlQXJyYXlQYXRoKHNhbml0eU5vZGUxLnBhdGgpID09PSBnZXRTYW5pdHlOb2RlQXJyYXlQYXRoKHNhbml0eU5vZGUyLnBhdGgpO1xufVxuZnVuY3Rpb24gcmVzb2x2ZURyYWdBbmREcm9wR3JvdXAoZWxlbWVudCwgc2FuaXR5LCBlbGVtZW50U2V0LCBlbGVtZW50c01hcCkge1xuICBpZiAoIWVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zYW5pdHlcIikgfHwgZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNhbml0eS1kcmFnLWRpc2FibGVcIikgfHwgIXNhbml0eSB8fCAhaXNTYW5pdHlOb2RlKHNhbml0eSkgfHwgIWlzU2FuaXR5QXJyYXlQYXRoKHNhbml0eS5wYXRoKSkgcmV0dXJuIG51bGw7XG4gIGNvbnN0IHRhcmdldERyYWdHcm91cCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zYW5pdHktZHJhZy1ncm91cFwiKSwgZ3JvdXAgPSBbLi4uZWxlbWVudFNldF0ucmVkdWNlKChhY2MsIGVsKSA9PiB7XG4gICAgY29uc3QgZWxEYXRhID0gZWxlbWVudHNNYXAuZ2V0KGVsKSwgZWxEcmFnRGlzYWJsZWQgPSBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNhbml0eS1kcmFnLWRpc2FibGVcIiksIGVsRHJhZ0dyb3VwID0gZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1zYW5pdHktZHJhZy1ncm91cFwiKSwgZWxIYXNTYW5pdHlBdHRyaWJ1dGlvbiA9IGVsLmdldEF0dHJpYnV0ZShcImRhdGEtc2FuaXR5XCIpICE9PSBudWxsLCBzaGFyZWREcmFnR3JvdXAgPSB0YXJnZXREcmFnR3JvdXAgIT09IG51bGwgPyB0YXJnZXREcmFnR3JvdXAgPT09IGVsRHJhZ0dyb3VwIDogITA7XG4gICAgcmV0dXJuIGVsRGF0YT8uc2FuaXR5ICYmICFlbERyYWdEaXNhYmxlZCAmJiBpc1Nhbml0eU5vZGUoZWxEYXRhLnNhbml0eSkgJiYgc2FuaXR5Tm9kZXNFeGlzdEluU2FtZUFycmF5KHNhbml0eSwgZWxEYXRhLnNhbml0eSkgJiYgc2hhcmVkRHJhZ0dyb3VwICYmIGVsSGFzU2FuaXR5QXR0cmlidXRpb24gJiYgYWNjLnB1c2goZWxEYXRhKSwgYWNjO1xuICB9LCBbXSk7XG4gIHJldHVybiBncm91cC5sZW5ndGggPD0gMSA/IG51bGwgOiBncm91cDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZU92ZXJsYXlDb250cm9sbGVyKHtcbiAgaGFuZGxlcixcbiAgb3ZlcmxheUVsZW1lbnQsXG4gIGluRnJhbWUsXG4gIGluUG9wVXAsXG4gIG9wdGltaXN0aWNBY3RvclJlYWR5XG59KSB7XG4gIGxldCBhY3RpdmF0ZWQgPSAhMTtcbiAgY29uc3QgZWxlbWVudElkTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSwgZWxlbWVudHNNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKSwgZWxlbWVudFNldCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCksIG1lYXN1cmVFbGVtZW50cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha01hcCgpLCBjdXJzb3JNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IFdlYWtNYXAoKTtcbiAgbGV0IHJvLCBpbywgbW8sIGFjdGl2ZURyYWdTZXF1ZW5jZSA9ICExLCBob3ZlclN0YWNrID0gW107XG4gIGNvbnN0IGdldEhvdmVyZWRFbGVtZW50ID0gKCkgPT4gaG92ZXJTdGFja1tob3ZlclN0YWNrLmxlbmd0aCAtIDFdO1xuICBmdW5jdGlvbiBhZGRFdmVudEhhbmRsZXJzKGVsLCBoYW5kbGVycykge1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVycy5jbGljaywge1xuICAgICAgY2FwdHVyZTogITBcbiAgICB9KSwgZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIGhhbmRsZXJzLmNvbnRleHRtZW51LCB7XG4gICAgICBjYXB0dXJlOiAhMFxuICAgIH0pLCBlbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGhhbmRsZXJzLm1vdXNlbW92ZSwge1xuICAgICAgb25jZTogITAsXG4gICAgICBjYXB0dXJlOiAhMFxuICAgIH0pLCBlbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGhhbmRsZXJzLm1vdXNlZG93biwge1xuICAgICAgY2FwdHVyZTogITBcbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiByZW1vdmVFdmVudEhhbmRsZXJzKGVsLCBoYW5kbGVycykge1xuICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVycy5jbGljaywge1xuICAgICAgY2FwdHVyZTogITBcbiAgICB9KSwgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIGhhbmRsZXJzLmNvbnRleHRtZW51LCB7XG4gICAgICBjYXB0dXJlOiAhMFxuICAgIH0pLCBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGhhbmRsZXJzLm1vdXNlbW92ZSwge1xuICAgICAgY2FwdHVyZTogITBcbiAgICB9KSwgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVycy5tb3VzZWRvd24sIHtcbiAgICAgIGNhcHR1cmU6ICEwXG4gICAgfSksIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsIGhhbmRsZXJzLm1vdXNlZW50ZXIpLCBlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBoYW5kbGVycy5tb3VzZWxlYXZlKTtcbiAgfVxuICBmdW5jdGlvbiBhY3RpdmF0ZUVsZW1lbnQoe1xuICAgIGlkLFxuICAgIGVsZW1lbnRzLFxuICAgIGhhbmRsZXJzXG4gIH0pIHtcbiAgICBjb25zdCB7XG4gICAgICBlbGVtZW50LFxuICAgICAgbWVhc3VyZUVsZW1lbnRcbiAgICB9ID0gZWxlbWVudHM7XG4gICAgYWRkRXZlbnRIYW5kbGVycyhlbGVtZW50LCBoYW5kbGVycyksIHJvLm9ic2VydmUobWVhc3VyZUVsZW1lbnQpLCBoYW5kbGVyKHtcbiAgICAgIHR5cGU6IFwiZWxlbWVudC9hY3RpdmF0ZVwiLFxuICAgICAgaWRcbiAgICB9KTtcbiAgfVxuICBmdW5jdGlvbiBkZWFjdGl2YXRlRWxlbWVudCh7XG4gICAgaWQsXG4gICAgZWxlbWVudHMsXG4gICAgaGFuZGxlcnNcbiAgfSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGVsZW1lbnQsXG4gICAgICBtZWFzdXJlRWxlbWVudFxuICAgIH0gPSBlbGVtZW50cztcbiAgICByZW1vdmVFdmVudEhhbmRsZXJzKGVsZW1lbnQsIGhhbmRsZXJzKSwgcm8udW5vYnNlcnZlKG1lYXN1cmVFbGVtZW50KSwgaG92ZXJTdGFjayA9IGhvdmVyU3RhY2suZmlsdGVyKChlbCkgPT4gZWwgIT09IGVsZW1lbnQpLCBoYW5kbGVyKHtcbiAgICAgIHR5cGU6IFwiZWxlbWVudC9kZWFjdGl2YXRlXCIsXG4gICAgICBpZFxuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIHNldE92ZXJsYXlDdXJzb3IoZWxlbWVudCkge1xuICAgIGlmICghKCFpbkZyYW1lICYmICFpblBvcFVwIHx8ICFvcHRpbWlzdGljQWN0b3JSZWFkeSkpXG4gICAgICBmb3IgKGNvbnN0IGhvdmVyc3RhY2tFbGVtZW50IG9mIGhvdmVyU3RhY2spIHtcbiAgICAgICAgaWYgKGVsZW1lbnQgPT09IGhvdmVyc3RhY2tFbGVtZW50KSB7XG4gICAgICAgICAgY29uc3QgdGFyZ2V0U2FuaXR5RGF0YSA9IGVsZW1lbnRzTWFwLmdldChlbGVtZW50KT8uc2FuaXR5O1xuICAgICAgICAgIGlmICghdGFyZ2V0U2FuaXR5RGF0YSB8fCAhaXNTYW5pdHlOb2RlKHRhcmdldFNhbml0eURhdGEpKSByZXR1cm47XG4gICAgICAgICAgaWYgKHJlc29sdmVEcmFnQW5kRHJvcEdyb3VwKGVsZW1lbnQsIHRhcmdldFNhbml0eURhdGEsIGVsZW1lbnRTZXQsIGVsZW1lbnRzTWFwKSkge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDdXJzb3IgPSBlbGVtZW50LnN0eWxlLmN1cnNvcjtcbiAgICAgICAgICAgIGV4aXN0aW5nQ3Vyc29yICYmIGN1cnNvck1hcC5zZXQoZWxlbWVudCwgZXhpc3RpbmdDdXJzb3IpLCBoYW5kbGVyKHtcbiAgICAgICAgICAgICAgdHlwZTogXCJvdmVybGF5L3NldEN1cnNvclwiLFxuICAgICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgICBjdXJzb3I6IFwibW92ZVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXN0b3JlT3ZlcmxheUN1cnNvcihob3ZlcnN0YWNrRWxlbWVudCk7XG4gICAgICB9XG4gIH1cbiAgZnVuY3Rpb24gcmVzdG9yZU92ZXJsYXlDdXJzb3IoZWxlbWVudCkge1xuICAgIGNvbnN0IHByZXZpb3VzQ3Vyc29yID0gY3Vyc29yTWFwLmdldChlbGVtZW50KTtcbiAgICBoYW5kbGVyKHtcbiAgICAgIHR5cGU6IFwib3ZlcmxheS9zZXRDdXJzb3JcIixcbiAgICAgIGVsZW1lbnQsXG4gICAgICBjdXJzb3I6IHByZXZpb3VzQ3Vyc29yXG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gcmVnaXN0ZXJFbGVtZW50KHtcbiAgICB0eXBlLFxuICAgIGVsZW1lbnRzLFxuICAgIGNvbW1vblNhbml0eSxcbiAgICB0YXJnZXRzXG4gIH0pIHtcbiAgICBjb25zdCB7XG4gICAgICBlbGVtZW50LFxuICAgICAgbWVhc3VyZUVsZW1lbnRcbiAgICB9ID0gZWxlbWVudHMsIGV2ZW50SGFuZGxlcnMgPSB7XG4gICAgICBjbGljayhldmVudCkge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGlmIChlbGVtZW50ID09PSBnZXRIb3ZlcmVkRWxlbWVudCgpICYmIGVsZW1lbnQuY29udGFpbnModGFyZ2V0KSkge1xuICAgICAgICAgIGluRnJhbWUgJiYgKGV2ZW50LnByZXZlbnREZWZhdWx0KCksIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpKTtcbiAgICAgICAgICBjb25zdCBzYW5pdHkgPSBlbGVtZW50c01hcC5nZXQoZWxlbWVudCk/LnNhbml0eTtcbiAgICAgICAgICBzYW5pdHkgJiYgIWFjdGl2ZURyYWdTZXF1ZW5jZSAmJiBoYW5kbGVyKHtcbiAgICAgICAgICAgIHR5cGU6IFwiZWxlbWVudC9jbGlja1wiLFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBzYW5pdHlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNvbnRleHRtZW51KGV2ZW50KSB7XG4gICAgICAgIGlmICghKFwicGF0aFwiIGluIGNvbW1vblNhbml0eSkgfHwgIWluRnJhbWUgJiYgIWluUG9wVXAgfHwgIW9wdGltaXN0aWNBY3RvclJlYWR5IHx8ICFjb21tb25TYW5pdHkucGF0aC5zcGxpdChcIi5cIikucG9wKCk/LmluY2x1ZGVzKFwiW19rZXk9PVwiKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGVsZW1lbnQgPT09IGdldEhvdmVyZWRFbGVtZW50KCkgJiYgZWxlbWVudC5jb250YWlucyh0YXJnZXQpICYmICgoaW5GcmFtZSB8fCBpblBvcFVwKSAmJiAoZXZlbnQucHJldmVudERlZmF1bHQoKSwgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkpLCBoYW5kbGVyKHtcbiAgICAgICAgICB0eXBlOiBcImVsZW1lbnQvY29udGV4dG1lbnVcIixcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgeDogZXZlbnQuY2xpZW50WCxcbiAgICAgICAgICAgIHk6IGV2ZW50LmNsaWVudFlcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNhbml0eTogY29tbW9uU2FuaXR5XG4gICAgICAgIH0pKTtcbiAgICAgIH0sXG4gICAgICBtb3VzZWRvd24oZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KCksIGV2ZW50LmN1cnJlbnRUYXJnZXQgIT09IGhvdmVyU3RhY2suYXQoLTEpIHx8IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1zYW5pdHktZHJhZy1kaXNhYmxlXCIpIHx8ICFpbkZyYW1lICYmICFpblBvcFVwIHx8ICFvcHRpbWlzdGljQWN0b3JSZWFkeSkgcmV0dXJuO1xuICAgICAgICBjb25zdCB0YXJnZXRTYW5pdHlEYXRhID0gZWxlbWVudHNNYXAuZ2V0KGVsZW1lbnQpPy5zYW5pdHk7XG4gICAgICAgIGlmICghdGFyZ2V0U2FuaXR5RGF0YSB8fCAhaXNTYW5pdHlOb2RlKHRhcmdldFNhbml0eURhdGEpIHx8ICFpc1Nhbml0eUFycmF5UGF0aCh0YXJnZXRTYW5pdHlEYXRhLnBhdGgpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGRyYWdHcm91cCA9IHJlc29sdmVEcmFnQW5kRHJvcEdyb3VwKGVsZW1lbnQsIGNvbW1vblNhbml0eSwgZWxlbWVudFNldCwgZWxlbWVudHNNYXApO1xuICAgICAgICBkcmFnR3JvdXAgJiYgaGFuZGxlT3ZlcmxheURyYWcoe1xuICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgaGFuZGxlcixcbiAgICAgICAgICBtb3VzZUV2ZW50OiBldmVudCxcbiAgICAgICAgICBvdmVybGF5R3JvdXA6IGRyYWdHcm91cCxcbiAgICAgICAgICB0YXJnZXQ6IHRhcmdldFNhbml0eURhdGEsXG4gICAgICAgICAgb25TZXF1ZW5jZVN0YXJ0OiAoKSA9PiB7XG4gICAgICAgICAgICBhY3RpdmVEcmFnU2VxdWVuY2UgPSAhMDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uU2VxdWVuY2VFbmQ6ICgpID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBhY3RpdmVEcmFnU2VxdWVuY2UgPSAhMTtcbiAgICAgICAgICAgIH0sIDI1MCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBtb3VzZW1vdmUoZXZlbnQpIHtcbiAgICAgICAgZXZlbnRIYW5kbGVycy5tb3VzZWVudGVyKGV2ZW50KTtcbiAgICAgICAgY29uc3QgZWwgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgICAgICBlbCAmJiAoZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIiwgZXZlbnRIYW5kbGVycy5tb3VzZWVudGVyKSwgZWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgZXZlbnRIYW5kbGVycy5tb3VzZWxlYXZlKSk7XG4gICAgICB9LFxuICAgICAgbW91c2VlbnRlcigpIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInZlcmNlbC1saXZlLWZlZWRiYWNrXCIpICYmIGVsZW1lbnQuY2xvc2VzdChcIltkYXRhLXZlcmNlbC1lZGl0LWluZm9dXCIpIHx8IGVsZW1lbnQuY2xvc2VzdChcIltkYXRhLXZlcmNlbC1lZGl0LXRhcmdldF1cIikgfHwgKGhvdmVyU3RhY2sucHVzaChlbGVtZW50KSwgaGFuZGxlcih7XG4gICAgICAgICAgdHlwZTogXCJlbGVtZW50L21vdXNlZW50ZXJcIixcbiAgICAgICAgICBpZCxcbiAgICAgICAgICByZWN0OiBnZXRSZWN0KGVsZW1lbnQpXG4gICAgICAgIH0pLCBzZXRPdmVybGF5Q3Vyc29yKGVsZW1lbnQpKTtcbiAgICAgIH0sXG4gICAgICBtb3VzZWxlYXZlKGUpIHtcbiAgICAgICAgZnVuY3Rpb24gbGVhdmUoKSB7XG4gICAgICAgICAgaG92ZXJTdGFjay5wb3AoKTtcbiAgICAgICAgICBjb25zdCBob3ZlcmVkRWxlbWVudCA9IGdldEhvdmVyZWRFbGVtZW50KCk7XG4gICAgICAgICAgaWYgKGhhbmRsZXIoe1xuICAgICAgICAgICAgdHlwZTogXCJlbGVtZW50L21vdXNlbGVhdmVcIixcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgfSksIGhvdmVyZWRFbGVtZW50KSB7XG4gICAgICAgICAgICBzZXRPdmVybGF5Q3Vyc29yKGhvdmVyZWRFbGVtZW50KTtcbiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXlFbGVtZW50MiA9IGVsZW1lbnRzTWFwLmdldChob3ZlcmVkRWxlbWVudCk7XG4gICAgICAgICAgICBvdmVybGF5RWxlbWVudDIgJiYgaGFuZGxlcih7XG4gICAgICAgICAgICAgIHR5cGU6IFwiZWxlbWVudC9tb3VzZWVudGVyXCIsXG4gICAgICAgICAgICAgIGlkOiBvdmVybGF5RWxlbWVudDIuaWQsXG4gICAgICAgICAgICAgIHJlY3Q6IGdldFJlY3QoaG92ZXJlZEVsZW1lbnQpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzdG9yZU92ZXJsYXlDdXJzb3IoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gYWRkRGVmZXJyZWRMZWF2ZShlbCkge1xuICAgICAgICAgIGNvbnN0IGRlZmVycmVkTGVhdmUgPSAoZTIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldDJcbiAgICAgICAgICAgIH0gPSBlMjtcbiAgICAgICAgICAgIGZpbmRPdmVybGF5RWxlbWVudChyZWxhdGVkVGFyZ2V0MikgPyByZWxhdGVkVGFyZ2V0MiAmJiBpc0VsZW1lbnROb2RlJDEocmVsYXRlZFRhcmdldDIpICYmIChlbC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBkZWZlcnJlZExlYXZlKSwgYWRkRGVmZXJyZWRMZWF2ZShyZWxhdGVkVGFyZ2V0MikpIDogKGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGRlZmVycmVkTGVhdmUpLCBsZWF2ZSgpKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGRlZmVycmVkTGVhdmUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICByZWxhdGVkVGFyZ2V0XG4gICAgICAgIH0gPSBlLCBjb250YWluZXIgPSBmaW5kT3ZlcmxheUVsZW1lbnQocmVsYXRlZFRhcmdldCksIGlzSW50ZXJhY3RpdmVPdmVybGF5RWxlbWVudCA9IG92ZXJsYXlFbGVtZW50LmNvbnRhaW5zKGNvbnRhaW5lcik7XG4gICAgICAgIGlmIChpc0VsZW1lbnROb2RlJDEoY29udGFpbmVyKSAmJiBpc0ludGVyYWN0aXZlT3ZlcmxheUVsZW1lbnQpXG4gICAgICAgICAgcmV0dXJuIGFkZERlZmVycmVkTGVhdmUoY29udGFpbmVyKTtcbiAgICAgICAgbGVhdmUoKTtcbiAgICAgIH1cbiAgICB9LCBpZCA9IHY0KCksIHNhbml0eU5vZGUgPSB7XG4gICAgICB0eXBlLFxuICAgICAgaWQsXG4gICAgICBlbGVtZW50cyxcbiAgICAgIHNhbml0eTogY29tbW9uU2FuaXR5LFxuICAgICAgaGFuZGxlcnM6IGV2ZW50SGFuZGxlcnNcbiAgICB9O1xuICAgIGVsZW1lbnRTZXQuYWRkKGVsZW1lbnQpLCBtZWFzdXJlRWxlbWVudHMuc2V0KG1lYXN1cmVFbGVtZW50LCBlbGVtZW50KSwgZWxlbWVudElkTWFwLnNldChpZCwgZWxlbWVudCksIGVsZW1lbnRzTWFwLnNldChlbGVtZW50LCBzYW5pdHlOb2RlKSwgaW8/Lm9ic2VydmUoZWxlbWVudCksIGhhbmRsZXIoe1xuICAgICAgdHlwZTogXCJlbGVtZW50L3JlZ2lzdGVyXCIsXG4gICAgICBlbGVtZW50VHlwZTogdHlwZSxcbiAgICAgIGlkLFxuICAgICAgZWxlbWVudCxcbiAgICAgIHJlY3Q6IGdldFJlY3QoZWxlbWVudCksXG4gICAgICBzYW5pdHk6IGNvbW1vblNhbml0eSxcbiAgICAgIGRyYWdEaXNhYmxlZDogISFlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtc2FuaXR5LWRyYWctZGlzYWJsZVwiKSxcbiAgICAgIHRhcmdldHM6IHRhcmdldHMubWFwKCh0YXJnZXQpID0+ICh7XG4gICAgICAgIHNhbml0eTogdGFyZ2V0LnNhbml0eSxcbiAgICAgICAgZWxlbWVudDogdGFyZ2V0LmVsZW1lbnRzLmVsZW1lbnRcbiAgICAgIH0pKVxuICAgIH0pLCBhY3RpdmF0ZWQgJiYgYWN0aXZhdGVFbGVtZW50KHNhbml0eU5vZGUpO1xuICB9XG4gIGZ1bmN0aW9uIHVwZGF0ZUVsZW1lbnQocmVzb2x2ZWRFbGVtZW50KSB7XG4gICAgY29uc3Qge1xuICAgICAgZWxlbWVudFxuICAgIH0gPSByZXNvbHZlZEVsZW1lbnQuZWxlbWVudHMsIG92ZXJsYXlFbGVtZW50MiA9IGVsZW1lbnRzTWFwLmdldChlbGVtZW50KTtcbiAgICBvdmVybGF5RWxlbWVudDIgJiYgKGVsZW1lbnRzTWFwLnNldChlbGVtZW50LCB7XG4gICAgICAuLi5vdmVybGF5RWxlbWVudDIsXG4gICAgICBzYW5pdHk6IHJlc29sdmVkRWxlbWVudC5jb21tb25TYW5pdHlcbiAgICB9KSwgaGFuZGxlcih7XG4gICAgICB0eXBlOiBcImVsZW1lbnQvdXBkYXRlXCIsXG4gICAgICBlbGVtZW50VHlwZTogb3ZlcmxheUVsZW1lbnQyLnR5cGUsXG4gICAgICBpZDogb3ZlcmxheUVsZW1lbnQyLmlkLFxuICAgICAgcmVjdDogZ2V0UmVjdChlbGVtZW50KSxcbiAgICAgIHNhbml0eTogcmVzb2x2ZWRFbGVtZW50LmNvbW1vblNhbml0eSxcbiAgICAgIHRhcmdldHM6IHJlc29sdmVkRWxlbWVudC50YXJnZXRzLm1hcCgodGFyZ2V0KSA9PiAoe1xuICAgICAgICBzYW5pdHk6IHRhcmdldC5zYW5pdHksXG4gICAgICAgIGVsZW1lbnQ6IHRhcmdldC5lbGVtZW50cy5lbGVtZW50XG4gICAgICB9KSlcbiAgICB9KSk7XG4gIH1cbiAgZnVuY3Rpb24gcGFyc2VFbGVtZW50cyhub2RlKSB7XG4gICAgY29uc3Qgc2FuaXR5Tm9kZXMgPSBmaW5kU2FuaXR5Tm9kZXMobm9kZSk7XG4gICAgZm9yIChjb25zdCBzYW5pdHlOb2RlIG9mIHNhbml0eU5vZGVzKSB7XG4gICAgICBpZiAoc2FuaXR5Tm9kZS50eXBlID09PSBcImdyb3VwXCIpIHtcbiAgICAgICAgZm9yIChjb25zdCB0YXJnZXQgb2Ygc2FuaXR5Tm9kZS50YXJnZXRzKSB7XG4gICAgICAgICAgY29uc3Qgb3ZlcmxheUVsZW1lbnQyID0gZWxlbWVudHNNYXAuZ2V0KHRhcmdldC5lbGVtZW50cy5lbGVtZW50KTtcbiAgICAgICAgICBvdmVybGF5RWxlbWVudDIgJiYgb3ZlcmxheUVsZW1lbnQyLnR5cGUgPT09IFwiZWxlbWVudFwiICYmIHVucmVnaXN0ZXJFbGVtZW50KHRhcmdldC5lbGVtZW50cy5lbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBzYW5pdHlOb2RlLnRhcmdldHMubGVuZ3RoID09PSAwICYmIHVucmVnaXN0ZXJFbGVtZW50KHNhbml0eU5vZGUuZWxlbWVudHMuZWxlbWVudCk7XG4gICAgICB9XG4gICAgICBpZiAoIXNhbml0eU5vZGUuY29tbW9uU2FuaXR5KSBjb250aW51ZTtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgZWxlbWVudFxuICAgICAgfSA9IHNhbml0eU5vZGUuZWxlbWVudHM7XG4gICAgICBlbGVtZW50c01hcC5oYXMoZWxlbWVudCkgPyB1cGRhdGVFbGVtZW50KHNhbml0eU5vZGUpIDogcmVnaXN0ZXJFbGVtZW50KHNhbml0eU5vZGUpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiB1bnJlZ2lzdGVyRWxlbWVudChlbGVtZW50KSB7XG4gICAgY29uc3Qgb3ZlcmxheUVsZW1lbnQyID0gZWxlbWVudHNNYXAuZ2V0KGVsZW1lbnQpO1xuICAgIGlmIChvdmVybGF5RWxlbWVudDIpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgaWQsXG4gICAgICAgIGhhbmRsZXJzXG4gICAgICB9ID0gb3ZlcmxheUVsZW1lbnQyO1xuICAgICAgcmVtb3ZlRXZlbnRIYW5kbGVycyhlbGVtZW50LCBoYW5kbGVycyksIHJvLnVub2JzZXJ2ZShlbGVtZW50KSwgZWxlbWVudHNNYXAuZGVsZXRlKGVsZW1lbnQpLCBlbGVtZW50U2V0LmRlbGV0ZShlbGVtZW50KSwgZWxlbWVudElkTWFwLmRlbGV0ZShpZCksIGhhbmRsZXIoe1xuICAgICAgICB0eXBlOiBcImVsZW1lbnQvdW5yZWdpc3RlclwiLFxuICAgICAgICBpZFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGhhbmRsZU11dGF0aW9uKG11dGF0aW9ucykge1xuICAgIGxldCBtdXRhdGlvbldhc0luU2NvcGUgPSAhMTtcbiAgICBmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9ucykge1xuICAgICAgY29uc3Qge1xuICAgICAgICB0YXJnZXQsXG4gICAgICAgIHR5cGVcbiAgICAgIH0gPSBtdXRhdGlvbiwgbm9kZSA9IHR5cGUgPT09IFwiY2hhcmFjdGVyRGF0YVwiID8gdGFyZ2V0LnBhcmVudEVsZW1lbnQgOiB0YXJnZXQ7XG4gICAgICBpZiAoIShub2RlID09PSBvdmVybGF5RWxlbWVudCB8fCBvdmVybGF5RWxlbWVudC5jb250YWlucyhub2RlKSkgJiYgKG11dGF0aW9uV2FzSW5TY29wZSA9ICEwLCBpc0VsZW1lbnROb2RlJDEobm9kZSkpKSB7XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlR3JvdXBQYXJlbnQgPSBub2RlLnBhcmVudEVsZW1lbnQ/LmNsb3Nlc3QoXCJbZGF0YS1zYW5pdHktZWRpdC1ncm91cF1cIikgfHwgbnVsbCwgdXBkYXRlTm9kZVRhcmdldCA9IGlzRWxlbWVudE5vZGUkMShwb3NzaWJsZUdyb3VwUGFyZW50KSA/IHBvc3NpYmxlR3JvdXBQYXJlbnQgOiBub2RlO1xuICAgICAgICBwYXJzZUVsZW1lbnRzKHtcbiAgICAgICAgICBjaGlsZE5vZGVzOiBbdXBkYXRlTm9kZVRhcmdldF1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtdXRhdGlvbldhc0luU2NvcGUpXG4gICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudFNldClcbiAgICAgICAgZWxlbWVudC5pc0Nvbm5lY3RlZCB8fCB1bnJlZ2lzdGVyRWxlbWVudChlbGVtZW50KSwgZWxlbWVudHNNYXAuZ2V0KGVsZW1lbnQpPy50eXBlID09PSBcImdyb3VwXCIgJiYgIWVsZW1lbnQuaGFzQXR0cmlidXRlKFwiZGF0YS1zYW5pdHktZWRpdC1ncm91cFwiKSAmJiB1bnJlZ2lzdGVyRWxlbWVudChlbGVtZW50KTtcbiAgfVxuICBmdW5jdGlvbiB1cGRhdGVSZWN0KGVsKSB7XG4gICAgY29uc3Qgb3ZlcmxheUVsZW1lbnQyID0gZWxlbWVudHNNYXAuZ2V0KGVsKTtcbiAgICBvdmVybGF5RWxlbWVudDIgJiYgaGFuZGxlcih7XG4gICAgICB0eXBlOiBcImVsZW1lbnQvdXBkYXRlUmVjdFwiLFxuICAgICAgaWQ6IG92ZXJsYXlFbGVtZW50Mi5pZCxcbiAgICAgIHJlY3Q6IGdldFJlY3QoZWwpXG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gaGFuZGxlUmVzaXplKGVudHJpZXMpIHtcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGVudHJ5LnRhcmdldDtcbiAgICAgIGlmIChpc0VsZW1lbnROb2RlJDEodGFyZ2V0KSkge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gbWVhc3VyZUVsZW1lbnRzLmdldCh0YXJnZXQpO1xuICAgICAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcbiAgICAgICAgdXBkYXRlUmVjdChlbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gaGFuZGxlSW50ZXJzZWN0aW9uKGVudHJpZXMpIHtcbiAgICBpZiAoYWN0aXZhdGVkKVxuICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBlbnRyaWVzKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICB0YXJnZXRcbiAgICAgICAgfSA9IGVudHJ5LCBtYXRjaCA9IGlzRWxlbWVudE5vZGUkMSh0YXJnZXQpICYmIGVsZW1lbnRzTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICBtYXRjaCAmJiAoZW50cnkuaXNJbnRlcnNlY3RpbmcgPyBhY3RpdmF0ZUVsZW1lbnQobWF0Y2gpIDogZGVhY3RpdmF0ZUVsZW1lbnQobWF0Y2gpKTtcbiAgICAgIH1cbiAgfVxuICBmdW5jdGlvbiBoYW5kbGVCbHVyKGV2ZW50KSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGZpbmRPdmVybGF5RWxlbWVudChldmVudC50YXJnZXQpO1xuICAgIGlmIChlbGVtZW50KSB7XG4gICAgICBlbGVtZW50LmRhdGFzZXQuc2FuaXR5T3ZlcmxheUVsZW1lbnQgPT09IFwiY2FwdHVyZVwiICYmIChldmVudC5wcmV2ZW50RGVmYXVsdCgpLCBldmVudC5zdG9wUHJvcGFnYXRpb24oKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGhvdmVyU3RhY2sgPSBbXSwgaGFuZGxlcih7XG4gICAgICB0eXBlOiBcIm92ZXJsYXkvYmx1clwiXG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gaGFuZGxlRXhjbHVzaXZlUGx1Z2luQ2xvc2VkKCkge1xuICAgIGhvdmVyU3RhY2sgPSBbXSwgaGFuZGxlcih7XG4gICAgICB0eXBlOiBcIm92ZXJsYXkvcmVzZXQtbW91c2Utc3RhdGVcIlxuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIGhhbmRsZVdpbmRvd1Jlc2l6ZSgpIHtcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudFNldClcbiAgICAgIHVwZGF0ZVJlY3QoZWxlbWVudCk7XG4gIH1cbiAgZnVuY3Rpb24gaGFuZGxlS2V5ZG93bihldmVudCkge1xuICAgIGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIiAmJiAoaG92ZXJTdGFjayA9IFtdLCBoYW5kbGVyKHtcbiAgICAgIHR5cGU6IFwib3ZlcmxheS9ibHVyXCJcbiAgICB9KSk7XG4gIH1cbiAgZnVuY3Rpb24gaGFuZGxlV2luZG93U2Nyb2xsKGV2ZW50KSB7XG4gICAgY29uc3Qge1xuICAgICAgdGFyZ2V0XG4gICAgfSA9IGV2ZW50O1xuICAgIGlmICghKHRhcmdldCA9PT0gd2luZG93LmRvY3VtZW50IHx8ICFpc0VsZW1lbnROb2RlJDEodGFyZ2V0KSkpXG4gICAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudFNldClcbiAgICAgICAgdGFyZ2V0LmNvbnRhaW5zKGVsZW1lbnQpICYmIHVwZGF0ZVJlY3QoZWxlbWVudCk7XG4gIH1cbiAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgYWN0aXZhdGVkIHx8IChpbyA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihoYW5kbGVJbnRlcnNlY3Rpb24sIHtcbiAgICAgIHRocmVzaG9sZDogMC4zXG4gICAgfSksIGVsZW1lbnRTZXQuZm9yRWFjaCgoZWxlbWVudCkgPT4gaW8ub2JzZXJ2ZShlbGVtZW50KSksIGhhbmRsZXIoe1xuICAgICAgdHlwZTogXCJvdmVybGF5L2FjdGl2YXRlXCJcbiAgICB9KSwgYWN0aXZhdGVkID0gITApO1xuICB9XG4gIGZ1bmN0aW9uIGRlYWN0aXZhdGUoKSB7XG4gICAgYWN0aXZhdGVkICYmIChpbz8uZGlzY29ubmVjdCgpLCBlbGVtZW50U2V0LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgIGNvbnN0IG92ZXJsYXlFbGVtZW50MiA9IGVsZW1lbnRzTWFwLmdldChlbGVtZW50KTtcbiAgICAgIG92ZXJsYXlFbGVtZW50MiAmJiBkZWFjdGl2YXRlRWxlbWVudChvdmVybGF5RWxlbWVudDIpO1xuICAgIH0pLCBoYW5kbGVyKHtcbiAgICAgIHR5cGU6IFwib3ZlcmxheS9kZWFjdGl2YXRlXCJcbiAgICB9KSwgYWN0aXZhdGVkID0gITEpO1xuICB9XG4gIGZ1bmN0aW9uIGhhbmRsZUhlYWRlckNsaWNrKGV2ZW50KSB7XG4gICAgY29uc3Qge1xuICAgICAgaWRcbiAgICB9ID0gZXZlbnQuZGV0YWlsLCBlbGVtZW50ID0gZWxlbWVudElkTWFwLmdldChpZCk7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm47XG4gICAgY29uc3Qgc2FuaXR5ID0gZWxlbWVudHNNYXAuZ2V0KGVsZW1lbnQpPy5zYW5pdHk7XG4gICAgc2FuaXR5ICYmIGhhbmRsZXIoe1xuICAgICAgdHlwZTogXCJlbGVtZW50L2NsaWNrXCIsXG4gICAgICBpZCxcbiAgICAgIHNhbml0eVxuICAgIH0pO1xuICB9XG4gIGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVCbHVyKSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCBoYW5kbGVCbHVyKSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzYW5pdHktb3ZlcmxheS9leGNsdXNpdmUtcGx1Z2luLWNsb3NlZFwiLCBoYW5kbGVFeGNsdXNpdmVQbHVnaW5DbG9zZWQpLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNhbml0eS1vdmVybGF5L2xhYmVsLWNsaWNrXCIsIGhhbmRsZUhlYWRlckNsaWNrKSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUtleWRvd24pLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGVXaW5kb3dSZXNpemUpLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBoYW5kbGVXaW5kb3dTY3JvbGwpLCBtby5kaXNjb25uZWN0KCksIHJvLmRpc2Nvbm5lY3QoKSwgZWxlbWVudFNldC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICB1bnJlZ2lzdGVyRWxlbWVudChlbGVtZW50KTtcbiAgICB9KSwgZWxlbWVudElkTWFwLmNsZWFyKCksIGVsZW1lbnRTZXQuY2xlYXIoKSwgaG92ZXJTdGFjayA9IFtdLCBkZWFjdGl2YXRlKCk7XG4gIH1cbiAgZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQmx1ciksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgaGFuZGxlQmx1ciksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2FuaXR5LW92ZXJsYXkvZXhjbHVzaXZlLXBsdWdpbi1jbG9zZWRcIiwgaGFuZGxlRXhjbHVzaXZlUGx1Z2luQ2xvc2VkKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzYW5pdHktb3ZlcmxheS9sYWJlbC1jbGlja1wiLCBoYW5kbGVIZWFkZXJDbGljayksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVLZXlkb3duKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlV2luZG93UmVzaXplKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgaGFuZGxlV2luZG93U2Nyb2xsLCB7XG4gICAgICBjYXB0dXJlOiAhMCxcbiAgICAgIHBhc3NpdmU6ICEwXG4gICAgfSksIHJvID0gbmV3IFJlc2l6ZU9ic2VydmVyKGhhbmRsZVJlc2l6ZSksIG1vID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoaGFuZGxlTXV0YXRpb24pLCBtby5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgIGF0dHJpYnV0ZXM6ICEwLFxuICAgICAgY2hhcmFjdGVyRGF0YTogITAsXG4gICAgICBjaGlsZExpc3Q6ICEwLFxuICAgICAgc3VidHJlZTogITBcbiAgICB9KSwgcGFyc2VFbGVtZW50cyhkb2N1bWVudC5ib2R5KSwgYWN0aXZhdGUoKTtcbiAgfVxuICByZXR1cm4gd2luZG93LmRvY3VtZW50LmZvbnRzLnJlYWR5LnRoZW4oKCkgPT4ge1xuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50U2V0KVxuICAgICAgdXBkYXRlUmVjdChlbGVtZW50KTtcbiAgfSksIGNyZWF0ZSgpLCB7XG4gICAgYWN0aXZhdGUsXG4gICAgZGVhY3RpdmF0ZSxcbiAgICBkZXN0cm95XG4gIH07XG59XG5jb25zdCBTaGFyZWRTdGF0ZUNvbnRleHQgPSBjcmVhdGVDb250ZXh0KG51bGwpO1xuZXhwb3J0IHtcbiAgU2hhcmVkU3RhdGVDb250ZXh0LFxuICBjcmVhdGVPdmVybGF5Q29udHJvbGxlcixcbiAgc2FuaXR5Tm9kZXNFeGlzdEluU2FtZUFycmF5LFxuICB1c2VPcHRpbWlzdGljLFxuICB2NFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNoYXJlZFN0YXRlQ29udGV4dC5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/SharedStateContext.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/context.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/context.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   actor: () => (/* binding */ actor),\n/* harmony export */   emptyActor: () => (/* binding */ emptyActor),\n/* harmony export */   isEmptyActor: () => (/* binding */ isEmptyActor),\n/* harmony export */   listeners: () => (/* binding */ listeners),\n/* harmony export */   setActor: () => (/* binding */ setActor)\n/* harmony export */ });\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! xstate */ \"(ssr)/./node_modules/xstate/actors/dist/xstate-actors.development.esm.js\");\n\nconst emptyActor = (0,xstate__WEBPACK_IMPORTED_MODULE_0__.createEmptyActor)();\nlet actor = emptyActor;\nconst listeners = /* @__PURE__ */ new Set();\nfunction isEmptyActor(actor2) {\n  return actor2 === emptyActor;\n}\nfunction setActor(nextActor) {\n  actor = nextActor;\n  for (const onActorChange of listeners)\n    onActorChange();\n}\n\n//# sourceMappingURL=context.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvdmlzdWFsLWVkaXRpbmcvZGlzdC9fY2h1bmtzLWVzL2NvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTBDO0FBQzFDLG1CQUFtQix3REFBZ0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFPRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbm91cmVsZGlubWFobW91ZC9mcmVzaGNhcnQvZGVwbG95L25vZGVfbW9kdWxlcy9uZXh0LXNhbml0eS9ub2RlX21vZHVsZXMvQHNhbml0eS92aXN1YWwtZWRpdGluZy9kaXN0L19jaHVua3MtZXMvY29udGV4dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVFbXB0eUFjdG9yIH0gZnJvbSBcInhzdGF0ZVwiO1xuY29uc3QgZW1wdHlBY3RvciA9IGNyZWF0ZUVtcHR5QWN0b3IoKTtcbmxldCBhY3RvciA9IGVtcHR5QWN0b3I7XG5jb25zdCBsaXN0ZW5lcnMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuZnVuY3Rpb24gaXNFbXB0eUFjdG9yKGFjdG9yMikge1xuICByZXR1cm4gYWN0b3IyID09PSBlbXB0eUFjdG9yO1xufVxuZnVuY3Rpb24gc2V0QWN0b3IobmV4dEFjdG9yKSB7XG4gIGFjdG9yID0gbmV4dEFjdG9yO1xuICBmb3IgKGNvbnN0IG9uQWN0b3JDaGFuZ2Ugb2YgbGlzdGVuZXJzKVxuICAgIG9uQWN0b3JDaGFuZ2UoKTtcbn1cbmV4cG9ydCB7XG4gIGFjdG9yLFxuICBlbXB0eUFjdG9yLFxuICBpc0VtcHR5QWN0b3IsXG4gIGxpc3RlbmVycyxcbiAgc2V0QWN0b3Jcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250ZXh0LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/context.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/mutations.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/mutations.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   get: () => (/* binding */ get),\n/* harmony export */   getArrayDuplicatePatches: () => (/* binding */ getArrayDuplicatePatches),\n/* harmony export */   getArrayInsertPatches: () => (/* binding */ getArrayInsertPatches),\n/* harmony export */   getArrayItemKeyAndParentPath: () => (/* binding */ getArrayItemKeyAndParentPath),\n/* harmony export */   getArrayMovePatches: () => (/* binding */ getArrayMovePatches),\n/* harmony export */   getArrayRemovePatches: () => (/* binding */ getArrayRemovePatches),\n/* harmony export */   useDocuments: () => (/* binding */ useDocuments),\n/* harmony export */   useOptimisticActor: () => (/* binding */ useOptimisticActor),\n/* harmony export */   useOptimisticActorReady: () => (/* binding */ useOptimisticActorReady)\n/* harmony export */ });\n/* harmony import */ var react_compiler_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react-compiler-runtime */ \"(ssr)/./node_modules/react-compiler-runtime/dist/index.js\");\n/* harmony import */ var _sanity_client_csm__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @sanity/client/csm */ \"(ssr)/./node_modules/@sanity/client/dist/_chunks-es/resolveEditInfo.js\");\n/* harmony import */ var _sanity_mutate__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @sanity/mutate */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/index.js\");\n/* harmony import */ var _sanity_presentation_comlink__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sanity/presentation-comlink */ \"(ssr)/./node_modules/@sanity/presentation-comlink/dist/index.js\");\n/* harmony import */ var _context_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./context.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/context.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var get_random_values_esm__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! get-random-values-esm */ \"(ssr)/./node_modules/get-random-values-esm/index.mjs\");\n\n\n\n\n\n\n\nconst reKeySegment$1 = /_key\\s*==\\s*['\"](.*)['\"]/, reIndexTuple = /^\\d*:\\d*$/;\nfunction isIndexSegment(segment) {\n  return typeof segment == \"number\" || typeof segment == \"string\" && /^\\[\\d+\\]$/.test(segment);\n}\nfunction isKeySegment(segment) {\n  return typeof segment == \"string\" ? reKeySegment$1.test(segment.trim()) : typeof segment == \"object\" && \"_key\" in segment;\n}\nfunction isIndexTuple(segment) {\n  if (typeof segment == \"string\" && reIndexTuple.test(segment))\n    return !0;\n  if (!Array.isArray(segment) || segment.length !== 2)\n    return !1;\n  const [from, to] = segment;\n  return (typeof from == \"number\" || from === \"\") && (typeof to == \"number\" || to === \"\");\n}\nconst rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g, reKeySegment = /_key\\s*==\\s*['\"](.*)['\"]/;\nfunction get(obj, path, defaultVal) {\n  const select = typeof path == \"string\" ? fromString(path) : path;\n  if (!Array.isArray(select))\n    throw new Error(\"Path must be an array or a string\");\n  let acc = obj;\n  for (let i = 0; i < select.length; i++) {\n    const segment = select[i];\n    if (isIndexSegment(segment)) {\n      if (!Array.isArray(acc))\n        return defaultVal;\n      acc = acc[segment];\n    }\n    if (isKeySegment(segment)) {\n      if (!Array.isArray(acc))\n        return defaultVal;\n      acc = acc.find((item) => item._key === segment._key);\n    }\n    if (typeof segment == \"string\" && (acc = typeof acc == \"object\" && acc !== null ? acc[segment] : void 0), typeof acc > \"u\")\n      return defaultVal;\n  }\n  return acc;\n}\nfunction fromString(path) {\n  if (typeof path != \"string\")\n    throw new Error(\"Path is not a string\");\n  const segments = path.match(rePropName);\n  if (!segments)\n    throw new Error(\"Invalid path string\");\n  return segments.map(normalizePathSegment);\n}\nfunction normalizePathSegment(segment) {\n  return isIndexSegment(segment) ? normalizeIndexSegment(segment) : isKeySegment(segment) ? normalizeKeySegment(segment) : isIndexTuple(segment) ? normalizeIndexTupleSegment(segment) : segment;\n}\nfunction normalizeIndexSegment(segment) {\n  return Number(segment.replace(/[^\\d]/g, \"\"));\n}\nfunction normalizeKeySegment(segment) {\n  return { _key: segment.match(reKeySegment)[1] };\n}\nfunction normalizeIndexTupleSegment(segment) {\n  const [from, to] = segment.split(\":\").map((seg) => seg === \"\" ? seg : Number(seg));\n  return [from, to];\n}\nfunction useOptimisticActor() {\n  return (0,react__WEBPACK_IMPORTED_MODULE_1__.useSyncExternalStore)(_temp, _temp2, _temp3);\n}\nfunction _temp3() {\n  return _context_js__WEBPACK_IMPORTED_MODULE_2__.emptyActor;\n}\nfunction _temp2() {\n  return _context_js__WEBPACK_IMPORTED_MODULE_2__.actor;\n}\nfunction _temp(listener) {\n  return _context_js__WEBPACK_IMPORTED_MODULE_2__.listeners.add(listener), () => _context_js__WEBPACK_IMPORTED_MODULE_2__.listeners.delete(listener);\n}\nfunction useOptimisticActorReady() {\n  const actor2 = useOptimisticActor();\n  return !(0,_context_js__WEBPACK_IMPORTED_MODULE_2__.isEmptyActor)(actor2);\n}\nfunction debounce(fn, timeout) {\n  let timer;\n  return (...args) => {\n    clearTimeout(timer), timer = setTimeout(() => {\n      fn.apply(fn, args);\n    }, timeout);\n  };\n}\nfunction getDocumentsAndSnapshot(id, actor2) {\n  const inFrame = (0,_sanity_presentation_comlink__WEBPACK_IMPORTED_MODULE_3__.isMaybePreviewIframe)(), inPopUp = (0,_sanity_presentation_comlink__WEBPACK_IMPORTED_MODULE_3__.isMaybePreviewWindow)();\n  if ((0,_context_js__WEBPACK_IMPORTED_MODULE_2__.isEmptyActor)(actor2) || !inFrame && !inPopUp)\n    throw new Error(\"The `useDocuments` hook cannot be used in this context\");\n  const draftId = (0,_sanity_client_csm__WEBPACK_IMPORTED_MODULE_4__.getDraftId)(id), publishedId = (0,_sanity_client_csm__WEBPACK_IMPORTED_MODULE_4__.getPublishedId)(id), documents = actor2.getSnapshot().context?.documents, draftDoc = documents?.[draftId], publishedDoc = documents?.[publishedId], doc = draftDoc || publishedDoc;\n  if (!doc)\n    throw new Error(`Document \"${id}\" not found`);\n  const snapshot = draftDoc.getSnapshot().context?.local || publishedDoc.getSnapshot().context?.local, snapshotPromise = new Promise((resolve) => {\n    if (snapshot)\n      resolve(snapshot);\n    else {\n      const subscriber = doc.on(\"ready\", (event) => {\n        const {\n          snapshot: snapshot2\n        } = event;\n        resolve(snapshot2 || null), subscriber.unsubscribe();\n      });\n    }\n  });\n  return {\n    draftDoc,\n    draftId,\n    getSnapshot: () => snapshotPromise,\n    publishedDoc,\n    publishedId,\n    /**\n     * @deprecated - use `getSnapshot` instead\n     */\n    get snapshot() {\n      if (!snapshot)\n        throw new Error(`Snapshot for document \"${id}\" not found`);\n      return snapshot;\n    }\n  };\n}\nfunction createDocumentCommit(id, actor2) {\n  return () => {\n    const {\n      draftDoc\n    } = getDocumentsAndSnapshot(id, actor2);\n    draftDoc.send({\n      type: \"submit\"\n    });\n  };\n}\nfunction createDocumentGet(id, actor2) {\n  return (path) => {\n    const {\n      snapshot\n    } = getDocumentsAndSnapshot(id, actor2);\n    return path ? get(snapshot, path) : snapshot;\n  };\n}\nfunction createDocumentGetSnapshot(id, actor2) {\n  const {\n    getSnapshot\n  } = getDocumentsAndSnapshot(id, actor2);\n  return getSnapshot;\n}\nfunction createDocumentPatch(id, actor2) {\n  return async (patches, options) => {\n    const result = getDocumentsAndSnapshot(id, actor2), {\n      draftDoc,\n      draftId,\n      getSnapshot,\n      publishedId\n    } = result, {\n      commit = !0\n    } = options || {}, resolvedPatches = await (typeof patches == \"function\" ? patches({\n      draftId,\n      publishedId,\n      /**\n       * @deprecated - use `getSnapshot` instead\n       */\n      get snapshot() {\n        return result.snapshot;\n      },\n      getSnapshot\n    }) : patches), _snapshot = await getSnapshot();\n    if (!_snapshot)\n      throw new Error(`Snapshot for document \"${id}\" not found`);\n    draftDoc.send({\n      type: \"mutate\",\n      mutations: [\n        // Attempt to create the draft document, it might not exist if the\n        // snapshot was from the published document\n        (0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.createIfNotExists)({\n          ..._snapshot,\n          _id: draftId\n        }),\n        // Patch the draft document with the resolved patches\n        (0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.patch)(draftId, resolvedPatches)\n      ]\n    }), commit && (typeof commit == \"object\" && \"debounce\" in commit ? debounce(() => draftDoc.send({\n      type: \"submit\"\n    }), commit.debounce)() : draftDoc.send({\n      type: \"submit\"\n    }));\n  };\n}\nfunction useDocuments() {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_0__.c)(7), actor2 = useOptimisticActor();\n  let t0;\n  $[0] !== actor2 ? (t0 = (documentId) => ({\n    id: documentId,\n    commit: createDocumentCommit(documentId, actor2),\n    get: createDocumentGet(documentId, actor2),\n    getSnapshot: createDocumentGetSnapshot(documentId, actor2),\n    patch: createDocumentPatch(documentId, actor2)\n  }), $[0] = actor2, $[1] = t0) : t0 = $[1];\n  const getDocument = t0;\n  let t1;\n  $[2] !== actor2 ? (t1 = (id, mutations, options) => {\n    const {\n      draftDoc\n    } = getDocumentsAndSnapshot(id, actor2), {\n      commit: t22\n    } = options || {}, commit = t22 === void 0 ? !0 : t22;\n    draftDoc.send({\n      type: \"mutate\",\n      mutations\n    }), commit && (typeof commit == \"object\" && \"debounce\" in commit ? debounce(() => draftDoc.send({\n      type: \"submit\"\n    }), commit.debounce)() : draftDoc.send({\n      type: \"submit\"\n    }));\n  }, $[2] = actor2, $[3] = t1) : t1 = $[3];\n  const mutateDocument = t1;\n  let t2;\n  return $[4] !== getDocument || $[5] !== mutateDocument ? (t2 = {\n    getDocument,\n    mutateDocument\n  }, $[4] = getDocument, $[5] = mutateDocument, $[6] = t2) : t2 = $[6], t2;\n}\nfunction whatwgRNG(length = 16) {\n  const rnds8 = new Uint8Array(length);\n  return (0,get_random_values_esm__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(rnds8), rnds8;\n}\nconst getByteHexTable = /* @__PURE__ */ (() => {\n  let table;\n  return () => {\n    if (table)\n      return table;\n    table = [];\n    for (let i = 0; i < 256; ++i)\n      table[i] = (i + 256).toString(16).slice(1);\n    return table;\n  };\n})();\nfunction randomKey(length) {\n  const table = getByteHexTable();\n  return whatwgRNG(length).reduce((str, n) => str + table[n], \"\").slice(0, length);\n}\nfunction getArrayItemKeyAndParentPath(pathOrNode) {\n  const elementPath = typeof pathOrNode == \"string\" ? pathOrNode : pathOrNode.path, lastDotIndex = elementPath.lastIndexOf(\".\"), lastPathItem = elementPath.substring(lastDotIndex + 1, elementPath.length);\n  if (!lastPathItem.indexOf(\"[\")) throw new Error(\"Invalid path: not an array\");\n  const lastArrayIndex = elementPath.lastIndexOf(\"[\"), path = elementPath.substring(0, lastArrayIndex);\n  let key, hasExplicitKey;\n  if (lastPathItem.includes(\"_key\")) {\n    const startIndex = lastPathItem.indexOf('\"') + 1, endIndex = lastPathItem.indexOf('\"', startIndex);\n    key = lastPathItem.substring(startIndex, endIndex), hasExplicitKey = !0;\n  } else {\n    const startIndex = lastPathItem.indexOf(\"[\") + 1, endIndex = lastPathItem.indexOf(\"]\", startIndex);\n    key = lastPathItem.substring(startIndex, endIndex), hasExplicitKey = !1;\n  }\n  if (!path || !key) throw new Error(\"Invalid path\");\n  return {\n    path,\n    key,\n    hasExplicitKey\n  };\n}\nfunction getArrayDuplicatePatches(node, snapshot, position = \"after\") {\n  const {\n    path: arrayPath,\n    key: itemKey\n  } = getArrayItemKeyAndParentPath(node), duplicate = {\n    ...get(snapshot, node.path),\n    _key: randomKey()\n  };\n  return [(0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.at)(arrayPath, (0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.insert)(duplicate, position, {\n    _key: itemKey\n  }))];\n}\nfunction getArrayRemovePatches(node, snapshot) {\n  const {\n    path: arrayPath,\n    key: itemKey\n  } = getArrayItemKeyAndParentPath(node), currentIndex = get(snapshot, arrayPath).findIndex((item) => item._key === itemKey);\n  return [(0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.at)(arrayPath, (0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.truncate)(currentIndex, currentIndex + 1))];\n}\nfunction getArrayInsertPatches(node, insertType, position) {\n  const {\n    path: arrayPath,\n    key: itemKey\n  } = getArrayItemKeyAndParentPath(node), insertKey = randomKey();\n  return [(0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.at)(arrayPath, (0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.insert)([{\n    _type: insertType,\n    _key: insertKey\n  }], position, {\n    _key: itemKey\n  }))];\n}\nasync function getArrayMovePatches(node, doc, moveTo) {\n  if (!node.type) throw new Error(\"Node type is missing\");\n  const {\n    path: arrayPath,\n    key: itemKey\n  } = getArrayItemKeyAndParentPath(node), snapshot = await doc.getSnapshot(), array = get(snapshot, arrayPath), item = get(snapshot, node.path), currentIndex = array.findIndex((item2) => item2._key === itemKey);\n  let nextIndex = -1, position = \"before\";\n  if (moveTo === \"first\") {\n    if (currentIndex === 0) return [];\n    nextIndex = 0, position = \"before\";\n  } else if (moveTo === \"last\") {\n    if (currentIndex === array.length - 1) return [];\n    nextIndex = -1, position = \"after\";\n  } else if (moveTo === \"next\") {\n    if (currentIndex === array.length - 1) return [];\n    nextIndex = currentIndex, position = \"after\";\n  } else if (moveTo === \"previous\") {\n    if (currentIndex === 0) return [];\n    nextIndex = currentIndex - 1, position = \"before\";\n  }\n  return [(0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.at)(arrayPath, (0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.truncate)(currentIndex, currentIndex + 1)), (0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.at)(arrayPath, (0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.insert)(item, position, nextIndex))];\n}\n\n//# sourceMappingURL=mutations.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvdmlzdWFsLWVkaXRpbmcvZGlzdC9fY2h1bmtzLWVzL211dGF0aW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTJDO0FBQ3FCO0FBQ2dCO0FBQ1U7QUFDaEI7QUFDN0I7QUFDTztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsMkRBQW9CO0FBQzdCO0FBQ0E7QUFDQSxTQUFTLG1EQUFVO0FBQ25CO0FBQ0E7QUFDQSxTQUFTLDhDQUFLO0FBQ2Q7QUFDQTtBQUNBLFNBQVMsa0RBQVMsc0JBQXNCLGtEQUFTO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLFVBQVUseURBQVk7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixrRkFBb0IsY0FBYyxrRkFBb0I7QUFDeEUsTUFBTSx5REFBWTtBQUNsQjtBQUNBLGtCQUFrQiw4REFBVSxvQkFBb0Isa0VBQWM7QUFDOUQ7QUFDQSxpQ0FBaUMsR0FBRztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLE9BQU87QUFDUDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELEdBQUc7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTSxlQUFlO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsS0FBSztBQUNMO0FBQ0EsZ0RBQWdELEdBQUc7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlCO0FBQ3pCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxRQUFRLHFEQUFLO0FBQ2I7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsWUFBWSx5REFBQztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNLGVBQWU7QUFDckI7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaUVBQWU7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUztBQUM3QjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsVUFBVSxrREFBRSxZQUFZLHNEQUFNO0FBQzlCO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osVUFBVSxrREFBRSxZQUFZLHdEQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osVUFBVSxrREFBRSxZQUFZLHNEQUFNO0FBQzlCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxVQUFVLGtEQUFFLFlBQVksd0RBQVEsbUNBQW1DLGtEQUFFLFlBQVksc0RBQU07QUFDdkY7QUFXRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbm91cmVsZGlubWFobW91ZC9mcmVzaGNhcnQvZGVwbG95L25vZGVfbW9kdWxlcy9uZXh0LXNhbml0eS9ub2RlX21vZHVsZXMvQHNhbml0eS92aXN1YWwtZWRpdGluZy9kaXN0L19jaHVua3MtZXMvbXV0YXRpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGMgfSBmcm9tIFwicmVhY3QtY29tcGlsZXItcnVudGltZVwiO1xuaW1wb3J0IHsgZ2V0RHJhZnRJZCwgZ2V0UHVibGlzaGVkSWQgfSBmcm9tIFwiQHNhbml0eS9jbGllbnQvY3NtXCI7XG5pbXBvcnQgeyBjcmVhdGVJZk5vdEV4aXN0cywgcGF0Y2gsIGF0LCBpbnNlcnQsIHRydW5jYXRlIH0gZnJvbSBcIkBzYW5pdHkvbXV0YXRlXCI7XG5pbXBvcnQgeyBpc01heWJlUHJldmlld0lmcmFtZSwgaXNNYXliZVByZXZpZXdXaW5kb3cgfSBmcm9tIFwiQHNhbml0eS9wcmVzZW50YXRpb24tY29tbGlua1wiO1xuaW1wb3J0IHsgaXNFbXB0eUFjdG9yLCBsaXN0ZW5lcnMsIGFjdG9yLCBlbXB0eUFjdG9yIH0gZnJvbSBcIi4vY29udGV4dC5qc1wiO1xuaW1wb3J0IHsgdXNlU3luY0V4dGVybmFsU3RvcmUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBnZXRSYW5kb21WYWx1ZXMgZnJvbSBcImdldC1yYW5kb20tdmFsdWVzLWVzbVwiO1xuY29uc3QgcmVLZXlTZWdtZW50JDEgPSAvX2tleVxccyo9PVxccypbJ1wiXSguKilbJ1wiXS8sIHJlSW5kZXhUdXBsZSA9IC9eXFxkKjpcXGQqJC87XG5mdW5jdGlvbiBpc0luZGV4U2VnbWVudChzZWdtZW50KSB7XG4gIHJldHVybiB0eXBlb2Ygc2VnbWVudCA9PSBcIm51bWJlclwiIHx8IHR5cGVvZiBzZWdtZW50ID09IFwic3RyaW5nXCIgJiYgL15cXFtcXGQrXFxdJC8udGVzdChzZWdtZW50KTtcbn1cbmZ1bmN0aW9uIGlzS2V5U2VnbWVudChzZWdtZW50KSB7XG4gIHJldHVybiB0eXBlb2Ygc2VnbWVudCA9PSBcInN0cmluZ1wiID8gcmVLZXlTZWdtZW50JDEudGVzdChzZWdtZW50LnRyaW0oKSkgOiB0eXBlb2Ygc2VnbWVudCA9PSBcIm9iamVjdFwiICYmIFwiX2tleVwiIGluIHNlZ21lbnQ7XG59XG5mdW5jdGlvbiBpc0luZGV4VHVwbGUoc2VnbWVudCkge1xuICBpZiAodHlwZW9mIHNlZ21lbnQgPT0gXCJzdHJpbmdcIiAmJiByZUluZGV4VHVwbGUudGVzdChzZWdtZW50KSlcbiAgICByZXR1cm4gITA7XG4gIGlmICghQXJyYXkuaXNBcnJheShzZWdtZW50KSB8fCBzZWdtZW50Lmxlbmd0aCAhPT0gMilcbiAgICByZXR1cm4gITE7XG4gIGNvbnN0IFtmcm9tLCB0b10gPSBzZWdtZW50O1xuICByZXR1cm4gKHR5cGVvZiBmcm9tID09IFwibnVtYmVyXCIgfHwgZnJvbSA9PT0gXCJcIikgJiYgKHR5cGVvZiB0byA9PSBcIm51bWJlclwiIHx8IHRvID09PSBcIlwiKTtcbn1cbmNvbnN0IHJlUHJvcE5hbWUgPSAvW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxcXF18XFxcXC4pKj8pXFwyKVxcXXwoPz0oPzpcXC58XFxbXFxdKSg/OlxcLnxcXFtcXF18JCkpL2csIHJlS2V5U2VnbWVudCA9IC9fa2V5XFxzKj09XFxzKlsnXCJdKC4qKVsnXCJdLztcbmZ1bmN0aW9uIGdldChvYmosIHBhdGgsIGRlZmF1bHRWYWwpIHtcbiAgY29uc3Qgc2VsZWN0ID0gdHlwZW9mIHBhdGggPT0gXCJzdHJpbmdcIiA/IGZyb21TdHJpbmcocGF0aCkgOiBwYXRoO1xuICBpZiAoIUFycmF5LmlzQXJyYXkoc2VsZWN0KSlcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXRoIG11c3QgYmUgYW4gYXJyYXkgb3IgYSBzdHJpbmdcIik7XG4gIGxldCBhY2MgPSBvYmo7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgc2VnbWVudCA9IHNlbGVjdFtpXTtcbiAgICBpZiAoaXNJbmRleFNlZ21lbnQoc2VnbWVudCkpIHtcbiAgICAgIGlmICghQXJyYXkuaXNBcnJheShhY2MpKVxuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbDtcbiAgICAgIGFjYyA9IGFjY1tzZWdtZW50XTtcbiAgICB9XG4gICAgaWYgKGlzS2V5U2VnbWVudChzZWdtZW50KSkge1xuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGFjYykpXG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsO1xuICAgICAgYWNjID0gYWNjLmZpbmQoKGl0ZW0pID0+IGl0ZW0uX2tleSA9PT0gc2VnbWVudC5fa2V5KTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzZWdtZW50ID09IFwic3RyaW5nXCIgJiYgKGFjYyA9IHR5cGVvZiBhY2MgPT0gXCJvYmplY3RcIiAmJiBhY2MgIT09IG51bGwgPyBhY2Nbc2VnbWVudF0gOiB2b2lkIDApLCB0eXBlb2YgYWNjID4gXCJ1XCIpXG4gICAgICByZXR1cm4gZGVmYXVsdFZhbDtcbiAgfVxuICByZXR1cm4gYWNjO1xufVxuZnVuY3Rpb24gZnJvbVN0cmluZyhwYXRoKSB7XG4gIGlmICh0eXBlb2YgcGF0aCAhPSBcInN0cmluZ1wiKVxuICAgIHRocm93IG5ldyBFcnJvcihcIlBhdGggaXMgbm90IGEgc3RyaW5nXCIpO1xuICBjb25zdCBzZWdtZW50cyA9IHBhdGgubWF0Y2gocmVQcm9wTmFtZSk7XG4gIGlmICghc2VnbWVudHMpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXRoIHN0cmluZ1wiKTtcbiAgcmV0dXJuIHNlZ21lbnRzLm1hcChub3JtYWxpemVQYXRoU2VnbWVudCk7XG59XG5mdW5jdGlvbiBub3JtYWxpemVQYXRoU2VnbWVudChzZWdtZW50KSB7XG4gIHJldHVybiBpc0luZGV4U2VnbWVudChzZWdtZW50KSA/IG5vcm1hbGl6ZUluZGV4U2VnbWVudChzZWdtZW50KSA6IGlzS2V5U2VnbWVudChzZWdtZW50KSA/IG5vcm1hbGl6ZUtleVNlZ21lbnQoc2VnbWVudCkgOiBpc0luZGV4VHVwbGUoc2VnbWVudCkgPyBub3JtYWxpemVJbmRleFR1cGxlU2VnbWVudChzZWdtZW50KSA6IHNlZ21lbnQ7XG59XG5mdW5jdGlvbiBub3JtYWxpemVJbmRleFNlZ21lbnQoc2VnbWVudCkge1xuICByZXR1cm4gTnVtYmVyKHNlZ21lbnQucmVwbGFjZSgvW15cXGRdL2csIFwiXCIpKTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUtleVNlZ21lbnQoc2VnbWVudCkge1xuICByZXR1cm4geyBfa2V5OiBzZWdtZW50Lm1hdGNoKHJlS2V5U2VnbWVudClbMV0gfTtcbn1cbmZ1bmN0aW9uIG5vcm1hbGl6ZUluZGV4VHVwbGVTZWdtZW50KHNlZ21lbnQpIHtcbiAgY29uc3QgW2Zyb20sIHRvXSA9IHNlZ21lbnQuc3BsaXQoXCI6XCIpLm1hcCgoc2VnKSA9PiBzZWcgPT09IFwiXCIgPyBzZWcgOiBOdW1iZXIoc2VnKSk7XG4gIHJldHVybiBbZnJvbSwgdG9dO1xufVxuZnVuY3Rpb24gdXNlT3B0aW1pc3RpY0FjdG9yKCkge1xuICByZXR1cm4gdXNlU3luY0V4dGVybmFsU3RvcmUoX3RlbXAsIF90ZW1wMiwgX3RlbXAzKTtcbn1cbmZ1bmN0aW9uIF90ZW1wMygpIHtcbiAgcmV0dXJuIGVtcHR5QWN0b3I7XG59XG5mdW5jdGlvbiBfdGVtcDIoKSB7XG4gIHJldHVybiBhY3Rvcjtcbn1cbmZ1bmN0aW9uIF90ZW1wKGxpc3RlbmVyKSB7XG4gIHJldHVybiBsaXN0ZW5lcnMuYWRkKGxpc3RlbmVyKSwgKCkgPT4gbGlzdGVuZXJzLmRlbGV0ZShsaXN0ZW5lcik7XG59XG5mdW5jdGlvbiB1c2VPcHRpbWlzdGljQWN0b3JSZWFkeSgpIHtcbiAgY29uc3QgYWN0b3IyID0gdXNlT3B0aW1pc3RpY0FjdG9yKCk7XG4gIHJldHVybiAhaXNFbXB0eUFjdG9yKGFjdG9yMik7XG59XG5mdW5jdGlvbiBkZWJvdW5jZShmbiwgdGltZW91dCkge1xuICBsZXQgdGltZXI7XG4gIHJldHVybiAoLi4uYXJncykgPT4ge1xuICAgIGNsZWFyVGltZW91dCh0aW1lciksIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBmbi5hcHBseShmbiwgYXJncyk7XG4gICAgfSwgdGltZW91dCk7XG4gIH07XG59XG5mdW5jdGlvbiBnZXREb2N1bWVudHNBbmRTbmFwc2hvdChpZCwgYWN0b3IyKSB7XG4gIGNvbnN0IGluRnJhbWUgPSBpc01heWJlUHJldmlld0lmcmFtZSgpLCBpblBvcFVwID0gaXNNYXliZVByZXZpZXdXaW5kb3coKTtcbiAgaWYgKGlzRW1wdHlBY3RvcihhY3RvcjIpIHx8ICFpbkZyYW1lICYmICFpblBvcFVwKVxuICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBgdXNlRG9jdW1lbnRzYCBob29rIGNhbm5vdCBiZSB1c2VkIGluIHRoaXMgY29udGV4dFwiKTtcbiAgY29uc3QgZHJhZnRJZCA9IGdldERyYWZ0SWQoaWQpLCBwdWJsaXNoZWRJZCA9IGdldFB1Ymxpc2hlZElkKGlkKSwgZG9jdW1lbnRzID0gYWN0b3IyLmdldFNuYXBzaG90KCkuY29udGV4dD8uZG9jdW1lbnRzLCBkcmFmdERvYyA9IGRvY3VtZW50cz8uW2RyYWZ0SWRdLCBwdWJsaXNoZWREb2MgPSBkb2N1bWVudHM/LltwdWJsaXNoZWRJZF0sIGRvYyA9IGRyYWZ0RG9jIHx8IHB1Ymxpc2hlZERvYztcbiAgaWYgKCFkb2MpXG4gICAgdGhyb3cgbmV3IEVycm9yKGBEb2N1bWVudCBcIiR7aWR9XCIgbm90IGZvdW5kYCk7XG4gIGNvbnN0IHNuYXBzaG90ID0gZHJhZnREb2MuZ2V0U25hcHNob3QoKS5jb250ZXh0Py5sb2NhbCB8fCBwdWJsaXNoZWREb2MuZ2V0U25hcHNob3QoKS5jb250ZXh0Py5sb2NhbCwgc25hcHNob3RQcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBpZiAoc25hcHNob3QpXG4gICAgICByZXNvbHZlKHNuYXBzaG90KTtcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IHN1YnNjcmliZXIgPSBkb2Mub24oXCJyZWFkeVwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIHNuYXBzaG90OiBzbmFwc2hvdDJcbiAgICAgICAgfSA9IGV2ZW50O1xuICAgICAgICByZXNvbHZlKHNuYXBzaG90MiB8fCBudWxsKSwgc3Vic2NyaWJlci51bnN1YnNjcmliZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBkcmFmdERvYyxcbiAgICBkcmFmdElkLFxuICAgIGdldFNuYXBzaG90OiAoKSA9PiBzbmFwc2hvdFByb21pc2UsXG4gICAgcHVibGlzaGVkRG9jLFxuICAgIHB1Ymxpc2hlZElkLFxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIC0gdXNlIGBnZXRTbmFwc2hvdGAgaW5zdGVhZFxuICAgICAqL1xuICAgIGdldCBzbmFwc2hvdCgpIHtcbiAgICAgIGlmICghc25hcHNob3QpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgU25hcHNob3QgZm9yIGRvY3VtZW50IFwiJHtpZH1cIiBub3QgZm91bmRgKTtcbiAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVEb2N1bWVudENvbW1pdChpZCwgYWN0b3IyKSB7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgZHJhZnREb2NcbiAgICB9ID0gZ2V0RG9jdW1lbnRzQW5kU25hcHNob3QoaWQsIGFjdG9yMik7XG4gICAgZHJhZnREb2Muc2VuZCh7XG4gICAgICB0eXBlOiBcInN1Ym1pdFwiXG4gICAgfSk7XG4gIH07XG59XG5mdW5jdGlvbiBjcmVhdGVEb2N1bWVudEdldChpZCwgYWN0b3IyKSB7XG4gIHJldHVybiAocGF0aCkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHNuYXBzaG90XG4gICAgfSA9IGdldERvY3VtZW50c0FuZFNuYXBzaG90KGlkLCBhY3RvcjIpO1xuICAgIHJldHVybiBwYXRoID8gZ2V0KHNuYXBzaG90LCBwYXRoKSA6IHNuYXBzaG90O1xuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlRG9jdW1lbnRHZXRTbmFwc2hvdChpZCwgYWN0b3IyKSB7XG4gIGNvbnN0IHtcbiAgICBnZXRTbmFwc2hvdFxuICB9ID0gZ2V0RG9jdW1lbnRzQW5kU25hcHNob3QoaWQsIGFjdG9yMik7XG4gIHJldHVybiBnZXRTbmFwc2hvdDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZURvY3VtZW50UGF0Y2goaWQsIGFjdG9yMikge1xuICByZXR1cm4gYXN5bmMgKHBhdGNoZXMsIG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBnZXREb2N1bWVudHNBbmRTbmFwc2hvdChpZCwgYWN0b3IyKSwge1xuICAgICAgZHJhZnREb2MsXG4gICAgICBkcmFmdElkLFxuICAgICAgZ2V0U25hcHNob3QsXG4gICAgICBwdWJsaXNoZWRJZFxuICAgIH0gPSByZXN1bHQsIHtcbiAgICAgIGNvbW1pdCA9ICEwXG4gICAgfSA9IG9wdGlvbnMgfHwge30sIHJlc29sdmVkUGF0Y2hlcyA9IGF3YWl0ICh0eXBlb2YgcGF0Y2hlcyA9PSBcImZ1bmN0aW9uXCIgPyBwYXRjaGVzKHtcbiAgICAgIGRyYWZ0SWQsXG4gICAgICBwdWJsaXNoZWRJZCxcbiAgICAgIC8qKlxuICAgICAgICogQGRlcHJlY2F0ZWQgLSB1c2UgYGdldFNuYXBzaG90YCBpbnN0ZWFkXG4gICAgICAgKi9cbiAgICAgIGdldCBzbmFwc2hvdCgpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5zbmFwc2hvdDtcbiAgICAgIH0sXG4gICAgICBnZXRTbmFwc2hvdFxuICAgIH0pIDogcGF0Y2hlcyksIF9zbmFwc2hvdCA9IGF3YWl0IGdldFNuYXBzaG90KCk7XG4gICAgaWYgKCFfc25hcHNob3QpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFNuYXBzaG90IGZvciBkb2N1bWVudCBcIiR7aWR9XCIgbm90IGZvdW5kYCk7XG4gICAgZHJhZnREb2Muc2VuZCh7XG4gICAgICB0eXBlOiBcIm11dGF0ZVwiLFxuICAgICAgbXV0YXRpb25zOiBbXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gY3JlYXRlIHRoZSBkcmFmdCBkb2N1bWVudCwgaXQgbWlnaHQgbm90IGV4aXN0IGlmIHRoZVxuICAgICAgICAvLyBzbmFwc2hvdCB3YXMgZnJvbSB0aGUgcHVibGlzaGVkIGRvY3VtZW50XG4gICAgICAgIGNyZWF0ZUlmTm90RXhpc3RzKHtcbiAgICAgICAgICAuLi5fc25hcHNob3QsXG4gICAgICAgICAgX2lkOiBkcmFmdElkXG4gICAgICAgIH0pLFxuICAgICAgICAvLyBQYXRjaCB0aGUgZHJhZnQgZG9jdW1lbnQgd2l0aCB0aGUgcmVzb2x2ZWQgcGF0Y2hlc1xuICAgICAgICBwYXRjaChkcmFmdElkLCByZXNvbHZlZFBhdGNoZXMpXG4gICAgICBdXG4gICAgfSksIGNvbW1pdCAmJiAodHlwZW9mIGNvbW1pdCA9PSBcIm9iamVjdFwiICYmIFwiZGVib3VuY2VcIiBpbiBjb21taXQgPyBkZWJvdW5jZSgoKSA9PiBkcmFmdERvYy5zZW5kKHtcbiAgICAgIHR5cGU6IFwic3VibWl0XCJcbiAgICB9KSwgY29tbWl0LmRlYm91bmNlKSgpIDogZHJhZnREb2Muc2VuZCh7XG4gICAgICB0eXBlOiBcInN1Ym1pdFwiXG4gICAgfSkpO1xuICB9O1xufVxuZnVuY3Rpb24gdXNlRG9jdW1lbnRzKCkge1xuICBjb25zdCAkID0gYyg3KSwgYWN0b3IyID0gdXNlT3B0aW1pc3RpY0FjdG9yKCk7XG4gIGxldCB0MDtcbiAgJFswXSAhPT0gYWN0b3IyID8gKHQwID0gKGRvY3VtZW50SWQpID0+ICh7XG4gICAgaWQ6IGRvY3VtZW50SWQsXG4gICAgY29tbWl0OiBjcmVhdGVEb2N1bWVudENvbW1pdChkb2N1bWVudElkLCBhY3RvcjIpLFxuICAgIGdldDogY3JlYXRlRG9jdW1lbnRHZXQoZG9jdW1lbnRJZCwgYWN0b3IyKSxcbiAgICBnZXRTbmFwc2hvdDogY3JlYXRlRG9jdW1lbnRHZXRTbmFwc2hvdChkb2N1bWVudElkLCBhY3RvcjIpLFxuICAgIHBhdGNoOiBjcmVhdGVEb2N1bWVudFBhdGNoKGRvY3VtZW50SWQsIGFjdG9yMilcbiAgfSksICRbMF0gPSBhY3RvcjIsICRbMV0gPSB0MCkgOiB0MCA9ICRbMV07XG4gIGNvbnN0IGdldERvY3VtZW50ID0gdDA7XG4gIGxldCB0MTtcbiAgJFsyXSAhPT0gYWN0b3IyID8gKHQxID0gKGlkLCBtdXRhdGlvbnMsIG9wdGlvbnMpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBkcmFmdERvY1xuICAgIH0gPSBnZXREb2N1bWVudHNBbmRTbmFwc2hvdChpZCwgYWN0b3IyKSwge1xuICAgICAgY29tbWl0OiB0MjJcbiAgICB9ID0gb3B0aW9ucyB8fCB7fSwgY29tbWl0ID0gdDIyID09PSB2b2lkIDAgPyAhMCA6IHQyMjtcbiAgICBkcmFmdERvYy5zZW5kKHtcbiAgICAgIHR5cGU6IFwibXV0YXRlXCIsXG4gICAgICBtdXRhdGlvbnNcbiAgICB9KSwgY29tbWl0ICYmICh0eXBlb2YgY29tbWl0ID09IFwib2JqZWN0XCIgJiYgXCJkZWJvdW5jZVwiIGluIGNvbW1pdCA/IGRlYm91bmNlKCgpID0+IGRyYWZ0RG9jLnNlbmQoe1xuICAgICAgdHlwZTogXCJzdWJtaXRcIlxuICAgIH0pLCBjb21taXQuZGVib3VuY2UpKCkgOiBkcmFmdERvYy5zZW5kKHtcbiAgICAgIHR5cGU6IFwic3VibWl0XCJcbiAgICB9KSk7XG4gIH0sICRbMl0gPSBhY3RvcjIsICRbM10gPSB0MSkgOiB0MSA9ICRbM107XG4gIGNvbnN0IG11dGF0ZURvY3VtZW50ID0gdDE7XG4gIGxldCB0MjtcbiAgcmV0dXJuICRbNF0gIT09IGdldERvY3VtZW50IHx8ICRbNV0gIT09IG11dGF0ZURvY3VtZW50ID8gKHQyID0ge1xuICAgIGdldERvY3VtZW50LFxuICAgIG11dGF0ZURvY3VtZW50XG4gIH0sICRbNF0gPSBnZXREb2N1bWVudCwgJFs1XSA9IG11dGF0ZURvY3VtZW50LCAkWzZdID0gdDIpIDogdDIgPSAkWzZdLCB0Mjtcbn1cbmZ1bmN0aW9uIHdoYXR3Z1JORyhsZW5ndGggPSAxNikge1xuICBjb25zdCBybmRzOCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gIHJldHVybiBnZXRSYW5kb21WYWx1ZXMocm5kczgpLCBybmRzODtcbn1cbmNvbnN0IGdldEJ5dGVIZXhUYWJsZSA9IC8qIEBfX1BVUkVfXyAqLyAoKCkgPT4ge1xuICBsZXQgdGFibGU7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgaWYgKHRhYmxlKVxuICAgICAgcmV0dXJuIHRhYmxlO1xuICAgIHRhYmxlID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7ICsraSlcbiAgICAgIHRhYmxlW2ldID0gKGkgKyAyNTYpLnRvU3RyaW5nKDE2KS5zbGljZSgxKTtcbiAgICByZXR1cm4gdGFibGU7XG4gIH07XG59KSgpO1xuZnVuY3Rpb24gcmFuZG9tS2V5KGxlbmd0aCkge1xuICBjb25zdCB0YWJsZSA9IGdldEJ5dGVIZXhUYWJsZSgpO1xuICByZXR1cm4gd2hhdHdnUk5HKGxlbmd0aCkucmVkdWNlKChzdHIsIG4pID0+IHN0ciArIHRhYmxlW25dLCBcIlwiKS5zbGljZSgwLCBsZW5ndGgpO1xufVxuZnVuY3Rpb24gZ2V0QXJyYXlJdGVtS2V5QW5kUGFyZW50UGF0aChwYXRoT3JOb2RlKSB7XG4gIGNvbnN0IGVsZW1lbnRQYXRoID0gdHlwZW9mIHBhdGhPck5vZGUgPT0gXCJzdHJpbmdcIiA/IHBhdGhPck5vZGUgOiBwYXRoT3JOb2RlLnBhdGgsIGxhc3REb3RJbmRleCA9IGVsZW1lbnRQYXRoLmxhc3RJbmRleE9mKFwiLlwiKSwgbGFzdFBhdGhJdGVtID0gZWxlbWVudFBhdGguc3Vic3RyaW5nKGxhc3REb3RJbmRleCArIDEsIGVsZW1lbnRQYXRoLmxlbmd0aCk7XG4gIGlmICghbGFzdFBhdGhJdGVtLmluZGV4T2YoXCJbXCIpKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhdGg6IG5vdCBhbiBhcnJheVwiKTtcbiAgY29uc3QgbGFzdEFycmF5SW5kZXggPSBlbGVtZW50UGF0aC5sYXN0SW5kZXhPZihcIltcIiksIHBhdGggPSBlbGVtZW50UGF0aC5zdWJzdHJpbmcoMCwgbGFzdEFycmF5SW5kZXgpO1xuICBsZXQga2V5LCBoYXNFeHBsaWNpdEtleTtcbiAgaWYgKGxhc3RQYXRoSXRlbS5pbmNsdWRlcyhcIl9rZXlcIikpIHtcbiAgICBjb25zdCBzdGFydEluZGV4ID0gbGFzdFBhdGhJdGVtLmluZGV4T2YoJ1wiJykgKyAxLCBlbmRJbmRleCA9IGxhc3RQYXRoSXRlbS5pbmRleE9mKCdcIicsIHN0YXJ0SW5kZXgpO1xuICAgIGtleSA9IGxhc3RQYXRoSXRlbS5zdWJzdHJpbmcoc3RhcnRJbmRleCwgZW5kSW5kZXgpLCBoYXNFeHBsaWNpdEtleSA9ICEwO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBsYXN0UGF0aEl0ZW0uaW5kZXhPZihcIltcIikgKyAxLCBlbmRJbmRleCA9IGxhc3RQYXRoSXRlbS5pbmRleE9mKFwiXVwiLCBzdGFydEluZGV4KTtcbiAgICBrZXkgPSBsYXN0UGF0aEl0ZW0uc3Vic3RyaW5nKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSwgaGFzRXhwbGljaXRLZXkgPSAhMTtcbiAgfVxuICBpZiAoIXBhdGggfHwgIWtleSkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXRoXCIpO1xuICByZXR1cm4ge1xuICAgIHBhdGgsXG4gICAga2V5LFxuICAgIGhhc0V4cGxpY2l0S2V5XG4gIH07XG59XG5mdW5jdGlvbiBnZXRBcnJheUR1cGxpY2F0ZVBhdGNoZXMobm9kZSwgc25hcHNob3QsIHBvc2l0aW9uID0gXCJhZnRlclwiKSB7XG4gIGNvbnN0IHtcbiAgICBwYXRoOiBhcnJheVBhdGgsXG4gICAga2V5OiBpdGVtS2V5XG4gIH0gPSBnZXRBcnJheUl0ZW1LZXlBbmRQYXJlbnRQYXRoKG5vZGUpLCBkdXBsaWNhdGUgPSB7XG4gICAgLi4uZ2V0KHNuYXBzaG90LCBub2RlLnBhdGgpLFxuICAgIF9rZXk6IHJhbmRvbUtleSgpXG4gIH07XG4gIHJldHVybiBbYXQoYXJyYXlQYXRoLCBpbnNlcnQoZHVwbGljYXRlLCBwb3NpdGlvbiwge1xuICAgIF9rZXk6IGl0ZW1LZXlcbiAgfSkpXTtcbn1cbmZ1bmN0aW9uIGdldEFycmF5UmVtb3ZlUGF0Y2hlcyhub2RlLCBzbmFwc2hvdCkge1xuICBjb25zdCB7XG4gICAgcGF0aDogYXJyYXlQYXRoLFxuICAgIGtleTogaXRlbUtleVxuICB9ID0gZ2V0QXJyYXlJdGVtS2V5QW5kUGFyZW50UGF0aChub2RlKSwgY3VycmVudEluZGV4ID0gZ2V0KHNuYXBzaG90LCBhcnJheVBhdGgpLmZpbmRJbmRleCgoaXRlbSkgPT4gaXRlbS5fa2V5ID09PSBpdGVtS2V5KTtcbiAgcmV0dXJuIFthdChhcnJheVBhdGgsIHRydW5jYXRlKGN1cnJlbnRJbmRleCwgY3VycmVudEluZGV4ICsgMSkpXTtcbn1cbmZ1bmN0aW9uIGdldEFycmF5SW5zZXJ0UGF0Y2hlcyhub2RlLCBpbnNlcnRUeXBlLCBwb3NpdGlvbikge1xuICBjb25zdCB7XG4gICAgcGF0aDogYXJyYXlQYXRoLFxuICAgIGtleTogaXRlbUtleVxuICB9ID0gZ2V0QXJyYXlJdGVtS2V5QW5kUGFyZW50UGF0aChub2RlKSwgaW5zZXJ0S2V5ID0gcmFuZG9tS2V5KCk7XG4gIHJldHVybiBbYXQoYXJyYXlQYXRoLCBpbnNlcnQoW3tcbiAgICBfdHlwZTogaW5zZXJ0VHlwZSxcbiAgICBfa2V5OiBpbnNlcnRLZXlcbiAgfV0sIHBvc2l0aW9uLCB7XG4gICAgX2tleTogaXRlbUtleVxuICB9KSldO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0QXJyYXlNb3ZlUGF0Y2hlcyhub2RlLCBkb2MsIG1vdmVUbykge1xuICBpZiAoIW5vZGUudHlwZSkgdGhyb3cgbmV3IEVycm9yKFwiTm9kZSB0eXBlIGlzIG1pc3NpbmdcIik7XG4gIGNvbnN0IHtcbiAgICBwYXRoOiBhcnJheVBhdGgsXG4gICAga2V5OiBpdGVtS2V5XG4gIH0gPSBnZXRBcnJheUl0ZW1LZXlBbmRQYXJlbnRQYXRoKG5vZGUpLCBzbmFwc2hvdCA9IGF3YWl0IGRvYy5nZXRTbmFwc2hvdCgpLCBhcnJheSA9IGdldChzbmFwc2hvdCwgYXJyYXlQYXRoKSwgaXRlbSA9IGdldChzbmFwc2hvdCwgbm9kZS5wYXRoKSwgY3VycmVudEluZGV4ID0gYXJyYXkuZmluZEluZGV4KChpdGVtMikgPT4gaXRlbTIuX2tleSA9PT0gaXRlbUtleSk7XG4gIGxldCBuZXh0SW5kZXggPSAtMSwgcG9zaXRpb24gPSBcImJlZm9yZVwiO1xuICBpZiAobW92ZVRvID09PSBcImZpcnN0XCIpIHtcbiAgICBpZiAoY3VycmVudEluZGV4ID09PSAwKSByZXR1cm4gW107XG4gICAgbmV4dEluZGV4ID0gMCwgcG9zaXRpb24gPSBcImJlZm9yZVwiO1xuICB9IGVsc2UgaWYgKG1vdmVUbyA9PT0gXCJsYXN0XCIpIHtcbiAgICBpZiAoY3VycmVudEluZGV4ID09PSBhcnJheS5sZW5ndGggLSAxKSByZXR1cm4gW107XG4gICAgbmV4dEluZGV4ID0gLTEsIHBvc2l0aW9uID0gXCJhZnRlclwiO1xuICB9IGVsc2UgaWYgKG1vdmVUbyA9PT0gXCJuZXh0XCIpIHtcbiAgICBpZiAoY3VycmVudEluZGV4ID09PSBhcnJheS5sZW5ndGggLSAxKSByZXR1cm4gW107XG4gICAgbmV4dEluZGV4ID0gY3VycmVudEluZGV4LCBwb3NpdGlvbiA9IFwiYWZ0ZXJcIjtcbiAgfSBlbHNlIGlmIChtb3ZlVG8gPT09IFwicHJldmlvdXNcIikge1xuICAgIGlmIChjdXJyZW50SW5kZXggPT09IDApIHJldHVybiBbXTtcbiAgICBuZXh0SW5kZXggPSBjdXJyZW50SW5kZXggLSAxLCBwb3NpdGlvbiA9IFwiYmVmb3JlXCI7XG4gIH1cbiAgcmV0dXJuIFthdChhcnJheVBhdGgsIHRydW5jYXRlKGN1cnJlbnRJbmRleCwgY3VycmVudEluZGV4ICsgMSkpLCBhdChhcnJheVBhdGgsIGluc2VydChpdGVtLCBwb3NpdGlvbiwgbmV4dEluZGV4KSldO1xufVxuZXhwb3J0IHtcbiAgZ2V0LFxuICBnZXRBcnJheUR1cGxpY2F0ZVBhdGNoZXMsXG4gIGdldEFycmF5SW5zZXJ0UGF0Y2hlcyxcbiAgZ2V0QXJyYXlJdGVtS2V5QW5kUGFyZW50UGF0aCxcbiAgZ2V0QXJyYXlNb3ZlUGF0Y2hlcyxcbiAgZ2V0QXJyYXlSZW1vdmVQYXRjaGVzLFxuICB1c2VEb2N1bWVudHMsXG4gIHVzZU9wdGltaXN0aWNBY3RvcixcbiAgdXNlT3B0aW1pc3RpY0FjdG9yUmVhZHlcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tdXRhdGlvbnMuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/mutations.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/optimistic/index.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/optimistic/index.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   actor: () => (/* reexport safe */ _chunks_es_context_js__WEBPACK_IMPORTED_MODULE_7__.actor),\n/* harmony export */   createDatasetMutator: () => (/* binding */ createDatasetMutator),\n/* harmony export */   createDocumentMutator: () => (/* binding */ createDocumentMutator),\n/* harmony export */   emptyActor: () => (/* reexport safe */ _chunks_es_context_js__WEBPACK_IMPORTED_MODULE_7__.emptyActor),\n/* harmony export */   isEmptyActor: () => (/* reexport safe */ _chunks_es_context_js__WEBPACK_IMPORTED_MODULE_7__.isEmptyActor),\n/* harmony export */   listeners: () => (/* reexport safe */ _chunks_es_context_js__WEBPACK_IMPORTED_MODULE_7__.listeners),\n/* harmony export */   setActor: () => (/* reexport safe */ _chunks_es_context_js__WEBPACK_IMPORTED_MODULE_7__.setActor)\n/* harmony export */ });\n/* harmony import */ var _chunks_es_context_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_chunks-es/context.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/context.js\");\n/* harmony import */ var _sanity_mutate_unstable_machine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @sanity/mutate/_unstable_machine */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/_unstable_machine.js\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! xstate */ \"(ssr)/./node_modules/xstate/actors/dist/xstate-actors.development.esm.js\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! xstate */ \"(ssr)/./node_modules/xstate/dist/log-2269452a.development.esm.js\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! xstate */ \"(ssr)/./node_modules/xstate/dist/xstate.development.esm.js\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! xstate */ \"(ssr)/./node_modules/xstate/dist/assign-f4c801fe.development.esm.js\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! xstate */ \"(ssr)/./node_modules/xstate/dist/raise-b2a9750b.development.esm.js\");\n/* harmony import */ var _sanity_mutate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sanity/mutate */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/index.js\");\n\n\n\n\nconst createDocumentMutator = (comlink) => {\n  const fetchSnapshot = (0,xstate__WEBPACK_IMPORTED_MODULE_0__.fromPromise)(async ({\n    input,\n    signal\n  }) => {\n    const {\n      id\n    } = input, {\n      snapshot\n    } = await comlink.fetch(\"visual-editing/fetch-snapshot\", {\n      documentId: id\n    }, {\n      signal\n    });\n    return snapshot;\n  }), submitMutations = (0,xstate__WEBPACK_IMPORTED_MODULE_0__.fromPromise)(async ({\n    input\n  }) => {\n    const {\n      transactions\n    } = input;\n    for (const transaction of transactions) {\n      const data = _sanity_mutate__WEBPACK_IMPORTED_MODULE_1__.SanityEncoder.encodeTransaction(transaction);\n      return comlink.post(\"visual-editing/mutate\", data);\n    }\n  });\n  return _sanity_mutate_unstable_machine__WEBPACK_IMPORTED_MODULE_2__.documentMutatorMachine.provide({\n    actions: {\n      \"send sync event to parent\": (0,xstate__WEBPACK_IMPORTED_MODULE_3__.e)(({\n        enqueue\n      }) => {\n        enqueue.sendParent(({\n          context\n        }) => ({\n          type: \"sync\",\n          id: context.id,\n          document: context.remote\n        })), enqueue.emit(({\n          context\n        }) => ({\n          type: \"ready\",\n          snapshot: context.local\n        }));\n      })\n    },\n    actors: {\n      \"fetch remote snapshot\": fetchSnapshot,\n      \"submit mutations as transactions\": submitMutations\n    }\n  });\n}, datasetMutatorMachine = (0,xstate__WEBPACK_IMPORTED_MODULE_4__.setup)({\n  types: {},\n  actions: {\n    \"emit sync event\": (0,xstate__WEBPACK_IMPORTED_MODULE_3__.a)(({\n      event\n    }) => ((0,xstate__WEBPACK_IMPORTED_MODULE_4__.assertEvent)(event, \"sync\"), event)),\n    \"emit mutation event\": (0,xstate__WEBPACK_IMPORTED_MODULE_3__.a)(({\n      event\n    }) => ((0,xstate__WEBPACK_IMPORTED_MODULE_4__.assertEvent)(event, \"mutation\"), event)),\n    \"emit rebased event\": (0,xstate__WEBPACK_IMPORTED_MODULE_3__.a)(({\n      event\n    }) => ((0,xstate__WEBPACK_IMPORTED_MODULE_4__.assertEvent)(event, [\"rebased.local\", \"rebased.remote\"]), event)),\n    \"emit pristine event\": (0,xstate__WEBPACK_IMPORTED_MODULE_3__.a)(({\n      event\n    }) => ((0,xstate__WEBPACK_IMPORTED_MODULE_4__.assertEvent)(event, [\"pristine\"]), event)),\n    \"add document actor\": (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n      documents: ({\n        context,\n        event,\n        spawn\n      }) => {\n        (0,xstate__WEBPACK_IMPORTED_MODULE_4__.assertEvent)(event, \"observe\");\n        const id = event.documentId;\n        return context.documents[id] ? context.documents : {\n          ...context.documents,\n          [id]: spawn(\"documentMutatorMachine\", {\n            input: {\n              id,\n              client: context.client,\n              sharedListener: context.sharedListener || (0,_sanity_mutate_unstable_machine__WEBPACK_IMPORTED_MODULE_2__.createSharedListener)(context.client)\n            },\n            id\n          })\n        };\n      }\n    }),\n    \"stop remote snapshot\": (0,xstate__WEBPACK_IMPORTED_MODULE_6__.s)(({\n      context,\n      event\n    }) => ((0,xstate__WEBPACK_IMPORTED_MODULE_4__.assertEvent)(event, \"unobserve\"), context.documents[event.documentId])),\n    \"remove remote snapshot from context\": (0,xstate__WEBPACK_IMPORTED_MODULE_5__.a)({\n      documents: ({\n        context,\n        event\n      }) => {\n        if ((0,xstate__WEBPACK_IMPORTED_MODULE_4__.assertEvent)(event, \"unobserve\"), !context.documents[event.documentId]) return context.documents;\n        const {\n          [event.documentId]: _,\n          ...documents\n        } = context.documents;\n        return documents;\n      }\n    })\n  },\n  actors: {\n    documentMutatorMachine: _sanity_mutate_unstable_machine__WEBPACK_IMPORTED_MODULE_2__.documentMutatorMachine\n  }\n}).createMachine({\n  /** @xstate-layout N4IgpgJg5mDOIC5QBsD2BjAhsgIhgrgLZgB2ALgMTICWsZpA2gAwC6ioADqrNWdaiXYgAHogC0ADgBMAOgkA2ACyKArBICcTdfKXSANCACeiFQHYZpgMxWV800yYqp6gIyn5AXw8G0WXAWJyCnwSGjpGViEuHj4BIVEEKUt5OSlFU1smFwkFW0sDY0T1GRUXRXkXKVN7HSYJJkUvHwxsPHQiUjIZDgAnWj4SMApCfDJMemY2JBBo3n5BaYSXeVlbKRUsiXdFSxcXfKNERSqZTbr1zVMJNyaQX1aAzpkIah6yQwp0VEJCXkmo7hzOKLRDLFwyFxaSzXKTOKQudSKCQFRDOczqCSWJjwjbHCQqRFebwgEioCBwIT3fztQJkAExebxcQuFEIZaWGRIrF7dSXKTyFSNYlUtodcjdPp0aiDelAhagBLpVmWAmc46mNwSZTyLQuFS3EWPcUvN6FTiA2LykSoq6c6wbCqVUzparKioyRFVfkq1zqNSWIkeIA */\n  id: \"dataset-mutator\",\n  context: ({\n    input\n  }) => ({\n    documents: {},\n    client: input.client,\n    sharedListener: input.sharedListener\n  }),\n  on: {\n    sync: {\n      actions: [\"emit sync event\"]\n    },\n    mutation: {\n      actions: [\"emit mutation event\"]\n    },\n    \"rebased.*\": {\n      actions: [\"emit rebased event\"]\n    },\n    pristine: {\n      actions: [\"emit pristine event\"]\n    },\n    observe: {\n      actions: [\"add document actor\"]\n    },\n    unobserve: {\n      actions: [\"stop remote snapshot\", \"remove remote snapshot from context\"]\n    }\n  },\n  initial: \"pristine\",\n  states: {\n    pristine: {}\n  }\n}), createDatasetMutator = (comlink) => datasetMutatorMachine.provide({\n  actors: {\n    documentMutatorMachine: createDocumentMutator(comlink)\n  }\n});\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvdmlzdWFsLWVkaXRpbmcvZGlzdC9vcHRpbWlzdGljL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRztBQUNBO0FBQ0U7QUFDbkQ7QUFDL0M7QUFDQSx3QkFBd0IsbURBQVc7QUFDbkM7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRyxxQkFBcUIsbURBQVc7QUFDbkM7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLG1CQUFtQix5REFBYTtBQUNoQztBQUNBO0FBQ0EsR0FBRztBQUNILFNBQVMsbUZBQXNCO0FBQy9CO0FBQ0EsbUNBQW1DLHlDQUFjO0FBQ2pEO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDLDBCQUEwQiw2Q0FBSztBQUNoQyxXQUFXO0FBQ1g7QUFDQSx1QkFBdUIseUNBQUk7QUFDM0I7QUFDQSxLQUFLLE1BQU0sbURBQVc7QUFDdEIsMkJBQTJCLHlDQUFJO0FBQy9CO0FBQ0EsS0FBSyxNQUFNLG1EQUFXO0FBQ3RCLDBCQUEwQix5Q0FBSTtBQUM5QjtBQUNBLEtBQUssTUFBTSxtREFBVztBQUN0QiwyQkFBMkIseUNBQUk7QUFDL0I7QUFDQSxLQUFLLE1BQU0sbURBQVc7QUFDdEIsMEJBQTBCLHlDQUFNO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLFFBQVEsbURBQVc7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QscUZBQW9CO0FBQzVFLGFBQWE7QUFDYjtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsS0FBSztBQUNMLDRCQUE0Qix5Q0FBUztBQUNyQztBQUNBO0FBQ0EsS0FBSyxNQUFNLG1EQUFXO0FBQ3RCLDJDQUEyQyx5Q0FBTTtBQUNqRDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsWUFBWSxtREFBVztBQUN2QjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFTQztBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbm91cmVsZGlubWFobW91ZC9mcmVzaGNhcnQvZGVwbG95L25vZGVfbW9kdWxlcy9uZXh0LXNhbml0eS9ub2RlX21vZHVsZXMvQHNhbml0eS92aXN1YWwtZWRpdGluZy9kaXN0L29wdGltaXN0aWMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYWN0b3IsIGVtcHR5QWN0b3IsIGlzRW1wdHlBY3RvciwgbGlzdGVuZXJzLCBzZXRBY3RvciB9IGZyb20gXCIuLi9fY2h1bmtzLWVzL2NvbnRleHQuanNcIjtcbmltcG9ydCB7IGRvY3VtZW50TXV0YXRvck1hY2hpbmUsIGNyZWF0ZVNoYXJlZExpc3RlbmVyIH0gZnJvbSBcIkBzYW5pdHkvbXV0YXRlL191bnN0YWJsZV9tYWNoaW5lXCI7XG5pbXBvcnQgeyBmcm9tUHJvbWlzZSwgZW5xdWV1ZUFjdGlvbnMsIHNldHVwLCBhc3NpZ24sIHN0b3BDaGlsZCwgZW1pdCwgYXNzZXJ0RXZlbnQgfSBmcm9tIFwieHN0YXRlXCI7XG5pbXBvcnQgeyBTYW5pdHlFbmNvZGVyIH0gZnJvbSBcIkBzYW5pdHkvbXV0YXRlXCI7XG5jb25zdCBjcmVhdGVEb2N1bWVudE11dGF0b3IgPSAoY29tbGluaykgPT4ge1xuICBjb25zdCBmZXRjaFNuYXBzaG90ID0gZnJvbVByb21pc2UoYXN5bmMgKHtcbiAgICBpbnB1dCxcbiAgICBzaWduYWxcbiAgfSkgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGlkXG4gICAgfSA9IGlucHV0LCB7XG4gICAgICBzbmFwc2hvdFxuICAgIH0gPSBhd2FpdCBjb21saW5rLmZldGNoKFwidmlzdWFsLWVkaXRpbmcvZmV0Y2gtc25hcHNob3RcIiwge1xuICAgICAgZG9jdW1lbnRJZDogaWRcbiAgICB9LCB7XG4gICAgICBzaWduYWxcbiAgICB9KTtcbiAgICByZXR1cm4gc25hcHNob3Q7XG4gIH0pLCBzdWJtaXRNdXRhdGlvbnMgPSBmcm9tUHJvbWlzZShhc3luYyAoe1xuICAgIGlucHV0XG4gIH0pID0+IHtcbiAgICBjb25zdCB7XG4gICAgICB0cmFuc2FjdGlvbnNcbiAgICB9ID0gaW5wdXQ7XG4gICAgZm9yIChjb25zdCB0cmFuc2FjdGlvbiBvZiB0cmFuc2FjdGlvbnMpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBTYW5pdHlFbmNvZGVyLmVuY29kZVRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uKTtcbiAgICAgIHJldHVybiBjb21saW5rLnBvc3QoXCJ2aXN1YWwtZWRpdGluZy9tdXRhdGVcIiwgZGF0YSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGRvY3VtZW50TXV0YXRvck1hY2hpbmUucHJvdmlkZSh7XG4gICAgYWN0aW9uczoge1xuICAgICAgXCJzZW5kIHN5bmMgZXZlbnQgdG8gcGFyZW50XCI6IGVucXVldWVBY3Rpb25zKCh7XG4gICAgICAgIGVucXVldWVcbiAgICAgIH0pID0+IHtcbiAgICAgICAgZW5xdWV1ZS5zZW5kUGFyZW50KCh7XG4gICAgICAgICAgY29udGV4dFxuICAgICAgICB9KSA9PiAoe1xuICAgICAgICAgIHR5cGU6IFwic3luY1wiLFxuICAgICAgICAgIGlkOiBjb250ZXh0LmlkLFxuICAgICAgICAgIGRvY3VtZW50OiBjb250ZXh0LnJlbW90ZVxuICAgICAgICB9KSksIGVucXVldWUuZW1pdCgoe1xuICAgICAgICAgIGNvbnRleHRcbiAgICAgICAgfSkgPT4gKHtcbiAgICAgICAgICB0eXBlOiBcInJlYWR5XCIsXG4gICAgICAgICAgc25hcHNob3Q6IGNvbnRleHQubG9jYWxcbiAgICAgICAgfSkpO1xuICAgICAgfSlcbiAgICB9LFxuICAgIGFjdG9yczoge1xuICAgICAgXCJmZXRjaCByZW1vdGUgc25hcHNob3RcIjogZmV0Y2hTbmFwc2hvdCxcbiAgICAgIFwic3VibWl0IG11dGF0aW9ucyBhcyB0cmFuc2FjdGlvbnNcIjogc3VibWl0TXV0YXRpb25zXG4gICAgfVxuICB9KTtcbn0sIGRhdGFzZXRNdXRhdG9yTWFjaGluZSA9IHNldHVwKHtcbiAgdHlwZXM6IHt9LFxuICBhY3Rpb25zOiB7XG4gICAgXCJlbWl0IHN5bmMgZXZlbnRcIjogZW1pdCgoe1xuICAgICAgZXZlbnRcbiAgICB9KSA9PiAoYXNzZXJ0RXZlbnQoZXZlbnQsIFwic3luY1wiKSwgZXZlbnQpKSxcbiAgICBcImVtaXQgbXV0YXRpb24gZXZlbnRcIjogZW1pdCgoe1xuICAgICAgZXZlbnRcbiAgICB9KSA9PiAoYXNzZXJ0RXZlbnQoZXZlbnQsIFwibXV0YXRpb25cIiksIGV2ZW50KSksXG4gICAgXCJlbWl0IHJlYmFzZWQgZXZlbnRcIjogZW1pdCgoe1xuICAgICAgZXZlbnRcbiAgICB9KSA9PiAoYXNzZXJ0RXZlbnQoZXZlbnQsIFtcInJlYmFzZWQubG9jYWxcIiwgXCJyZWJhc2VkLnJlbW90ZVwiXSksIGV2ZW50KSksXG4gICAgXCJlbWl0IHByaXN0aW5lIGV2ZW50XCI6IGVtaXQoKHtcbiAgICAgIGV2ZW50XG4gICAgfSkgPT4gKGFzc2VydEV2ZW50KGV2ZW50LCBbXCJwcmlzdGluZVwiXSksIGV2ZW50KSksXG4gICAgXCJhZGQgZG9jdW1lbnQgYWN0b3JcIjogYXNzaWduKHtcbiAgICAgIGRvY3VtZW50czogKHtcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgZXZlbnQsXG4gICAgICAgIHNwYXduXG4gICAgICB9KSA9PiB7XG4gICAgICAgIGFzc2VydEV2ZW50KGV2ZW50LCBcIm9ic2VydmVcIik7XG4gICAgICAgIGNvbnN0IGlkID0gZXZlbnQuZG9jdW1lbnRJZDtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuZG9jdW1lbnRzW2lkXSA/IGNvbnRleHQuZG9jdW1lbnRzIDoge1xuICAgICAgICAgIC4uLmNvbnRleHQuZG9jdW1lbnRzLFxuICAgICAgICAgIFtpZF06IHNwYXduKFwiZG9jdW1lbnRNdXRhdG9yTWFjaGluZVwiLCB7XG4gICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgY2xpZW50OiBjb250ZXh0LmNsaWVudCxcbiAgICAgICAgICAgICAgc2hhcmVkTGlzdGVuZXI6IGNvbnRleHQuc2hhcmVkTGlzdGVuZXIgfHwgY3JlYXRlU2hhcmVkTGlzdGVuZXIoY29udGV4dC5jbGllbnQpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaWRcbiAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pLFxuICAgIFwic3RvcCByZW1vdGUgc25hcHNob3RcIjogc3RvcENoaWxkKCh7XG4gICAgICBjb250ZXh0LFxuICAgICAgZXZlbnRcbiAgICB9KSA9PiAoYXNzZXJ0RXZlbnQoZXZlbnQsIFwidW5vYnNlcnZlXCIpLCBjb250ZXh0LmRvY3VtZW50c1tldmVudC5kb2N1bWVudElkXSkpLFxuICAgIFwicmVtb3ZlIHJlbW90ZSBzbmFwc2hvdCBmcm9tIGNvbnRleHRcIjogYXNzaWduKHtcbiAgICAgIGRvY3VtZW50czogKHtcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgZXZlbnRcbiAgICAgIH0pID0+IHtcbiAgICAgICAgaWYgKGFzc2VydEV2ZW50KGV2ZW50LCBcInVub2JzZXJ2ZVwiKSwgIWNvbnRleHQuZG9jdW1lbnRzW2V2ZW50LmRvY3VtZW50SWRdKSByZXR1cm4gY29udGV4dC5kb2N1bWVudHM7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICBbZXZlbnQuZG9jdW1lbnRJZF06IF8sXG4gICAgICAgICAgLi4uZG9jdW1lbnRzXG4gICAgICAgIH0gPSBjb250ZXh0LmRvY3VtZW50cztcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50cztcbiAgICAgIH1cbiAgICB9KVxuICB9LFxuICBhY3RvcnM6IHtcbiAgICBkb2N1bWVudE11dGF0b3JNYWNoaW5lXG4gIH1cbn0pLmNyZWF0ZU1hY2hpbmUoe1xuICAvKiogQHhzdGF0ZS1sYXlvdXQgTjRJZ3BnSmc1bURPSUM1UUJzRDJCakFoc2dJaGdyZ0xaZ0IyQUxnTVRJQ1dzWnBBMmdBd0M2aW9BRHFyTldkYWlYWWdBSG9nQzBBRGdCTUFPZ2tBMkFDeUtBckJJQ2NUZGZLWFNBTkNBQ2VpRlFIWVpwZ014V1Y4MDB5WXFwNmdJeW41QVh3OEcwV1hBV0p5Q253U0dqcEdWaUV1SGo0QklWRUVLVXQ1T1NsRlUxc21Gd2tGVzBzRFkwVDFHUlVYUlhrWEtWTjdIU1lKSmtVdkh3eHNQSFFpVWpJWkRnQW5XajRTTUFwQ2ZESk1lbVkySkJCbzNuNUJhWVNYZVZsYktSVXNpWGRGU3hjWGZLTkVSU3FaVGJyMXpWTUpOeWFRWDFhQXpwa0lhaDZ5UXdwMFZFSkNYa21vN2h6T0tMUkRMRnd5RnhhU3pYS1RPS1F1ZFNLQ1FGUkRPY3pxQ1NXSmp3amJIQ1FxUkZlYndnRWlvQ0J3SVQzZnp0UUprQUV4ZWJ4Y1F1RkVJWmFXR1JJckY3ZFNYS1R5RlNOWWxVdG9kY2pkUHAwYWlEZWxBaGFnQkxwVm1XQW1jNDZtTndTWlR5TFF1RlMzRVdQY1V2TjZGVGlBMkx5a1NvcTZjNndiQ3FWVXpwYXJLaW95UkZWZmtxMXpxTlNXSWtlSUEgKi9cbiAgaWQ6IFwiZGF0YXNldC1tdXRhdG9yXCIsXG4gIGNvbnRleHQ6ICh7XG4gICAgaW5wdXRcbiAgfSkgPT4gKHtcbiAgICBkb2N1bWVudHM6IHt9LFxuICAgIGNsaWVudDogaW5wdXQuY2xpZW50LFxuICAgIHNoYXJlZExpc3RlbmVyOiBpbnB1dC5zaGFyZWRMaXN0ZW5lclxuICB9KSxcbiAgb246IHtcbiAgICBzeW5jOiB7XG4gICAgICBhY3Rpb25zOiBbXCJlbWl0IHN5bmMgZXZlbnRcIl1cbiAgICB9LFxuICAgIG11dGF0aW9uOiB7XG4gICAgICBhY3Rpb25zOiBbXCJlbWl0IG11dGF0aW9uIGV2ZW50XCJdXG4gICAgfSxcbiAgICBcInJlYmFzZWQuKlwiOiB7XG4gICAgICBhY3Rpb25zOiBbXCJlbWl0IHJlYmFzZWQgZXZlbnRcIl1cbiAgICB9LFxuICAgIHByaXN0aW5lOiB7XG4gICAgICBhY3Rpb25zOiBbXCJlbWl0IHByaXN0aW5lIGV2ZW50XCJdXG4gICAgfSxcbiAgICBvYnNlcnZlOiB7XG4gICAgICBhY3Rpb25zOiBbXCJhZGQgZG9jdW1lbnQgYWN0b3JcIl1cbiAgICB9LFxuICAgIHVub2JzZXJ2ZToge1xuICAgICAgYWN0aW9uczogW1wic3RvcCByZW1vdGUgc25hcHNob3RcIiwgXCJyZW1vdmUgcmVtb3RlIHNuYXBzaG90IGZyb20gY29udGV4dFwiXVxuICAgIH1cbiAgfSxcbiAgaW5pdGlhbDogXCJwcmlzdGluZVwiLFxuICBzdGF0ZXM6IHtcbiAgICBwcmlzdGluZToge31cbiAgfVxufSksIGNyZWF0ZURhdGFzZXRNdXRhdG9yID0gKGNvbWxpbmspID0+IGRhdGFzZXRNdXRhdG9yTWFjaGluZS5wcm92aWRlKHtcbiAgYWN0b3JzOiB7XG4gICAgZG9jdW1lbnRNdXRhdG9yTWFjaGluZTogY3JlYXRlRG9jdW1lbnRNdXRhdG9yKGNvbWxpbmspXG4gIH1cbn0pO1xuZXhwb3J0IHtcbiAgYWN0b3IsXG4gIGNyZWF0ZURhdGFzZXRNdXRhdG9yLFxuICBjcmVhdGVEb2N1bWVudE11dGF0b3IsXG4gIGVtcHR5QWN0b3IsXG4gIGlzRW1wdHlBY3RvcixcbiAgbGlzdGVuZXJzLFxuICBzZXRBY3RvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/optimistic/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/react/index.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/react/index.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   VisualEditing: () => (/* binding */ VisualEditing),\n/* harmony export */   createDataAttribute: () => (/* reexport safe */ _sanity_visual_editing_csm__WEBPACK_IMPORTED_MODULE_11__.createDataAttribute),\n/* harmony export */   createDatasetMutator: () => (/* reexport safe */ _optimistic_index_js__WEBPACK_IMPORTED_MODULE_18__.createDatasetMutator),\n/* harmony export */   createDocumentMutator: () => (/* reexport safe */ _optimistic_index_js__WEBPACK_IMPORTED_MODULE_18__.createDocumentMutator),\n/* harmony export */   emptyActor: () => (/* reexport safe */ _chunks_es_context_js__WEBPACK_IMPORTED_MODULE_20__.emptyActor),\n/* harmony export */   useDocuments: () => (/* reexport safe */ _chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.useDocuments),\n/* harmony export */   useOptimistic: () => (/* reexport safe */ _chunks_es_SharedStateContext_js__WEBPACK_IMPORTED_MODULE_14__.useOptimistic),\n/* harmony export */   useOptimisticActor: () => (/* reexport safe */ _chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.useOptimisticActor)\n/* harmony export */ });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-runtime */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.js\");\n/* harmony import */ var react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-compiler-runtime */ \"(ssr)/./node_modules/react-compiler-runtime/dist/index.js\");\n/* harmony import */ var _sanity_presentation_comlink__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @sanity/presentation-comlink */ \"(ssr)/./node_modules/@sanity/presentation-comlink/dist/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-dom */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-dom.js\");\n/* harmony import */ var _sanity_client_csm__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @sanity/client/csm */ \"(ssr)/./node_modules/@sanity/client/dist/_chunks-es/resolveEditInfo.js\");\n/* harmony import */ var _sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @sanity/ui */ \"(ssr)/./node_modules/@sanity/ui/dist/_chunks-es/_visual-editing.mjs\");\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! styled-components */ \"(ssr)/./node_modules/styled-components/dist/styled-components.esm.js\");\n/* harmony import */ var _chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../_chunks-es/mutations.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/mutations.js\");\n/* harmony import */ var _chunks_es_SharedStateContext_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../_chunks-es/SharedStateContext.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/SharedStateContext.js\");\n/* harmony import */ var _sanity_mutate__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @sanity/mutate */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/mutate/dist/index.js\");\n/* harmony import */ var _chunks_es_PointerEvents_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../_chunks-es/PointerEvents.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/PointerEvents.js\");\n/* harmony import */ var _sanity_icons__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @sanity/icons */ \"(ssr)/./node_modules/@sanity/icons/dist/index.js\");\n/* harmony import */ var _sanity_ui__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @sanity/ui */ \"(ssr)/./node_modules/@sanity/ui/dist/index.mjs\");\n/* harmony import */ var _sanity_visual_editing_csm__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @sanity/visual-editing-csm */ \"(ssr)/./node_modules/@sanity/visual-editing-csm/dist/index.js\");\n/* harmony import */ var scroll_into_view_if_needed__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! scroll-into-view-if-needed */ \"(ssr)/./node_modules/scroll-into-view-if-needed/dist/index.js\");\n/* harmony import */ var _sanity_comlink__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @sanity/comlink */ \"(ssr)/./node_modules/@sanity/comlink/dist/index.js\");\n/* harmony import */ var xstate__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! xstate */ \"(ssr)/./node_modules/xstate/dist/raise-b2a9750b.development.esm.js\");\n/* harmony import */ var _chunks_es_context_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../_chunks-es/context.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/_chunks-es/context.js\");\n/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs */ \"(ssr)/./node_modules/rxjs/dist/cjs/index.js\");\n/* harmony import */ var _optimistic_index_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../optimistic/index.js */ \"(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/optimistic/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst History = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(8), {\n    comlink,\n    history\n  } = props;\n  let t0, t1;\n  $[0] !== comlink || $[1] !== history ? (t0 = () => comlink?.on(\"presentation/navigate\", (data) => {\n    history?.update(data);\n  }), t1 = [comlink, history], $[0] = comlink, $[1] = history, $[2] = t0, $[3] = t1) : (t0 = $[2], t1 = $[3]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t0, t1);\n  let t2, t3;\n  return $[4] !== comlink || $[5] !== history ? (t2 = () => {\n    if (history)\n      return history.subscribe((update) => {\n        update.title = update.title || document.title, comlink?.post(\"visual-editing/navigate\", update);\n      });\n  }, t3 = [comlink, history], $[4] = comlink, $[5] = history, $[6] = t2, $[7] = t3) : (t2 = $[6], t3 = $[7]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t2, t3), null;\n}, Meta = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(3), {\n    comlink\n  } = props;\n  let t0, t1;\n  return $[0] !== comlink ? (t0 = () => {\n    const sendMeta = () => {\n      comlink.post(\"visual-editing/meta\", {\n        title: document.title\n      });\n    }, observer = new MutationObserver((t2) => {\n      const [mutation] = t2;\n      mutation.target.nodeName === \"TITLE\" && sendMeta();\n    });\n    return observer.observe(document.head, {\n      subtree: !0,\n      characterData: !0,\n      childList: !0\n    }), sendMeta(), () => observer.disconnect();\n  }, t1 = [comlink], $[0] = comlink, $[1] = t0, $[2] = t1) : (t0 = $[1], t1 = $[2]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t0, t1), null;\n};\nfunction getReferenceNodeAndInsertPosition(position) {\n  if (position) {\n    const {\n      top,\n      right,\n      bottom,\n      left\n    } = position;\n    if (left || top)\n      return {\n        node: (left ?? top).sanity,\n        position: \"after\"\n      };\n    if (right || bottom)\n      return {\n        node: (right ?? bottom).sanity,\n        position: \"before\"\n      };\n  }\n}\nfunction useDragEndEvents() {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(4), {\n    getDocument\n  } = (0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.useDocuments)();\n  let t0, t1;\n  $[0] !== getDocument ? (t0 = () => {\n    const handler = (e) => {\n      const {\n        insertPosition,\n        target,\n        preventInsertDefault\n      } = e.detail;\n      if (preventInsertDefault)\n        return;\n      const reference = getReferenceNodeAndInsertPosition(insertPosition);\n      if (reference) {\n        const doc = getDocument(target.id), {\n          node,\n          position\n        } = reference, {\n          key: targetKey,\n          hasExplicitKey\n        } = (0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.getArrayItemKeyAndParentPath)(target), {\n          path: arrayPath,\n          key: referenceItemKey\n        } = (0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.getArrayItemKeyAndParentPath)(node);\n        arrayPath && referenceItemKey && referenceItemKey !== targetKey && doc.patch(async (t22) => {\n          const {\n            getSnapshot\n          } = t22, snapshot = await getSnapshot(), elementValue = (0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.get)(snapshot, target.path);\n          return hasExplicitKey ? [(0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.at)(arrayPath, (0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.remove)({\n            _key: targetKey\n          })), (0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.at)(arrayPath, (0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.insert)(elementValue, position, {\n            _key: referenceItemKey\n          }))] : [(0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.at)(arrayPath, (0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.remove)(~~targetKey)), (0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.at)(arrayPath, (0,_sanity_mutate__WEBPACK_IMPORTED_MODULE_5__.insert)(elementValue, position, referenceItemKey > targetKey ? ~~referenceItemKey - 1 : ~~referenceItemKey))];\n        });\n      }\n    };\n    return window.addEventListener(\"sanity/dragEnd\", handler), () => {\n      window.removeEventListener(\"sanity/dragEnd\", handler);\n    };\n  }, t1 = [getDocument], $[0] = getDocument, $[1] = t0, $[2] = t1) : (t0 = $[1], t1 = $[2]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t0, t1);\n  const dispatchDragEndEvent = _temp$9;\n  let t2;\n  return $[3] === Symbol.for(\"react.memo_cache_sentinel\") ? (t2 = {\n    dispatchDragEndEvent\n  }, $[3] = t2) : t2 = $[3], t2;\n}\nfunction _temp$9(event) {\n  const customEvent = new CustomEvent(\"sanity/dragEnd\", {\n    detail: event,\n    cancelable: !0\n  });\n  window.dispatchEvent(customEvent);\n}\nconst SchemaContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)(null);\nfunction useSchema() {\n  const context = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(SchemaContext);\n  if (!context)\n    throw new Error(\"Schema context is missing\");\n  return context;\n}\nfunction getArrayRemoveAction(node, doc) {\n  if (!node.type) throw new Error(\"Node type is missing\");\n  return () => doc.patch(async ({\n    getSnapshot\n  }) => (0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.getArrayRemovePatches)(node, await getSnapshot()));\n}\nfunction getArrayInsertAction(node, doc, insertType, position) {\n  if (!node.type) throw new Error(\"Node type is missing\");\n  return () => doc.patch(() => (0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.getArrayInsertPatches)(node, insertType, position));\n}\nfunction getDuplicateAction(node, doc) {\n  if (!node.type) throw new Error(\"Node type is missing\");\n  return () => doc.patch(async ({\n    getSnapshot\n  }) => (0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.getArrayDuplicatePatches)(node, await getSnapshot()));\n}\nfunction getContextMenuItems(context) {\n  const {\n    node,\n    field,\n    parent,\n    doc\n  } = context;\n  return field?.type === \"arrayItem\" ? getContextMenuArrayItems({\n    node,\n    field,\n    doc\n  }) : parent?.type === \"union\" ? getContextMenuUnionItems({\n    node,\n    parent,\n    doc\n  }) : Promise.resolve([]);\n}\nfunction getDuplicateItem(context) {\n  const {\n    node,\n    doc\n  } = context;\n  return doc ? [{\n    type: \"action\",\n    label: \"Duplicate\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_6__.CopyIcon,\n    action: getDuplicateAction(node, doc),\n    telemetryEvent: \"Visual Editing Context Menu Item Duplicated\"\n  }] : [];\n}\nfunction getRemoveItems(context) {\n  const {\n    node,\n    doc\n  } = context;\n  return doc ? [{\n    type: \"action\",\n    label: \"Remove\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_6__.RemoveIcon,\n    action: getArrayRemoveAction(node, doc),\n    telemetryEvent: \"Visual Editing Context Menu Item Removed\"\n  }] : [];\n}\nasync function getMoveItems(context, withDivider = !0) {\n  const {\n    node,\n    doc\n  } = context;\n  if (!doc) return [];\n  const items = [], groupItems = [], [moveUpPatches, moveDownPatches, moveFirstPatches, moveLastPatches] = await Promise.all([(0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.getArrayMovePatches)(node, doc, \"previous\"), (0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.getArrayMovePatches)(node, doc, \"next\"), (0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.getArrayMovePatches)(node, doc, \"first\"), (0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.getArrayMovePatches)(node, doc, \"last\")]);\n  return moveFirstPatches.length && groupItems.push({\n    type: \"action\",\n    label: \"To top\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_6__.PublishIcon,\n    action: () => doc.patch(moveFirstPatches),\n    telemetryEvent: \"Visual Editing Context Menu Item Moved\"\n  }), moveUpPatches.length && groupItems.push({\n    type: \"action\",\n    label: \"Up\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_6__.ArrowUpIcon,\n    action: () => doc.patch(moveUpPatches),\n    telemetryEvent: \"Visual Editing Context Menu Item Moved\"\n  }), moveDownPatches.length && groupItems.push({\n    type: \"action\",\n    label: \"Down\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_6__.ArrowDownIcon,\n    action: () => doc.patch(moveDownPatches),\n    telemetryEvent: \"Visual Editing Context Menu Item Moved\"\n  }), moveLastPatches.length && groupItems.push({\n    type: \"action\",\n    label: \"To bottom\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_6__.UnpublishIcon,\n    action: () => doc.patch(moveLastPatches),\n    telemetryEvent: \"Visual Editing Context Menu Item Moved\"\n  }), groupItems.length && (items.push({\n    type: \"group\",\n    label: \"Move\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_6__.SortIcon,\n    items: groupItems\n  }), withDivider && items.push({\n    type: \"divider\"\n  })), items;\n}\nasync function getContextMenuArrayItems(context) {\n  const {\n    node,\n    field,\n    doc\n  } = context, items = [];\n  return items.push(...getDuplicateItem(context)), items.push(...getRemoveItems(context)), items.push(...await getMoveItems(context)), items.push({\n    type: \"action\",\n    label: \"Insert before\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_6__.InsertAboveIcon,\n    action: getArrayInsertAction(node, doc, field.name, \"before\"),\n    telemetryEvent: \"Visual Editing Context Menu Item Inserted\"\n  }), items.push({\n    type: \"action\",\n    label: \"Insert after\",\n    icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_6__.InsertBelowIcon,\n    action: getArrayInsertAction(node, doc, field.name, \"after\"),\n    telemetryEvent: \"Visual Editing Context Menu Item Inserted\"\n  }), items;\n}\nconst InsertMenuWrapper = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(12), {\n    label,\n    parent,\n    width,\n    onSelect,\n    boundaryElement\n  } = props;\n  let t0;\n  $[0] === Symbol.for(\"react.memo_cache_sentinel\") ? (t0 = [\"left-start\", \"right\", \"left\", \"right-end\", \"left-end\", \"bottom\", \"top\"], $[0] = t0) : t0 = $[0];\n  let t1;\n  $[1] === Symbol.for(\"react.memo_cache_sentinel\") ? (t1 = [4, 4, 4, 4], $[1] = t1) : t1 = $[1];\n  let t2;\n  $[2] !== boundaryElement || $[3] !== width ? (t2 = {\n    arrow: !1,\n    constrainSize: !0,\n    floatingBoundary: boundaryElement,\n    padding: 0,\n    placement: \"right-start\",\n    fallbackPlacements: t0,\n    preventOverflow: !0,\n    width,\n    __unstable_margins: t1\n  }, $[2] = boundaryElement, $[3] = width, $[4] = t2) : t2 = $[4];\n  let t3;\n  $[5] !== onSelect || $[6] !== parent ? (t3 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chunks_es_PointerEvents_js__WEBPACK_IMPORTED_MODULE_7__.InsertMenu, { node: parent, onSelect }), $[5] = onSelect, $[6] = parent, $[7] = t3) : t3 = $[7];\n  let t4;\n  return $[8] !== label || $[9] !== t2 || $[10] !== t3 ? (t4 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.MenuGroup, { fontSize: 1, icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_6__.InsertBelowIcon, padding: 2, popover: t2, space: 2, text: label, children: t3 }), $[8] = label, $[9] = t2, $[10] = t3, $[11] = t4) : t4 = $[11], t4;\n};\nasync function getContextMenuUnionItems(context) {\n  const {\n    doc,\n    node,\n    parent\n  } = context, items = [];\n  if (items.push(...getDuplicateItem(context)), items.push(...getRemoveItems(context)), items.push(...await getMoveItems(context)), parent.options?.insertMenu) {\n    const width = (parent.options.insertMenu || {}).views?.some((view) => view.name === \"grid\") ? 0 : void 0;\n    items.push({\n      type: \"custom\",\n      component: ({\n        boundaryElement,\n        sendTelemetry\n      }) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InsertMenuWrapper, { label: \"Insert before\", onSelect: (schemaType) => {\n        getArrayInsertAction(node, doc, schemaType.name, \"before\")(), sendTelemetry(\"Visual Editing Context Menu Item Inserted\", null);\n      }, parent, width, boundaryElement })\n    }), items.push({\n      type: \"custom\",\n      component: ({\n        boundaryElement,\n        sendTelemetry\n      }) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(InsertMenuWrapper, { label: \"Insert after\", onSelect: (schemaType) => {\n        getArrayInsertAction(node, doc, schemaType.name, \"after\")(), sendTelemetry(\"Visual Editing Context Menu Item Inserted\", null);\n      }, parent, width, boundaryElement })\n    });\n  } else\n    items.push({\n      type: \"group\",\n      label: \"Insert before\",\n      icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_6__.InsertAboveIcon,\n      items: parent.of.filter((item) => item.type === \"unionOption\").map((t) => ({\n        type: \"action\",\n        icon: (0,_chunks_es_PointerEvents_js__WEBPACK_IMPORTED_MODULE_7__.getNodeIcon)(t),\n        label: t.name === \"block\" ? \"Paragraph\" : t.title || t.name,\n        action: getArrayInsertAction(node, doc, t.name, \"before\"),\n        telemetryEvent: \"Visual Editing Context Menu Item Inserted\"\n      }))\n    }), items.push({\n      type: \"group\",\n      label: \"Insert after\",\n      icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_6__.InsertBelowIcon,\n      items: parent.of.filter((item) => item.type === \"unionOption\").map((t) => ({\n        type: \"action\",\n        label: t.name === \"block\" ? \"Paragraph\" : t.title || t.name,\n        icon: (0,_chunks_es_PointerEvents_js__WEBPACK_IMPORTED_MODULE_7__.getNodeIcon)(t),\n        action: getArrayInsertAction(node, doc, t.name, \"after\"),\n        telemetryEvent: \"Visual Editing Context Menu Item Inserted\"\n      }))\n    });\n  return items;\n}\nconst POPOVER_MARGINS = [-4, 4, -4, 4];\nfunction ContextMenuItem(props) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(27), {\n    node,\n    onDismiss,\n    boundaryElement\n  } = props, sendTelemetry = (0,_chunks_es_PointerEvents_js__WEBPACK_IMPORTED_MODULE_7__.useTelemetry)();\n  let t0;\n  $[0] !== node || $[1] !== onDismiss || $[2] !== sendTelemetry ? (t0 = () => {\n    node.type === \"action\" && (node.action?.(), onDismiss?.(), node.telemetryEvent && sendTelemetry(node.telemetryEvent, null));\n  }, $[0] = node, $[1] = onDismiss, $[2] = sendTelemetry, $[3] = t0) : t0 = $[3];\n  const onClick = t0;\n  if (node.type === \"divider\") {\n    let t1;\n    return $[4] === Symbol.for(\"react.memo_cache_sentinel\") ? (t1 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.MenuDivider, {}), $[4] = t1) : t1 = $[4], t1;\n  }\n  if (node.type === \"action\") {\n    const t1 = !node.action;\n    let t2;\n    return $[5] !== node.hotkeys || $[6] !== node.icon || $[7] !== node.label || $[8] !== onClick || $[9] !== t1 ? (t2 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.MenuItem, { fontSize: 1, hotkeys: node.hotkeys, icon: node.icon, padding: 2, space: 2, text: node.label, disabled: t1, onClick }), $[5] = node.hotkeys, $[6] = node.icon, $[7] = node.label, $[8] = onClick, $[9] = t1, $[10] = t2) : t2 = $[10], t2;\n  }\n  if (node.type === \"group\") {\n    const t1 = node.icon;\n    let t2;\n    $[11] === Symbol.for(\"react.memo_cache_sentinel\") ? (t2 = {\n      arrow: !1,\n      constrainSize: !0,\n      placement: \"right-start\",\n      fallbackPlacements: [\"left-start\", \"right\", \"left\", \"right-end\", \"left-end\", \"bottom\", \"top\"],\n      preventOverflow: !0,\n      __unstable_margins: POPOVER_MARGINS\n    }, $[11] = t2) : t2 = $[11];\n    const t3 = node.label;\n    let t4;\n    if ($[12] !== boundaryElement || $[13] !== node.items || $[14] !== onDismiss) {\n      let t52;\n      $[16] !== boundaryElement || $[17] !== onDismiss ? (t52 = (item, itemIndex) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ContextMenuItem, { node: item, onDismiss, boundaryElement }, itemIndex), $[16] = boundaryElement, $[17] = onDismiss, $[18] = t52) : t52 = $[18], t4 = node.items.map(t52), $[12] = boundaryElement, $[13] = node.items, $[14] = onDismiss, $[15] = t4;\n    } else\n      t4 = $[15];\n    let t5;\n    return $[19] !== node.icon || $[20] !== node.label || $[21] !== t4 ? (t5 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.MenuGroup, { fontSize: 1, icon: t1, padding: 2, popover: t2, space: 2, text: t3, children: t4 }), $[19] = node.icon, $[20] = node.label, $[21] = t4, $[22] = t5) : t5 = $[22], t5;\n  }\n  if (node.type === \"custom\") {\n    const {\n      component: Component\n    } = node;\n    let t1;\n    return $[23] !== Component || $[24] !== boundaryElement || $[25] !== sendTelemetry ? (t1 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Component, { boundaryElement, sendTelemetry }), $[23] = Component, $[24] = boundaryElement, $[25] = sendTelemetry, $[26] = t1) : t1 = $[26], t1;\n  }\n  return null;\n}\nconst ContextMenu = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(43), {\n    node,\n    onDismiss,\n    position: t0\n  } = props, {\n    x,\n    y\n  } = t0, [boundaryElement, setBoundaryElement] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null), {\n    getField\n  } = useSchema(), {\n    getDocument\n  } = (0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.useDocuments)();\n  let t1;\n  $[0] !== getField || $[1] !== node ? (t1 = getField(node), $[0] = getField, $[1] = node, $[2] = t1) : t1 = $[2];\n  const {\n    field,\n    parent\n  } = t1, title = field?.title || field?.name || \"Unknown type\", [items, setItems] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(void 0);\n  let t2, t3;\n  $[3] !== field || $[4] !== getDocument || $[5] !== node || $[6] !== parent ? (t2 = () => {\n    (async () => {\n      const doc = getDocument(node.id);\n      if (!doc)\n        return;\n      const items_0 = await getContextMenuItems({\n        node,\n        field,\n        parent,\n        doc\n      });\n      setItems(items_0);\n    })();\n  }, t3 = [field, node, parent, getDocument], $[3] = field, $[4] = getDocument, $[5] = node, $[6] = parent, $[7] = t2, $[8] = t3) : (t2 = $[7], t3 = $[8]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t2, t3);\n  let t4;\n  $[9] !== x || $[10] !== y ? (t4 = {\n    getBoundingClientRect: () => ({\n      bottom: y,\n      left: x,\n      right: x,\n      top: y,\n      width: 0,\n      height: 0\n    })\n  }, $[9] = x, $[10] = y, $[11] = t4) : t4 = $[11];\n  const contextMenuReferenceElement = t4;\n  let t5;\n  $[12] !== field ? (t5 = (0,_chunks_es_PointerEvents_js__WEBPACK_IMPORTED_MODULE_7__.getNodeIcon)(field), $[12] = field, $[13] = t5) : t5 = $[13];\n  const icon = t5;\n  let t6;\n  $[14] === Symbol.for(\"react.memo_cache_sentinel\") ? (t6 = {\n    minWidth: 120,\n    maxWidth: 160\n  }, $[14] = t6) : t6 = $[14];\n  let t7;\n  $[15] !== icon || $[16] !== items ? (t7 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Box, { flex: \"none\", children: items ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Text, { size: 1, children: icon }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Spinner, { size: 1 }) }), $[15] = icon, $[16] = items, $[17] = t7) : t7 = $[17];\n  const t8 = items ? title : \"Loading...\";\n  let t9;\n  $[18] !== t8 ? (t9 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Stack, { flex: 1, space: 2, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Text, { size: 1, weight: \"semibold\", children: t8 }) }), $[18] = t8, $[19] = t9) : t9 = $[19];\n  let t10;\n  $[20] !== t7 || $[21] !== t9 ? (t10 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Flex, { gap: 2, padding: 2, children: [\n    t7,\n    t9\n  ] }), $[20] = t7, $[21] = t9, $[22] = t10) : t10 = $[22];\n  let t11;\n  $[23] !== boundaryElement || $[24] !== items || $[25] !== onDismiss ? (t11 = items && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.MenuDivider, {}),\n    items.map((item, i) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ContextMenuItem, { node: item, onDismiss, boundaryElement }, i))\n  ] }), $[23] = boundaryElement, $[24] = items, $[25] = onDismiss, $[26] = t11) : t11 = $[26];\n  let t12;\n  $[27] !== t10 || $[28] !== t11 ? (t12 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Menu, { style: t6, children: [\n    t10,\n    t11\n  ] }), $[27] = t10, $[28] = t11, $[29] = t12) : t12 = $[29];\n  const t13 = `${x}-${y}`;\n  let t14;\n  $[30] !== x || $[31] !== y ? (t14 = {\n    position: \"absolute\",\n    left: x,\n    top: y\n  }, $[30] = x, $[31] = y, $[32] = t14) : t14 = $[32];\n  let t15;\n  $[33] !== t13 || $[34] !== t14 ? (t15 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { style: t14 }, t13), $[33] = t13, $[34] = t14, $[35] = t15) : t15 = $[35];\n  let t16;\n  $[36] !== contextMenuReferenceElement || $[37] !== t12 || $[38] !== t15 ? (t16 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Popover, { __unstable_margins: POPOVER_MARGINS, arrow: !1, open: !0, placement: \"right-start\", referenceElement: contextMenuReferenceElement, content: t12, children: t15 }), $[36] = contextMenuReferenceElement, $[37] = t12, $[38] = t15, $[39] = t16) : t16 = $[39];\n  let t17;\n  return $[40] !== onDismiss || $[41] !== t16 ? (t17 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chunks_es_PointerEvents_js__WEBPACK_IMPORTED_MODULE_7__.PopoverPortal, { setBoundaryElement, onDismiss, children: t16 }), $[40] = onDismiss, $[41] = t16, $[42] = t17) : t17 = $[42], t17;\n};\nfunction getLinkHref(href, referer) {\n  try {\n    const parsed = new URL(href, typeof location > \"u\" ? void 0 : location.origin);\n    if (parsed.hash) {\n      const hash = new URL(getLinkHref(parsed.hash.slice(1), referer));\n      return `${parsed.origin}${parsed.pathname}${parsed.search}#${hash.pathname}${hash.search}`;\n    }\n    return parsed.searchParams.set(\"preview\", referer), parsed.toString();\n  } catch {\n    return href;\n  }\n}\nconst PreviewSnapshotsContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)(null);\nfunction usePreviewSnapshots() {\n  const context = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(PreviewSnapshotsContext);\n  if (!context)\n    throw new Error(\"Preview Snapshots context is missing\");\n  return context;\n}\nconst isReactElementOverlayComponent = (component) => (0,react__WEBPACK_IMPORTED_MODULE_2__.isValidElement)(component), Root$3 = (0,styled_components__WEBPACK_IMPORTED_MODULE_9__.styled)((0,_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Card))`\n  background-color: var(--overlay-bg);\n  border-radius: 3px;\n  pointer-events: none;\n  position: absolute;\n  will-change: transform;\n  box-shadow: var(--overlay-box-shadow);\n  transition: none;\n\n  --overlay-bg: transparent;\n  --overlay-box-shadow: inset 0 0 0 1px transparent;\n\n  [data-overlays] & {\n    --overlay-bg: color-mix(in srgb, transparent 95%, var(--card-focus-ring-color));\n    --overlay-box-shadow: inset 0 0 0 2px\n      color-mix(in srgb, transparent 50%, var(--card-focus-ring-color));\n  }\n\n  [data-fading-out] & {\n    transition:\n      box-shadow 1550ms,\n      background-color 1550ms;\n\n    --overlay-bg: rgba(0, 0, 255, 0);\n    --overlay-box-shadow: inset 0 0 0 1px transparent;\n  }\n\n  &[data-focused] {\n    --overlay-box-shadow: inset 0 0 0 1px var(--card-focus-ring-color);\n  }\n\n  &[data-hovered]:not([data-focused]) {\n    transition: none;\n    --overlay-box-shadow: inset 0 0 0 2px var(--card-focus-ring-color);\n  }\n\n  /* [data-unmounted] & {\n    --overlay-box-shadow: inset 0 0 0 1px var(--card-focus-ring-color);\n  } */\n\n  :link {\n    text-decoration: none;\n  }\n`, Actions = (0,styled_components__WEBPACK_IMPORTED_MODULE_9__.styled)((0,_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Flex))`\n  bottom: 100%;\n  cursor: pointer;\n  pointer-events: none;\n  position: absolute;\n  right: 0;\n\n  [data-hovered]:not([data-menu-open]) & {\n    pointer-events: all;\n  }\n\n  [data-flipped] & {\n    bottom: auto;\n    top: 100%;\n  }\n`, HUD = (0,styled_components__WEBPACK_IMPORTED_MODULE_9__.styled)((0,_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Flex))`\n  top: 100%;\n  cursor: pointer;\n  pointer-events: none;\n  position: absolute;\n  left: 0;\n\n  gap: 4px;\n  padding: 4px 0;\n  flex-wrap: wrap;\n\n  [data-hovered]:not([data-menu-open]) & {\n    pointer-events: all;\n  }\n\n  [data-flipped] & {\n    top: calc(100% + 2rem);\n  }\n`, MenuWrapper = (0,styled_components__WEBPACK_IMPORTED_MODULE_9__.styled)((0,_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Flex))`\n  margin: -0.5rem;\n\n  [data-hovered]:not([data-menu-open]) & {\n    pointer-events: all;\n  }\n`, Tab = (0,styled_components__WEBPACK_IMPORTED_MODULE_9__.styled)((0,_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Flex))`\n  bottom: 100%;\n  cursor: pointer;\n  pointer-events: none;\n  position: absolute;\n  left: 0;\n\n  [data-hovered]:not([data-menu-open]) & {\n    pointer-events: all;\n  }\n\n  [data-flipped] & {\n    bottom: auto;\n    top: 100%;\n  }\n`, ActionOpen = (0,styled_components__WEBPACK_IMPORTED_MODULE_9__.styled)((0,_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Card))`\n  cursor: pointer;\n  background-color: var(--card-focus-ring-color);\n  right: 0;\n  border-radius: 3px;\n\n  & [data-ui='Text'] {\n    color: #fff;\n    white-space: nowrap;\n  }\n`, Labels = (0,styled_components__WEBPACK_IMPORTED_MODULE_9__.styled)((0,_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Flex))`\n  display: flex;\n  align-items: center;\n  background-color: var(--card-focus-ring-color);\n  right: 0;\n  border-radius: 3px;\n  & [data-ui='Text'],\n  & [data-sanity-icon] {\n    color: #fff;\n    white-space: nowrap;\n  }\n`, ExclusivePluginContainer = styled_components__WEBPACK_IMPORTED_MODULE_9__.styled.div`\n  position: absolute;\n  inset: 0;\n  pointer-events: all;\n`;\nfunction createIntentLink(node) {\n  const {\n    id,\n    type,\n    path,\n    baseUrl,\n    tool,\n    workspace\n  } = node;\n  return (0,_sanity_client_csm__WEBPACK_IMPORTED_MODULE_10__.createEditUrl)({\n    baseUrl,\n    workspace,\n    tool,\n    type,\n    id,\n    path: path ? (0,_sanity_visual_editing_csm__WEBPACK_IMPORTED_MODULE_11__.pathToUrlString)(_sanity_client_csm__WEBPACK_IMPORTED_MODULE_10__.studioPath.fromString(path)) : []\n  });\n}\nconst ElementOverlayInner = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(59), {\n    id,\n    element,\n    focused,\n    componentResolver,\n    node,\n    showActions,\n    draggable,\n    targets,\n    elementType,\n    comlink,\n    onActivateExclusivePlugin,\n    onMenuOpenChange\n  } = props, {\n    getField,\n    getType\n  } = useSchema();\n  let t0;\n  $[0] !== getType || $[1] !== node ? (t0 = getType(node), $[0] = getType, $[1] = node, $[2] = t0) : t0 = $[2];\n  const schemaType = t0;\n  let t1;\n  $[3] !== node ? (t1 = \"path\" in node ? createIntentLink(node) : node.href, $[3] = node, $[4] = t1) : t1 = $[4];\n  const href = t1, previewSnapshots = usePreviewSnapshots();\n  let t2;\n  bb0: {\n    if (!(\"path\" in node)) {\n      t2 = void 0;\n      break bb0;\n    }\n    let t32;\n    $[5] !== node || $[6] !== previewSnapshots ? (t32 = previewSnapshots.find((snapshot) => snapshot._id === node.id)?.title, $[5] = node, $[6] = previewSnapshots, $[7] = t32) : t32 = $[7], t2 = t32;\n  }\n  const title = t2;\n  let t3;\n  $[8] !== element || $[9] !== focused || $[10] !== getField || $[11] !== getType ? (t3 = function(node_0, nodeElement) {\n    const schemaType_0 = getType(node_0), {\n      field,\n      parent\n    } = getField(node_0);\n    if (!(\"id\" in node_0) || !field || !schemaType_0)\n      return;\n    const type = field.value.type;\n    return {\n      document: schemaType_0,\n      element,\n      targetElement: nodeElement || element,\n      field,\n      focused: !!focused,\n      node: node_0,\n      parent,\n      type\n    };\n  }, $[8] = element, $[9] = focused, $[10] = getField, $[11] = getType, $[12] = t3) : t3 = $[12];\n  const getContext = t3;\n  let t4;\n  $[13] !== elementType || $[14] !== getContext || $[15] !== node ? (t4 = elementType === \"element\" ? getContext(node) : void 0, $[13] = elementType, $[14] = getContext, $[15] = node, $[16] = t4) : t4 = $[16];\n  let t5;\n  if ($[17] !== getContext || $[18] !== targets) {\n    let t62;\n    $[20] !== getContext ? (t62 = (target) => getContext(target.sanity, target.element), $[20] = getContext, $[21] = t62) : t62 = $[21], t5 = targets.map(t62).filter(_temp$8), $[17] = getContext, $[18] = targets, $[19] = t5;\n  } else\n    t5 = $[19];\n  let t6;\n  $[22] !== t4 || $[23] !== t5 ? (t6 = {\n    legacyComponentContext: t4,\n    pluginContexts: t5\n  }, $[22] = t4, $[23] = t5, $[24] = t6) : t6 = $[24];\n  const resolverContexts = t6, customComponents = useCustomComponents(resolverContexts.legacyComponentContext, componentResolver), nodePluginCollections = useResolvedNodePlugins(resolverContexts.pluginContexts, props.plugins);\n  let t7;\n  $[25] !== schemaType ? (t7 = schemaType?.icon ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { dangerouslySetInnerHTML: {\n    __html: schemaType.icon\n  } }) : /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_6__.DocumentIcon, {}), $[25] = schemaType, $[26] = t7) : t7 = $[26];\n  const icon = t7, menuId = (0,react__WEBPACK_IMPORTED_MODULE_2__.useId)();\n  let t8;\n  $[27] !== nodePluginCollections ? (t8 = nodePluginCollections?.some(_temp2$5), $[27] = nodePluginCollections, $[28] = t8) : t8 = $[28];\n  const showMenu = t8 || nodePluginCollections?.length > 1;\n  let t9;\n  $[29] !== id ? (t9 = () => {\n    window.dispatchEvent(new CustomEvent(\"sanity-overlay/label-click\", {\n      detail: {\n        id\n      }\n    }));\n  }, $[29] = id, $[30] = t9) : t9 = $[30];\n  const handleLabelClick = t9;\n  let t10;\n  $[31] !== href || $[32] !== showActions ? (t10 = showActions ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Actions, { gap: 1, paddingY: 1, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Link, { href }) }) : null, $[31] = href, $[32] = showActions, $[33] = t10) : t10 = $[33];\n  let t11;\n  $[34] !== comlink || $[35] !== draggable || $[36] !== handleLabelClick || $[37] !== icon || $[38] !== menuId || $[39] !== nodePluginCollections || $[40] !== onActivateExclusivePlugin || $[41] !== onMenuOpenChange || $[42] !== showMenu || $[43] !== title ? (t11 = (title || showMenu) && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Tab, { gap: 1, paddingY: 1, onClick: handleLabelClick, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(Labels, { gap: 2, padding: 2, children: [\n    draggable && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Box, { marginRight: 1, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Text, { className: \"drag-handle\", size: 0, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_6__.DragHandleIcon, {}) }) }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Text, { size: 0, children: icon }),\n    title && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Text, { size: 1, weight: \"medium\", children: title }),\n    showMenu && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Box, { paddingLeft: 2, onClick: _temp3$2, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(MenuWrapper, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui__WEBPACK_IMPORTED_MODULE_12__.MenuButton, { id: menuId, popover: {\n      animate: !0,\n      placement: \"bottom-start\",\n      constrainSize: !0,\n      tone: \"default\"\n    }, onOpen: () => {\n      onMenuOpenChange?.(!0);\n    }, onClose: () => {\n      onMenuOpenChange?.(!1);\n    }, button: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Button, { icon: _sanity_icons__WEBPACK_IMPORTED_MODULE_6__.EllipsisVerticalIcon, tone: \"primary\", padding: 2 }), menu: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Menu, { paddingY: 0, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chunks_es_PointerEvents_js__WEBPACK_IMPORTED_MODULE_7__.PointerEvents, { children: nodePluginCollections?.map((nodePluginCollection_0, index) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: [\n      /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Stack, { role: \"group\", paddingY: 1, space: 0, children: [\n        /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.MenuItem, { paddingY: 2, text: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Box, { paddingY: 2, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Text, { muted: !0, size: 1, style: {\n          textTransform: \"capitalize\"\n        }, children: `${nodePluginCollection_0.context.document.name}: ${nodePluginCollection_0.context.field?.name}` }) }), onClick: () => {\n          nodePluginCollection_0.context.node && comlink?.post(\"visual-editing/focus\", nodePluginCollection_0.context.node);\n        } }),\n        nodePluginCollection_0.exclusive.map((exclusive) => exclusive.component ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.MenuItem, { paddingY: 2, icon: exclusive.icon || /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_6__.PlugIcon, {}), text: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Box, { paddingY: 2, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Text, { size: 1, children: exclusive.title || exclusive.name }) }), onClick: () => onActivateExclusivePlugin?.(exclusive, nodePluginCollection_0.context) }, exclusive.name) : null)\n      ] }),\n      index < nodePluginCollections.length - 1 && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.MenuDivider, {})\n    ] }, nodePluginCollection_0.id)) }) }) }) }) })\n  ] }) }), $[34] = comlink, $[35] = draggable, $[36] = handleLabelClick, $[37] = icon, $[38] = menuId, $[39] = nodePluginCollections, $[40] = onActivateExclusivePlugin, $[41] = onMenuOpenChange, $[42] = showMenu, $[43] = title, $[44] = t11) : t11 = $[44];\n  let t12;\n  $[45] !== nodePluginCollections ? (t12 = nodePluginCollections?.map(_temp4$1), $[45] = nodePluginCollections, $[46] = t12) : t12 = $[46];\n  let t13;\n  $[47] !== t12 ? (t13 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(HUD, { children: t12 }), $[47] = t12, $[48] = t13) : t13 = $[48];\n  let t14;\n  $[49] !== t10 || $[50] !== t11 || $[51] !== t13 ? (t14 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_chunks_es_PointerEvents_js__WEBPACK_IMPORTED_MODULE_7__.PointerEvents, { children: [\n    t10,\n    t11,\n    t13\n  ] }), $[49] = t10, $[50] = t11, $[51] = t13, $[52] = t14) : t14 = $[52];\n  let t15;\n  $[53] !== customComponents || $[54] !== resolverContexts.legacyComponentContext ? (t15 = Array.isArray(customComponents) ? customComponents.map((t162, i) => {\n    const {\n      component: Component_1,\n      props: props_0\n    } = t162;\n    return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Component_1, { PointerEvents: _chunks_es_PointerEvents_js__WEBPACK_IMPORTED_MODULE_7__.PointerEvents, ...resolverContexts.legacyComponentContext, ...props_0 }, i);\n  }) : customComponents, $[53] = customComponents, $[54] = resolverContexts.legacyComponentContext, $[55] = t15) : t15 = $[55];\n  let t16;\n  return $[56] !== t14 || $[57] !== t15 ? (t16 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n    t14,\n    t15\n  ] }), $[56] = t14, $[57] = t15, $[58] = t16) : t16 = $[58], t16;\n}, ElementOverlay = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function(props) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(38), {\n    draggable,\n    focused,\n    hovered,\n    rect,\n    wasMaybeCollapsed,\n    enableScrollIntoView\n  } = props, ref = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null), scrolledIntoViewRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(!1), t0 = `${rect.w}px`, t1 = `${rect.h}px`, t2 = `translate(${rect.x}px, ${rect.y}px)`;\n  let t3;\n  $[0] !== t0 || $[1] !== t1 || $[2] !== t2 ? (t3 = {\n    width: t0,\n    height: t1,\n    transform: t2\n  }, $[0] = t0, $[1] = t1, $[2] = t2, $[3] = t3) : t3 = $[3];\n  const style = t3;\n  let t4, t5;\n  $[4] !== enableScrollIntoView || $[5] !== focused || $[6] !== wasMaybeCollapsed ? (t4 = () => {\n    if (!scrolledIntoViewRef.current && !wasMaybeCollapsed && focused === !0 && ref.current && enableScrollIntoView) {\n      const target = ref.current;\n      (0,scroll_into_view_if_needed__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(ref.current, {\n        behavior: (actions) => {\n          actions.length !== 0 && target.scrollIntoView({\n            behavior: \"smooth\",\n            block: \"center\",\n            inline: \"nearest\"\n          });\n        },\n        scrollMode: \"if-needed\",\n        block: \"center\",\n        inline: \"nearest\"\n      });\n    }\n    scrolledIntoViewRef.current = focused === !0;\n  }, t5 = [focused, wasMaybeCollapsed, enableScrollIntoView], $[4] = enableScrollIntoView, $[5] = focused, $[6] = wasMaybeCollapsed, $[7] = t4, $[8] = t5) : (t4 = $[7], t5 = $[8]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t4, t5);\n  const [isNearTop, setIsNearTop] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1);\n  let t6;\n  $[9] !== hovered ? (t6 = () => {\n    if (!ref.current || !hovered)\n      return;\n    const io = new IntersectionObserver((t72) => {\n      const [intersection] = t72;\n      setIsNearTop(intersection.boundingClientRect.top < 0);\n    }, {\n      threshold: 1\n    });\n    return io.observe(ref.current), () => io.disconnect();\n  }, $[9] = hovered, $[10] = t6) : t6 = $[10];\n  let t7;\n  $[11] !== hovered || $[12] !== isNearTop ? (t7 = [hovered, isNearTop], $[11] = hovered, $[12] = isNearTop, $[13] = t7) : t7 = $[13], (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t6, t7);\n  const [activeExclusivePlugin, setActiveExclusivePlugin] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  let t8;\n  $[14] === Symbol.for(\"react.memo_cache_sentinel\") ? (t8 = () => {\n    setActiveExclusivePlugin(null), window.dispatchEvent(new CustomEvent(\"sanity-overlay/exclusive-plugin-closed\"));\n  }, $[14] = t8) : t8 = $[14];\n  const closeExclusivePluginView = t8;\n  let t9;\n  $[15] === Symbol.for(\"react.memo_cache_sentinel\") ? (t9 = (plugin, context) => {\n    setActiveExclusivePlugin({\n      plugin,\n      context\n    });\n  }, $[15] = t9) : t9 = $[15];\n  const onActivateExclusivePlugin = t9, handleExclusivePluginClick = _temp5$1, ExclusivePluginComponent = activeExclusivePlugin?.plugin.component, [menuOpen, setMenuOpen] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1);\n  let t10;\n  $[16] === Symbol.for(\"react.memo_cache_sentinel\") ? (t10 = () => {\n    setMenuOpen(!1);\n  }, $[16] = t10) : t10 = $[16];\n  let t11;\n  $[17] !== hovered ? (t11 = [hovered], $[17] = hovered, $[18] = t11) : t11 = $[18], (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t10, t11);\n  let t12;\n  $[19] !== ExclusivePluginComponent || $[20] !== menuOpen ? (t12 = menuOpen || ExclusivePluginComponent ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chunks_es_PointerEvents_js__WEBPACK_IMPORTED_MODULE_7__.PopoverBackground, { onDismiss: closeExclusivePluginView, blockScroll: menuOpen }) : null, $[19] = ExclusivePluginComponent, $[20] = menuOpen, $[21] = t12) : t12 = $[21];\n  const t13 = focused ? \"\" : void 0, t14 = hovered ? \"\" : void 0, t15 = isNearTop ? \"\" : void 0, t16 = draggable ? \"\" : void 0, t17 = menuOpen ? \"\" : void 0;\n  let t18;\n  $[22] !== ExclusivePluginComponent || $[23] !== activeExclusivePlugin || $[24] !== hovered || $[25] !== props ? (t18 = ExclusivePluginComponent ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ExclusivePluginContainer, { \"data-sanity-overlay-element\": !0, onClick: handleExclusivePluginClick, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ExclusivePluginComponent, { ...activeExclusivePlugin.context, closeExclusiveView: closeExclusivePluginView }) }) : hovered ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ElementOverlayInner, { ...props, onActivateExclusivePlugin, onMenuOpenChange: setMenuOpen }) : null, $[22] = ExclusivePluginComponent, $[23] = activeExclusivePlugin, $[24] = hovered, $[25] = props, $[26] = t18) : t18 = $[26];\n  let t19;\n  $[27] !== style || $[28] !== t13 || $[29] !== t14 || $[30] !== t15 || $[31] !== t16 || $[32] !== t17 || $[33] !== t18 ? (t19 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root$3, { \"data-focused\": t13, \"data-hovered\": t14, \"data-flipped\": t15, \"data-draggable\": t16, \"data-menu-open\": t17, ref, style, children: t18 }), $[27] = style, $[28] = t13, $[29] = t14, $[30] = t15, $[31] = t16, $[32] = t17, $[33] = t18, $[34] = t19) : t19 = $[34];\n  let t20;\n  return $[35] !== t12 || $[36] !== t19 ? (t20 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n    t12,\n    t19\n  ] }), $[35] = t12, $[36] = t19, $[37] = t20) : t20 = $[37], t20;\n});\nfunction useResolvedNodePlugins(componentContexts, plugins) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(5);\n  let t0;\n  if ($[0] !== componentContexts || $[1] !== plugins) {\n    let t1;\n    $[3] !== plugins ? (t1 = (componentContext) => {\n      const instance = {\n        id: (0,_chunks_es_SharedStateContext_js__WEBPACK_IMPORTED_MODULE_14__.v4)(),\n        context: componentContext,\n        hud: [],\n        exclusive: []\n      };\n      return plugins?.forEach((plugin) => {\n        plugin.guard?.(componentContext) && (plugin.type === \"hud\" && instance.hud.push(plugin), plugin.type === \"exclusive\" && instance.exclusive.push(plugin));\n      }), instance;\n    }, $[3] = plugins, $[4] = t1) : t1 = $[4], t0 = componentContexts.map(t1), $[0] = componentContexts, $[1] = plugins, $[2] = t0;\n  } else\n    t0 = $[2];\n  return t0;\n}\nfunction useCustomComponents(componentContext, componentResolver) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(4);\n  let t0;\n  bb0: {\n    if (!componentContext) {\n      t0 = void 0;\n      break bb0;\n    }\n    let t1;\n    if ($[0] !== componentContext || $[1] !== componentResolver) {\n      const resolved = componentResolver?.(componentContext);\n      if (!resolved) {\n        t0 = void 0;\n        break bb0;\n      }\n      if (isReactElementOverlayComponent(resolved)) {\n        t0 = resolved;\n        break bb0;\n      }\n      t1 = (Array.isArray(resolved) ? resolved : [resolved]).map(_temp6$1), $[0] = componentContext, $[1] = componentResolver, $[2] = t1, $[3] = t0;\n    } else\n      t1 = $[2], t0 = $[3];\n    t0 = t1;\n  }\n  return t0;\n}\nfunction _temp6$1(component) {\n  return typeof component == \"object\" && \"component\" in component ? component : {\n    component,\n    props: {}\n  };\n}\nconst Link = (0,react__WEBPACK_IMPORTED_MODULE_2__.memo)(function(props) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(6), referer = (0,react__WEBPACK_IMPORTED_MODULE_2__.useSyncExternalStore)(_temp7$1, _temp8$1);\n  let t0;\n  $[0] !== props.href || $[1] !== referer ? (t0 = getLinkHref(props.href, referer), $[0] = props.href, $[1] = referer, $[2] = t0) : t0 = $[2];\n  const href = t0;\n  let t1;\n  $[3] === Symbol.for(\"react.memo_cache_sentinel\") ? (t1 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ActionOpen, { padding: 2, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Text, { size: 1, weight: \"medium\", children: \"Open in Studio\" }) }), $[3] = t1) : t1 = $[3];\n  let t2;\n  return $[4] !== href ? (t2 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Box, { as: \"a\", href, target: \"_blank\", rel: \"noopener noreferrer\", children: t1 }), $[4] = href, $[5] = t2) : t2 = $[5], t2;\n});\nfunction _temp$8(ctx) {\n  return ctx !== void 0;\n}\nfunction _temp2$5(nodePluginCollection) {\n  return nodePluginCollection.exclusive.length > 0;\n}\nfunction _temp3$2(e) {\n  e.stopPropagation();\n}\nfunction _temp4$1(nodePluginCollection_1) {\n  return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react__WEBPACK_IMPORTED_MODULE_2__.Fragment, { children: nodePluginCollection_1.hud.map((hud) => {\n    const Component_0 = hud.component;\n    return Component_0 ? /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Component_0, { ...nodePluginCollection_1.context }, hud.name) : null;\n  }) }, nodePluginCollection_1.id);\n}\nfunction _temp5$1(event) {\n  event.stopPropagation();\n}\nfunction _temp7$1(onStoreChange) {\n  const handlePopState = () => onStoreChange();\n  return window.addEventListener(\"popstate\", handlePopState), () => window.removeEventListener(\"popstate\", handlePopState);\n}\nfunction _temp8$1() {\n  return window.location.href;\n}\nconst OverlayDragGroupRect = (t0) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(5), {\n    dragGroupRect\n  } = t0, t1 = `${dragGroupRect.y}px`, t2 = `${dragGroupRect.x}px`, t3 = `${dragGroupRect.w - 1}px`, t4 = `${dragGroupRect.h - 1}px`;\n  let t5;\n  return $[0] !== t1 || $[1] !== t2 || $[2] !== t3 || $[3] !== t4 ? (t5 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { style: {\n    position: \"absolute\",\n    top: t1,\n    left: t2,\n    width: t3,\n    height: t4,\n    border: \"1px dashed #f0709b\",\n    pointerEvents: \"none\"\n  } }), $[0] = t1, $[1] = t2, $[2] = t3, $[3] = t4, $[4] = t5) : t5 = $[4], t5;\n}, markerThickness = 6;\nfunction lerp(v0, v1, t) {\n  return v0 * (1 - t) + v1 * t;\n}\nconst OverlayDragInsertMarker = (t0) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(4), {\n    dragInsertPosition\n  } = t0;\n  if (dragInsertPosition === null)\n    return;\n  const flow = dragInsertPosition?.left || dragInsertPosition?.right ? \"horizontal\" : \"vertical\";\n  let x = 0, y = 0, width = 0, height = 0;\n  if (flow === \"horizontal\") {\n    const {\n      left,\n      right\n    } = dragInsertPosition;\n    if (width = markerThickness, right && left) {\n      const startX = left.rect.x + left.rect.w, endX = right.rect.x, offset = Math.min(right.rect.h, left.rect.h) * 0.0125;\n      x = lerp(startX, endX, 0.5) - markerThickness / 2, y = left.rect.y + offset, height = Math.min(right.rect.h, left.rect.h) - offset * 2;\n    } else if (right && !left) {\n      const offset_0 = right.rect.h * 0.0125;\n      x = right.rect.x - markerThickness / 2, y = right.rect.y + offset_0, height = right.rect.h - offset_0 * 2;\n    } else if (left && !right) {\n      const offset_1 = left.rect.h * 0.0125;\n      x = left.rect.x + left.rect.w - markerThickness / 2, y = left.rect.y + offset_1, height = left.rect.h - offset_1 * 2;\n    }\n  } else {\n    const {\n      bottom,\n      top\n    } = dragInsertPosition;\n    if (bottom && top) {\n      const startX_0 = Math.min(top.rect.x, bottom.rect.x), startY = top.rect.y + top.rect.h, endY = bottom.rect.y, offset_2 = Math.min(bottom.rect.w, top.rect.w) * 0.0125;\n      height = markerThickness, x = startX_0 + offset_2, y = lerp(startY, endY, 0.5) - markerThickness / 2, width = Math.max(bottom.rect.w, top.rect.w) - offset_2 * 2;\n    } else if (bottom && !top) {\n      const offset_3 = bottom.rect.w * 0.0125;\n      x = bottom.rect.x + offset_3, y = bottom.rect.y - markerThickness / 2, width = bottom.rect.w - offset_3 * 2, height = markerThickness;\n    } else if (top && !bottom) {\n      const offset_4 = top.rect.w * 0.0125;\n      x = top.rect.x + offset_4, y = top.rect.y + top.rect.h - markerThickness / 2, width = top.rect.w - offset_4 * 2, height = markerThickness;\n    }\n  }\n  const t1 = `${width}px`, t2 = `${height}px`, t3 = `translate(${x}px, ${y}px)`;\n  let t4;\n  return $[0] !== t1 || $[1] !== t2 || $[2] !== t3 ? (t4 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { style: {\n    position: \"absolute\",\n    width: t1,\n    height: t2,\n    transform: t3,\n    background: \"#556bfc\",\n    border: \"2px solid white\",\n    borderRadius: \"999px\",\n    zIndex: \"999999\"\n  } }), $[0] = t1, $[1] = t2, $[2] = t3, $[3] = t4) : t4 = $[3], t4;\n}, Root$2 = styled_components__WEBPACK_IMPORTED_MODULE_9__.styled.div`\n  --drag-preview-opacity: 0.98;\n  --drag-preview-skeleton-stroke: #ffffff;\n\n  @media (prefers-color-scheme: dark) {\n    --drag-preview-skeleton-stroke: #383d51;\n  }\n\n  position: fixed;\n  display: grid;\n  transform: ${({\n  $scaleFactor,\n  $width,\n  $height\n}) => `translate(calc(var(--drag-preview-x) - ${$width / 2}px), calc(var(--drag-preview-y) - ${$height / 2}px)) scale(${$scaleFactor})`};\n  width: ${({\n  $width\n}) => `${$width}px`};\n  height: ${({\n  $height\n}) => `${$height}px`};\n  z-index: 9999999;\n  opacity: var(--drag-preview-opacity);\n  cursor: move;\n\n  .drag-preview-content-wrapper {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    container-type: inline-size;\n  }\n\n  [data-ui='card'] {\n    position: relative;\n    width: 100%;\n    height: 100%;\n  }\n\n  .drag-preview-skeleton {\n    position: absolute;\n    inset: 0;\n\n    rect {\n      stroke: var(--drag-preview-skeleton-stroke);\n    }\n  }\n\n  .drag-preview-handle {\n    position: absolute;\n    top: 4cqmin;\n    left: 4cqmin;\n    width: 6cqmin;\n    fill: var(--drag-preview-handle-fill);\n  }\n`;\nfunction clamp(number, min, max) {\n  return number < min ? min : number > max ? max : number;\n}\nfunction map(number, inMin, inMax, outMin, outMax) {\n  const mapped = (number - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;\n  return clamp(mapped, outMin, outMax);\n}\nconst OverlayDragPreview = (t0) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(50), {\n    skeleton\n  } = t0, maxSkeletonWidth = Math.min(skeleton.maxWidth, window.innerWidth / 2), scaleFactor = skeleton.w > maxSkeletonWidth ? maxSkeletonWidth / skeleton.w : 1, offsetX = skeleton.offsetX * scaleFactor, offsetY = skeleton.offsetY * scaleFactor, prefersDark = (0,_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.usePrefersDark)(), theme = (0,_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.useTheme_v2)(), radius = theme.radius[~~map(skeleton.w, 0, 1920, 1, theme.radius.length - 2)];\n  let T0, T1, t1, t10, t11, t12, t13, t14, t2, t3, t4, t5, t6, t7, t8, t9;\n  if ($[0] !== offsetX || $[1] !== offsetY || $[2] !== prefersDark || $[3] !== radius || $[4] !== scaleFactor || $[5] !== skeleton.childRects || $[6] !== skeleton.h || $[7] !== skeleton.w) {\n    const imageRects = skeleton.childRects.filter(_temp$7), textRects = skeleton.childRects.filter(_temp2$4);\n    T1 = Root$2, t10 = skeleton.w, t11 = skeleton.h, t12 = offsetX, t13 = offsetY, t14 = scaleFactor, T0 = _sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Card, t5 = radius, t6 = 4, t7 = \"hidden\", t8 = \"transparent\", t9 = prefersDark ? \"dark\" : \"light\", t4 = \"drag-preview-content-wrapper\", t2 = \"drag-preview-skeleton\", t3 = `0 0 ${skeleton.w} ${skeleton.h}`, t1 = [...imageRects, ...textRects], $[0] = offsetX, $[1] = offsetY, $[2] = prefersDark, $[3] = radius, $[4] = scaleFactor, $[5] = skeleton.childRects, $[6] = skeleton.h, $[7] = skeleton.w, $[8] = T0, $[9] = T1, $[10] = t1, $[11] = t10, $[12] = t11, $[13] = t12, $[14] = t13, $[15] = t14, $[16] = t2, $[17] = t3, $[18] = t4, $[19] = t5, $[20] = t6, $[21] = t7, $[22] = t8, $[23] = t9;\n  } else\n    T0 = $[8], T1 = $[9], t1 = $[10], t10 = $[11], t11 = $[12], t12 = $[13], t13 = $[14], t14 = $[15], t2 = $[16], t3 = $[17], t4 = $[18], t5 = $[19], t6 = $[20], t7 = $[21], t8 = $[22], t9 = $[23];\n  let t15;\n  $[24] !== t1 || $[25] !== theme.color ? (t15 = t1.map((r_1, i) => /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"rect\", { x: r_1.x, y: r_1.y, width: r_1.w, height: r_1.h, fill: theme.color.skeleton.from }, i)), $[24] = t1, $[25] = theme.color, $[26] = t15) : t15 = $[26];\n  let t16;\n  $[27] !== t15 || $[28] !== t2 || $[29] !== t3 ? (t16 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"svg\", { className: t2, viewBox: t3, children: t15 }), $[27] = t15, $[28] = t2, $[29] = t3, $[30] = t16) : t16 = $[30];\n  let t17;\n  $[31] !== t16 || $[32] !== t4 ? (t17 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(\"div\", { className: t4, children: t16 }), $[31] = t16, $[32] = t4, $[33] = t17) : t17 = $[33];\n  let t18;\n  $[34] !== T0 || $[35] !== t17 || $[36] !== t5 || $[37] !== t6 || $[38] !== t7 || $[39] !== t8 || $[40] !== t9 ? (t18 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(T0, { radius: t5, shadow: t6, overflow: t7, tone: t8, scheme: t9, children: t17 }), $[34] = T0, $[35] = t17, $[36] = t5, $[37] = t6, $[38] = t7, $[39] = t8, $[40] = t9, $[41] = t18) : t18 = $[41];\n  let t19;\n  return $[42] !== T1 || $[43] !== t10 || $[44] !== t11 || $[45] !== t12 || $[46] !== t13 || $[47] !== t14 || $[48] !== t18 ? (t19 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(T1, { $width: t10, $height: t11, $offsetX: t12, $offsetY: t13, $scaleFactor: t14, children: t18 }), $[42] = T1, $[43] = t10, $[44] = t11, $[45] = t12, $[46] = t13, $[47] = t14, $[48] = t18, $[49] = t19) : t19 = $[49], t19;\n};\nfunction _temp$7(r) {\n  return r.tagName === \"IMG\";\n}\nfunction _temp2$4(r_0) {\n  return r_0.tagName !== \"IMG\";\n}\nconst Root$1 = (0,styled_components__WEBPACK_IMPORTED_MODULE_9__.styled)((0,_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Card))`\n  position: fixed;\n  bottom: 2rem;\n  left: 2rem;\n`, OverlayMinimapPrompt = () => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(2);\n  let t0;\n  $[0] === Symbol.for(\"react.memo_cache_sentinel\") ? (t0 = {\n    zIndex: \"999999\"\n  }, $[0] = t0) : t0 = $[0];\n  let t1;\n  return $[1] === Symbol.for(\"react.memo_cache_sentinel\") ? (t1 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Root$1, { padding: 2, shadow: 2, radius: 2, style: t0, children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Flex, { align: \"center\", gap: 2, children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Hotkeys, { keys: [\"Shift\"] }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.Text, { size: 1, children: \"Zoom Out\" }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_icons__WEBPACK_IMPORTED_MODULE_6__.ExpandIcon, {})\n  ] }) }), $[1] = t1) : t1 = $[1], t1;\n}, elementsReducer = (elements, message) => {\n  const {\n    type\n  } = message;\n  switch (type) {\n    case \"element/register\":\n      return elements.find((e) => e.id === message.id) ? elements : [...elements, {\n        id: message.id,\n        activated: !1,\n        element: message.element,\n        focused: !1,\n        hovered: !1,\n        rect: message.rect,\n        sanity: message.sanity,\n        dragDisabled: message.dragDisabled,\n        targets: message.targets,\n        elementType: message.elementType\n      }];\n    case \"element/activate\":\n      return elements.map((e) => e.id === message.id ? {\n        ...e,\n        activated: !0\n      } : e);\n    case \"element/update\":\n      return elements.map((e) => e.id === message.id ? {\n        ...e,\n        sanity: message.sanity,\n        rect: message.rect,\n        targets: message.targets,\n        elementType: message.elementType\n      } : e);\n    case \"element/unregister\":\n      return elements.filter((e) => e.id !== message.id);\n    case \"element/deactivate\":\n      return elements.map((e) => e.id === message.id ? {\n        ...e,\n        activated: !1,\n        hovered: !1\n      } : e);\n    case \"element/mouseenter\":\n      return elements.map((e) => e.id === message.id ? {\n        ...e,\n        rect: message.rect,\n        hovered: !0\n      } : {\n        ...e,\n        hovered: !1\n      });\n    case \"element/mouseleave\":\n      return elements.map((element) => element.id === message.id ? {\n        ...element,\n        hovered: !1\n      } : element);\n    case \"element/updateRect\":\n      return elements.map((element) => element.id === message.id ? {\n        ...element,\n        rect: message.rect\n      } : element);\n    case \"element/click\":\n      return elements.map((e) => ({\n        ...e,\n        focused: e.id === message.id && \"clicked\"\n      }));\n    case \"overlay/reset-mouse-state\":\n      return elements.map((e) => ({\n        ...e,\n        focused: !1,\n        hovered: !1\n      }));\n    case \"overlay/blur\":\n      return elements.map((e) => ({\n        ...e,\n        focused: !1\n      }));\n    case \"presentation/blur\":\n      return elements.map((e) => ({\n        ...e,\n        focused: !1\n      }));\n    case \"presentation/focus\": {\n      const clickedElement = elements.find((e) => e.focused === \"clicked\");\n      return elements.map((e) => {\n        const focused = \"path\" in e.sanity && e.sanity.id === message.data.id && e.sanity.path === message.data.path;\n        return clickedElement && e === clickedElement && focused ? e : {\n          ...e,\n          // Mark as a dupe if another matching item has been clicked to prevent\n          // scrolling, otherwise just set focus as a boolean\n          focused: focused && clickedElement ? \"duplicate\" : focused\n        };\n      });\n    }\n    default:\n      return elements;\n  }\n};\nfunction overlayStateReducer(state, message) {\n  const {\n    type\n  } = message;\n  let {\n    contextMenu,\n    focusPath,\n    perspective,\n    isDragging,\n    dragInsertPosition,\n    dragShowMinimap,\n    dragShowMinimapPrompt,\n    dragSkeleton,\n    dragMinimapTransition,\n    dragGroupRect\n  } = state, wasMaybeCollapsed = !1;\n  if (type === \"presentation/focus\") {\n    const prevFocusPath = state.focusPath;\n    focusPath = message.data.path, prevFocusPath !== focusPath && (wasMaybeCollapsed = prevFocusPath.slice(focusPath.length).startsWith(\"[\"));\n  }\n  return type === \"presentation/perspective\" && (perspective = message.data.perspective), type === \"element/contextmenu\" && (\"sanity\" in message ? contextMenu = {\n    node: message.sanity,\n    position: message.position\n  } : contextMenu = null), (type === \"element/click\" || type === \"element/mouseleave\" || type === \"overlay/blur\" || type === \"presentation/blur\" || type === \"presentation/focus\") && (contextMenu = null), type === \"overlay/dragUpdateInsertPosition\" && (dragInsertPosition = message.insertPosition), type === \"overlay/dragStart\" && (isDragging = !0), message.type === \"overlay/dragUpdateSkeleton\" && (dragSkeleton = message.skeleton), type === \"overlay/dragEnd\" && (isDragging = !1), message.type === \"overlay/dragToggleMinimapPrompt\" && (dragShowMinimapPrompt = message.display), type === \"overlay/dragStartMinimapTransition\" && (dragMinimapTransition = !0), type === \"overlay/dragEndMinimapTransition\" && (dragMinimapTransition = !1), type === \"overlay/dragUpdateGroupRect\" && (dragGroupRect = message.groupRect), type === \"overlay/dragToggleMinimap\" && (dragShowMinimap = message.display), {\n    ...state,\n    contextMenu,\n    elements: elementsReducer(state.elements, message),\n    dragInsertPosition,\n    dragSkeleton,\n    dragGroupRect,\n    isDragging,\n    focusPath,\n    perspective,\n    wasMaybeCollapsed,\n    dragShowMinimap,\n    dragShowMinimapPrompt,\n    dragMinimapTransition\n  };\n}\nconst PreviewSnapshotsProvider = function(props) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(13), {\n    comlink,\n    children\n  } = props;\n  let t0;\n  $[0] === Symbol.for(\"react.memo_cache_sentinel\") ? (t0 = [], $[0] = t0) : t0 = $[0];\n  const [previewSnapshots, setPreviewSnapshots] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(t0);\n  let t1;\n  $[1] !== comlink ? (t1 = async (signal) => {\n    if (comlink)\n      try {\n        const response = await comlink.fetch(\"visual-editing/preview-snapshots\", void 0, {\n          signal,\n          suppressWarnings: !0\n        });\n        setPreviewSnapshots(response.snapshots);\n      } catch {\n      }\n  }, $[1] = comlink, $[2] = t1) : t1 = $[2];\n  const fetchPreviewSnapshots = t1;\n  let t2, t3;\n  $[3] !== comlink || $[4] !== fetchPreviewSnapshots ? (t2 = () => {\n    if (!comlink)\n      return;\n    const previewSapshotsFetch = new AbortController(), unsub = comlink.onStatus(() => {\n      fetchPreviewSnapshots(previewSapshotsFetch.signal);\n    }, \"connected\");\n    return () => {\n      previewSapshotsFetch.abort(), unsub();\n    };\n  }, t3 = [comlink, fetchPreviewSnapshots], $[3] = comlink, $[4] = fetchPreviewSnapshots, $[5] = t2, $[6] = t3) : (t2 = $[5], t3 = $[6]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t2, t3);\n  let t4, t5;\n  $[7] !== comlink ? (t4 = () => comlink?.on(\"presentation/preview-snapshots\", (data) => {\n    setPreviewSnapshots(data.snapshots);\n  }), t5 = [comlink], $[7] = comlink, $[8] = t4, $[9] = t5) : (t4 = $[8], t5 = $[9]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t4, t5);\n  const context = previewSnapshots;\n  let t6;\n  return $[10] !== children || $[11] !== context ? (t6 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PreviewSnapshotsContext.Provider, { value: context, children }), $[10] = children, $[11] = context, $[12] = t6) : t6 = $[12], t6;\n};\nfunction isSanityNode(node) {\n  return \"path\" in node;\n}\nfunction isDocumentSchemaType(type) {\n  return type.type === \"document\";\n}\nfunction isTypeSchemaType(type) {\n  return type.type === \"type\";\n}\nfunction popUnkeyedPathSegments(path) {\n  return path.split(\".\").toReversed().reduce((acc, part) => acc.length ? [part, ...acc] : part.includes(\"[_key==\") ? [part] : [], []).join(\".\");\n}\nfunction getPathsWithUnresolvedTypes(elements) {\n  return elements.reduce((acc, element) => {\n    const {\n      sanity\n    } = element;\n    if (!(\"id\" in sanity) || !sanity.path.includes(\"[_key==\")) return acc;\n    const path = popUnkeyedPathSegments(sanity.path);\n    return acc.find((item) => item.id === sanity.id && item.path === path) || acc.push({\n      id: sanity.id,\n      path\n    }), acc;\n  }, []);\n}\nconst SchemaProvider = function(props) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(22), {\n    comlink,\n    children,\n    elements\n  } = props;\n  let t0;\n  $[0] === Symbol.for(\"react.memo_cache_sentinel\") ? (t0 = /* @__PURE__ */ new Map(), $[0] = t0) : t0 = $[0];\n  const [resolvedTypes, setResolvedTypes] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(t0), [schema, setSchema] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  let t1, t2;\n  $[1] !== comlink ? (t1 = () => {\n    if (!comlink)\n      return;\n    const fetchSchema = async function(signal) {\n      if (comlink)\n        try {\n          const response = await comlink.fetch(\"visual-editing/schema\", void 0, {\n            signal,\n            suppressWarnings: !0\n          });\n          setSchema(response.schema);\n        } catch {\n        }\n    }, schemaFetch = new AbortController(), unsub = comlink.onStatus(() => {\n      fetchSchema(schemaFetch.signal);\n    }, \"connected\");\n    return () => {\n      schemaFetch.abort(), unsub();\n    };\n  }, t2 = [comlink], $[1] = comlink, $[2] = t1, $[3] = t2) : (t1 = $[2], t2 = $[3]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t1, t2);\n  let t3;\n  $[4] === Symbol.for(\"react.memo_cache_sentinel\") ? (t3 = [], $[4] = t3) : t3 = $[4];\n  const reportedPathsRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(t3), t4 = (0,react__WEBPACK_IMPORTED_MODULE_2__.useDeferredValue)(elements);\n  let t5;\n  $[5] !== t4 ? (t5 = getPathsWithUnresolvedTypes(t4), $[5] = t4, $[6] = t5) : t5 = $[6];\n  const paths = t5, controllerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  let t6, t7;\n  $[7] !== comlink || $[8] !== paths ? (t6 = () => {\n    if (!paths.length || !comlink)\n      return;\n    const reportPaths = async (paths_0, signal_0) => {\n      const initialReportedPaths = reportedPathsRef.current;\n      try {\n        reportedPathsRef.current = paths_0;\n        const response_0 = await comlink.fetch(\"visual-editing/schema-union-types\", {\n          paths: paths_0\n        }, {\n          signal: signal_0,\n          suppressWarnings: !0\n        });\n        if (signal_0.aborted)\n          return;\n        setResolvedTypes(response_0.types), controllerRef.current = null;\n      } catch {\n      }\n      signal_0.aborted && (reportedPathsRef.current = initialReportedPaths);\n    };\n    paths.some((p) => !reportedPathsRef.current.find((t82) => {\n      const {\n        id,\n        path\n      } = t82;\n      return id === p.id && path === p.path;\n    })) && (controllerRef.current?.abort(), controllerRef.current = new AbortController(), reportPaths(paths, controllerRef.current.signal));\n  }, t7 = [comlink, paths], $[7] = comlink, $[8] = paths, $[9] = t6, $[10] = t7) : (t6 = $[9], t7 = $[10]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t6, t7);\n  let t8;\n  $[11] !== schema ? (t8 = (node, _type) => {\n    const type = _type || \"document\";\n    if (!schema || typeof node != \"string\" && (!isSanityNode(node) || !Array.isArray(schema)))\n      return;\n    const name = typeof node == \"string\" ? node : node.type, filter = type === \"document\" ? isDocumentSchemaType : isTypeSchemaType;\n    return schema.filter(filter).find((schemaType) => schemaType.name === name);\n  }, $[11] = schema, $[12] = t8) : t8 = $[12];\n  const getType = t8;\n  let t9;\n  $[13] !== getType || $[14] !== resolvedTypes ? (t9 = (node_0) => {\n    if (!isSanityNode(node_0))\n      return {\n        field: void 0,\n        parent: void 0\n      };\n    const schemaType_0 = getType(node_0);\n    if (!schemaType_0)\n      return {\n        field: void 0,\n        parent: void 0\n      };\n    function fieldFromPath(schemaType_1, path_0, parent, t102) {\n      const prevPath = t102 === void 0 ? [] : t102;\n      if (!schemaType_1)\n        return {\n          field: void 0,\n          parent: void 0\n        };\n      const [next, ...rest] = path_0;\n      if (\"fields\" in schemaType_1) {\n        const objectField = schemaType_1.fields[next];\n        if (!objectField && \"rest\" in schemaType_1)\n          return fieldFromPath(schemaType_1.rest, path_0, schemaType_1, prevPath);\n        if (!rest.length)\n          return {\n            field: objectField,\n            parent\n          };\n        if (!objectField)\n          throw new Error(`[@sanity/visual-editing] No field could be resolved at path: \"${[...prevPath, ...path_0].join(\".\")}\"`);\n        return fieldFromPath(objectField.value, rest, schemaType_1, [...prevPath, next]);\n      } else {\n        if (schemaType_1.type === \"array\")\n          return fieldFromPath(schemaType_1.of, path_0, schemaType_1, prevPath);\n        if (schemaType_1.type === \"arrayItem\")\n          return rest.length ? fieldFromPath(schemaType_1.value, rest, schemaType_1, [...prevPath, next]) : {\n            field: schemaType_1,\n            parent\n          };\n        if (schemaType_1.type === \"union\") {\n          const name_0 = next.startsWith(\"[_key==\") ? resolvedTypes?.get(node_0.id)?.get([prevPath.join(\".\"), next].filter(Boolean).join(\"\")) : next;\n          return fieldFromPath(schemaType_1.of.find((item) => item.type === \"unionOption\" ? item.name === name_0 : item), rest, schemaType_1, [...prevPath, next]);\n        } else {\n          if (schemaType_1.type === \"unionOption\")\n            return next ? fieldFromPath(schemaType_1.value, path_0, schemaType_1, prevPath) : {\n              field: schemaType_1,\n              parent\n            };\n          if (schemaType_1.type === \"inline\") {\n            const type_0 = getType(schemaType_1.name, \"type\");\n            return fieldFromPath(type_0.value, path_0, schemaType_1, prevPath);\n          }\n        }\n      }\n      throw new Error(`[@sanity/visual-editing] No field could be resolved at path: \"${[...prevPath, ...path_0].join(\".\")}\"`);\n    }\n    const nodePath = node_0.path.split(\".\").flatMap(_temp$6);\n    try {\n      return fieldFromPath(schemaType_0, nodePath, void 0);\n    } catch (t112) {\n      const e = t112;\n      return e instanceof Error && console.warn(e.message), {\n        field: void 0,\n        parent: void 0\n      };\n    }\n  }, $[13] = getType, $[14] = resolvedTypes, $[15] = t9) : t9 = $[15];\n  const getField = t9;\n  let t10;\n  $[16] !== getField || $[17] !== getType ? (t10 = {\n    getField,\n    getType\n  }, $[16] = getField, $[17] = getType, $[18] = t10) : t10 = $[18];\n  const context = t10;\n  let t11;\n  return $[19] !== children || $[20] !== context ? (t11 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SchemaContext.Provider, { value: context, children }), $[19] = children, $[20] = context, $[21] = t11) : t11 = $[21], t11;\n};\nfunction _temp$6(part) {\n  return part.includes(\"[\") ? part.split(/(\\[.+\\])/, 2) : [part];\n}\nconst createStore = (initialState) => {\n  let state = initialState;\n  const getState = () => state, listeners = /* @__PURE__ */ new Set();\n  return {\n    getState,\n    setState: (fn) => {\n      state = fn(state), listeners.forEach((l) => l());\n    },\n    subscribe: (listener) => (listeners.add(listener), () => listeners.delete(listener))\n  };\n}, store = createStore({}), SharedStateProvider = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(11), {\n    comlink,\n    children\n  } = props;\n  let t0, t1;\n  $[0] !== comlink ? (t0 = () => comlink?.on(\"presentation/shared-state\", _temp$5), t1 = [comlink], $[0] = comlink, $[1] = t0, $[2] = t1) : (t0 = $[1], t1 = $[2]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t0, t1);\n  let t2, t3;\n  $[3] !== comlink ? (t2 = () => {\n    (async function() {\n      const value = await comlink?.fetch(\"visual-editing/shared-state\", void 0, {\n        suppressWarnings: !0\n      });\n      value && store.setState(() => value.state);\n    })().catch(_temp2$3);\n  }, t3 = [comlink], $[3] = comlink, $[4] = t2, $[5] = t3) : (t2 = $[4], t3 = $[5]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t2, t3);\n  let t4;\n  $[6] !== comlink ? (t4 = {\n    comlink,\n    store\n  }, $[6] = comlink, $[7] = t4) : t4 = $[7];\n  const value_0 = t4;\n  let t5;\n  return $[8] !== children || $[9] !== value_0 ? (t5 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chunks_es_SharedStateContext_js__WEBPACK_IMPORTED_MODULE_14__.SharedStateContext.Provider, { value: value_0, children }), $[8] = children, $[9] = value_0, $[10] = t5) : t5 = $[10], t5;\n};\nfunction _temp$5(data) {\n  \"value\" in data ? store.setState((prev) => ({\n    ...prev,\n    [data.key]: data.value\n  })) : store.setState((prev_0) => Object.fromEntries(Object.entries(prev_0).filter((t0) => {\n    const [key] = t0;\n    return key !== data.key;\n  })));\n}\nfunction _temp2$3(reason) {\n  console.debug(reason), console.warn(\"[@sanity/visual-editing]: Failed to fetch shared state. Check your version of `sanity` is up-to-date\");\n}\nconst TelemetryProvider = (t0) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(5), {\n    children,\n    comlink\n  } = t0;\n  let t1;\n  $[0] !== comlink ? (t1 = (name, data) => {\n    if (!comlink)\n      return;\n    const event = _chunks_es_PointerEvents_js__WEBPACK_IMPORTED_MODULE_7__.events[name];\n    if (event)\n      comlink.post(\"visual-editing/telemetry-log\", {\n        event,\n        data\n      });\n    else\n      throw new Error(`Telemetry event: ${name} does not exist`);\n  }, $[0] = comlink, $[1] = t1) : t1 = $[1];\n  const log = t1;\n  let t2;\n  return $[2] !== children || $[3] !== log ? (t2 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chunks_es_PointerEvents_js__WEBPACK_IMPORTED_MODULE_7__.TelemetryContext.Provider, { value: log, children }), $[2] = children, $[3] = log, $[4] = t2) : t2 = $[4], t2;\n};\nfunction useController(element, handler, inFrame, inPopUp) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(7), overlayController = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(void 0), optimisticActorReady = (0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.useOptimisticActorReady)();\n  let t0, t1;\n  return $[0] !== element || $[1] !== handler || $[2] !== inFrame || $[3] !== inPopUp || $[4] !== optimisticActorReady ? (t0 = () => {\n    if (element)\n      return overlayController.current = (0,_chunks_es_SharedStateContext_js__WEBPACK_IMPORTED_MODULE_14__.createOverlayController)({\n        handler,\n        overlayElement: element,\n        inFrame,\n        inPopUp,\n        optimisticActorReady\n      }), () => {\n        overlayController.current?.destroy(), overlayController.current = void 0;\n      };\n  }, t1 = [element, handler, inFrame, inPopUp, optimisticActorReady], $[0] = element, $[1] = handler, $[2] = inFrame, $[3] = inPopUp, $[4] = optimisticActorReady, $[5] = t0, $[6] = t1) : (t0 = $[5], t1 = $[6]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t0, t1), overlayController;\n}\nfunction usePerspectiveSync(comlink, dispatch) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(4);\n  let t0, t1;\n  $[0] !== comlink || $[1] !== dispatch ? (t0 = () => {\n    const controller = new AbortController();\n    comlink?.fetch(\"visual-editing/fetch-perspective\", void 0, {\n      signal: controller.signal,\n      suppressWarnings: !0\n    }).then((data) => {\n      dispatch({\n        type: \"presentation/perspective\",\n        data\n      });\n    }).catch(_temp$4);\n    const unsub = comlink?.on(\"presentation/perspective\", (data_0) => {\n      dispatch({\n        type: \"presentation/perspective\",\n        data: data_0\n      });\n    });\n    return () => {\n      unsub?.(), controller.abort();\n    };\n  }, t1 = [comlink, dispatch], $[0] = comlink, $[1] = dispatch, $[2] = t0, $[3] = t1) : (t0 = $[2], t1 = $[3]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t0, t1);\n}\nfunction _temp$4() {\n}\nfunction isEqualSets(a, b) {\n  if (a === b) return !0;\n  if (a.size !== b.size) return !1;\n  for (const value of a) if (!b.has(value)) return !1;\n  return !0;\n}\nfunction useReportDocuments(comlink, elements, perspective) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(7), lastReported = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(void 0);\n  let t0;\n  $[0] !== comlink ? (t0 = (documents, perspective_0) => {\n    comlink?.post(\"visual-editing/documents\", {\n      documents,\n      perspective: perspective_0\n    });\n  }, $[0] = comlink, $[1] = t0) : t0 = $[1];\n  const reportDocuments = t0;\n  let t1, t2;\n  $[2] !== elements || $[3] !== perspective || $[4] !== reportDocuments ? (t1 = () => {\n    const nodes = elements.map(_temp$3).filter(_temp2$2), nodeIds = new Set(nodes.map(_temp3$1));\n    if (!lastReported.current || !isEqualSets(nodeIds, lastReported.current.nodeIds) || perspective !== lastReported.current.perspective) {\n      const documentsOnPage = Array.from(nodeIds).map((_id) => {\n        const node_0 = nodes.find((node) => node.id === _id), {\n          type,\n          projectId: _projectId,\n          dataset: _dataset\n        } = node_0;\n        return _projectId && _dataset ? {\n          _id,\n          _type: type,\n          _projectId,\n          _dataset\n        } : {\n          _id,\n          _type: type\n        };\n      });\n      lastReported.current = {\n        nodeIds,\n        perspective\n      }, reportDocuments(documentsOnPage, perspective);\n    }\n  }, t2 = [elements, perspective, reportDocuments], $[2] = elements, $[3] = perspective, $[4] = reportDocuments, $[5] = t1, $[6] = t2) : (t1 = $[5], t2 = $[6]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t1, t2);\n}\nfunction _temp3$1(e_0) {\n  return e_0.id;\n}\nfunction _temp2$2(s) {\n  return !!s;\n}\nfunction _temp$3(e) {\n  const {\n    sanity\n  } = e;\n  return !sanity || !(\"id\" in sanity) ? null : sanity;\n}\nconst Root = styled_components__WEBPACK_IMPORTED_MODULE_9__.styled.div`\n  background-color: transparent;\n  direction: ltr;\n  inset: 0;\n  pointer-events: none;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: ${({\n  $zIndex\n}) => $zIndex ?? \"9999999\"};\n`;\nfunction raf2(fn) {\n  let r0, r1;\n  return r0 = requestAnimationFrame(() => {\n    r1 = requestAnimationFrame(fn);\n  }), () => {\n    r0 !== void 0 && cancelAnimationFrame(r0), r1 !== void 0 && cancelAnimationFrame(r1);\n  };\n}\nconst DocumentReporter = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(8), {\n    documentIds\n  } = props;\n  let t0;\n  $[0] === Symbol.for(\"react.memo_cache_sentinel\") ? (t0 = [], $[0] = t0) : t0 = $[0];\n  const [uniqueIds, setUniqueIds] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(t0);\n  let t1, t2;\n  $[1] !== documentIds ? (t1 = () => {\n    setUniqueIds((prev) => {\n      const next = Array.from(new Set(documentIds));\n      return prev.length === next.length && prev.reduce(_temp$2, next)?.length === 0 ? prev : next;\n    });\n  }, t2 = [documentIds], $[1] = documentIds, $[2] = t1, $[3] = t2) : (t1 = $[2], t2 = $[3]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t1, t2);\n  const actor = (0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.useOptimisticActor)();\n  let t3, t4;\n  return $[4] !== actor || $[5] !== uniqueIds ? (t3 = () => {\n    for (const id_0 of uniqueIds)\n      actor.send({\n        type: \"observe\",\n        documentId: (0,_sanity_client_csm__WEBPACK_IMPORTED_MODULE_10__.getDraftId)(id_0)\n      }), actor.send({\n        type: \"observe\",\n        documentId: (0,_sanity_client_csm__WEBPACK_IMPORTED_MODULE_10__.getPublishedId)(id_0)\n      });\n    return () => {\n      for (const id_1 of uniqueIds)\n        actor.send({\n          type: \"unobserve\",\n          documentId: (0,_sanity_client_csm__WEBPACK_IMPORTED_MODULE_10__.getDraftId)(id_1)\n        }), actor.send({\n          type: \"unobserve\",\n          documentId: (0,_sanity_client_csm__WEBPACK_IMPORTED_MODULE_10__.getPublishedId)(id_1)\n        });\n    };\n  }, t4 = [actor, uniqueIds], $[4] = actor, $[5] = uniqueIds, $[6] = t3, $[7] = t4) : (t3 = $[6], t4 = $[7]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t3, t4), null;\n}, OverlaysController = (props) => {\n  const {\n    comlink,\n    dispatch,\n    inFrame,\n    inPopUp,\n    onDrag,\n    overlayEnabled,\n    rootElement\n  } = props, {\n    dispatchDragEndEvent\n  } = useDragEndEvents(), sendTelemetry = (0,_chunks_es_PointerEvents_js__WEBPACK_IMPORTED_MODULE_7__.useTelemetry)(), overlayEventHandler = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((message) => {\n    if (message.type === \"element/click\") {\n      const {\n        sanity\n      } = message;\n      comlink?.post(\"visual-editing/focus\", sanity), sendTelemetry(\"Visual Editing Overlay Clicked\", null);\n    } else if (message.type === \"overlay/activate\")\n      comlink?.post(\"visual-editing/toggle\", {\n        enabled: !0\n      });\n    else if (message.type === \"overlay/deactivate\")\n      comlink?.post(\"visual-editing/toggle\", {\n        enabled: !1\n      });\n    else if (message.type === \"overlay/dragEnd\") {\n      const {\n        insertPosition,\n        target,\n        dragGroup,\n        flow,\n        preventInsertDefault\n      } = message;\n      dispatchDragEndEvent({\n        insertPosition,\n        target,\n        dragGroup,\n        flow,\n        preventInsertDefault\n      }), insertPosition && sendTelemetry(\"Visual Editing Drag Sequence Completed\", null);\n    } else if (message.type === \"overlay/dragUpdateCursorPosition\") {\n      onDrag(message.x, message.y);\n      return;\n    } else if (message.type === \"overlay/dragToggleMinimap\" && message.display === !0)\n      sendTelemetry(\"Visual Editing Drag Minimap Enabled\", null);\n    else if (message.type === \"overlay/setCursor\") {\n      const {\n        element,\n        cursor\n      } = message;\n      cursor ? element.style.cursor = cursor : element.style.removeProperty(\"cursor\");\n    }\n    dispatch(message);\n  }, [comlink, dispatch, dispatchDragEndEvent, onDrag, sendTelemetry]), controller = useController(rootElement, overlayEventHandler, inFrame, inPopUp);\n  return (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(() => {\n    overlayEnabled ? controller.current?.activate() : controller.current?.deactivate();\n  }, [controller, overlayEnabled]), null;\n}, Overlays = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(76), {\n    comlink,\n    comlinkStatus,\n    componentResolver: _componentResolver,\n    inFrame,\n    inPopUp,\n    zIndex\n  } = props, prefersDark = (0,_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.usePrefersDark)();\n  let t0;\n  $[0] === Symbol.for(\"react.memo_cache_sentinel\") ? (t0 = {\n    contextMenu: null,\n    dragInsertPosition: null,\n    dragShowMinimap: !1,\n    dragShowMinimapPrompt: !1,\n    dragSkeleton: null,\n    elements: [],\n    focusPath: \"\",\n    isDragging: !1,\n    perspective: \"published\",\n    wasMaybeCollapsed: !1,\n    dragMinimapTransition: !1,\n    dragGroupRect: null\n  }, $[0] = t0) : t0 = $[0];\n  const [t1, dispatch] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useReducer)(overlayStateReducer, t0), {\n    contextMenu,\n    dragInsertPosition,\n    dragShowMinimap,\n    dragShowMinimapPrompt,\n    dragSkeleton,\n    elements,\n    isDragging,\n    perspective,\n    wasMaybeCollapsed,\n    dragMinimapTransition,\n    dragGroupRect\n  } = t1, [rootElement, setRootElement] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null), [overlayEnabled, setOverlayEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!0);\n  let t2, t3;\n  $[1] !== comlink ? (t2 = () => {\n    const unsubs = [comlink?.on(\"presentation/focus\", (data) => {\n      dispatch({\n        type: \"presentation/focus\",\n        data\n      });\n    }), comlink?.on(\"presentation/blur\", (data_0) => {\n      dispatch({\n        type: \"presentation/blur\",\n        data: data_0\n      });\n    }), comlink?.on(\"presentation/toggle-overlay\", () => {\n      setOverlayEnabled(_temp2$1);\n    })].filter(Boolean);\n    return () => unsubs.forEach(_temp3);\n  }, t3 = [comlink], $[1] = comlink, $[2] = t2, $[3] = t3) : (t2 = $[2], t3 = $[3]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t2, t3), usePerspectiveSync(comlink, dispatch), useReportDocuments(comlink, elements, perspective);\n  let t4;\n  $[4] !== rootElement ? (t4 = (x, y) => {\n    rootElement && (rootElement.style.setProperty(\"--drag-preview-x\", `${x}px`), rootElement.style.setProperty(\"--drag-preview-y\", `${y - window.scrollY}px`));\n  }, $[4] = rootElement, $[5] = t4) : t4 = $[5];\n  const updateDragPreviewCustomProps = t4;\n  let t5, t6;\n  $[6] === Symbol.for(\"react.memo_cache_sentinel\") ? (t5 = () => {\n    const handleClick = _temp4;\n    let altPressed = !1;\n    const handleKeyUp = (e) => {\n      isAltKey(e) && altPressed && (altPressed = !1, setOverlayEnabled(_temp5));\n    }, handleKeydown = (e_0) => {\n      if (isAltKey(e_0)) {\n        if (e_0.ctrlKey || e_0.metaKey || e_0.shiftKey)\n          return;\n        altPressed || (altPressed = !0, setOverlayEnabled(_temp6));\n      }\n      isHotkey([\"mod\", \"\\\\\"], e_0) && setOverlayEnabled(_temp7);\n    }, handleWindowBlur = () => {\n      altPressed && (altPressed = !1, setOverlayEnabled(_temp8));\n    };\n    return window.addEventListener(\"click\", handleClick), window.addEventListener(\"keydown\", handleKeydown), window.addEventListener(\"keyup\", handleKeyUp), window.addEventListener(\"blur\", handleWindowBlur), () => {\n      window.removeEventListener(\"click\", handleClick), window.removeEventListener(\"keydown\", handleKeydown), window.removeEventListener(\"keyup\", handleKeyUp), window.removeEventListener(\"blur\", handleWindowBlur);\n    };\n  }, t6 = [setOverlayEnabled], $[6] = t5, $[7] = t6) : (t5 = $[6], t6 = $[7]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t5, t6);\n  const [overlaysFlash, setOverlaysFlash] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1), [fadingOut, setFadingOut] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1), fadeOutTimeoutRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(void 0);\n  let t7, t8;\n  $[8] !== overlayEnabled ? (t7 = () => {\n    if (overlayEnabled)\n      return raf2(() => {\n        setOverlaysFlash(!0), raf2(() => {\n          setFadingOut(!0), fadeOutTimeoutRef.current = setTimeout(() => {\n            setFadingOut(!1), setOverlaysFlash(!1);\n          }, 1500);\n        });\n      });\n    fadeOutTimeoutRef.current && (clearTimeout(fadeOutTimeoutRef.current), setOverlaysFlash(!1), setFadingOut(!1));\n  }, t8 = [overlayEnabled], $[8] = overlayEnabled, $[9] = t7, $[10] = t8) : (t7 = $[9], t8 = $[10]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t7, t8);\n  let t9;\n  $[11] !== elements ? (t9 = elements.flatMap(_temp9), $[11] = elements, $[12] = t9) : t9 = $[12];\n  const documentIds = t9;\n  let t10;\n  $[13] === Symbol.for(\"react.memo_cache_sentinel\") ? (t10 = () => {\n    dispatch({\n      type: \"overlay/blur\"\n    });\n  }, $[13] = t10) : t10 = $[13];\n  const closeContextMenu = t10, optimisticActorReady = (0,_chunks_es_mutations_js__WEBPACK_IMPORTED_MODULE_4__.useOptimisticActorReady)(), componentResolver = optimisticActorReady ? _componentResolver : void 0;\n  let t11;\n  bb0: {\n    if ((inFrame || inPopUp) && comlinkStatus !== \"connected\" || isDragging) {\n      let t123;\n      $[14] === Symbol.for(\"react.memo_cache_sentinel\") ? (t123 = [], $[14] = t123) : t123 = $[14], t11 = t123;\n      break bb0;\n    }\n    let t122;\n    $[15] !== comlink || $[16] !== componentResolver || $[17] !== dragMinimapTransition || $[18] !== dragShowMinimap || $[19] !== elements || $[20] !== inFrame || $[21] !== isDragging || $[22] !== optimisticActorReady || $[23] !== props.plugins || $[24] !== wasMaybeCollapsed ? (t122 = elements.filter(_temp0).map((t132) => {\n      const {\n        id,\n        element: element_0,\n        focused,\n        hovered,\n        rect,\n        sanity,\n        dragDisabled,\n        targets,\n        elementType\n      } = t132, draggable = !dragDisabled && !!element_0.getAttribute(\"data-sanity\") && optimisticActorReady && elements.some((e_2) => \"id\" in e_2.sanity && \"id\" in sanity ? (0,_chunks_es_SharedStateContext_js__WEBPACK_IMPORTED_MODULE_14__.sanityNodesExistInSameArray)(e_2.sanity, sanity) && e_2.sanity.path !== sanity.path : !1);\n      return /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ElementOverlay, { comlink, componentResolver, plugins: props.plugins, element: element_0, enableScrollIntoView: !isDragging && !dragMinimapTransition && !dragShowMinimap, id, focused, hovered, node: sanity, rect, showActions: !inFrame, draggable, isDragging: isDragging || dragMinimapTransition, wasMaybeCollapsed: focused && wasMaybeCollapsed, targets, elementType }, id);\n    }), $[15] = comlink, $[16] = componentResolver, $[17] = dragMinimapTransition, $[18] = dragShowMinimap, $[19] = elements, $[20] = inFrame, $[21] = isDragging, $[22] = optimisticActorReady, $[23] = props.plugins, $[24] = wasMaybeCollapsed, $[25] = t122) : t122 = $[25], t11 = t122;\n  }\n  const elementsToRender = t11, t12 = prefersDark ? \"dark\" : \"light\", t13 = fadingOut ? \"\" : void 0, t14 = overlaysFlash ? \"\" : void 0;\n  let t15;\n  $[26] !== documentIds || $[27] !== perspective ? (t15 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(DocumentReporter, { documentIds, perspective }), $[26] = documentIds, $[27] = perspective, $[28] = t15) : t15 = $[28];\n  let t16;\n  $[29] !== comlink || $[30] !== inFrame || $[31] !== inPopUp || $[32] !== overlayEnabled || $[33] !== rootElement || $[34] !== updateDragPreviewCustomProps ? (t16 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(OverlaysController, { comlink, dispatch, inFrame, inPopUp, onDrag: updateDragPreviewCustomProps, overlayEnabled, rootElement }), $[29] = comlink, $[30] = inFrame, $[31] = inPopUp, $[32] = overlayEnabled, $[33] = rootElement, $[34] = updateDragPreviewCustomProps, $[35] = t16) : t16 = $[35];\n  let t17;\n  $[36] !== contextMenu ? (t17 = contextMenu && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(ContextMenu, { ...contextMenu, onDismiss: closeContextMenu }), $[36] = contextMenu, $[37] = t17) : t17 = $[37];\n  let t18;\n  $[38] !== dragGroupRect || $[39] !== dragInsertPosition || $[40] !== dragMinimapTransition || $[41] !== dragShowMinimapPrompt || $[42] !== isDragging ? (t18 = isDragging && !dragMinimapTransition && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n    dragInsertPosition && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(OverlayDragInsertMarker, { dragInsertPosition }),\n    dragShowMinimapPrompt && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(OverlayMinimapPrompt, {}),\n    dragGroupRect && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(OverlayDragGroupRect, { dragGroupRect })\n  ] }), $[38] = dragGroupRect, $[39] = dragInsertPosition, $[40] = dragMinimapTransition, $[41] = dragShowMinimapPrompt, $[42] = isDragging, $[43] = t18) : t18 = $[43];\n  let t19;\n  $[44] !== dragSkeleton || $[45] !== isDragging ? (t19 = isDragging && dragSkeleton && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(OverlayDragPreview, { skeleton: dragSkeleton }), $[44] = dragSkeleton, $[45] = isDragging, $[46] = t19) : t19 = $[46];\n  let t20;\n  $[47] !== elementsToRender || $[48] !== t13 || $[49] !== t14 || $[50] !== t15 || $[51] !== t16 || $[52] !== t17 || $[53] !== t18 || $[54] !== t19 || $[55] !== zIndex ? (t20 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(Root, { \"data-fading-out\": t13, \"data-overlays\": t14, ref: setRootElement, $zIndex: zIndex, children: [\n    t15,\n    t16,\n    t17,\n    elementsToRender,\n    t18,\n    t19\n  ] }), $[47] = elementsToRender, $[48] = t13, $[49] = t14, $[50] = t15, $[51] = t16, $[52] = t17, $[53] = t18, $[54] = t19, $[55] = zIndex, $[56] = t20) : t20 = $[56];\n  let t21;\n  $[57] !== comlink || $[58] !== t20 ? (t21 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SharedStateProvider, { comlink, children: t20 }), $[57] = comlink, $[58] = t20, $[59] = t21) : t21 = $[59];\n  let t22;\n  $[60] !== comlink || $[61] !== t21 ? (t22 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(PreviewSnapshotsProvider, { comlink, children: t21 }), $[60] = comlink, $[61] = t21, $[62] = t22) : t22 = $[62];\n  let t23;\n  $[63] !== comlink || $[64] !== elements || $[65] !== t22 ? (t23 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(SchemaProvider, { comlink, elements, children: t22 }), $[63] = comlink, $[64] = elements, $[65] = t22, $[66] = t23) : t23 = $[66];\n  let t24;\n  $[67] !== rootElement || $[68] !== t23 ? (t24 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.LayerProvider, { children: /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.PortalProvider, { element: rootElement, children: t23 }) }), $[67] = rootElement, $[68] = t23, $[69] = t24) : t24 = $[69];\n  let t25;\n  $[70] !== t12 || $[71] !== t24 ? (t25 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.ThemeProvider, { scheme: t12, theme: _sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.studioTheme, tone: \"transparent\", children: t24 }), $[70] = t12, $[71] = t24, $[72] = t25) : t25 = $[72];\n  let t26;\n  return $[73] !== comlink || $[74] !== t25 ? (t26 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(TelemetryProvider, { comlink, children: t25 }), $[73] = comlink, $[74] = t25, $[75] = t26) : t26 = $[75], t26;\n}, IS_MAC = typeof window < \"u\" && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform), MODIFIERS = {\n  alt: \"altKey\",\n  ctrl: \"ctrlKey\",\n  mod: IS_MAC ? \"metaKey\" : \"ctrlKey\",\n  shift: \"shiftKey\"\n};\nfunction isHotkey(keys, event) {\n  return keys.every((key) => MODIFIERS[key] ? event[MODIFIERS[key]] : event.key === key.toUpperCase());\n}\nfunction isAltKey(event) {\n  return event.key === \"Alt\";\n}\nfunction _temp$2(acc, prevId) {\n  return acc.filter((id) => id !== prevId);\n}\nfunction _temp2$1(enabled) {\n  return !enabled;\n}\nfunction _temp3(unsub) {\n  return unsub();\n}\nfunction _temp4(event) {\n  const target = event.target;\n  if (((0,_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.isHTMLAnchorElement)(target) || (0,_sanity_ui_visual_editing__WEBPACK_IMPORTED_MODULE_8__.isHTMLElement)(target) && target.closest(\"a\")) && event.altKey) {\n    event.preventDefault(), event.stopPropagation();\n    const newEvent = new MouseEvent(event.type, {\n      ...event,\n      altKey: !1,\n      bubbles: !0,\n      cancelable: !0\n    });\n    event.target?.dispatchEvent(newEvent);\n  }\n}\nfunction _temp5(enabled_0) {\n  return !enabled_0;\n}\nfunction _temp6(enabled_1) {\n  return !enabled_1;\n}\nfunction _temp7(enabled_2) {\n  return !enabled_2;\n}\nfunction _temp8(enabled_3) {\n  return !enabled_3;\n}\nfunction _temp9(element) {\n  return \"id\" in element.sanity ? [element.sanity.id] : [];\n}\nfunction _temp0(e_1) {\n  return e_1.activated || e_1.focused;\n}\nconst Refresh = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(4), {\n    comlink,\n    refresh\n  } = props, manualRefreshRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0), mutationRefreshRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(0);\n  let t0, t1;\n  return $[0] !== comlink || $[1] !== refresh ? (t0 = () => comlink.on(\"presentation/refresh\", (data) => {\n    if (data.source === \"manual\") {\n      clearTimeout(manualRefreshRef.current);\n      const promise = refresh(data);\n      if (promise === !1)\n        return;\n      comlink.post(\"visual-editing/refreshing\", data);\n      let timedOut = !1;\n      manualRefreshRef.current = window.setTimeout(() => {\n        comlink.post(\"visual-editing/refreshed\", data), timedOut = !0;\n      }, 3e3), promise?.finally?.(() => {\n        timedOut || (clearTimeout(manualRefreshRef.current), comlink.post(\"visual-editing/refreshed\", data));\n      });\n    } else if (data.source === \"mutation\") {\n      clearTimeout(mutationRefreshRef.current);\n      const promise_0 = refresh(data);\n      if (promise_0 === !1)\n        return;\n      comlink.post(\"visual-editing/refreshing\", data), mutationRefreshRef.current = window.setTimeout(() => {\n        const promise_1 = refresh(data);\n        promise_1 !== !1 && (comlink.post(\"visual-editing/refreshing\", data), promise_1?.finally?.(() => {\n          comlink.post(\"visual-editing/refreshed\", data);\n        }) || comlink.post(\"visual-editing/refreshed\", data));\n      }, 1e3), promise_0?.finally?.(() => {\n        comlink.post(\"visual-editing/refreshed\", data);\n      }) || comlink.post(\"visual-editing/refreshed\", data);\n    }\n  }), t1 = [comlink, refresh], $[0] = comlink, $[1] = refresh, $[2] = t0, $[3] = t1) : (t0 = $[2], t1 = $[3]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t0, t1), null;\n};\nfunction useComlink(t0) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(9), active = t0 === void 0 ? !0 : t0, [node, setNode] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(), [status, setStatus] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"idle\");\n  let t1, t2;\n  $[0] !== active ? (t1 = () => {\n    if (!active)\n      return;\n    const instance = (0,_sanity_comlink__WEBPACK_IMPORTED_MODULE_15__.createNode)({\n      name: \"visual-editing\",\n      connectTo: \"presentation\"\n    }, (0,_sanity_comlink__WEBPACK_IMPORTED_MODULE_15__.createNodeMachine)().provide({\n      actors: (0,_sanity_presentation_comlink__WEBPACK_IMPORTED_MODULE_16__.createCompatibilityActors)()\n    })), unsub = instance.onStatus(() => setStatus(\"connected\"), \"connected\");\n    setNode(instance);\n    const stop = instance.start();\n    return () => {\n      unsub(), stop(), setNode(void 0);\n    };\n  }, t2 = [active], $[0] = active, $[1] = t1, $[2] = t2) : (t1 = $[1], t2 = $[2]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t1, t2);\n  let t3, t4;\n  $[3] !== status ? (t3 = () => {\n    if (status === \"connected\")\n      return;\n    const controller = new AbortController();\n    return window.addEventListener(\"message\", _temp$1, {\n      signal: controller.signal\n    }), () => {\n      controller.abort();\n    };\n  }, t4 = [status], $[3] = status, $[4] = t3, $[5] = t4) : (t3 = $[4], t4 = $[5]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t3, t4);\n  let t5;\n  return $[6] !== node || $[7] !== status ? (t5 = [node, status], $[6] = node, $[7] = status, $[8] = t5) : t5 = $[8], t5;\n}\nfunction _temp$1(t0) {\n  const {\n    data,\n    origin\n  } = t0;\n  data && typeof data == \"object\" && \"domain\" in data && data.domain === \"sanity/channels\" && \"from\" in data && data.from === \"presentation\" && \"type\" in data && data.type === \"presentation/status\" && window.parent.postMessage({\n    domain: \"sanity/channels\",\n    type: \"visual-editing/status\",\n    data: {\n      origin: location.origin\n    }\n  }, origin);\n}\nfunction createSharedListener(comlink) {\n  const incomingConnection$ = new rxjs__WEBPACK_IMPORTED_MODULE_17__.ReplaySubject(1), incomingMutations$ = new rxjs__WEBPACK_IMPORTED_MODULE_17__.Subject();\n  return comlink.fetch(\"visual-editing/snapshot-welcome\", void 0, {\n    suppressWarnings: !0\n  }).then((data) => {\n    incomingConnection$.next(data.event);\n  }).catch(() => {\n  }), comlink.on(\"presentation/snapshot-event\", (data) => {\n    data.event.type === \"reconnect\" && incomingConnection$.next(data.event), data.event.type === \"mutation\" && incomingMutations$.next(data.event);\n  }), (0,rxjs__WEBPACK_IMPORTED_MODULE_17__.merge)(incomingConnection$, incomingMutations$);\n}\nfunction useDatasetMutator(comlink) {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(3);\n  let t0, t1;\n  $[0] !== comlink ? (t0 = () => {\n    if (!comlink)\n      return;\n    const listener = createSharedListener(comlink), datasetMutator = (0,_optimistic_index_js__WEBPACK_IMPORTED_MODULE_18__.createDatasetMutator)(comlink), mutator = (0,xstate__WEBPACK_IMPORTED_MODULE_19__.c)(datasetMutator, {\n      input: {\n        client: {\n          withConfig: _temp\n        },\n        sharedListener: listener\n      }\n    });\n    mutator.start();\n    const featuresFetch = new AbortController();\n    return comlink.fetch(\"visual-editing/features\", void 0, {\n      signal: featuresFetch.signal,\n      suppressWarnings: !0\n    }).then((data) => {\n      data.features.optimistic && (0,_chunks_es_context_js__WEBPACK_IMPORTED_MODULE_20__.setActor)(mutator);\n    }).catch(_temp2), () => {\n      mutator.stop(), featuresFetch.abort();\n    };\n  }, t1 = [comlink], $[0] = comlink, $[1] = t0, $[2] = t1) : (t0 = $[1], t1 = $[2]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t0, t1);\n}\nfunction _temp2() {\n  console.warn(\"[@sanity/visual-editing] Package version mismatch detected: Please update your Sanity studio to prevent potential compatibility issues.\");\n}\nfunction _temp() {\n}\nconst VisualEditing = (props) => {\n  const $ = (0,react_compiler_runtime__WEBPACK_IMPORTED_MODULE_1__.c)(23), {\n    components,\n    plugins,\n    history,\n    portal: t0,\n    refresh,\n    zIndex\n  } = props, portal = t0 === void 0 ? !0 : t0, [inFrame, setInFrame] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null), [inPopUp, setInPopUp] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  let t1, t2;\n  $[0] === Symbol.for(\"react.memo_cache_sentinel\") ? (t1 = () => {\n    setInFrame((0,_sanity_presentation_comlink__WEBPACK_IMPORTED_MODULE_16__.isMaybePreviewIframe)()), setInPopUp((0,_sanity_presentation_comlink__WEBPACK_IMPORTED_MODULE_16__.isMaybePreviewWindow)());\n  }, t2 = [], $[0] = t1, $[1] = t2) : (t1 = $[0], t2 = $[1]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t1, t2);\n  const [portalElement, setPortalElement] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n  let t3, t4;\n  $[2] !== portal ? (t3 = () => {\n    if (portal === !1)\n      return;\n    const node = document.createElement(\"sanity-visual-editing\");\n    return document.documentElement.appendChild(node), setPortalElement(node), () => {\n      setPortalElement(null), document.documentElement.contains(node) && document.documentElement.removeChild(node);\n    };\n  }, t4 = [portal], $[2] = portal, $[3] = t3, $[4] = t4) : (t3 = $[3], t4 = $[4]), (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(t3, t4);\n  const [comlink, comlinkStatus] = useComlink(inFrame === !0 || inPopUp === !0);\n  useDatasetMutator(comlinkStatus === \"connected\" ? comlink : void 0);\n  let t5;\n  $[5] !== comlink || $[6] !== comlinkStatus || $[7] !== components || $[8] !== inFrame || $[9] !== inPopUp || $[10] !== plugins || $[11] !== zIndex ? (t5 = inFrame !== null && inPopUp !== null && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Overlays, { comlink, comlinkStatus, componentResolver: components, plugins, inFrame, inPopUp, zIndex }), $[5] = comlink, $[6] = comlinkStatus, $[7] = components, $[8] = inFrame, $[9] = inPopUp, $[10] = plugins, $[11] = zIndex, $[12] = t5) : t5 = $[12];\n  let t6;\n  $[13] !== comlink || $[14] !== history || $[15] !== refresh ? (t6 = comlink && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(History, { comlink, history }),\n    /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Meta, { comlink }),\n    refresh && /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Refresh, { comlink, refresh })\n  ] }), $[13] = comlink, $[14] = history, $[15] = refresh, $[16] = t6) : t6 = $[16];\n  let t7;\n  $[17] !== t5 || $[18] !== t6 ? (t7 = /* @__PURE__ */ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, { children: [\n    t5,\n    t6\n  ] }), $[17] = t5, $[18] = t6, $[19] = t7) : t7 = $[19];\n  const children = t7;\n  if (portal === !1 || !portalElement)\n    return children;\n  let t8;\n  return $[20] !== children || $[21] !== portalElement ? (t8 = (0,react_dom__WEBPACK_IMPORTED_MODULE_3__.createPortal)(children, portalElement), $[20] = children, $[21] = portalElement, $[22] = t8) : t8 = $[22], t8;\n};\nVisualEditing.displayName = \"VisualEditing\";\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC1zYW5pdHkvbm9kZV9tb2R1bGVzL0BzYW5pdHkvdmlzdWFsLWVkaXRpbmcvZGlzdC9yZWFjdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3RDtBQUNiO0FBQzBFO0FBQ2dGO0FBQzVKO0FBQ2tEO0FBQ3NMO0FBQ3RPO0FBQzRMO0FBQ3BHO0FBQy9EO0FBQ2hCO0FBQzhHO0FBQ2lFO0FBQzdKO0FBQ1Q7QUFDSTtBQUNUO0FBQ1E7QUFDM0I7QUFDZTtBQUNFO0FBQ0Q7QUFDUztBQUNDO0FBQy9EO0FBQ0EsWUFBWSx5REFBQztBQUNiO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRyw0R0FBNEcsZ0RBQVM7QUFDeEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxHQUFHLDJHQUEyRyxnREFBUztBQUN2SCxDQUFDO0FBQ0QsWUFBWSx5REFBQztBQUNiO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRyxrRkFBa0YsZ0RBQVM7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseURBQUM7QUFDYjtBQUNBLElBQUksRUFBRSxxRUFBWTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsVUFBVSxFQUFFLHFGQUE0QjtBQUN4QztBQUNBO0FBQ0EsVUFBVSxFQUFF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QUFDckQsb0JBQW9CLHNEQUFHLFNBQVMsU0FBUztBQUN6QywrQkFBK0Isc0RBQUcsWUFBWSxrQkFBa0I7QUFDaEUsS0FBSztBQUNMO0FBQ0EsdURBQXVELHVEQUFJLENBQUMsdURBQVEsSUFBSTtBQUN4RTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStELHVEQUFZO0FBQzNFO0FBQ0E7QUFVRTtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbm91cmVsZGlubWFobW91ZC9mcmVzaGNhcnQvZGVwbG95L25vZGVfbW9kdWxlcy9uZXh0LXNhbml0eS9ub2RlX21vZHVsZXMvQHNhbml0eS92aXN1YWwtZWRpdGluZy9kaXN0L3JlYWN0L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGpzeCwganN4cywgRnJhZ21lbnQgfSBmcm9tIFwicmVhY3QvanN4LXJ1bnRpbWVcIjtcbmltcG9ydCB7IGMgfSBmcm9tIFwicmVhY3QtY29tcGlsZXItcnVudGltZVwiO1xuaW1wb3J0IHsgY3JlYXRlQ29tcGF0aWJpbGl0eUFjdG9ycywgaXNNYXliZVByZXZpZXdJZnJhbWUsIGlzTWF5YmVQcmV2aWV3V2luZG93IH0gZnJvbSBcIkBzYW5pdHkvcHJlc2VudGF0aW9uLWNvbWxpbmtcIjtcbmltcG9ydCB7IHVzZUVmZmVjdCwgY3JlYXRlQ29udGV4dCwgdXNlQ29udGV4dCwgdXNlU3RhdGUsIG1lbW8sIHVzZVJlZiwgdXNlSWQsIEZyYWdtZW50IGFzIEZyYWdtZW50JDEsIGlzVmFsaWRFbGVtZW50LCB1c2VTeW5jRXh0ZXJuYWxTdG9yZSwgdXNlRGVmZXJyZWRWYWx1ZSwgdXNlUmVkdWNlciwgdXNlQ2FsbGJhY2sgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGNyZWF0ZVBvcnRhbCB9IGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCB7IGNyZWF0ZUVkaXRVcmwsIHN0dWRpb1BhdGgsIGdldERyYWZ0SWQsIGdldFB1Ymxpc2hlZElkIH0gZnJvbSBcIkBzYW5pdHkvY2xpZW50L2NzbVwiO1xuaW1wb3J0IHsgTWVudUdyb3VwLCBNZW51RGl2aWRlciwgTWVudUl0ZW0sIEJveCwgVGV4dCwgU3Bpbm5lciwgU3RhY2ssIEZsZXgsIE1lbnUsIFBvcG92ZXIsIEJ1dHRvbiwgQ2FyZCwgdXNlUHJlZmVyc0RhcmssIHVzZVRoZW1lX3YyLCBIb3RrZXlzLCBMYXllclByb3ZpZGVyLCBQb3J0YWxQcm92aWRlciwgVGhlbWVQcm92aWRlciwgc3R1ZGlvVGhlbWUsIGlzSFRNTEFuY2hvckVsZW1lbnQsIGlzSFRNTEVsZW1lbnQgfSBmcm9tIFwiQHNhbml0eS91aS9fdmlzdWFsLWVkaXRpbmdcIjtcbmltcG9ydCB7IHN0eWxlZCB9IGZyb20gXCJzdHlsZWQtY29tcG9uZW50c1wiO1xuaW1wb3J0IHsgdXNlRG9jdW1lbnRzLCBnZXRBcnJheUl0ZW1LZXlBbmRQYXJlbnRQYXRoLCBnZXQsIGdldEFycmF5TW92ZVBhdGNoZXMsIGdldEFycmF5SW5zZXJ0UGF0Y2hlcywgZ2V0QXJyYXlEdXBsaWNhdGVQYXRjaGVzLCBnZXRBcnJheVJlbW92ZVBhdGNoZXMsIHVzZU9wdGltaXN0aWNBY3RvclJlYWR5LCB1c2VPcHRpbWlzdGljQWN0b3IgfSBmcm9tIFwiLi4vX2NodW5rcy1lcy9tdXRhdGlvbnMuanNcIjtcbmltcG9ydCB7IHY0LCBTaGFyZWRTdGF0ZUNvbnRleHQsIGNyZWF0ZU92ZXJsYXlDb250cm9sbGVyLCBzYW5pdHlOb2Rlc0V4aXN0SW5TYW1lQXJyYXkgfSBmcm9tIFwiLi4vX2NodW5rcy1lcy9TaGFyZWRTdGF0ZUNvbnRleHQuanNcIjtcbmltcG9ydCB7IHVzZU9wdGltaXN0aWMgfSBmcm9tIFwiLi4vX2NodW5rcy1lcy9TaGFyZWRTdGF0ZUNvbnRleHQuanNcIjtcbmltcG9ydCB7IGF0LCByZW1vdmUsIGluc2VydCB9IGZyb20gXCJAc2FuaXR5L211dGF0ZVwiO1xuaW1wb3J0IHsgZ2V0Tm9kZUljb24sIEluc2VydE1lbnUsIFBvcG92ZXJQb3J0YWwsIHVzZVRlbGVtZXRyeSwgUG9wb3ZlckJhY2tncm91bmQsIFBvaW50ZXJFdmVudHMsIFRlbGVtZXRyeUNvbnRleHQsIGV2ZW50cyB9IGZyb20gXCIuLi9fY2h1bmtzLWVzL1BvaW50ZXJFdmVudHMuanNcIjtcbmltcG9ydCB7IEluc2VydEFib3ZlSWNvbiwgSW5zZXJ0QmVsb3dJY29uLCBDb3B5SWNvbiwgUmVtb3ZlSWNvbiwgU29ydEljb24sIFB1Ymxpc2hJY29uLCBBcnJvd1VwSWNvbiwgQXJyb3dEb3duSWNvbiwgVW5wdWJsaXNoSWNvbiwgRHJhZ0hhbmRsZUljb24sIFBsdWdJY29uLCBFbGxpcHNpc1ZlcnRpY2FsSWNvbiwgRG9jdW1lbnRJY29uLCBFeHBhbmRJY29uIH0gZnJvbSBcIkBzYW5pdHkvaWNvbnNcIjtcbmltcG9ydCB7IE1lbnVCdXR0b24sIE1lbnVEaXZpZGVyIGFzIE1lbnVEaXZpZGVyJDEgfSBmcm9tIFwiQHNhbml0eS91aVwiO1xuaW1wb3J0IHsgcGF0aFRvVXJsU3RyaW5nIH0gZnJvbSBcIkBzYW5pdHkvdmlzdWFsLWVkaXRpbmctY3NtXCI7XG5pbXBvcnQgeyBjcmVhdGVEYXRhQXR0cmlidXRlIH0gZnJvbSBcIkBzYW5pdHkvdmlzdWFsLWVkaXRpbmctY3NtXCI7XG5pbXBvcnQgc2Nyb2xsSW50b1ZpZXcgZnJvbSBcInNjcm9sbC1pbnRvLXZpZXctaWYtbmVlZGVkXCI7XG5pbXBvcnQgeyBjcmVhdGVOb2RlLCBjcmVhdGVOb2RlTWFjaGluZSB9IGZyb20gXCJAc2FuaXR5L2NvbWxpbmtcIjtcbmltcG9ydCB7IGNyZWF0ZUFjdG9yIH0gZnJvbSBcInhzdGF0ZVwiO1xuaW1wb3J0IHsgc2V0QWN0b3IgfSBmcm9tIFwiLi4vX2NodW5rcy1lcy9jb250ZXh0LmpzXCI7XG5pbXBvcnQgeyBlbXB0eUFjdG9yIH0gZnJvbSBcIi4uL19jaHVua3MtZXMvY29udGV4dC5qc1wiO1xuaW1wb3J0IHsgUmVwbGF5U3ViamVjdCwgU3ViamVjdCwgbWVyZ2UgfSBmcm9tIFwicnhqc1wiO1xuaW1wb3J0IHsgY3JlYXRlRGF0YXNldE11dGF0b3IgfSBmcm9tIFwiLi4vb3B0aW1pc3RpYy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgY3JlYXRlRG9jdW1lbnRNdXRhdG9yIH0gZnJvbSBcIi4uL29wdGltaXN0aWMvaW5kZXguanNcIjtcbmNvbnN0IEhpc3RvcnkgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgJCA9IGMoOCksIHtcbiAgICBjb21saW5rLFxuICAgIGhpc3RvcnlcbiAgfSA9IHByb3BzO1xuICBsZXQgdDAsIHQxO1xuICAkWzBdICE9PSBjb21saW5rIHx8ICRbMV0gIT09IGhpc3RvcnkgPyAodDAgPSAoKSA9PiBjb21saW5rPy5vbihcInByZXNlbnRhdGlvbi9uYXZpZ2F0ZVwiLCAoZGF0YSkgPT4ge1xuICAgIGhpc3Rvcnk/LnVwZGF0ZShkYXRhKTtcbiAgfSksIHQxID0gW2NvbWxpbmssIGhpc3RvcnldLCAkWzBdID0gY29tbGluaywgJFsxXSA9IGhpc3RvcnksICRbMl0gPSB0MCwgJFszXSA9IHQxKSA6ICh0MCA9ICRbMl0sIHQxID0gJFszXSksIHVzZUVmZmVjdCh0MCwgdDEpO1xuICBsZXQgdDIsIHQzO1xuICByZXR1cm4gJFs0XSAhPT0gY29tbGluayB8fCAkWzVdICE9PSBoaXN0b3J5ID8gKHQyID0gKCkgPT4ge1xuICAgIGlmIChoaXN0b3J5KVxuICAgICAgcmV0dXJuIGhpc3Rvcnkuc3Vic2NyaWJlKCh1cGRhdGUpID0+IHtcbiAgICAgICAgdXBkYXRlLnRpdGxlID0gdXBkYXRlLnRpdGxlIHx8IGRvY3VtZW50LnRpdGxlLCBjb21saW5rPy5wb3N0KFwidmlzdWFsLWVkaXRpbmcvbmF2aWdhdGVcIiwgdXBkYXRlKTtcbiAgICAgIH0pO1xuICB9LCB0MyA9IFtjb21saW5rLCBoaXN0b3J5XSwgJFs0XSA9IGNvbWxpbmssICRbNV0gPSBoaXN0b3J5LCAkWzZdID0gdDIsICRbN10gPSB0MykgOiAodDIgPSAkWzZdLCB0MyA9ICRbN10pLCB1c2VFZmZlY3QodDIsIHQzKSwgbnVsbDtcbn0sIE1ldGEgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgJCA9IGMoMyksIHtcbiAgICBjb21saW5rXG4gIH0gPSBwcm9wcztcbiAgbGV0IHQwLCB0MTtcbiAgcmV0dXJuICRbMF0gIT09IGNvbWxpbmsgPyAodDAgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2VuZE1ldGEgPSAoKSA9PiB7XG4gICAgICBjb21saW5rLnBvc3QoXCJ2aXN1YWwtZWRpdGluZy9tZXRhXCIsIHtcbiAgICAgICAgdGl0bGU6IGRvY3VtZW50LnRpdGxlXG4gICAgICB9KTtcbiAgICB9LCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCh0MikgPT4ge1xuICAgICAgY29uc3QgW211dGF0aW9uXSA9IHQyO1xuICAgICAgbXV0YXRpb24udGFyZ2V0Lm5vZGVOYW1lID09PSBcIlRJVExFXCIgJiYgc2VuZE1ldGEoKTtcbiAgICB9KTtcbiAgICByZXR1cm4gb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5oZWFkLCB7XG4gICAgICBzdWJ0cmVlOiAhMCxcbiAgICAgIGNoYXJhY3RlckRhdGE6ICEwLFxuICAgICAgY2hpbGRMaXN0OiAhMFxuICAgIH0pLCBzZW5kTWV0YSgpLCAoKSA9PiBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gIH0sIHQxID0gW2NvbWxpbmtdLCAkWzBdID0gY29tbGluaywgJFsxXSA9IHQwLCAkWzJdID0gdDEpIDogKHQwID0gJFsxXSwgdDEgPSAkWzJdKSwgdXNlRWZmZWN0KHQwLCB0MSksIG51bGw7XG59O1xuZnVuY3Rpb24gZ2V0UmVmZXJlbmNlTm9kZUFuZEluc2VydFBvc2l0aW9uKHBvc2l0aW9uKSB7XG4gIGlmIChwb3NpdGlvbikge1xuICAgIGNvbnN0IHtcbiAgICAgIHRvcCxcbiAgICAgIHJpZ2h0LFxuICAgICAgYm90dG9tLFxuICAgICAgbGVmdFxuICAgIH0gPSBwb3NpdGlvbjtcbiAgICBpZiAobGVmdCB8fCB0b3ApXG4gICAgICByZXR1cm4ge1xuICAgICAgICBub2RlOiAobGVmdCA/PyB0b3ApLnNhbml0eSxcbiAgICAgICAgcG9zaXRpb246IFwiYWZ0ZXJcIlxuICAgICAgfTtcbiAgICBpZiAocmlnaHQgfHwgYm90dG9tKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbm9kZTogKHJpZ2h0ID8/IGJvdHRvbSkuc2FuaXR5LFxuICAgICAgICBwb3NpdGlvbjogXCJiZWZvcmVcIlxuICAgICAgfTtcbiAgfVxufVxuZnVuY3Rpb24gdXNlRHJhZ0VuZEV2ZW50cygpIHtcbiAgY29uc3QgJCA9IGMoNCksIHtcbiAgICBnZXREb2N1bWVudFxuICB9ID0gdXNlRG9jdW1lbnRzKCk7XG4gIGxldCB0MCwgdDE7XG4gICRbMF0gIT09IGdldERvY3VtZW50ID8gKHQwID0gKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZXIgPSAoZSkgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBpbnNlcnRQb3NpdGlvbixcbiAgICAgICAgdGFyZ2V0LFxuICAgICAgICBwcmV2ZW50SW5zZXJ0RGVmYXVsdFxuICAgICAgfSA9IGUuZGV0YWlsO1xuICAgICAgaWYgKHByZXZlbnRJbnNlcnREZWZhdWx0KVxuICAgICAgICByZXR1cm47XG4gICAgICBjb25zdCByZWZlcmVuY2UgPSBnZXRSZWZlcmVuY2VOb2RlQW5kSW5zZXJ0UG9zaXRpb24oaW5zZXJ0UG9zaXRpb24pO1xuICAgICAgaWYgKHJlZmVyZW5jZSkge1xuICAgICAgICBjb25zdCBkb2MgPSBnZXREb2N1bWVudCh0YXJnZXQuaWQpLCB7XG4gICAgICAgICAgbm9kZSxcbiAgICAgICAgICBwb3NpdGlvblxuICAgICAgICB9ID0gcmVmZXJlbmNlLCB7XG4gICAgICAgICAga2V5OiB0YXJnZXRLZXksXG4gICAgICAgICAgaGFzRXhwbGljaXRLZXlcbiAgICAgICAgfSA9IGdldEFycmF5SXRlbUtleUFuZFBhcmVudFBhdGgodGFyZ2V0KSwge1xuICAgICAgICAgIHBhdGg6IGFycmF5UGF0aCxcbiAgICAgICAgICBrZXk6IHJlZmVyZW5jZUl0ZW1LZXlcbiAgICAgICAgfSA9IGdldEFycmF5SXRlbUtleUFuZFBhcmVudFBhdGgobm9kZSk7XG4gICAgICAgIGFycmF5UGF0aCAmJiByZWZlcmVuY2VJdGVtS2V5ICYmIHJlZmVyZW5jZUl0ZW1LZXkgIT09IHRhcmdldEtleSAmJiBkb2MucGF0Y2goYXN5bmMgKHQyMikgPT4ge1xuICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGdldFNuYXBzaG90XG4gICAgICAgICAgfSA9IHQyMiwgc25hcHNob3QgPSBhd2FpdCBnZXRTbmFwc2hvdCgpLCBlbGVtZW50VmFsdWUgPSBnZXQoc25hcHNob3QsIHRhcmdldC5wYXRoKTtcbiAgICAgICAgICByZXR1cm4gaGFzRXhwbGljaXRLZXkgPyBbYXQoYXJyYXlQYXRoLCByZW1vdmUoe1xuICAgICAgICAgICAgX2tleTogdGFyZ2V0S2V5XG4gICAgICAgICAgfSkpLCBhdChhcnJheVBhdGgsIGluc2VydChlbGVtZW50VmFsdWUsIHBvc2l0aW9uLCB7XG4gICAgICAgICAgICBfa2V5OiByZWZlcmVuY2VJdGVtS2V5XG4gICAgICAgICAgfSkpXSA6IFthdChhcnJheVBhdGgsIHJlbW92ZSh+fnRhcmdldEtleSkpLCBhdChhcnJheVBhdGgsIGluc2VydChlbGVtZW50VmFsdWUsIHBvc2l0aW9uLCByZWZlcmVuY2VJdGVtS2V5ID4gdGFyZ2V0S2V5ID8gfn5yZWZlcmVuY2VJdGVtS2V5IC0gMSA6IH5+cmVmZXJlbmNlSXRlbUtleSkpXTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzYW5pdHkvZHJhZ0VuZFwiLCBoYW5kbGVyKSwgKCkgPT4ge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzYW5pdHkvZHJhZ0VuZFwiLCBoYW5kbGVyKTtcbiAgICB9O1xuICB9LCB0MSA9IFtnZXREb2N1bWVudF0sICRbMF0gPSBnZXREb2N1bWVudCwgJFsxXSA9IHQwLCAkWzJdID0gdDEpIDogKHQwID0gJFsxXSwgdDEgPSAkWzJdKSwgdXNlRWZmZWN0KHQwLCB0MSk7XG4gIGNvbnN0IGRpc3BhdGNoRHJhZ0VuZEV2ZW50ID0gX3RlbXAkOTtcbiAgbGV0IHQyO1xuICByZXR1cm4gJFszXSA9PT0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDIgPSB7XG4gICAgZGlzcGF0Y2hEcmFnRW5kRXZlbnRcbiAgfSwgJFszXSA9IHQyKSA6IHQyID0gJFszXSwgdDI7XG59XG5mdW5jdGlvbiBfdGVtcCQ5KGV2ZW50KSB7XG4gIGNvbnN0IGN1c3RvbUV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KFwic2FuaXR5L2RyYWdFbmRcIiwge1xuICAgIGRldGFpbDogZXZlbnQsXG4gICAgY2FuY2VsYWJsZTogITBcbiAgfSk7XG4gIHdpbmRvdy5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KTtcbn1cbmNvbnN0IFNjaGVtYUNvbnRleHQgPSBjcmVhdGVDb250ZXh0KG51bGwpO1xuZnVuY3Rpb24gdXNlU2NoZW1hKCkge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChTY2hlbWFDb250ZXh0KTtcbiAgaWYgKCFjb250ZXh0KVxuICAgIHRocm93IG5ldyBFcnJvcihcIlNjaGVtYSBjb250ZXh0IGlzIG1pc3NpbmdcIik7XG4gIHJldHVybiBjb250ZXh0O1xufVxuZnVuY3Rpb24gZ2V0QXJyYXlSZW1vdmVBY3Rpb24obm9kZSwgZG9jKSB7XG4gIGlmICghbm9kZS50eXBlKSB0aHJvdyBuZXcgRXJyb3IoXCJOb2RlIHR5cGUgaXMgbWlzc2luZ1wiKTtcbiAgcmV0dXJuICgpID0+IGRvYy5wYXRjaChhc3luYyAoe1xuICAgIGdldFNuYXBzaG90XG4gIH0pID0+IGdldEFycmF5UmVtb3ZlUGF0Y2hlcyhub2RlLCBhd2FpdCBnZXRTbmFwc2hvdCgpKSk7XG59XG5mdW5jdGlvbiBnZXRBcnJheUluc2VydEFjdGlvbihub2RlLCBkb2MsIGluc2VydFR5cGUsIHBvc2l0aW9uKSB7XG4gIGlmICghbm9kZS50eXBlKSB0aHJvdyBuZXcgRXJyb3IoXCJOb2RlIHR5cGUgaXMgbWlzc2luZ1wiKTtcbiAgcmV0dXJuICgpID0+IGRvYy5wYXRjaCgoKSA9PiBnZXRBcnJheUluc2VydFBhdGNoZXMobm9kZSwgaW5zZXJ0VHlwZSwgcG9zaXRpb24pKTtcbn1cbmZ1bmN0aW9uIGdldER1cGxpY2F0ZUFjdGlvbihub2RlLCBkb2MpIHtcbiAgaWYgKCFub2RlLnR5cGUpIHRocm93IG5ldyBFcnJvcihcIk5vZGUgdHlwZSBpcyBtaXNzaW5nXCIpO1xuICByZXR1cm4gKCkgPT4gZG9jLnBhdGNoKGFzeW5jICh7XG4gICAgZ2V0U25hcHNob3RcbiAgfSkgPT4gZ2V0QXJyYXlEdXBsaWNhdGVQYXRjaGVzKG5vZGUsIGF3YWl0IGdldFNuYXBzaG90KCkpKTtcbn1cbmZ1bmN0aW9uIGdldENvbnRleHRNZW51SXRlbXMoY29udGV4dCkge1xuICBjb25zdCB7XG4gICAgbm9kZSxcbiAgICBmaWVsZCxcbiAgICBwYXJlbnQsXG4gICAgZG9jXG4gIH0gPSBjb250ZXh0O1xuICByZXR1cm4gZmllbGQ/LnR5cGUgPT09IFwiYXJyYXlJdGVtXCIgPyBnZXRDb250ZXh0TWVudUFycmF5SXRlbXMoe1xuICAgIG5vZGUsXG4gICAgZmllbGQsXG4gICAgZG9jXG4gIH0pIDogcGFyZW50Py50eXBlID09PSBcInVuaW9uXCIgPyBnZXRDb250ZXh0TWVudVVuaW9uSXRlbXMoe1xuICAgIG5vZGUsXG4gICAgcGFyZW50LFxuICAgIGRvY1xuICB9KSA6IFByb21pc2UucmVzb2x2ZShbXSk7XG59XG5mdW5jdGlvbiBnZXREdXBsaWNhdGVJdGVtKGNvbnRleHQpIHtcbiAgY29uc3Qge1xuICAgIG5vZGUsXG4gICAgZG9jXG4gIH0gPSBjb250ZXh0O1xuICByZXR1cm4gZG9jID8gW3tcbiAgICB0eXBlOiBcImFjdGlvblwiLFxuICAgIGxhYmVsOiBcIkR1cGxpY2F0ZVwiLFxuICAgIGljb246IENvcHlJY29uLFxuICAgIGFjdGlvbjogZ2V0RHVwbGljYXRlQWN0aW9uKG5vZGUsIGRvYyksXG4gICAgdGVsZW1ldHJ5RXZlbnQ6IFwiVmlzdWFsIEVkaXRpbmcgQ29udGV4dCBNZW51IEl0ZW0gRHVwbGljYXRlZFwiXG4gIH1dIDogW107XG59XG5mdW5jdGlvbiBnZXRSZW1vdmVJdGVtcyhjb250ZXh0KSB7XG4gIGNvbnN0IHtcbiAgICBub2RlLFxuICAgIGRvY1xuICB9ID0gY29udGV4dDtcbiAgcmV0dXJuIGRvYyA/IFt7XG4gICAgdHlwZTogXCJhY3Rpb25cIixcbiAgICBsYWJlbDogXCJSZW1vdmVcIixcbiAgICBpY29uOiBSZW1vdmVJY29uLFxuICAgIGFjdGlvbjogZ2V0QXJyYXlSZW1vdmVBY3Rpb24obm9kZSwgZG9jKSxcbiAgICB0ZWxlbWV0cnlFdmVudDogXCJWaXN1YWwgRWRpdGluZyBDb250ZXh0IE1lbnUgSXRlbSBSZW1vdmVkXCJcbiAgfV0gOiBbXTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldE1vdmVJdGVtcyhjb250ZXh0LCB3aXRoRGl2aWRlciA9ICEwKSB7XG4gIGNvbnN0IHtcbiAgICBub2RlLFxuICAgIGRvY1xuICB9ID0gY29udGV4dDtcbiAgaWYgKCFkb2MpIHJldHVybiBbXTtcbiAgY29uc3QgaXRlbXMgPSBbXSwgZ3JvdXBJdGVtcyA9IFtdLCBbbW92ZVVwUGF0Y2hlcywgbW92ZURvd25QYXRjaGVzLCBtb3ZlRmlyc3RQYXRjaGVzLCBtb3ZlTGFzdFBhdGNoZXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW2dldEFycmF5TW92ZVBhdGNoZXMobm9kZSwgZG9jLCBcInByZXZpb3VzXCIpLCBnZXRBcnJheU1vdmVQYXRjaGVzKG5vZGUsIGRvYywgXCJuZXh0XCIpLCBnZXRBcnJheU1vdmVQYXRjaGVzKG5vZGUsIGRvYywgXCJmaXJzdFwiKSwgZ2V0QXJyYXlNb3ZlUGF0Y2hlcyhub2RlLCBkb2MsIFwibGFzdFwiKV0pO1xuICByZXR1cm4gbW92ZUZpcnN0UGF0Y2hlcy5sZW5ndGggJiYgZ3JvdXBJdGVtcy5wdXNoKHtcbiAgICB0eXBlOiBcImFjdGlvblwiLFxuICAgIGxhYmVsOiBcIlRvIHRvcFwiLFxuICAgIGljb246IFB1Ymxpc2hJY29uLFxuICAgIGFjdGlvbjogKCkgPT4gZG9jLnBhdGNoKG1vdmVGaXJzdFBhdGNoZXMpLFxuICAgIHRlbGVtZXRyeUV2ZW50OiBcIlZpc3VhbCBFZGl0aW5nIENvbnRleHQgTWVudSBJdGVtIE1vdmVkXCJcbiAgfSksIG1vdmVVcFBhdGNoZXMubGVuZ3RoICYmIGdyb3VwSXRlbXMucHVzaCh7XG4gICAgdHlwZTogXCJhY3Rpb25cIixcbiAgICBsYWJlbDogXCJVcFwiLFxuICAgIGljb246IEFycm93VXBJY29uLFxuICAgIGFjdGlvbjogKCkgPT4gZG9jLnBhdGNoKG1vdmVVcFBhdGNoZXMpLFxuICAgIHRlbGVtZXRyeUV2ZW50OiBcIlZpc3VhbCBFZGl0aW5nIENvbnRleHQgTWVudSBJdGVtIE1vdmVkXCJcbiAgfSksIG1vdmVEb3duUGF0Y2hlcy5sZW5ndGggJiYgZ3JvdXBJdGVtcy5wdXNoKHtcbiAgICB0eXBlOiBcImFjdGlvblwiLFxuICAgIGxhYmVsOiBcIkRvd25cIixcbiAgICBpY29uOiBBcnJvd0Rvd25JY29uLFxuICAgIGFjdGlvbjogKCkgPT4gZG9jLnBhdGNoKG1vdmVEb3duUGF0Y2hlcyksXG4gICAgdGVsZW1ldHJ5RXZlbnQ6IFwiVmlzdWFsIEVkaXRpbmcgQ29udGV4dCBNZW51IEl0ZW0gTW92ZWRcIlxuICB9KSwgbW92ZUxhc3RQYXRjaGVzLmxlbmd0aCAmJiBncm91cEl0ZW1zLnB1c2goe1xuICAgIHR5cGU6IFwiYWN0aW9uXCIsXG4gICAgbGFiZWw6IFwiVG8gYm90dG9tXCIsXG4gICAgaWNvbjogVW5wdWJsaXNoSWNvbixcbiAgICBhY3Rpb246ICgpID0+IGRvYy5wYXRjaChtb3ZlTGFzdFBhdGNoZXMpLFxuICAgIHRlbGVtZXRyeUV2ZW50OiBcIlZpc3VhbCBFZGl0aW5nIENvbnRleHQgTWVudSBJdGVtIE1vdmVkXCJcbiAgfSksIGdyb3VwSXRlbXMubGVuZ3RoICYmIChpdGVtcy5wdXNoKHtcbiAgICB0eXBlOiBcImdyb3VwXCIsXG4gICAgbGFiZWw6IFwiTW92ZVwiLFxuICAgIGljb246IFNvcnRJY29uLFxuICAgIGl0ZW1zOiBncm91cEl0ZW1zXG4gIH0pLCB3aXRoRGl2aWRlciAmJiBpdGVtcy5wdXNoKHtcbiAgICB0eXBlOiBcImRpdmlkZXJcIlxuICB9KSksIGl0ZW1zO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0Q29udGV4dE1lbnVBcnJheUl0ZW1zKGNvbnRleHQpIHtcbiAgY29uc3Qge1xuICAgIG5vZGUsXG4gICAgZmllbGQsXG4gICAgZG9jXG4gIH0gPSBjb250ZXh0LCBpdGVtcyA9IFtdO1xuICByZXR1cm4gaXRlbXMucHVzaCguLi5nZXREdXBsaWNhdGVJdGVtKGNvbnRleHQpKSwgaXRlbXMucHVzaCguLi5nZXRSZW1vdmVJdGVtcyhjb250ZXh0KSksIGl0ZW1zLnB1c2goLi4uYXdhaXQgZ2V0TW92ZUl0ZW1zKGNvbnRleHQpKSwgaXRlbXMucHVzaCh7XG4gICAgdHlwZTogXCJhY3Rpb25cIixcbiAgICBsYWJlbDogXCJJbnNlcnQgYmVmb3JlXCIsXG4gICAgaWNvbjogSW5zZXJ0QWJvdmVJY29uLFxuICAgIGFjdGlvbjogZ2V0QXJyYXlJbnNlcnRBY3Rpb24obm9kZSwgZG9jLCBmaWVsZC5uYW1lLCBcImJlZm9yZVwiKSxcbiAgICB0ZWxlbWV0cnlFdmVudDogXCJWaXN1YWwgRWRpdGluZyBDb250ZXh0IE1lbnUgSXRlbSBJbnNlcnRlZFwiXG4gIH0pLCBpdGVtcy5wdXNoKHtcbiAgICB0eXBlOiBcImFjdGlvblwiLFxuICAgIGxhYmVsOiBcIkluc2VydCBhZnRlclwiLFxuICAgIGljb246IEluc2VydEJlbG93SWNvbixcbiAgICBhY3Rpb246IGdldEFycmF5SW5zZXJ0QWN0aW9uKG5vZGUsIGRvYywgZmllbGQubmFtZSwgXCJhZnRlclwiKSxcbiAgICB0ZWxlbWV0cnlFdmVudDogXCJWaXN1YWwgRWRpdGluZyBDb250ZXh0IE1lbnUgSXRlbSBJbnNlcnRlZFwiXG4gIH0pLCBpdGVtcztcbn1cbmNvbnN0IEluc2VydE1lbnVXcmFwcGVyID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0ICQgPSBjKDEyKSwge1xuICAgIGxhYmVsLFxuICAgIHBhcmVudCxcbiAgICB3aWR0aCxcbiAgICBvblNlbGVjdCxcbiAgICBib3VuZGFyeUVsZW1lbnRcbiAgfSA9IHByb3BzO1xuICBsZXQgdDA7XG4gICRbMF0gPT09IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vX2NhY2hlX3NlbnRpbmVsXCIpID8gKHQwID0gW1wibGVmdC1zdGFydFwiLCBcInJpZ2h0XCIsIFwibGVmdFwiLCBcInJpZ2h0LWVuZFwiLCBcImxlZnQtZW5kXCIsIFwiYm90dG9tXCIsIFwidG9wXCJdLCAkWzBdID0gdDApIDogdDAgPSAkWzBdO1xuICBsZXQgdDE7XG4gICRbMV0gPT09IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vX2NhY2hlX3NlbnRpbmVsXCIpID8gKHQxID0gWzQsIDQsIDQsIDRdLCAkWzFdID0gdDEpIDogdDEgPSAkWzFdO1xuICBsZXQgdDI7XG4gICRbMl0gIT09IGJvdW5kYXJ5RWxlbWVudCB8fCAkWzNdICE9PSB3aWR0aCA/ICh0MiA9IHtcbiAgICBhcnJvdzogITEsXG4gICAgY29uc3RyYWluU2l6ZTogITAsXG4gICAgZmxvYXRpbmdCb3VuZGFyeTogYm91bmRhcnlFbGVtZW50LFxuICAgIHBhZGRpbmc6IDAsXG4gICAgcGxhY2VtZW50OiBcInJpZ2h0LXN0YXJ0XCIsXG4gICAgZmFsbGJhY2tQbGFjZW1lbnRzOiB0MCxcbiAgICBwcmV2ZW50T3ZlcmZsb3c6ICEwLFxuICAgIHdpZHRoLFxuICAgIF9fdW5zdGFibGVfbWFyZ2luczogdDFcbiAgfSwgJFsyXSA9IGJvdW5kYXJ5RWxlbWVudCwgJFszXSA9IHdpZHRoLCAkWzRdID0gdDIpIDogdDIgPSAkWzRdO1xuICBsZXQgdDM7XG4gICRbNV0gIT09IG9uU2VsZWN0IHx8ICRbNl0gIT09IHBhcmVudCA/ICh0MyA9IC8qIEBfX1BVUkVfXyAqLyBqc3goSW5zZXJ0TWVudSwgeyBub2RlOiBwYXJlbnQsIG9uU2VsZWN0IH0pLCAkWzVdID0gb25TZWxlY3QsICRbNl0gPSBwYXJlbnQsICRbN10gPSB0MykgOiB0MyA9ICRbN107XG4gIGxldCB0NDtcbiAgcmV0dXJuICRbOF0gIT09IGxhYmVsIHx8ICRbOV0gIT09IHQyIHx8ICRbMTBdICE9PSB0MyA/ICh0NCA9IC8qIEBfX1BVUkVfXyAqLyBqc3goTWVudUdyb3VwLCB7IGZvbnRTaXplOiAxLCBpY29uOiBJbnNlcnRCZWxvd0ljb24sIHBhZGRpbmc6IDIsIHBvcG92ZXI6IHQyLCBzcGFjZTogMiwgdGV4dDogbGFiZWwsIGNoaWxkcmVuOiB0MyB9KSwgJFs4XSA9IGxhYmVsLCAkWzldID0gdDIsICRbMTBdID0gdDMsICRbMTFdID0gdDQpIDogdDQgPSAkWzExXSwgdDQ7XG59O1xuYXN5bmMgZnVuY3Rpb24gZ2V0Q29udGV4dE1lbnVVbmlvbkl0ZW1zKGNvbnRleHQpIHtcbiAgY29uc3Qge1xuICAgIGRvYyxcbiAgICBub2RlLFxuICAgIHBhcmVudFxuICB9ID0gY29udGV4dCwgaXRlbXMgPSBbXTtcbiAgaWYgKGl0ZW1zLnB1c2goLi4uZ2V0RHVwbGljYXRlSXRlbShjb250ZXh0KSksIGl0ZW1zLnB1c2goLi4uZ2V0UmVtb3ZlSXRlbXMoY29udGV4dCkpLCBpdGVtcy5wdXNoKC4uLmF3YWl0IGdldE1vdmVJdGVtcyhjb250ZXh0KSksIHBhcmVudC5vcHRpb25zPy5pbnNlcnRNZW51KSB7XG4gICAgY29uc3Qgd2lkdGggPSAocGFyZW50Lm9wdGlvbnMuaW5zZXJ0TWVudSB8fCB7fSkudmlld3M/LnNvbWUoKHZpZXcpID0+IHZpZXcubmFtZSA9PT0gXCJncmlkXCIpID8gMCA6IHZvaWQgMDtcbiAgICBpdGVtcy5wdXNoKHtcbiAgICAgIHR5cGU6IFwiY3VzdG9tXCIsXG4gICAgICBjb21wb25lbnQ6ICh7XG4gICAgICAgIGJvdW5kYXJ5RWxlbWVudCxcbiAgICAgICAgc2VuZFRlbGVtZXRyeVxuICAgICAgfSkgPT4gLyogQF9fUFVSRV9fICovIGpzeChJbnNlcnRNZW51V3JhcHBlciwgeyBsYWJlbDogXCJJbnNlcnQgYmVmb3JlXCIsIG9uU2VsZWN0OiAoc2NoZW1hVHlwZSkgPT4ge1xuICAgICAgICBnZXRBcnJheUluc2VydEFjdGlvbihub2RlLCBkb2MsIHNjaGVtYVR5cGUubmFtZSwgXCJiZWZvcmVcIikoKSwgc2VuZFRlbGVtZXRyeShcIlZpc3VhbCBFZGl0aW5nIENvbnRleHQgTWVudSBJdGVtIEluc2VydGVkXCIsIG51bGwpO1xuICAgICAgfSwgcGFyZW50LCB3aWR0aCwgYm91bmRhcnlFbGVtZW50IH0pXG4gICAgfSksIGl0ZW1zLnB1c2goe1xuICAgICAgdHlwZTogXCJjdXN0b21cIixcbiAgICAgIGNvbXBvbmVudDogKHtcbiAgICAgICAgYm91bmRhcnlFbGVtZW50LFxuICAgICAgICBzZW5kVGVsZW1ldHJ5XG4gICAgICB9KSA9PiAvKiBAX19QVVJFX18gKi8ganN4KEluc2VydE1lbnVXcmFwcGVyLCB7IGxhYmVsOiBcIkluc2VydCBhZnRlclwiLCBvblNlbGVjdDogKHNjaGVtYVR5cGUpID0+IHtcbiAgICAgICAgZ2V0QXJyYXlJbnNlcnRBY3Rpb24obm9kZSwgZG9jLCBzY2hlbWFUeXBlLm5hbWUsIFwiYWZ0ZXJcIikoKSwgc2VuZFRlbGVtZXRyeShcIlZpc3VhbCBFZGl0aW5nIENvbnRleHQgTWVudSBJdGVtIEluc2VydGVkXCIsIG51bGwpO1xuICAgICAgfSwgcGFyZW50LCB3aWR0aCwgYm91bmRhcnlFbGVtZW50IH0pXG4gICAgfSk7XG4gIH0gZWxzZVxuICAgIGl0ZW1zLnB1c2goe1xuICAgICAgdHlwZTogXCJncm91cFwiLFxuICAgICAgbGFiZWw6IFwiSW5zZXJ0IGJlZm9yZVwiLFxuICAgICAgaWNvbjogSW5zZXJ0QWJvdmVJY29uLFxuICAgICAgaXRlbXM6IHBhcmVudC5vZi5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gXCJ1bmlvbk9wdGlvblwiKS5tYXAoKHQpID0+ICh7XG4gICAgICAgIHR5cGU6IFwiYWN0aW9uXCIsXG4gICAgICAgIGljb246IGdldE5vZGVJY29uKHQpLFxuICAgICAgICBsYWJlbDogdC5uYW1lID09PSBcImJsb2NrXCIgPyBcIlBhcmFncmFwaFwiIDogdC50aXRsZSB8fCB0Lm5hbWUsXG4gICAgICAgIGFjdGlvbjogZ2V0QXJyYXlJbnNlcnRBY3Rpb24obm9kZSwgZG9jLCB0Lm5hbWUsIFwiYmVmb3JlXCIpLFxuICAgICAgICB0ZWxlbWV0cnlFdmVudDogXCJWaXN1YWwgRWRpdGluZyBDb250ZXh0IE1lbnUgSXRlbSBJbnNlcnRlZFwiXG4gICAgICB9KSlcbiAgICB9KSwgaXRlbXMucHVzaCh7XG4gICAgICB0eXBlOiBcImdyb3VwXCIsXG4gICAgICBsYWJlbDogXCJJbnNlcnQgYWZ0ZXJcIixcbiAgICAgIGljb246IEluc2VydEJlbG93SWNvbixcbiAgICAgIGl0ZW1zOiBwYXJlbnQub2YuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnR5cGUgPT09IFwidW5pb25PcHRpb25cIikubWFwKCh0KSA9PiAoe1xuICAgICAgICB0eXBlOiBcImFjdGlvblwiLFxuICAgICAgICBsYWJlbDogdC5uYW1lID09PSBcImJsb2NrXCIgPyBcIlBhcmFncmFwaFwiIDogdC50aXRsZSB8fCB0Lm5hbWUsXG4gICAgICAgIGljb246IGdldE5vZGVJY29uKHQpLFxuICAgICAgICBhY3Rpb246IGdldEFycmF5SW5zZXJ0QWN0aW9uKG5vZGUsIGRvYywgdC5uYW1lLCBcImFmdGVyXCIpLFxuICAgICAgICB0ZWxlbWV0cnlFdmVudDogXCJWaXN1YWwgRWRpdGluZyBDb250ZXh0IE1lbnUgSXRlbSBJbnNlcnRlZFwiXG4gICAgICB9KSlcbiAgICB9KTtcbiAgcmV0dXJuIGl0ZW1zO1xufVxuY29uc3QgUE9QT1ZFUl9NQVJHSU5TID0gWy00LCA0LCAtNCwgNF07XG5mdW5jdGlvbiBDb250ZXh0TWVudUl0ZW0ocHJvcHMpIHtcbiAgY29uc3QgJCA9IGMoMjcpLCB7XG4gICAgbm9kZSxcbiAgICBvbkRpc21pc3MsXG4gICAgYm91bmRhcnlFbGVtZW50XG4gIH0gPSBwcm9wcywgc2VuZFRlbGVtZXRyeSA9IHVzZVRlbGVtZXRyeSgpO1xuICBsZXQgdDA7XG4gICRbMF0gIT09IG5vZGUgfHwgJFsxXSAhPT0gb25EaXNtaXNzIHx8ICRbMl0gIT09IHNlbmRUZWxlbWV0cnkgPyAodDAgPSAoKSA9PiB7XG4gICAgbm9kZS50eXBlID09PSBcImFjdGlvblwiICYmIChub2RlLmFjdGlvbj8uKCksIG9uRGlzbWlzcz8uKCksIG5vZGUudGVsZW1ldHJ5RXZlbnQgJiYgc2VuZFRlbGVtZXRyeShub2RlLnRlbGVtZXRyeUV2ZW50LCBudWxsKSk7XG4gIH0sICRbMF0gPSBub2RlLCAkWzFdID0gb25EaXNtaXNzLCAkWzJdID0gc2VuZFRlbGVtZXRyeSwgJFszXSA9IHQwKSA6IHQwID0gJFszXTtcbiAgY29uc3Qgb25DbGljayA9IHQwO1xuICBpZiAobm9kZS50eXBlID09PSBcImRpdmlkZXJcIikge1xuICAgIGxldCB0MTtcbiAgICByZXR1cm4gJFs0XSA9PT0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDEgPSAvKiBAX19QVVJFX18gKi8ganN4KE1lbnVEaXZpZGVyLCB7fSksICRbNF0gPSB0MSkgOiB0MSA9ICRbNF0sIHQxO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09IFwiYWN0aW9uXCIpIHtcbiAgICBjb25zdCB0MSA9ICFub2RlLmFjdGlvbjtcbiAgICBsZXQgdDI7XG4gICAgcmV0dXJuICRbNV0gIT09IG5vZGUuaG90a2V5cyB8fCAkWzZdICE9PSBub2RlLmljb24gfHwgJFs3XSAhPT0gbm9kZS5sYWJlbCB8fCAkWzhdICE9PSBvbkNsaWNrIHx8ICRbOV0gIT09IHQxID8gKHQyID0gLyogQF9fUFVSRV9fICovIGpzeChNZW51SXRlbSwgeyBmb250U2l6ZTogMSwgaG90a2V5czogbm9kZS5ob3RrZXlzLCBpY29uOiBub2RlLmljb24sIHBhZGRpbmc6IDIsIHNwYWNlOiAyLCB0ZXh0OiBub2RlLmxhYmVsLCBkaXNhYmxlZDogdDEsIG9uQ2xpY2sgfSksICRbNV0gPSBub2RlLmhvdGtleXMsICRbNl0gPSBub2RlLmljb24sICRbN10gPSBub2RlLmxhYmVsLCAkWzhdID0gb25DbGljaywgJFs5XSA9IHQxLCAkWzEwXSA9IHQyKSA6IHQyID0gJFsxMF0sIHQyO1xuICB9XG4gIGlmIChub2RlLnR5cGUgPT09IFwiZ3JvdXBcIikge1xuICAgIGNvbnN0IHQxID0gbm9kZS5pY29uO1xuICAgIGxldCB0MjtcbiAgICAkWzExXSA9PT0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDIgPSB7XG4gICAgICBhcnJvdzogITEsXG4gICAgICBjb25zdHJhaW5TaXplOiAhMCxcbiAgICAgIHBsYWNlbWVudDogXCJyaWdodC1zdGFydFwiLFxuICAgICAgZmFsbGJhY2tQbGFjZW1lbnRzOiBbXCJsZWZ0LXN0YXJ0XCIsIFwicmlnaHRcIiwgXCJsZWZ0XCIsIFwicmlnaHQtZW5kXCIsIFwibGVmdC1lbmRcIiwgXCJib3R0b21cIiwgXCJ0b3BcIl0sXG4gICAgICBwcmV2ZW50T3ZlcmZsb3c6ICEwLFxuICAgICAgX191bnN0YWJsZV9tYXJnaW5zOiBQT1BPVkVSX01BUkdJTlNcbiAgICB9LCAkWzExXSA9IHQyKSA6IHQyID0gJFsxMV07XG4gICAgY29uc3QgdDMgPSBub2RlLmxhYmVsO1xuICAgIGxldCB0NDtcbiAgICBpZiAoJFsxMl0gIT09IGJvdW5kYXJ5RWxlbWVudCB8fCAkWzEzXSAhPT0gbm9kZS5pdGVtcyB8fCAkWzE0XSAhPT0gb25EaXNtaXNzKSB7XG4gICAgICBsZXQgdDUyO1xuICAgICAgJFsxNl0gIT09IGJvdW5kYXJ5RWxlbWVudCB8fCAkWzE3XSAhPT0gb25EaXNtaXNzID8gKHQ1MiA9IChpdGVtLCBpdGVtSW5kZXgpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3goQ29udGV4dE1lbnVJdGVtLCB7IG5vZGU6IGl0ZW0sIG9uRGlzbWlzcywgYm91bmRhcnlFbGVtZW50IH0sIGl0ZW1JbmRleCksICRbMTZdID0gYm91bmRhcnlFbGVtZW50LCAkWzE3XSA9IG9uRGlzbWlzcywgJFsxOF0gPSB0NTIpIDogdDUyID0gJFsxOF0sIHQ0ID0gbm9kZS5pdGVtcy5tYXAodDUyKSwgJFsxMl0gPSBib3VuZGFyeUVsZW1lbnQsICRbMTNdID0gbm9kZS5pdGVtcywgJFsxNF0gPSBvbkRpc21pc3MsICRbMTVdID0gdDQ7XG4gICAgfSBlbHNlXG4gICAgICB0NCA9ICRbMTVdO1xuICAgIGxldCB0NTtcbiAgICByZXR1cm4gJFsxOV0gIT09IG5vZGUuaWNvbiB8fCAkWzIwXSAhPT0gbm9kZS5sYWJlbCB8fCAkWzIxXSAhPT0gdDQgPyAodDUgPSAvKiBAX19QVVJFX18gKi8ganN4KE1lbnVHcm91cCwgeyBmb250U2l6ZTogMSwgaWNvbjogdDEsIHBhZGRpbmc6IDIsIHBvcG92ZXI6IHQyLCBzcGFjZTogMiwgdGV4dDogdDMsIGNoaWxkcmVuOiB0NCB9KSwgJFsxOV0gPSBub2RlLmljb24sICRbMjBdID0gbm9kZS5sYWJlbCwgJFsyMV0gPSB0NCwgJFsyMl0gPSB0NSkgOiB0NSA9ICRbMjJdLCB0NTtcbiAgfVxuICBpZiAobm9kZS50eXBlID09PSBcImN1c3RvbVwiKSB7XG4gICAgY29uc3Qge1xuICAgICAgY29tcG9uZW50OiBDb21wb25lbnRcbiAgICB9ID0gbm9kZTtcbiAgICBsZXQgdDE7XG4gICAgcmV0dXJuICRbMjNdICE9PSBDb21wb25lbnQgfHwgJFsyNF0gIT09IGJvdW5kYXJ5RWxlbWVudCB8fCAkWzI1XSAhPT0gc2VuZFRlbGVtZXRyeSA/ICh0MSA9IC8qIEBfX1BVUkVfXyAqLyBqc3goQ29tcG9uZW50LCB7IGJvdW5kYXJ5RWxlbWVudCwgc2VuZFRlbGVtZXRyeSB9KSwgJFsyM10gPSBDb21wb25lbnQsICRbMjRdID0gYm91bmRhcnlFbGVtZW50LCAkWzI1XSA9IHNlbmRUZWxlbWV0cnksICRbMjZdID0gdDEpIDogdDEgPSAkWzI2XSwgdDE7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5jb25zdCBDb250ZXh0TWVudSA9IChwcm9wcykgPT4ge1xuICBjb25zdCAkID0gYyg0MyksIHtcbiAgICBub2RlLFxuICAgIG9uRGlzbWlzcyxcbiAgICBwb3NpdGlvbjogdDBcbiAgfSA9IHByb3BzLCB7XG4gICAgeCxcbiAgICB5XG4gIH0gPSB0MCwgW2JvdW5kYXJ5RWxlbWVudCwgc2V0Qm91bmRhcnlFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpLCB7XG4gICAgZ2V0RmllbGRcbiAgfSA9IHVzZVNjaGVtYSgpLCB7XG4gICAgZ2V0RG9jdW1lbnRcbiAgfSA9IHVzZURvY3VtZW50cygpO1xuICBsZXQgdDE7XG4gICRbMF0gIT09IGdldEZpZWxkIHx8ICRbMV0gIT09IG5vZGUgPyAodDEgPSBnZXRGaWVsZChub2RlKSwgJFswXSA9IGdldEZpZWxkLCAkWzFdID0gbm9kZSwgJFsyXSA9IHQxKSA6IHQxID0gJFsyXTtcbiAgY29uc3Qge1xuICAgIGZpZWxkLFxuICAgIHBhcmVudFxuICB9ID0gdDEsIHRpdGxlID0gZmllbGQ/LnRpdGxlIHx8IGZpZWxkPy5uYW1lIHx8IFwiVW5rbm93biB0eXBlXCIsIFtpdGVtcywgc2V0SXRlbXNdID0gdXNlU3RhdGUodm9pZCAwKTtcbiAgbGV0IHQyLCB0MztcbiAgJFszXSAhPT0gZmllbGQgfHwgJFs0XSAhPT0gZ2V0RG9jdW1lbnQgfHwgJFs1XSAhPT0gbm9kZSB8fCAkWzZdICE9PSBwYXJlbnQgPyAodDIgPSAoKSA9PiB7XG4gICAgKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGRvYyA9IGdldERvY3VtZW50KG5vZGUuaWQpO1xuICAgICAgaWYgKCFkb2MpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IGl0ZW1zXzAgPSBhd2FpdCBnZXRDb250ZXh0TWVudUl0ZW1zKHtcbiAgICAgICAgbm9kZSxcbiAgICAgICAgZmllbGQsXG4gICAgICAgIHBhcmVudCxcbiAgICAgICAgZG9jXG4gICAgICB9KTtcbiAgICAgIHNldEl0ZW1zKGl0ZW1zXzApO1xuICAgIH0pKCk7XG4gIH0sIHQzID0gW2ZpZWxkLCBub2RlLCBwYXJlbnQsIGdldERvY3VtZW50XSwgJFszXSA9IGZpZWxkLCAkWzRdID0gZ2V0RG9jdW1lbnQsICRbNV0gPSBub2RlLCAkWzZdID0gcGFyZW50LCAkWzddID0gdDIsICRbOF0gPSB0MykgOiAodDIgPSAkWzddLCB0MyA9ICRbOF0pLCB1c2VFZmZlY3QodDIsIHQzKTtcbiAgbGV0IHQ0O1xuICAkWzldICE9PSB4IHx8ICRbMTBdICE9PSB5ID8gKHQ0ID0ge1xuICAgIGdldEJvdW5kaW5nQ2xpZW50UmVjdDogKCkgPT4gKHtcbiAgICAgIGJvdHRvbTogeSxcbiAgICAgIGxlZnQ6IHgsXG4gICAgICByaWdodDogeCxcbiAgICAgIHRvcDogeSxcbiAgICAgIHdpZHRoOiAwLFxuICAgICAgaGVpZ2h0OiAwXG4gICAgfSlcbiAgfSwgJFs5XSA9IHgsICRbMTBdID0geSwgJFsxMV0gPSB0NCkgOiB0NCA9ICRbMTFdO1xuICBjb25zdCBjb250ZXh0TWVudVJlZmVyZW5jZUVsZW1lbnQgPSB0NDtcbiAgbGV0IHQ1O1xuICAkWzEyXSAhPT0gZmllbGQgPyAodDUgPSBnZXROb2RlSWNvbihmaWVsZCksICRbMTJdID0gZmllbGQsICRbMTNdID0gdDUpIDogdDUgPSAkWzEzXTtcbiAgY29uc3QgaWNvbiA9IHQ1O1xuICBsZXQgdDY7XG4gICRbMTRdID09PSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSA/ICh0NiA9IHtcbiAgICBtaW5XaWR0aDogMTIwLFxuICAgIG1heFdpZHRoOiAxNjBcbiAgfSwgJFsxNF0gPSB0NikgOiB0NiA9ICRbMTRdO1xuICBsZXQgdDc7XG4gICRbMTVdICE9PSBpY29uIHx8ICRbMTZdICE9PSBpdGVtcyA/ICh0NyA9IC8qIEBfX1BVUkVfXyAqLyBqc3goQm94LCB7IGZsZXg6IFwibm9uZVwiLCBjaGlsZHJlbjogaXRlbXMgPyAvKiBAX19QVVJFX18gKi8ganN4KFRleHQsIHsgc2l6ZTogMSwgY2hpbGRyZW46IGljb24gfSkgOiAvKiBAX19QVVJFX18gKi8ganN4KFNwaW5uZXIsIHsgc2l6ZTogMSB9KSB9KSwgJFsxNV0gPSBpY29uLCAkWzE2XSA9IGl0ZW1zLCAkWzE3XSA9IHQ3KSA6IHQ3ID0gJFsxN107XG4gIGNvbnN0IHQ4ID0gaXRlbXMgPyB0aXRsZSA6IFwiTG9hZGluZy4uLlwiO1xuICBsZXQgdDk7XG4gICRbMThdICE9PSB0OCA/ICh0OSA9IC8qIEBfX1BVUkVfXyAqLyBqc3goU3RhY2ssIHsgZmxleDogMSwgc3BhY2U6IDIsIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4KFRleHQsIHsgc2l6ZTogMSwgd2VpZ2h0OiBcInNlbWlib2xkXCIsIGNoaWxkcmVuOiB0OCB9KSB9KSwgJFsxOF0gPSB0OCwgJFsxOV0gPSB0OSkgOiB0OSA9ICRbMTldO1xuICBsZXQgdDEwO1xuICAkWzIwXSAhPT0gdDcgfHwgJFsyMV0gIT09IHQ5ID8gKHQxMCA9IC8qIEBfX1BVUkVfXyAqLyBqc3hzKEZsZXgsIHsgZ2FwOiAyLCBwYWRkaW5nOiAyLCBjaGlsZHJlbjogW1xuICAgIHQ3LFxuICAgIHQ5XG4gIF0gfSksICRbMjBdID0gdDcsICRbMjFdID0gdDksICRbMjJdID0gdDEwKSA6IHQxMCA9ICRbMjJdO1xuICBsZXQgdDExO1xuICAkWzIzXSAhPT0gYm91bmRhcnlFbGVtZW50IHx8ICRbMjRdICE9PSBpdGVtcyB8fCAkWzI1XSAhPT0gb25EaXNtaXNzID8gKHQxMSA9IGl0ZW1zICYmIC8qIEBfX1BVUkVfXyAqLyBqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChNZW51RGl2aWRlciwge30pLFxuICAgIGl0ZW1zLm1hcCgoaXRlbSwgaSkgPT4gLyogQF9fUFVSRV9fICovIGpzeChDb250ZXh0TWVudUl0ZW0sIHsgbm9kZTogaXRlbSwgb25EaXNtaXNzLCBib3VuZGFyeUVsZW1lbnQgfSwgaSkpXG4gIF0gfSksICRbMjNdID0gYm91bmRhcnlFbGVtZW50LCAkWzI0XSA9IGl0ZW1zLCAkWzI1XSA9IG9uRGlzbWlzcywgJFsyNl0gPSB0MTEpIDogdDExID0gJFsyNl07XG4gIGxldCB0MTI7XG4gICRbMjddICE9PSB0MTAgfHwgJFsyOF0gIT09IHQxMSA/ICh0MTIgPSAvKiBAX19QVVJFX18gKi8ganN4cyhNZW51LCB7IHN0eWxlOiB0NiwgY2hpbGRyZW46IFtcbiAgICB0MTAsXG4gICAgdDExXG4gIF0gfSksICRbMjddID0gdDEwLCAkWzI4XSA9IHQxMSwgJFsyOV0gPSB0MTIpIDogdDEyID0gJFsyOV07XG4gIGNvbnN0IHQxMyA9IGAke3h9LSR7eX1gO1xuICBsZXQgdDE0O1xuICAkWzMwXSAhPT0geCB8fCAkWzMxXSAhPT0geSA/ICh0MTQgPSB7XG4gICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICBsZWZ0OiB4LFxuICAgIHRvcDogeVxuICB9LCAkWzMwXSA9IHgsICRbMzFdID0geSwgJFszMl0gPSB0MTQpIDogdDE0ID0gJFszMl07XG4gIGxldCB0MTU7XG4gICRbMzNdICE9PSB0MTMgfHwgJFszNF0gIT09IHQxNCA/ICh0MTUgPSAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgc3R5bGU6IHQxNCB9LCB0MTMpLCAkWzMzXSA9IHQxMywgJFszNF0gPSB0MTQsICRbMzVdID0gdDE1KSA6IHQxNSA9ICRbMzVdO1xuICBsZXQgdDE2O1xuICAkWzM2XSAhPT0gY29udGV4dE1lbnVSZWZlcmVuY2VFbGVtZW50IHx8ICRbMzddICE9PSB0MTIgfHwgJFszOF0gIT09IHQxNSA/ICh0MTYgPSAvKiBAX19QVVJFX18gKi8ganN4KFBvcG92ZXIsIHsgX191bnN0YWJsZV9tYXJnaW5zOiBQT1BPVkVSX01BUkdJTlMsIGFycm93OiAhMSwgb3BlbjogITAsIHBsYWNlbWVudDogXCJyaWdodC1zdGFydFwiLCByZWZlcmVuY2VFbGVtZW50OiBjb250ZXh0TWVudVJlZmVyZW5jZUVsZW1lbnQsIGNvbnRlbnQ6IHQxMiwgY2hpbGRyZW46IHQxNSB9KSwgJFszNl0gPSBjb250ZXh0TWVudVJlZmVyZW5jZUVsZW1lbnQsICRbMzddID0gdDEyLCAkWzM4XSA9IHQxNSwgJFszOV0gPSB0MTYpIDogdDE2ID0gJFszOV07XG4gIGxldCB0MTc7XG4gIHJldHVybiAkWzQwXSAhPT0gb25EaXNtaXNzIHx8ICRbNDFdICE9PSB0MTYgPyAodDE3ID0gLyogQF9fUFVSRV9fICovIGpzeChQb3BvdmVyUG9ydGFsLCB7IHNldEJvdW5kYXJ5RWxlbWVudCwgb25EaXNtaXNzLCBjaGlsZHJlbjogdDE2IH0pLCAkWzQwXSA9IG9uRGlzbWlzcywgJFs0MV0gPSB0MTYsICRbNDJdID0gdDE3KSA6IHQxNyA9ICRbNDJdLCB0MTc7XG59O1xuZnVuY3Rpb24gZ2V0TGlua0hyZWYoaHJlZiwgcmVmZXJlcikge1xuICB0cnkge1xuICAgIGNvbnN0IHBhcnNlZCA9IG5ldyBVUkwoaHJlZiwgdHlwZW9mIGxvY2F0aW9uID4gXCJ1XCIgPyB2b2lkIDAgOiBsb2NhdGlvbi5vcmlnaW4pO1xuICAgIGlmIChwYXJzZWQuaGFzaCkge1xuICAgICAgY29uc3QgaGFzaCA9IG5ldyBVUkwoZ2V0TGlua0hyZWYocGFyc2VkLmhhc2guc2xpY2UoMSksIHJlZmVyZXIpKTtcbiAgICAgIHJldHVybiBgJHtwYXJzZWQub3JpZ2lufSR7cGFyc2VkLnBhdGhuYW1lfSR7cGFyc2VkLnNlYXJjaH0jJHtoYXNoLnBhdGhuYW1lfSR7aGFzaC5zZWFyY2h9YDtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZC5zZWFyY2hQYXJhbXMuc2V0KFwicHJldmlld1wiLCByZWZlcmVyKSwgcGFyc2VkLnRvU3RyaW5nKCk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBocmVmO1xuICB9XG59XG5jb25zdCBQcmV2aWV3U25hcHNob3RzQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQobnVsbCk7XG5mdW5jdGlvbiB1c2VQcmV2aWV3U25hcHNob3RzKCkge1xuICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChQcmV2aWV3U25hcHNob3RzQ29udGV4dCk7XG4gIGlmICghY29udGV4dClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcmV2aWV3IFNuYXBzaG90cyBjb250ZXh0IGlzIG1pc3NpbmdcIik7XG4gIHJldHVybiBjb250ZXh0O1xufVxuY29uc3QgaXNSZWFjdEVsZW1lbnRPdmVybGF5Q29tcG9uZW50ID0gKGNvbXBvbmVudCkgPT4gaXNWYWxpZEVsZW1lbnQoY29tcG9uZW50KSwgUm9vdCQzID0gc3R5bGVkKENhcmQpYFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1vdmVybGF5LWJnKTtcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWxsLWNoYW5nZTogdHJhbnNmb3JtO1xuICBib3gtc2hhZG93OiB2YXIoLS1vdmVybGF5LWJveC1zaGFkb3cpO1xuICB0cmFuc2l0aW9uOiBub25lO1xuXG4gIC0tb3ZlcmxheS1iZzogdHJhbnNwYXJlbnQ7XG4gIC0tb3ZlcmxheS1ib3gtc2hhZG93OiBpbnNldCAwIDAgMCAxcHggdHJhbnNwYXJlbnQ7XG5cbiAgW2RhdGEtb3ZlcmxheXNdICYge1xuICAgIC0tb3ZlcmxheS1iZzogY29sb3ItbWl4KGluIHNyZ2IsIHRyYW5zcGFyZW50IDk1JSwgdmFyKC0tY2FyZC1mb2N1cy1yaW5nLWNvbG9yKSk7XG4gICAgLS1vdmVybGF5LWJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDJweFxuICAgICAgY29sb3ItbWl4KGluIHNyZ2IsIHRyYW5zcGFyZW50IDUwJSwgdmFyKC0tY2FyZC1mb2N1cy1yaW5nLWNvbG9yKSk7XG4gIH1cblxuICBbZGF0YS1mYWRpbmctb3V0XSAmIHtcbiAgICB0cmFuc2l0aW9uOlxuICAgICAgYm94LXNoYWRvdyAxNTUwbXMsXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yIDE1NTBtcztcblxuICAgIC0tb3ZlcmxheS1iZzogcmdiYSgwLCAwLCAyNTUsIDApO1xuICAgIC0tb3ZlcmxheS1ib3gtc2hhZG93OiBpbnNldCAwIDAgMCAxcHggdHJhbnNwYXJlbnQ7XG4gIH1cblxuICAmW2RhdGEtZm9jdXNlZF0ge1xuICAgIC0tb3ZlcmxheS1ib3gtc2hhZG93OiBpbnNldCAwIDAgMCAxcHggdmFyKC0tY2FyZC1mb2N1cy1yaW5nLWNvbG9yKTtcbiAgfVxuXG4gICZbZGF0YS1ob3ZlcmVkXTpub3QoW2RhdGEtZm9jdXNlZF0pIHtcbiAgICB0cmFuc2l0aW9uOiBub25lO1xuICAgIC0tb3ZlcmxheS1ib3gtc2hhZG93OiBpbnNldCAwIDAgMCAycHggdmFyKC0tY2FyZC1mb2N1cy1yaW5nLWNvbG9yKTtcbiAgfVxuXG4gIC8qIFtkYXRhLXVubW91bnRlZF0gJiB7XG4gICAgLS1vdmVybGF5LWJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDFweCB2YXIoLS1jYXJkLWZvY3VzLXJpbmctY29sb3IpO1xuICB9ICovXG5cbiAgOmxpbmsge1xuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgfVxuYCwgQWN0aW9ucyA9IHN0eWxlZChGbGV4KWBcbiAgYm90dG9tOiAxMDAlO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHJpZ2h0OiAwO1xuXG4gIFtkYXRhLWhvdmVyZWRdOm5vdChbZGF0YS1tZW51LW9wZW5dKSAmIHtcbiAgICBwb2ludGVyLWV2ZW50czogYWxsO1xuICB9XG5cbiAgW2RhdGEtZmxpcHBlZF0gJiB7XG4gICAgYm90dG9tOiBhdXRvO1xuICAgIHRvcDogMTAwJTtcbiAgfVxuYCwgSFVEID0gc3R5bGVkKEZsZXgpYFxuICB0b3A6IDEwMCU7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMDtcblxuICBnYXA6IDRweDtcbiAgcGFkZGluZzogNHB4IDA7XG4gIGZsZXgtd3JhcDogd3JhcDtcblxuICBbZGF0YS1ob3ZlcmVkXTpub3QoW2RhdGEtbWVudS1vcGVuXSkgJiB7XG4gICAgcG9pbnRlci1ldmVudHM6IGFsbDtcbiAgfVxuXG4gIFtkYXRhLWZsaXBwZWRdICYge1xuICAgIHRvcDogY2FsYygxMDAlICsgMnJlbSk7XG4gIH1cbmAsIE1lbnVXcmFwcGVyID0gc3R5bGVkKEZsZXgpYFxuICBtYXJnaW46IC0wLjVyZW07XG5cbiAgW2RhdGEtaG92ZXJlZF06bm90KFtkYXRhLW1lbnUtb3Blbl0pICYge1xuICAgIHBvaW50ZXItZXZlbnRzOiBhbGw7XG4gIH1cbmAsIFRhYiA9IHN0eWxlZChGbGV4KWBcbiAgYm90dG9tOiAxMDAlO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG5cbiAgW2RhdGEtaG92ZXJlZF06bm90KFtkYXRhLW1lbnUtb3Blbl0pICYge1xuICAgIHBvaW50ZXItZXZlbnRzOiBhbGw7XG4gIH1cblxuICBbZGF0YS1mbGlwcGVkXSAmIHtcbiAgICBib3R0b206IGF1dG87XG4gICAgdG9wOiAxMDAlO1xuICB9XG5gLCBBY3Rpb25PcGVuID0gc3R5bGVkKENhcmQpYFxuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNhcmQtZm9jdXMtcmluZy1jb2xvcik7XG4gIHJpZ2h0OiAwO1xuICBib3JkZXItcmFkaXVzOiAzcHg7XG5cbiAgJiBbZGF0YS11aT0nVGV4dCddIHtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICB9XG5gLCBMYWJlbHMgPSBzdHlsZWQoRmxleClgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNhcmQtZm9jdXMtcmluZy1jb2xvcik7XG4gIHJpZ2h0OiAwO1xuICBib3JkZXItcmFkaXVzOiAzcHg7XG4gICYgW2RhdGEtdWk9J1RleHQnXSxcbiAgJiBbZGF0YS1zYW5pdHktaWNvbl0ge1xuICAgIGNvbG9yOiAjZmZmO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIH1cbmAsIEV4Y2x1c2l2ZVBsdWdpbkNvbnRhaW5lciA9IHN0eWxlZC5kaXZgXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgaW5zZXQ6IDA7XG4gIHBvaW50ZXItZXZlbnRzOiBhbGw7XG5gO1xuZnVuY3Rpb24gY3JlYXRlSW50ZW50TGluayhub2RlKSB7XG4gIGNvbnN0IHtcbiAgICBpZCxcbiAgICB0eXBlLFxuICAgIHBhdGgsXG4gICAgYmFzZVVybCxcbiAgICB0b29sLFxuICAgIHdvcmtzcGFjZVxuICB9ID0gbm9kZTtcbiAgcmV0dXJuIGNyZWF0ZUVkaXRVcmwoe1xuICAgIGJhc2VVcmwsXG4gICAgd29ya3NwYWNlLFxuICAgIHRvb2wsXG4gICAgdHlwZSxcbiAgICBpZCxcbiAgICBwYXRoOiBwYXRoID8gcGF0aFRvVXJsU3RyaW5nKHN0dWRpb1BhdGguZnJvbVN0cmluZyhwYXRoKSkgOiBbXVxuICB9KTtcbn1cbmNvbnN0IEVsZW1lbnRPdmVybGF5SW5uZXIgPSAocHJvcHMpID0+IHtcbiAgY29uc3QgJCA9IGMoNTkpLCB7XG4gICAgaWQsXG4gICAgZWxlbWVudCxcbiAgICBmb2N1c2VkLFxuICAgIGNvbXBvbmVudFJlc29sdmVyLFxuICAgIG5vZGUsXG4gICAgc2hvd0FjdGlvbnMsXG4gICAgZHJhZ2dhYmxlLFxuICAgIHRhcmdldHMsXG4gICAgZWxlbWVudFR5cGUsXG4gICAgY29tbGluayxcbiAgICBvbkFjdGl2YXRlRXhjbHVzaXZlUGx1Z2luLFxuICAgIG9uTWVudU9wZW5DaGFuZ2VcbiAgfSA9IHByb3BzLCB7XG4gICAgZ2V0RmllbGQsXG4gICAgZ2V0VHlwZVxuICB9ID0gdXNlU2NoZW1hKCk7XG4gIGxldCB0MDtcbiAgJFswXSAhPT0gZ2V0VHlwZSB8fCAkWzFdICE9PSBub2RlID8gKHQwID0gZ2V0VHlwZShub2RlKSwgJFswXSA9IGdldFR5cGUsICRbMV0gPSBub2RlLCAkWzJdID0gdDApIDogdDAgPSAkWzJdO1xuICBjb25zdCBzY2hlbWFUeXBlID0gdDA7XG4gIGxldCB0MTtcbiAgJFszXSAhPT0gbm9kZSA/ICh0MSA9IFwicGF0aFwiIGluIG5vZGUgPyBjcmVhdGVJbnRlbnRMaW5rKG5vZGUpIDogbm9kZS5ocmVmLCAkWzNdID0gbm9kZSwgJFs0XSA9IHQxKSA6IHQxID0gJFs0XTtcbiAgY29uc3QgaHJlZiA9IHQxLCBwcmV2aWV3U25hcHNob3RzID0gdXNlUHJldmlld1NuYXBzaG90cygpO1xuICBsZXQgdDI7XG4gIGJiMDoge1xuICAgIGlmICghKFwicGF0aFwiIGluIG5vZGUpKSB7XG4gICAgICB0MiA9IHZvaWQgMDtcbiAgICAgIGJyZWFrIGJiMDtcbiAgICB9XG4gICAgbGV0IHQzMjtcbiAgICAkWzVdICE9PSBub2RlIHx8ICRbNl0gIT09IHByZXZpZXdTbmFwc2hvdHMgPyAodDMyID0gcHJldmlld1NuYXBzaG90cy5maW5kKChzbmFwc2hvdCkgPT4gc25hcHNob3QuX2lkID09PSBub2RlLmlkKT8udGl0bGUsICRbNV0gPSBub2RlLCAkWzZdID0gcHJldmlld1NuYXBzaG90cywgJFs3XSA9IHQzMikgOiB0MzIgPSAkWzddLCB0MiA9IHQzMjtcbiAgfVxuICBjb25zdCB0aXRsZSA9IHQyO1xuICBsZXQgdDM7XG4gICRbOF0gIT09IGVsZW1lbnQgfHwgJFs5XSAhPT0gZm9jdXNlZCB8fCAkWzEwXSAhPT0gZ2V0RmllbGQgfHwgJFsxMV0gIT09IGdldFR5cGUgPyAodDMgPSBmdW5jdGlvbihub2RlXzAsIG5vZGVFbGVtZW50KSB7XG4gICAgY29uc3Qgc2NoZW1hVHlwZV8wID0gZ2V0VHlwZShub2RlXzApLCB7XG4gICAgICBmaWVsZCxcbiAgICAgIHBhcmVudFxuICAgIH0gPSBnZXRGaWVsZChub2RlXzApO1xuICAgIGlmICghKFwiaWRcIiBpbiBub2RlXzApIHx8ICFmaWVsZCB8fCAhc2NoZW1hVHlwZV8wKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IHR5cGUgPSBmaWVsZC52YWx1ZS50eXBlO1xuICAgIHJldHVybiB7XG4gICAgICBkb2N1bWVudDogc2NoZW1hVHlwZV8wLFxuICAgICAgZWxlbWVudCxcbiAgICAgIHRhcmdldEVsZW1lbnQ6IG5vZGVFbGVtZW50IHx8IGVsZW1lbnQsXG4gICAgICBmaWVsZCxcbiAgICAgIGZvY3VzZWQ6ICEhZm9jdXNlZCxcbiAgICAgIG5vZGU6IG5vZGVfMCxcbiAgICAgIHBhcmVudCxcbiAgICAgIHR5cGVcbiAgICB9O1xuICB9LCAkWzhdID0gZWxlbWVudCwgJFs5XSA9IGZvY3VzZWQsICRbMTBdID0gZ2V0RmllbGQsICRbMTFdID0gZ2V0VHlwZSwgJFsxMl0gPSB0MykgOiB0MyA9ICRbMTJdO1xuICBjb25zdCBnZXRDb250ZXh0ID0gdDM7XG4gIGxldCB0NDtcbiAgJFsxM10gIT09IGVsZW1lbnRUeXBlIHx8ICRbMTRdICE9PSBnZXRDb250ZXh0IHx8ICRbMTVdICE9PSBub2RlID8gKHQ0ID0gZWxlbWVudFR5cGUgPT09IFwiZWxlbWVudFwiID8gZ2V0Q29udGV4dChub2RlKSA6IHZvaWQgMCwgJFsxM10gPSBlbGVtZW50VHlwZSwgJFsxNF0gPSBnZXRDb250ZXh0LCAkWzE1XSA9IG5vZGUsICRbMTZdID0gdDQpIDogdDQgPSAkWzE2XTtcbiAgbGV0IHQ1O1xuICBpZiAoJFsxN10gIT09IGdldENvbnRleHQgfHwgJFsxOF0gIT09IHRhcmdldHMpIHtcbiAgICBsZXQgdDYyO1xuICAgICRbMjBdICE9PSBnZXRDb250ZXh0ID8gKHQ2MiA9ICh0YXJnZXQpID0+IGdldENvbnRleHQodGFyZ2V0LnNhbml0eSwgdGFyZ2V0LmVsZW1lbnQpLCAkWzIwXSA9IGdldENvbnRleHQsICRbMjFdID0gdDYyKSA6IHQ2MiA9ICRbMjFdLCB0NSA9IHRhcmdldHMubWFwKHQ2MikuZmlsdGVyKF90ZW1wJDgpLCAkWzE3XSA9IGdldENvbnRleHQsICRbMThdID0gdGFyZ2V0cywgJFsxOV0gPSB0NTtcbiAgfSBlbHNlXG4gICAgdDUgPSAkWzE5XTtcbiAgbGV0IHQ2O1xuICAkWzIyXSAhPT0gdDQgfHwgJFsyM10gIT09IHQ1ID8gKHQ2ID0ge1xuICAgIGxlZ2FjeUNvbXBvbmVudENvbnRleHQ6IHQ0LFxuICAgIHBsdWdpbkNvbnRleHRzOiB0NVxuICB9LCAkWzIyXSA9IHQ0LCAkWzIzXSA9IHQ1LCAkWzI0XSA9IHQ2KSA6IHQ2ID0gJFsyNF07XG4gIGNvbnN0IHJlc29sdmVyQ29udGV4dHMgPSB0NiwgY3VzdG9tQ29tcG9uZW50cyA9IHVzZUN1c3RvbUNvbXBvbmVudHMocmVzb2x2ZXJDb250ZXh0cy5sZWdhY3lDb21wb25lbnRDb250ZXh0LCBjb21wb25lbnRSZXNvbHZlciksIG5vZGVQbHVnaW5Db2xsZWN0aW9ucyA9IHVzZVJlc29sdmVkTm9kZVBsdWdpbnMocmVzb2x2ZXJDb250ZXh0cy5wbHVnaW5Db250ZXh0cywgcHJvcHMucGx1Z2lucyk7XG4gIGxldCB0NztcbiAgJFsyNV0gIT09IHNjaGVtYVR5cGUgPyAodDcgPSBzY2hlbWFUeXBlPy5pY29uID8gLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiB7XG4gICAgX19odG1sOiBzY2hlbWFUeXBlLmljb25cbiAgfSB9KSA6IC8qIEBfX1BVUkVfXyAqLyBqc3goRG9jdW1lbnRJY29uLCB7fSksICRbMjVdID0gc2NoZW1hVHlwZSwgJFsyNl0gPSB0NykgOiB0NyA9ICRbMjZdO1xuICBjb25zdCBpY29uID0gdDcsIG1lbnVJZCA9IHVzZUlkKCk7XG4gIGxldCB0ODtcbiAgJFsyN10gIT09IG5vZGVQbHVnaW5Db2xsZWN0aW9ucyA/ICh0OCA9IG5vZGVQbHVnaW5Db2xsZWN0aW9ucz8uc29tZShfdGVtcDIkNSksICRbMjddID0gbm9kZVBsdWdpbkNvbGxlY3Rpb25zLCAkWzI4XSA9IHQ4KSA6IHQ4ID0gJFsyOF07XG4gIGNvbnN0IHNob3dNZW51ID0gdDggfHwgbm9kZVBsdWdpbkNvbGxlY3Rpb25zPy5sZW5ndGggPiAxO1xuICBsZXQgdDk7XG4gICRbMjldICE9PSBpZCA/ICh0OSA9ICgpID0+IHtcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJzYW5pdHktb3ZlcmxheS9sYWJlbC1jbGlja1wiLCB7XG4gICAgICBkZXRhaWw6IHtcbiAgICAgICAgaWRcbiAgICAgIH1cbiAgICB9KSk7XG4gIH0sICRbMjldID0gaWQsICRbMzBdID0gdDkpIDogdDkgPSAkWzMwXTtcbiAgY29uc3QgaGFuZGxlTGFiZWxDbGljayA9IHQ5O1xuICBsZXQgdDEwO1xuICAkWzMxXSAhPT0gaHJlZiB8fCAkWzMyXSAhPT0gc2hvd0FjdGlvbnMgPyAodDEwID0gc2hvd0FjdGlvbnMgPyAvKiBAX19QVVJFX18gKi8ganN4KEFjdGlvbnMsIHsgZ2FwOiAxLCBwYWRkaW5nWTogMSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goTGluaywgeyBocmVmIH0pIH0pIDogbnVsbCwgJFszMV0gPSBocmVmLCAkWzMyXSA9IHNob3dBY3Rpb25zLCAkWzMzXSA9IHQxMCkgOiB0MTAgPSAkWzMzXTtcbiAgbGV0IHQxMTtcbiAgJFszNF0gIT09IGNvbWxpbmsgfHwgJFszNV0gIT09IGRyYWdnYWJsZSB8fCAkWzM2XSAhPT0gaGFuZGxlTGFiZWxDbGljayB8fCAkWzM3XSAhPT0gaWNvbiB8fCAkWzM4XSAhPT0gbWVudUlkIHx8ICRbMzldICE9PSBub2RlUGx1Z2luQ29sbGVjdGlvbnMgfHwgJFs0MF0gIT09IG9uQWN0aXZhdGVFeGNsdXNpdmVQbHVnaW4gfHwgJFs0MV0gIT09IG9uTWVudU9wZW5DaGFuZ2UgfHwgJFs0Ml0gIT09IHNob3dNZW51IHx8ICRbNDNdICE9PSB0aXRsZSA/ICh0MTEgPSAodGl0bGUgfHwgc2hvd01lbnUpICYmIC8qIEBfX1BVUkVfXyAqLyBqc3goVGFiLCB7IGdhcDogMSwgcGFkZGluZ1k6IDEsIG9uQ2xpY2s6IGhhbmRsZUxhYmVsQ2xpY2ssIGNoaWxkcmVuOiAvKiBAX19QVVJFX18gKi8ganN4cyhMYWJlbHMsIHsgZ2FwOiAyLCBwYWRkaW5nOiAyLCBjaGlsZHJlbjogW1xuICAgIGRyYWdnYWJsZSAmJiAvKiBAX19QVVJFX18gKi8ganN4KEJveCwgeyBtYXJnaW5SaWdodDogMSwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goVGV4dCwgeyBjbGFzc05hbWU6IFwiZHJhZy1oYW5kbGVcIiwgc2l6ZTogMCwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goRHJhZ0hhbmRsZUljb24sIHt9KSB9KSB9KSxcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KFRleHQsIHsgc2l6ZTogMCwgY2hpbGRyZW46IGljb24gfSksXG4gICAgdGl0bGUgJiYgLyogQF9fUFVSRV9fICovIGpzeChUZXh0LCB7IHNpemU6IDEsIHdlaWdodDogXCJtZWRpdW1cIiwgY2hpbGRyZW46IHRpdGxlIH0pLFxuICAgIHNob3dNZW51ICYmIC8qIEBfX1BVUkVfXyAqLyBqc3goQm94LCB7IHBhZGRpbmdMZWZ0OiAyLCBvbkNsaWNrOiBfdGVtcDMkMiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goTWVudVdyYXBwZXIsIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goTWVudUJ1dHRvbiwgeyBpZDogbWVudUlkLCBwb3BvdmVyOiB7XG4gICAgICBhbmltYXRlOiAhMCxcbiAgICAgIHBsYWNlbWVudDogXCJib3R0b20tc3RhcnRcIixcbiAgICAgIGNvbnN0cmFpblNpemU6ICEwLFxuICAgICAgdG9uZTogXCJkZWZhdWx0XCJcbiAgICB9LCBvbk9wZW46ICgpID0+IHtcbiAgICAgIG9uTWVudU9wZW5DaGFuZ2U/LighMCk7XG4gICAgfSwgb25DbG9zZTogKCkgPT4ge1xuICAgICAgb25NZW51T3BlbkNoYW5nZT8uKCExKTtcbiAgICB9LCBidXR0b246IC8qIEBfX1BVUkVfXyAqLyBqc3goQnV0dG9uLCB7IGljb246IEVsbGlwc2lzVmVydGljYWxJY29uLCB0b25lOiBcInByaW1hcnlcIiwgcGFkZGluZzogMiB9KSwgbWVudTogLyogQF9fUFVSRV9fICovIGpzeChNZW51LCB7IHBhZGRpbmdZOiAwLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChQb2ludGVyRXZlbnRzLCB7IGNoaWxkcmVuOiBub2RlUGx1Z2luQ29sbGVjdGlvbnM/Lm1hcCgobm9kZVBsdWdpbkNvbGxlY3Rpb25fMCwgaW5kZXgpID0+IC8qIEBfX1BVUkVfXyAqLyBqc3hzKEZyYWdtZW50JDEsIHsgY2hpbGRyZW46IFtcbiAgICAgIC8qIEBfX1BVUkVfXyAqLyBqc3hzKFN0YWNrLCB7IHJvbGU6IFwiZ3JvdXBcIiwgcGFkZGluZ1k6IDEsIHNwYWNlOiAwLCBjaGlsZHJlbjogW1xuICAgICAgICAvKiBAX19QVVJFX18gKi8ganN4KE1lbnVJdGVtLCB7IHBhZGRpbmdZOiAyLCB0ZXh0OiAvKiBAX19QVVJFX18gKi8ganN4KEJveCwgeyBwYWRkaW5nWTogMiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goVGV4dCwgeyBtdXRlZDogITAsIHNpemU6IDEsIHN0eWxlOiB7XG4gICAgICAgICAgdGV4dFRyYW5zZm9ybTogXCJjYXBpdGFsaXplXCJcbiAgICAgICAgfSwgY2hpbGRyZW46IGAke25vZGVQbHVnaW5Db2xsZWN0aW9uXzAuY29udGV4dC5kb2N1bWVudC5uYW1lfTogJHtub2RlUGx1Z2luQ29sbGVjdGlvbl8wLmNvbnRleHQuZmllbGQ/Lm5hbWV9YCB9KSB9KSwgb25DbGljazogKCkgPT4ge1xuICAgICAgICAgIG5vZGVQbHVnaW5Db2xsZWN0aW9uXzAuY29udGV4dC5ub2RlICYmIGNvbWxpbms/LnBvc3QoXCJ2aXN1YWwtZWRpdGluZy9mb2N1c1wiLCBub2RlUGx1Z2luQ29sbGVjdGlvbl8wLmNvbnRleHQubm9kZSk7XG4gICAgICAgIH0gfSksXG4gICAgICAgIG5vZGVQbHVnaW5Db2xsZWN0aW9uXzAuZXhjbHVzaXZlLm1hcCgoZXhjbHVzaXZlKSA9PiBleGNsdXNpdmUuY29tcG9uZW50ID8gLyogQF9fUFVSRV9fICovIGpzeChNZW51SXRlbSwgeyBwYWRkaW5nWTogMiwgaWNvbjogZXhjbHVzaXZlLmljb24gfHwgLyogQF9fUFVSRV9fICovIGpzeChQbHVnSWNvbiwge30pLCB0ZXh0OiAvKiBAX19QVVJFX18gKi8ganN4KEJveCwgeyBwYWRkaW5nWTogMiwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goVGV4dCwgeyBzaXplOiAxLCBjaGlsZHJlbjogZXhjbHVzaXZlLnRpdGxlIHx8IGV4Y2x1c2l2ZS5uYW1lIH0pIH0pLCBvbkNsaWNrOiAoKSA9PiBvbkFjdGl2YXRlRXhjbHVzaXZlUGx1Z2luPy4oZXhjbHVzaXZlLCBub2RlUGx1Z2luQ29sbGVjdGlvbl8wLmNvbnRleHQpIH0sIGV4Y2x1c2l2ZS5uYW1lKSA6IG51bGwpXG4gICAgICBdIH0pLFxuICAgICAgaW5kZXggPCBub2RlUGx1Z2luQ29sbGVjdGlvbnMubGVuZ3RoIC0gMSAmJiAvKiBAX19QVVJFX18gKi8ganN4KE1lbnVEaXZpZGVyJDEsIHt9KVxuICAgIF0gfSwgbm9kZVBsdWdpbkNvbGxlY3Rpb25fMC5pZCkpIH0pIH0pIH0pIH0pIH0pXG4gIF0gfSkgfSksICRbMzRdID0gY29tbGluaywgJFszNV0gPSBkcmFnZ2FibGUsICRbMzZdID0gaGFuZGxlTGFiZWxDbGljaywgJFszN10gPSBpY29uLCAkWzM4XSA9IG1lbnVJZCwgJFszOV0gPSBub2RlUGx1Z2luQ29sbGVjdGlvbnMsICRbNDBdID0gb25BY3RpdmF0ZUV4Y2x1c2l2ZVBsdWdpbiwgJFs0MV0gPSBvbk1lbnVPcGVuQ2hhbmdlLCAkWzQyXSA9IHNob3dNZW51LCAkWzQzXSA9IHRpdGxlLCAkWzQ0XSA9IHQxMSkgOiB0MTEgPSAkWzQ0XTtcbiAgbGV0IHQxMjtcbiAgJFs0NV0gIT09IG5vZGVQbHVnaW5Db2xsZWN0aW9ucyA/ICh0MTIgPSBub2RlUGx1Z2luQ29sbGVjdGlvbnM/Lm1hcChfdGVtcDQkMSksICRbNDVdID0gbm9kZVBsdWdpbkNvbGxlY3Rpb25zLCAkWzQ2XSA9IHQxMikgOiB0MTIgPSAkWzQ2XTtcbiAgbGV0IHQxMztcbiAgJFs0N10gIT09IHQxMiA/ICh0MTMgPSAvKiBAX19QVVJFX18gKi8ganN4KEhVRCwgeyBjaGlsZHJlbjogdDEyIH0pLCAkWzQ3XSA9IHQxMiwgJFs0OF0gPSB0MTMpIDogdDEzID0gJFs0OF07XG4gIGxldCB0MTQ7XG4gICRbNDldICE9PSB0MTAgfHwgJFs1MF0gIT09IHQxMSB8fCAkWzUxXSAhPT0gdDEzID8gKHQxNCA9IC8qIEBfX1BVUkVfXyAqLyBqc3hzKFBvaW50ZXJFdmVudHMsIHsgY2hpbGRyZW46IFtcbiAgICB0MTAsXG4gICAgdDExLFxuICAgIHQxM1xuICBdIH0pLCAkWzQ5XSA9IHQxMCwgJFs1MF0gPSB0MTEsICRbNTFdID0gdDEzLCAkWzUyXSA9IHQxNCkgOiB0MTQgPSAkWzUyXTtcbiAgbGV0IHQxNTtcbiAgJFs1M10gIT09IGN1c3RvbUNvbXBvbmVudHMgfHwgJFs1NF0gIT09IHJlc29sdmVyQ29udGV4dHMubGVnYWN5Q29tcG9uZW50Q29udGV4dCA/ICh0MTUgPSBBcnJheS5pc0FycmF5KGN1c3RvbUNvbXBvbmVudHMpID8gY3VzdG9tQ29tcG9uZW50cy5tYXAoKHQxNjIsIGkpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBjb21wb25lbnQ6IENvbXBvbmVudF8xLFxuICAgICAgcHJvcHM6IHByb3BzXzBcbiAgICB9ID0gdDE2MjtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChDb21wb25lbnRfMSwgeyBQb2ludGVyRXZlbnRzLCAuLi5yZXNvbHZlckNvbnRleHRzLmxlZ2FjeUNvbXBvbmVudENvbnRleHQsIC4uLnByb3BzXzAgfSwgaSk7XG4gIH0pIDogY3VzdG9tQ29tcG9uZW50cywgJFs1M10gPSBjdXN0b21Db21wb25lbnRzLCAkWzU0XSA9IHJlc29sdmVyQ29udGV4dHMubGVnYWN5Q29tcG9uZW50Q29udGV4dCwgJFs1NV0gPSB0MTUpIDogdDE1ID0gJFs1NV07XG4gIGxldCB0MTY7XG4gIHJldHVybiAkWzU2XSAhPT0gdDE0IHx8ICRbNTddICE9PSB0MTUgPyAodDE2ID0gLyogQF9fUFVSRV9fICovIGpzeHMoRnJhZ21lbnQsIHsgY2hpbGRyZW46IFtcbiAgICB0MTQsXG4gICAgdDE1XG4gIF0gfSksICRbNTZdID0gdDE0LCAkWzU3XSA9IHQxNSwgJFs1OF0gPSB0MTYpIDogdDE2ID0gJFs1OF0sIHQxNjtcbn0sIEVsZW1lbnRPdmVybGF5ID0gbWVtbyhmdW5jdGlvbihwcm9wcykge1xuICBjb25zdCAkID0gYygzOCksIHtcbiAgICBkcmFnZ2FibGUsXG4gICAgZm9jdXNlZCxcbiAgICBob3ZlcmVkLFxuICAgIHJlY3QsXG4gICAgd2FzTWF5YmVDb2xsYXBzZWQsXG4gICAgZW5hYmxlU2Nyb2xsSW50b1ZpZXdcbiAgfSA9IHByb3BzLCByZWYgPSB1c2VSZWYobnVsbCksIHNjcm9sbGVkSW50b1ZpZXdSZWYgPSB1c2VSZWYoITEpLCB0MCA9IGAke3JlY3Qud31weGAsIHQxID0gYCR7cmVjdC5ofXB4YCwgdDIgPSBgdHJhbnNsYXRlKCR7cmVjdC54fXB4LCAke3JlY3QueX1weClgO1xuICBsZXQgdDM7XG4gICRbMF0gIT09IHQwIHx8ICRbMV0gIT09IHQxIHx8ICRbMl0gIT09IHQyID8gKHQzID0ge1xuICAgIHdpZHRoOiB0MCxcbiAgICBoZWlnaHQ6IHQxLFxuICAgIHRyYW5zZm9ybTogdDJcbiAgfSwgJFswXSA9IHQwLCAkWzFdID0gdDEsICRbMl0gPSB0MiwgJFszXSA9IHQzKSA6IHQzID0gJFszXTtcbiAgY29uc3Qgc3R5bGUgPSB0MztcbiAgbGV0IHQ0LCB0NTtcbiAgJFs0XSAhPT0gZW5hYmxlU2Nyb2xsSW50b1ZpZXcgfHwgJFs1XSAhPT0gZm9jdXNlZCB8fCAkWzZdICE9PSB3YXNNYXliZUNvbGxhcHNlZCA/ICh0NCA9ICgpID0+IHtcbiAgICBpZiAoIXNjcm9sbGVkSW50b1ZpZXdSZWYuY3VycmVudCAmJiAhd2FzTWF5YmVDb2xsYXBzZWQgJiYgZm9jdXNlZCA9PT0gITAgJiYgcmVmLmN1cnJlbnQgJiYgZW5hYmxlU2Nyb2xsSW50b1ZpZXcpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IHJlZi5jdXJyZW50O1xuICAgICAgc2Nyb2xsSW50b1ZpZXcocmVmLmN1cnJlbnQsIHtcbiAgICAgICAgYmVoYXZpb3I6IChhY3Rpb25zKSA9PiB7XG4gICAgICAgICAgYWN0aW9ucy5sZW5ndGggIT09IDAgJiYgdGFyZ2V0LnNjcm9sbEludG9WaWV3KHtcbiAgICAgICAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiLFxuICAgICAgICAgICAgYmxvY2s6IFwiY2VudGVyXCIsXG4gICAgICAgICAgICBpbmxpbmU6IFwibmVhcmVzdFwiXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNjcm9sbE1vZGU6IFwiaWYtbmVlZGVkXCIsXG4gICAgICAgIGJsb2NrOiBcImNlbnRlclwiLFxuICAgICAgICBpbmxpbmU6IFwibmVhcmVzdFwiXG4gICAgICB9KTtcbiAgICB9XG4gICAgc2Nyb2xsZWRJbnRvVmlld1JlZi5jdXJyZW50ID0gZm9jdXNlZCA9PT0gITA7XG4gIH0sIHQ1ID0gW2ZvY3VzZWQsIHdhc01heWJlQ29sbGFwc2VkLCBlbmFibGVTY3JvbGxJbnRvVmlld10sICRbNF0gPSBlbmFibGVTY3JvbGxJbnRvVmlldywgJFs1XSA9IGZvY3VzZWQsICRbNl0gPSB3YXNNYXliZUNvbGxhcHNlZCwgJFs3XSA9IHQ0LCAkWzhdID0gdDUpIDogKHQ0ID0gJFs3XSwgdDUgPSAkWzhdKSwgdXNlRWZmZWN0KHQ0LCB0NSk7XG4gIGNvbnN0IFtpc05lYXJUb3AsIHNldElzTmVhclRvcF0gPSB1c2VTdGF0ZSghMSk7XG4gIGxldCB0NjtcbiAgJFs5XSAhPT0gaG92ZXJlZCA/ICh0NiA9ICgpID0+IHtcbiAgICBpZiAoIXJlZi5jdXJyZW50IHx8ICFob3ZlcmVkKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGlvID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKCh0NzIpID0+IHtcbiAgICAgIGNvbnN0IFtpbnRlcnNlY3Rpb25dID0gdDcyO1xuICAgICAgc2V0SXNOZWFyVG9wKGludGVyc2VjdGlvbi5ib3VuZGluZ0NsaWVudFJlY3QudG9wIDwgMCk7XG4gICAgfSwge1xuICAgICAgdGhyZXNob2xkOiAxXG4gICAgfSk7XG4gICAgcmV0dXJuIGlvLm9ic2VydmUocmVmLmN1cnJlbnQpLCAoKSA9PiBpby5kaXNjb25uZWN0KCk7XG4gIH0sICRbOV0gPSBob3ZlcmVkLCAkWzEwXSA9IHQ2KSA6IHQ2ID0gJFsxMF07XG4gIGxldCB0NztcbiAgJFsxMV0gIT09IGhvdmVyZWQgfHwgJFsxMl0gIT09IGlzTmVhclRvcCA/ICh0NyA9IFtob3ZlcmVkLCBpc05lYXJUb3BdLCAkWzExXSA9IGhvdmVyZWQsICRbMTJdID0gaXNOZWFyVG9wLCAkWzEzXSA9IHQ3KSA6IHQ3ID0gJFsxM10sIHVzZUVmZmVjdCh0NiwgdDcpO1xuICBjb25zdCBbYWN0aXZlRXhjbHVzaXZlUGx1Z2luLCBzZXRBY3RpdmVFeGNsdXNpdmVQbHVnaW5dID0gdXNlU3RhdGUobnVsbCk7XG4gIGxldCB0ODtcbiAgJFsxNF0gPT09IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vX2NhY2hlX3NlbnRpbmVsXCIpID8gKHQ4ID0gKCkgPT4ge1xuICAgIHNldEFjdGl2ZUV4Y2x1c2l2ZVBsdWdpbihudWxsKSwgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwic2FuaXR5LW92ZXJsYXkvZXhjbHVzaXZlLXBsdWdpbi1jbG9zZWRcIikpO1xuICB9LCAkWzE0XSA9IHQ4KSA6IHQ4ID0gJFsxNF07XG4gIGNvbnN0IGNsb3NlRXhjbHVzaXZlUGx1Z2luVmlldyA9IHQ4O1xuICBsZXQgdDk7XG4gICRbMTVdID09PSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSA/ICh0OSA9IChwbHVnaW4sIGNvbnRleHQpID0+IHtcbiAgICBzZXRBY3RpdmVFeGNsdXNpdmVQbHVnaW4oe1xuICAgICAgcGx1Z2luLFxuICAgICAgY29udGV4dFxuICAgIH0pO1xuICB9LCAkWzE1XSA9IHQ5KSA6IHQ5ID0gJFsxNV07XG4gIGNvbnN0IG9uQWN0aXZhdGVFeGNsdXNpdmVQbHVnaW4gPSB0OSwgaGFuZGxlRXhjbHVzaXZlUGx1Z2luQ2xpY2sgPSBfdGVtcDUkMSwgRXhjbHVzaXZlUGx1Z2luQ29tcG9uZW50ID0gYWN0aXZlRXhjbHVzaXZlUGx1Z2luPy5wbHVnaW4uY29tcG9uZW50LCBbbWVudU9wZW4sIHNldE1lbnVPcGVuXSA9IHVzZVN0YXRlKCExKTtcbiAgbGV0IHQxMDtcbiAgJFsxNl0gPT09IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vX2NhY2hlX3NlbnRpbmVsXCIpID8gKHQxMCA9ICgpID0+IHtcbiAgICBzZXRNZW51T3BlbighMSk7XG4gIH0sICRbMTZdID0gdDEwKSA6IHQxMCA9ICRbMTZdO1xuICBsZXQgdDExO1xuICAkWzE3XSAhPT0gaG92ZXJlZCA/ICh0MTEgPSBbaG92ZXJlZF0sICRbMTddID0gaG92ZXJlZCwgJFsxOF0gPSB0MTEpIDogdDExID0gJFsxOF0sIHVzZUVmZmVjdCh0MTAsIHQxMSk7XG4gIGxldCB0MTI7XG4gICRbMTldICE9PSBFeGNsdXNpdmVQbHVnaW5Db21wb25lbnQgfHwgJFsyMF0gIT09IG1lbnVPcGVuID8gKHQxMiA9IG1lbnVPcGVuIHx8IEV4Y2x1c2l2ZVBsdWdpbkNvbXBvbmVudCA/IC8qIEBfX1BVUkVfXyAqLyBqc3goUG9wb3ZlckJhY2tncm91bmQsIHsgb25EaXNtaXNzOiBjbG9zZUV4Y2x1c2l2ZVBsdWdpblZpZXcsIGJsb2NrU2Nyb2xsOiBtZW51T3BlbiB9KSA6IG51bGwsICRbMTldID0gRXhjbHVzaXZlUGx1Z2luQ29tcG9uZW50LCAkWzIwXSA9IG1lbnVPcGVuLCAkWzIxXSA9IHQxMikgOiB0MTIgPSAkWzIxXTtcbiAgY29uc3QgdDEzID0gZm9jdXNlZCA/IFwiXCIgOiB2b2lkIDAsIHQxNCA9IGhvdmVyZWQgPyBcIlwiIDogdm9pZCAwLCB0MTUgPSBpc05lYXJUb3AgPyBcIlwiIDogdm9pZCAwLCB0MTYgPSBkcmFnZ2FibGUgPyBcIlwiIDogdm9pZCAwLCB0MTcgPSBtZW51T3BlbiA/IFwiXCIgOiB2b2lkIDA7XG4gIGxldCB0MTg7XG4gICRbMjJdICE9PSBFeGNsdXNpdmVQbHVnaW5Db21wb25lbnQgfHwgJFsyM10gIT09IGFjdGl2ZUV4Y2x1c2l2ZVBsdWdpbiB8fCAkWzI0XSAhPT0gaG92ZXJlZCB8fCAkWzI1XSAhPT0gcHJvcHMgPyAodDE4ID0gRXhjbHVzaXZlUGx1Z2luQ29tcG9uZW50ID8gLyogQF9fUFVSRV9fICovIGpzeChFeGNsdXNpdmVQbHVnaW5Db250YWluZXIsIHsgXCJkYXRhLXNhbml0eS1vdmVybGF5LWVsZW1lbnRcIjogITAsIG9uQ2xpY2s6IGhhbmRsZUV4Y2x1c2l2ZVBsdWdpbkNsaWNrLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChFeGNsdXNpdmVQbHVnaW5Db21wb25lbnQsIHsgLi4uYWN0aXZlRXhjbHVzaXZlUGx1Z2luLmNvbnRleHQsIGNsb3NlRXhjbHVzaXZlVmlldzogY2xvc2VFeGNsdXNpdmVQbHVnaW5WaWV3IH0pIH0pIDogaG92ZXJlZCA/IC8qIEBfX1BVUkVfXyAqLyBqc3goRWxlbWVudE92ZXJsYXlJbm5lciwgeyAuLi5wcm9wcywgb25BY3RpdmF0ZUV4Y2x1c2l2ZVBsdWdpbiwgb25NZW51T3BlbkNoYW5nZTogc2V0TWVudU9wZW4gfSkgOiBudWxsLCAkWzIyXSA9IEV4Y2x1c2l2ZVBsdWdpbkNvbXBvbmVudCwgJFsyM10gPSBhY3RpdmVFeGNsdXNpdmVQbHVnaW4sICRbMjRdID0gaG92ZXJlZCwgJFsyNV0gPSBwcm9wcywgJFsyNl0gPSB0MTgpIDogdDE4ID0gJFsyNl07XG4gIGxldCB0MTk7XG4gICRbMjddICE9PSBzdHlsZSB8fCAkWzI4XSAhPT0gdDEzIHx8ICRbMjldICE9PSB0MTQgfHwgJFszMF0gIT09IHQxNSB8fCAkWzMxXSAhPT0gdDE2IHx8ICRbMzJdICE9PSB0MTcgfHwgJFszM10gIT09IHQxOCA/ICh0MTkgPSAvKiBAX19QVVJFX18gKi8ganN4KFJvb3QkMywgeyBcImRhdGEtZm9jdXNlZFwiOiB0MTMsIFwiZGF0YS1ob3ZlcmVkXCI6IHQxNCwgXCJkYXRhLWZsaXBwZWRcIjogdDE1LCBcImRhdGEtZHJhZ2dhYmxlXCI6IHQxNiwgXCJkYXRhLW1lbnUtb3BlblwiOiB0MTcsIHJlZiwgc3R5bGUsIGNoaWxkcmVuOiB0MTggfSksICRbMjddID0gc3R5bGUsICRbMjhdID0gdDEzLCAkWzI5XSA9IHQxNCwgJFszMF0gPSB0MTUsICRbMzFdID0gdDE2LCAkWzMyXSA9IHQxNywgJFszM10gPSB0MTgsICRbMzRdID0gdDE5KSA6IHQxOSA9ICRbMzRdO1xuICBsZXQgdDIwO1xuICByZXR1cm4gJFszNV0gIT09IHQxMiB8fCAkWzM2XSAhPT0gdDE5ID8gKHQyMCA9IC8qIEBfX1BVUkVfXyAqLyBqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbXG4gICAgdDEyLFxuICAgIHQxOVxuICBdIH0pLCAkWzM1XSA9IHQxMiwgJFszNl0gPSB0MTksICRbMzddID0gdDIwKSA6IHQyMCA9ICRbMzddLCB0MjA7XG59KTtcbmZ1bmN0aW9uIHVzZVJlc29sdmVkTm9kZVBsdWdpbnMoY29tcG9uZW50Q29udGV4dHMsIHBsdWdpbnMpIHtcbiAgY29uc3QgJCA9IGMoNSk7XG4gIGxldCB0MDtcbiAgaWYgKCRbMF0gIT09IGNvbXBvbmVudENvbnRleHRzIHx8ICRbMV0gIT09IHBsdWdpbnMpIHtcbiAgICBsZXQgdDE7XG4gICAgJFszXSAhPT0gcGx1Z2lucyA/ICh0MSA9IChjb21wb25lbnRDb250ZXh0KSA9PiB7XG4gICAgICBjb25zdCBpbnN0YW5jZSA9IHtcbiAgICAgICAgaWQ6IHY0KCksXG4gICAgICAgIGNvbnRleHQ6IGNvbXBvbmVudENvbnRleHQsXG4gICAgICAgIGh1ZDogW10sXG4gICAgICAgIGV4Y2x1c2l2ZTogW11cbiAgICAgIH07XG4gICAgICByZXR1cm4gcGx1Z2lucz8uZm9yRWFjaCgocGx1Z2luKSA9PiB7XG4gICAgICAgIHBsdWdpbi5ndWFyZD8uKGNvbXBvbmVudENvbnRleHQpICYmIChwbHVnaW4udHlwZSA9PT0gXCJodWRcIiAmJiBpbnN0YW5jZS5odWQucHVzaChwbHVnaW4pLCBwbHVnaW4udHlwZSA9PT0gXCJleGNsdXNpdmVcIiAmJiBpbnN0YW5jZS5leGNsdXNpdmUucHVzaChwbHVnaW4pKTtcbiAgICAgIH0pLCBpbnN0YW5jZTtcbiAgICB9LCAkWzNdID0gcGx1Z2lucywgJFs0XSA9IHQxKSA6IHQxID0gJFs0XSwgdDAgPSBjb21wb25lbnRDb250ZXh0cy5tYXAodDEpLCAkWzBdID0gY29tcG9uZW50Q29udGV4dHMsICRbMV0gPSBwbHVnaW5zLCAkWzJdID0gdDA7XG4gIH0gZWxzZVxuICAgIHQwID0gJFsyXTtcbiAgcmV0dXJuIHQwO1xufVxuZnVuY3Rpb24gdXNlQ3VzdG9tQ29tcG9uZW50cyhjb21wb25lbnRDb250ZXh0LCBjb21wb25lbnRSZXNvbHZlcikge1xuICBjb25zdCAkID0gYyg0KTtcbiAgbGV0IHQwO1xuICBiYjA6IHtcbiAgICBpZiAoIWNvbXBvbmVudENvbnRleHQpIHtcbiAgICAgIHQwID0gdm9pZCAwO1xuICAgICAgYnJlYWsgYmIwO1xuICAgIH1cbiAgICBsZXQgdDE7XG4gICAgaWYgKCRbMF0gIT09IGNvbXBvbmVudENvbnRleHQgfHwgJFsxXSAhPT0gY29tcG9uZW50UmVzb2x2ZXIpIHtcbiAgICAgIGNvbnN0IHJlc29sdmVkID0gY29tcG9uZW50UmVzb2x2ZXI/Lihjb21wb25lbnRDb250ZXh0KTtcbiAgICAgIGlmICghcmVzb2x2ZWQpIHtcbiAgICAgICAgdDAgPSB2b2lkIDA7XG4gICAgICAgIGJyZWFrIGJiMDtcbiAgICAgIH1cbiAgICAgIGlmIChpc1JlYWN0RWxlbWVudE92ZXJsYXlDb21wb25lbnQocmVzb2x2ZWQpKSB7XG4gICAgICAgIHQwID0gcmVzb2x2ZWQ7XG4gICAgICAgIGJyZWFrIGJiMDtcbiAgICAgIH1cbiAgICAgIHQxID0gKEFycmF5LmlzQXJyYXkocmVzb2x2ZWQpID8gcmVzb2x2ZWQgOiBbcmVzb2x2ZWRdKS5tYXAoX3RlbXA2JDEpLCAkWzBdID0gY29tcG9uZW50Q29udGV4dCwgJFsxXSA9IGNvbXBvbmVudFJlc29sdmVyLCAkWzJdID0gdDEsICRbM10gPSB0MDtcbiAgICB9IGVsc2VcbiAgICAgIHQxID0gJFsyXSwgdDAgPSAkWzNdO1xuICAgIHQwID0gdDE7XG4gIH1cbiAgcmV0dXJuIHQwO1xufVxuZnVuY3Rpb24gX3RlbXA2JDEoY29tcG9uZW50KSB7XG4gIHJldHVybiB0eXBlb2YgY29tcG9uZW50ID09IFwib2JqZWN0XCIgJiYgXCJjb21wb25lbnRcIiBpbiBjb21wb25lbnQgPyBjb21wb25lbnQgOiB7XG4gICAgY29tcG9uZW50LFxuICAgIHByb3BzOiB7fVxuICB9O1xufVxuY29uc3QgTGluayA9IG1lbW8oZnVuY3Rpb24ocHJvcHMpIHtcbiAgY29uc3QgJCA9IGMoNiksIHJlZmVyZXIgPSB1c2VTeW5jRXh0ZXJuYWxTdG9yZShfdGVtcDckMSwgX3RlbXA4JDEpO1xuICBsZXQgdDA7XG4gICRbMF0gIT09IHByb3BzLmhyZWYgfHwgJFsxXSAhPT0gcmVmZXJlciA/ICh0MCA9IGdldExpbmtIcmVmKHByb3BzLmhyZWYsIHJlZmVyZXIpLCAkWzBdID0gcHJvcHMuaHJlZiwgJFsxXSA9IHJlZmVyZXIsICRbMl0gPSB0MCkgOiB0MCA9ICRbMl07XG4gIGNvbnN0IGhyZWYgPSB0MDtcbiAgbGV0IHQxO1xuICAkWzNdID09PSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSA/ICh0MSA9IC8qIEBfX1BVUkVfXyAqLyBqc3goQWN0aW9uT3BlbiwgeyBwYWRkaW5nOiAyLCBjaGlsZHJlbjogLyogQF9fUFVSRV9fICovIGpzeChUZXh0LCB7IHNpemU6IDEsIHdlaWdodDogXCJtZWRpdW1cIiwgY2hpbGRyZW46IFwiT3BlbiBpbiBTdHVkaW9cIiB9KSB9KSwgJFszXSA9IHQxKSA6IHQxID0gJFszXTtcbiAgbGV0IHQyO1xuICByZXR1cm4gJFs0XSAhPT0gaHJlZiA/ICh0MiA9IC8qIEBfX1BVUkVfXyAqLyBqc3goQm94LCB7IGFzOiBcImFcIiwgaHJlZiwgdGFyZ2V0OiBcIl9ibGFua1wiLCByZWw6IFwibm9vcGVuZXIgbm9yZWZlcnJlclwiLCBjaGlsZHJlbjogdDEgfSksICRbNF0gPSBocmVmLCAkWzVdID0gdDIpIDogdDIgPSAkWzVdLCB0Mjtcbn0pO1xuZnVuY3Rpb24gX3RlbXAkOChjdHgpIHtcbiAgcmV0dXJuIGN0eCAhPT0gdm9pZCAwO1xufVxuZnVuY3Rpb24gX3RlbXAyJDUobm9kZVBsdWdpbkNvbGxlY3Rpb24pIHtcbiAgcmV0dXJuIG5vZGVQbHVnaW5Db2xsZWN0aW9uLmV4Y2x1c2l2ZS5sZW5ndGggPiAwO1xufVxuZnVuY3Rpb24gX3RlbXAzJDIoZSkge1xuICBlLnN0b3BQcm9wYWdhdGlvbigpO1xufVxuZnVuY3Rpb24gX3RlbXA0JDEobm9kZVBsdWdpbkNvbGxlY3Rpb25fMSkge1xuICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChGcmFnbWVudCQxLCB7IGNoaWxkcmVuOiBub2RlUGx1Z2luQ29sbGVjdGlvbl8xLmh1ZC5tYXAoKGh1ZCkgPT4ge1xuICAgIGNvbnN0IENvbXBvbmVudF8wID0gaHVkLmNvbXBvbmVudDtcbiAgICByZXR1cm4gQ29tcG9uZW50XzAgPyAvKiBAX19QVVJFX18gKi8ganN4KENvbXBvbmVudF8wLCB7IC4uLm5vZGVQbHVnaW5Db2xsZWN0aW9uXzEuY29udGV4dCB9LCBodWQubmFtZSkgOiBudWxsO1xuICB9KSB9LCBub2RlUGx1Z2luQ29sbGVjdGlvbl8xLmlkKTtcbn1cbmZ1bmN0aW9uIF90ZW1wNSQxKGV2ZW50KSB7XG4gIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xufVxuZnVuY3Rpb24gX3RlbXA3JDEob25TdG9yZUNoYW5nZSkge1xuICBjb25zdCBoYW5kbGVQb3BTdGF0ZSA9ICgpID0+IG9uU3RvcmVDaGFuZ2UoKTtcbiAgcmV0dXJuIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgaGFuZGxlUG9wU3RhdGUpLCAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvcHN0YXRlXCIsIGhhbmRsZVBvcFN0YXRlKTtcbn1cbmZ1bmN0aW9uIF90ZW1wOCQxKCkge1xuICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWY7XG59XG5jb25zdCBPdmVybGF5RHJhZ0dyb3VwUmVjdCA9ICh0MCkgPT4ge1xuICBjb25zdCAkID0gYyg1KSwge1xuICAgIGRyYWdHcm91cFJlY3RcbiAgfSA9IHQwLCB0MSA9IGAke2RyYWdHcm91cFJlY3QueX1weGAsIHQyID0gYCR7ZHJhZ0dyb3VwUmVjdC54fXB4YCwgdDMgPSBgJHtkcmFnR3JvdXBSZWN0LncgLSAxfXB4YCwgdDQgPSBgJHtkcmFnR3JvdXBSZWN0LmggLSAxfXB4YDtcbiAgbGV0IHQ1O1xuICByZXR1cm4gJFswXSAhPT0gdDEgfHwgJFsxXSAhPT0gdDIgfHwgJFsyXSAhPT0gdDMgfHwgJFszXSAhPT0gdDQgPyAodDUgPSAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgc3R5bGU6IHtcbiAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgIHRvcDogdDEsXG4gICAgbGVmdDogdDIsXG4gICAgd2lkdGg6IHQzLFxuICAgIGhlaWdodDogdDQsXG4gICAgYm9yZGVyOiBcIjFweCBkYXNoZWQgI2YwNzA5YlwiLFxuICAgIHBvaW50ZXJFdmVudHM6IFwibm9uZVwiXG4gIH0gfSksICRbMF0gPSB0MSwgJFsxXSA9IHQyLCAkWzJdID0gdDMsICRbM10gPSB0NCwgJFs0XSA9IHQ1KSA6IHQ1ID0gJFs0XSwgdDU7XG59LCBtYXJrZXJUaGlja25lc3MgPSA2O1xuZnVuY3Rpb24gbGVycCh2MCwgdjEsIHQpIHtcbiAgcmV0dXJuIHYwICogKDEgLSB0KSArIHYxICogdDtcbn1cbmNvbnN0IE92ZXJsYXlEcmFnSW5zZXJ0TWFya2VyID0gKHQwKSA9PiB7XG4gIGNvbnN0ICQgPSBjKDQpLCB7XG4gICAgZHJhZ0luc2VydFBvc2l0aW9uXG4gIH0gPSB0MDtcbiAgaWYgKGRyYWdJbnNlcnRQb3NpdGlvbiA9PT0gbnVsbClcbiAgICByZXR1cm47XG4gIGNvbnN0IGZsb3cgPSBkcmFnSW5zZXJ0UG9zaXRpb24/LmxlZnQgfHwgZHJhZ0luc2VydFBvc2l0aW9uPy5yaWdodCA/IFwiaG9yaXpvbnRhbFwiIDogXCJ2ZXJ0aWNhbFwiO1xuICBsZXQgeCA9IDAsIHkgPSAwLCB3aWR0aCA9IDAsIGhlaWdodCA9IDA7XG4gIGlmIChmbG93ID09PSBcImhvcml6b250YWxcIikge1xuICAgIGNvbnN0IHtcbiAgICAgIGxlZnQsXG4gICAgICByaWdodFxuICAgIH0gPSBkcmFnSW5zZXJ0UG9zaXRpb247XG4gICAgaWYgKHdpZHRoID0gbWFya2VyVGhpY2tuZXNzLCByaWdodCAmJiBsZWZ0KSB7XG4gICAgICBjb25zdCBzdGFydFggPSBsZWZ0LnJlY3QueCArIGxlZnQucmVjdC53LCBlbmRYID0gcmlnaHQucmVjdC54LCBvZmZzZXQgPSBNYXRoLm1pbihyaWdodC5yZWN0LmgsIGxlZnQucmVjdC5oKSAqIDAuMDEyNTtcbiAgICAgIHggPSBsZXJwKHN0YXJ0WCwgZW5kWCwgMC41KSAtIG1hcmtlclRoaWNrbmVzcyAvIDIsIHkgPSBsZWZ0LnJlY3QueSArIG9mZnNldCwgaGVpZ2h0ID0gTWF0aC5taW4ocmlnaHQucmVjdC5oLCBsZWZ0LnJlY3QuaCkgLSBvZmZzZXQgKiAyO1xuICAgIH0gZWxzZSBpZiAocmlnaHQgJiYgIWxlZnQpIHtcbiAgICAgIGNvbnN0IG9mZnNldF8wID0gcmlnaHQucmVjdC5oICogMC4wMTI1O1xuICAgICAgeCA9IHJpZ2h0LnJlY3QueCAtIG1hcmtlclRoaWNrbmVzcyAvIDIsIHkgPSByaWdodC5yZWN0LnkgKyBvZmZzZXRfMCwgaGVpZ2h0ID0gcmlnaHQucmVjdC5oIC0gb2Zmc2V0XzAgKiAyO1xuICAgIH0gZWxzZSBpZiAobGVmdCAmJiAhcmlnaHQpIHtcbiAgICAgIGNvbnN0IG9mZnNldF8xID0gbGVmdC5yZWN0LmggKiAwLjAxMjU7XG4gICAgICB4ID0gbGVmdC5yZWN0LnggKyBsZWZ0LnJlY3QudyAtIG1hcmtlclRoaWNrbmVzcyAvIDIsIHkgPSBsZWZ0LnJlY3QueSArIG9mZnNldF8xLCBoZWlnaHQgPSBsZWZ0LnJlY3QuaCAtIG9mZnNldF8xICogMjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qge1xuICAgICAgYm90dG9tLFxuICAgICAgdG9wXG4gICAgfSA9IGRyYWdJbnNlcnRQb3NpdGlvbjtcbiAgICBpZiAoYm90dG9tICYmIHRvcCkge1xuICAgICAgY29uc3Qgc3RhcnRYXzAgPSBNYXRoLm1pbih0b3AucmVjdC54LCBib3R0b20ucmVjdC54KSwgc3RhcnRZID0gdG9wLnJlY3QueSArIHRvcC5yZWN0LmgsIGVuZFkgPSBib3R0b20ucmVjdC55LCBvZmZzZXRfMiA9IE1hdGgubWluKGJvdHRvbS5yZWN0LncsIHRvcC5yZWN0LncpICogMC4wMTI1O1xuICAgICAgaGVpZ2h0ID0gbWFya2VyVGhpY2tuZXNzLCB4ID0gc3RhcnRYXzAgKyBvZmZzZXRfMiwgeSA9IGxlcnAoc3RhcnRZLCBlbmRZLCAwLjUpIC0gbWFya2VyVGhpY2tuZXNzIC8gMiwgd2lkdGggPSBNYXRoLm1heChib3R0b20ucmVjdC53LCB0b3AucmVjdC53KSAtIG9mZnNldF8yICogMjtcbiAgICB9IGVsc2UgaWYgKGJvdHRvbSAmJiAhdG9wKSB7XG4gICAgICBjb25zdCBvZmZzZXRfMyA9IGJvdHRvbS5yZWN0LncgKiAwLjAxMjU7XG4gICAgICB4ID0gYm90dG9tLnJlY3QueCArIG9mZnNldF8zLCB5ID0gYm90dG9tLnJlY3QueSAtIG1hcmtlclRoaWNrbmVzcyAvIDIsIHdpZHRoID0gYm90dG9tLnJlY3QudyAtIG9mZnNldF8zICogMiwgaGVpZ2h0ID0gbWFya2VyVGhpY2tuZXNzO1xuICAgIH0gZWxzZSBpZiAodG9wICYmICFib3R0b20pIHtcbiAgICAgIGNvbnN0IG9mZnNldF80ID0gdG9wLnJlY3QudyAqIDAuMDEyNTtcbiAgICAgIHggPSB0b3AucmVjdC54ICsgb2Zmc2V0XzQsIHkgPSB0b3AucmVjdC55ICsgdG9wLnJlY3QuaCAtIG1hcmtlclRoaWNrbmVzcyAvIDIsIHdpZHRoID0gdG9wLnJlY3QudyAtIG9mZnNldF80ICogMiwgaGVpZ2h0ID0gbWFya2VyVGhpY2tuZXNzO1xuICAgIH1cbiAgfVxuICBjb25zdCB0MSA9IGAke3dpZHRofXB4YCwgdDIgPSBgJHtoZWlnaHR9cHhgLCB0MyA9IGB0cmFuc2xhdGUoJHt4fXB4LCAke3l9cHgpYDtcbiAgbGV0IHQ0O1xuICByZXR1cm4gJFswXSAhPT0gdDEgfHwgJFsxXSAhPT0gdDIgfHwgJFsyXSAhPT0gdDMgPyAodDQgPSAvKiBAX19QVVJFX18gKi8ganN4KFwiZGl2XCIsIHsgc3R5bGU6IHtcbiAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgIHdpZHRoOiB0MSxcbiAgICBoZWlnaHQ6IHQyLFxuICAgIHRyYW5zZm9ybTogdDMsXG4gICAgYmFja2dyb3VuZDogXCIjNTU2YmZjXCIsXG4gICAgYm9yZGVyOiBcIjJweCBzb2xpZCB3aGl0ZVwiLFxuICAgIGJvcmRlclJhZGl1czogXCI5OTlweFwiLFxuICAgIHpJbmRleDogXCI5OTk5OTlcIlxuICB9IH0pLCAkWzBdID0gdDEsICRbMV0gPSB0MiwgJFsyXSA9IHQzLCAkWzNdID0gdDQpIDogdDQgPSAkWzNdLCB0NDtcbn0sIFJvb3QkMiA9IHN0eWxlZC5kaXZgXG4gIC0tZHJhZy1wcmV2aWV3LW9wYWNpdHk6IDAuOTg7XG4gIC0tZHJhZy1wcmV2aWV3LXNrZWxldG9uLXN0cm9rZTogI2ZmZmZmZjtcblxuICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7XG4gICAgLS1kcmFnLXByZXZpZXctc2tlbGV0b24tc3Ryb2tlOiAjMzgzZDUxO1xuICB9XG5cbiAgcG9zaXRpb246IGZpeGVkO1xuICBkaXNwbGF5OiBncmlkO1xuICB0cmFuc2Zvcm06ICR7KHtcbiAgJHNjYWxlRmFjdG9yLFxuICAkd2lkdGgsXG4gICRoZWlnaHRcbn0pID0+IGB0cmFuc2xhdGUoY2FsYyh2YXIoLS1kcmFnLXByZXZpZXcteCkgLSAkeyR3aWR0aCAvIDJ9cHgpLCBjYWxjKHZhcigtLWRyYWctcHJldmlldy15KSAtICR7JGhlaWdodCAvIDJ9cHgpKSBzY2FsZSgkeyRzY2FsZUZhY3Rvcn0pYH07XG4gIHdpZHRoOiAkeyh7XG4gICR3aWR0aFxufSkgPT4gYCR7JHdpZHRofXB4YH07XG4gIGhlaWdodDogJHsoe1xuICAkaGVpZ2h0XG59KSA9PiBgJHskaGVpZ2h0fXB4YH07XG4gIHotaW5kZXg6IDk5OTk5OTk7XG4gIG9wYWNpdHk6IHZhcigtLWRyYWctcHJldmlldy1vcGFjaXR5KTtcbiAgY3Vyc29yOiBtb3ZlO1xuXG4gIC5kcmFnLXByZXZpZXctY29udGVudC13cmFwcGVyIHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIGNvbnRhaW5lci10eXBlOiBpbmxpbmUtc2l6ZTtcbiAgfVxuXG4gIFtkYXRhLXVpPSdjYXJkJ10ge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gIH1cblxuICAuZHJhZy1wcmV2aWV3LXNrZWxldG9uIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgaW5zZXQ6IDA7XG5cbiAgICByZWN0IHtcbiAgICAgIHN0cm9rZTogdmFyKC0tZHJhZy1wcmV2aWV3LXNrZWxldG9uLXN0cm9rZSk7XG4gICAgfVxuICB9XG5cbiAgLmRyYWctcHJldmlldy1oYW5kbGUge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDRjcW1pbjtcbiAgICBsZWZ0OiA0Y3FtaW47XG4gICAgd2lkdGg6IDZjcW1pbjtcbiAgICBmaWxsOiB2YXIoLS1kcmFnLXByZXZpZXctaGFuZGxlLWZpbGwpO1xuICB9XG5gO1xuZnVuY3Rpb24gY2xhbXAobnVtYmVyLCBtaW4sIG1heCkge1xuICByZXR1cm4gbnVtYmVyIDwgbWluID8gbWluIDogbnVtYmVyID4gbWF4ID8gbWF4IDogbnVtYmVyO1xufVxuZnVuY3Rpb24gbWFwKG51bWJlciwgaW5NaW4sIGluTWF4LCBvdXRNaW4sIG91dE1heCkge1xuICBjb25zdCBtYXBwZWQgPSAobnVtYmVyIC0gaW5NaW4pICogKG91dE1heCAtIG91dE1pbikgLyAoaW5NYXggLSBpbk1pbikgKyBvdXRNaW47XG4gIHJldHVybiBjbGFtcChtYXBwZWQsIG91dE1pbiwgb3V0TWF4KTtcbn1cbmNvbnN0IE92ZXJsYXlEcmFnUHJldmlldyA9ICh0MCkgPT4ge1xuICBjb25zdCAkID0gYyg1MCksIHtcbiAgICBza2VsZXRvblxuICB9ID0gdDAsIG1heFNrZWxldG9uV2lkdGggPSBNYXRoLm1pbihza2VsZXRvbi5tYXhXaWR0aCwgd2luZG93LmlubmVyV2lkdGggLyAyKSwgc2NhbGVGYWN0b3IgPSBza2VsZXRvbi53ID4gbWF4U2tlbGV0b25XaWR0aCA/IG1heFNrZWxldG9uV2lkdGggLyBza2VsZXRvbi53IDogMSwgb2Zmc2V0WCA9IHNrZWxldG9uLm9mZnNldFggKiBzY2FsZUZhY3Rvciwgb2Zmc2V0WSA9IHNrZWxldG9uLm9mZnNldFkgKiBzY2FsZUZhY3RvciwgcHJlZmVyc0RhcmsgPSB1c2VQcmVmZXJzRGFyaygpLCB0aGVtZSA9IHVzZVRoZW1lX3YyKCksIHJhZGl1cyA9IHRoZW1lLnJhZGl1c1t+fm1hcChza2VsZXRvbi53LCAwLCAxOTIwLCAxLCB0aGVtZS5yYWRpdXMubGVuZ3RoIC0gMildO1xuICBsZXQgVDAsIFQxLCB0MSwgdDEwLCB0MTEsIHQxMiwgdDEzLCB0MTQsIHQyLCB0MywgdDQsIHQ1LCB0NiwgdDcsIHQ4LCB0OTtcbiAgaWYgKCRbMF0gIT09IG9mZnNldFggfHwgJFsxXSAhPT0gb2Zmc2V0WSB8fCAkWzJdICE9PSBwcmVmZXJzRGFyayB8fCAkWzNdICE9PSByYWRpdXMgfHwgJFs0XSAhPT0gc2NhbGVGYWN0b3IgfHwgJFs1XSAhPT0gc2tlbGV0b24uY2hpbGRSZWN0cyB8fCAkWzZdICE9PSBza2VsZXRvbi5oIHx8ICRbN10gIT09IHNrZWxldG9uLncpIHtcbiAgICBjb25zdCBpbWFnZVJlY3RzID0gc2tlbGV0b24uY2hpbGRSZWN0cy5maWx0ZXIoX3RlbXAkNyksIHRleHRSZWN0cyA9IHNrZWxldG9uLmNoaWxkUmVjdHMuZmlsdGVyKF90ZW1wMiQ0KTtcbiAgICBUMSA9IFJvb3QkMiwgdDEwID0gc2tlbGV0b24udywgdDExID0gc2tlbGV0b24uaCwgdDEyID0gb2Zmc2V0WCwgdDEzID0gb2Zmc2V0WSwgdDE0ID0gc2NhbGVGYWN0b3IsIFQwID0gQ2FyZCwgdDUgPSByYWRpdXMsIHQ2ID0gNCwgdDcgPSBcImhpZGRlblwiLCB0OCA9IFwidHJhbnNwYXJlbnRcIiwgdDkgPSBwcmVmZXJzRGFyayA/IFwiZGFya1wiIDogXCJsaWdodFwiLCB0NCA9IFwiZHJhZy1wcmV2aWV3LWNvbnRlbnQtd3JhcHBlclwiLCB0MiA9IFwiZHJhZy1wcmV2aWV3LXNrZWxldG9uXCIsIHQzID0gYDAgMCAke3NrZWxldG9uLnd9ICR7c2tlbGV0b24uaH1gLCB0MSA9IFsuLi5pbWFnZVJlY3RzLCAuLi50ZXh0UmVjdHNdLCAkWzBdID0gb2Zmc2V0WCwgJFsxXSA9IG9mZnNldFksICRbMl0gPSBwcmVmZXJzRGFyaywgJFszXSA9IHJhZGl1cywgJFs0XSA9IHNjYWxlRmFjdG9yLCAkWzVdID0gc2tlbGV0b24uY2hpbGRSZWN0cywgJFs2XSA9IHNrZWxldG9uLmgsICRbN10gPSBza2VsZXRvbi53LCAkWzhdID0gVDAsICRbOV0gPSBUMSwgJFsxMF0gPSB0MSwgJFsxMV0gPSB0MTAsICRbMTJdID0gdDExLCAkWzEzXSA9IHQxMiwgJFsxNF0gPSB0MTMsICRbMTVdID0gdDE0LCAkWzE2XSA9IHQyLCAkWzE3XSA9IHQzLCAkWzE4XSA9IHQ0LCAkWzE5XSA9IHQ1LCAkWzIwXSA9IHQ2LCAkWzIxXSA9IHQ3LCAkWzIyXSA9IHQ4LCAkWzIzXSA9IHQ5O1xuICB9IGVsc2VcbiAgICBUMCA9ICRbOF0sIFQxID0gJFs5XSwgdDEgPSAkWzEwXSwgdDEwID0gJFsxMV0sIHQxMSA9ICRbMTJdLCB0MTIgPSAkWzEzXSwgdDEzID0gJFsxNF0sIHQxNCA9ICRbMTVdLCB0MiA9ICRbMTZdLCB0MyA9ICRbMTddLCB0NCA9ICRbMThdLCB0NSA9ICRbMTldLCB0NiA9ICRbMjBdLCB0NyA9ICRbMjFdLCB0OCA9ICRbMjJdLCB0OSA9ICRbMjNdO1xuICBsZXQgdDE1O1xuICAkWzI0XSAhPT0gdDEgfHwgJFsyNV0gIT09IHRoZW1lLmNvbG9yID8gKHQxNSA9IHQxLm1hcCgocl8xLCBpKSA9PiAvKiBAX19QVVJFX18gKi8ganN4KFwicmVjdFwiLCB7IHg6IHJfMS54LCB5OiByXzEueSwgd2lkdGg6IHJfMS53LCBoZWlnaHQ6IHJfMS5oLCBmaWxsOiB0aGVtZS5jb2xvci5za2VsZXRvbi5mcm9tIH0sIGkpKSwgJFsyNF0gPSB0MSwgJFsyNV0gPSB0aGVtZS5jb2xvciwgJFsyNl0gPSB0MTUpIDogdDE1ID0gJFsyNl07XG4gIGxldCB0MTY7XG4gICRbMjddICE9PSB0MTUgfHwgJFsyOF0gIT09IHQyIHx8ICRbMjldICE9PSB0MyA/ICh0MTYgPSAvKiBAX19QVVJFX18gKi8ganN4KFwic3ZnXCIsIHsgY2xhc3NOYW1lOiB0Miwgdmlld0JveDogdDMsIGNoaWxkcmVuOiB0MTUgfSksICRbMjddID0gdDE1LCAkWzI4XSA9IHQyLCAkWzI5XSA9IHQzLCAkWzMwXSA9IHQxNikgOiB0MTYgPSAkWzMwXTtcbiAgbGV0IHQxNztcbiAgJFszMV0gIT09IHQxNiB8fCAkWzMyXSAhPT0gdDQgPyAodDE3ID0gLyogQF9fUFVSRV9fICovIGpzeChcImRpdlwiLCB7IGNsYXNzTmFtZTogdDQsIGNoaWxkcmVuOiB0MTYgfSksICRbMzFdID0gdDE2LCAkWzMyXSA9IHQ0LCAkWzMzXSA9IHQxNykgOiB0MTcgPSAkWzMzXTtcbiAgbGV0IHQxODtcbiAgJFszNF0gIT09IFQwIHx8ICRbMzVdICE9PSB0MTcgfHwgJFszNl0gIT09IHQ1IHx8ICRbMzddICE9PSB0NiB8fCAkWzM4XSAhPT0gdDcgfHwgJFszOV0gIT09IHQ4IHx8ICRbNDBdICE9PSB0OSA/ICh0MTggPSAvKiBAX19QVVJFX18gKi8ganN4KFQwLCB7IHJhZGl1czogdDUsIHNoYWRvdzogdDYsIG92ZXJmbG93OiB0NywgdG9uZTogdDgsIHNjaGVtZTogdDksIGNoaWxkcmVuOiB0MTcgfSksICRbMzRdID0gVDAsICRbMzVdID0gdDE3LCAkWzM2XSA9IHQ1LCAkWzM3XSA9IHQ2LCAkWzM4XSA9IHQ3LCAkWzM5XSA9IHQ4LCAkWzQwXSA9IHQ5LCAkWzQxXSA9IHQxOCkgOiB0MTggPSAkWzQxXTtcbiAgbGV0IHQxOTtcbiAgcmV0dXJuICRbNDJdICE9PSBUMSB8fCAkWzQzXSAhPT0gdDEwIHx8ICRbNDRdICE9PSB0MTEgfHwgJFs0NV0gIT09IHQxMiB8fCAkWzQ2XSAhPT0gdDEzIHx8ICRbNDddICE9PSB0MTQgfHwgJFs0OF0gIT09IHQxOCA/ICh0MTkgPSAvKiBAX19QVVJFX18gKi8ganN4KFQxLCB7ICR3aWR0aDogdDEwLCAkaGVpZ2h0OiB0MTEsICRvZmZzZXRYOiB0MTIsICRvZmZzZXRZOiB0MTMsICRzY2FsZUZhY3RvcjogdDE0LCBjaGlsZHJlbjogdDE4IH0pLCAkWzQyXSA9IFQxLCAkWzQzXSA9IHQxMCwgJFs0NF0gPSB0MTEsICRbNDVdID0gdDEyLCAkWzQ2XSA9IHQxMywgJFs0N10gPSB0MTQsICRbNDhdID0gdDE4LCAkWzQ5XSA9IHQxOSkgOiB0MTkgPSAkWzQ5XSwgdDE5O1xufTtcbmZ1bmN0aW9uIF90ZW1wJDcocikge1xuICByZXR1cm4gci50YWdOYW1lID09PSBcIklNR1wiO1xufVxuZnVuY3Rpb24gX3RlbXAyJDQocl8wKSB7XG4gIHJldHVybiByXzAudGFnTmFtZSAhPT0gXCJJTUdcIjtcbn1cbmNvbnN0IFJvb3QkMSA9IHN0eWxlZChDYXJkKWBcbiAgcG9zaXRpb246IGZpeGVkO1xuICBib3R0b206IDJyZW07XG4gIGxlZnQ6IDJyZW07XG5gLCBPdmVybGF5TWluaW1hcFByb21wdCA9ICgpID0+IHtcbiAgY29uc3QgJCA9IGMoMik7XG4gIGxldCB0MDtcbiAgJFswXSA9PT0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDAgPSB7XG4gICAgekluZGV4OiBcIjk5OTk5OVwiXG4gIH0sICRbMF0gPSB0MCkgOiB0MCA9ICRbMF07XG4gIGxldCB0MTtcbiAgcmV0dXJuICRbMV0gPT09IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vX2NhY2hlX3NlbnRpbmVsXCIpID8gKHQxID0gLyogQF9fUFVSRV9fICovIGpzeChSb290JDEsIHsgcGFkZGluZzogMiwgc2hhZG93OiAyLCByYWRpdXM6IDIsIHN0eWxlOiB0MCwgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3hzKEZsZXgsIHsgYWxpZ246IFwiY2VudGVyXCIsIGdhcDogMiwgY2hpbGRyZW46IFtcbiAgICAvKiBAX19QVVJFX18gKi8ganN4KEhvdGtleXMsIHsga2V5czogW1wiU2hpZnRcIl0gfSksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChUZXh0LCB7IHNpemU6IDEsIGNoaWxkcmVuOiBcIlpvb20gT3V0XCIgfSksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChFeHBhbmRJY29uLCB7fSlcbiAgXSB9KSB9KSwgJFsxXSA9IHQxKSA6IHQxID0gJFsxXSwgdDE7XG59LCBlbGVtZW50c1JlZHVjZXIgPSAoZWxlbWVudHMsIG1lc3NhZ2UpID0+IHtcbiAgY29uc3Qge1xuICAgIHR5cGVcbiAgfSA9IG1lc3NhZ2U7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgXCJlbGVtZW50L3JlZ2lzdGVyXCI6XG4gICAgICByZXR1cm4gZWxlbWVudHMuZmluZCgoZSkgPT4gZS5pZCA9PT0gbWVzc2FnZS5pZCkgPyBlbGVtZW50cyA6IFsuLi5lbGVtZW50cywge1xuICAgICAgICBpZDogbWVzc2FnZS5pZCxcbiAgICAgICAgYWN0aXZhdGVkOiAhMSxcbiAgICAgICAgZWxlbWVudDogbWVzc2FnZS5lbGVtZW50LFxuICAgICAgICBmb2N1c2VkOiAhMSxcbiAgICAgICAgaG92ZXJlZDogITEsXG4gICAgICAgIHJlY3Q6IG1lc3NhZ2UucmVjdCxcbiAgICAgICAgc2FuaXR5OiBtZXNzYWdlLnNhbml0eSxcbiAgICAgICAgZHJhZ0Rpc2FibGVkOiBtZXNzYWdlLmRyYWdEaXNhYmxlZCxcbiAgICAgICAgdGFyZ2V0czogbWVzc2FnZS50YXJnZXRzLFxuICAgICAgICBlbGVtZW50VHlwZTogbWVzc2FnZS5lbGVtZW50VHlwZVxuICAgICAgfV07XG4gICAgY2FzZSBcImVsZW1lbnQvYWN0aXZhdGVcIjpcbiAgICAgIHJldHVybiBlbGVtZW50cy5tYXAoKGUpID0+IGUuaWQgPT09IG1lc3NhZ2UuaWQgPyB7XG4gICAgICAgIC4uLmUsXG4gICAgICAgIGFjdGl2YXRlZDogITBcbiAgICAgIH0gOiBlKTtcbiAgICBjYXNlIFwiZWxlbWVudC91cGRhdGVcIjpcbiAgICAgIHJldHVybiBlbGVtZW50cy5tYXAoKGUpID0+IGUuaWQgPT09IG1lc3NhZ2UuaWQgPyB7XG4gICAgICAgIC4uLmUsXG4gICAgICAgIHNhbml0eTogbWVzc2FnZS5zYW5pdHksXG4gICAgICAgIHJlY3Q6IG1lc3NhZ2UucmVjdCxcbiAgICAgICAgdGFyZ2V0czogbWVzc2FnZS50YXJnZXRzLFxuICAgICAgICBlbGVtZW50VHlwZTogbWVzc2FnZS5lbGVtZW50VHlwZVxuICAgICAgfSA6IGUpO1xuICAgIGNhc2UgXCJlbGVtZW50L3VucmVnaXN0ZXJcIjpcbiAgICAgIHJldHVybiBlbGVtZW50cy5maWx0ZXIoKGUpID0+IGUuaWQgIT09IG1lc3NhZ2UuaWQpO1xuICAgIGNhc2UgXCJlbGVtZW50L2RlYWN0aXZhdGVcIjpcbiAgICAgIHJldHVybiBlbGVtZW50cy5tYXAoKGUpID0+IGUuaWQgPT09IG1lc3NhZ2UuaWQgPyB7XG4gICAgICAgIC4uLmUsXG4gICAgICAgIGFjdGl2YXRlZDogITEsXG4gICAgICAgIGhvdmVyZWQ6ICExXG4gICAgICB9IDogZSk7XG4gICAgY2FzZSBcImVsZW1lbnQvbW91c2VlbnRlclwiOlxuICAgICAgcmV0dXJuIGVsZW1lbnRzLm1hcCgoZSkgPT4gZS5pZCA9PT0gbWVzc2FnZS5pZCA/IHtcbiAgICAgICAgLi4uZSxcbiAgICAgICAgcmVjdDogbWVzc2FnZS5yZWN0LFxuICAgICAgICBob3ZlcmVkOiAhMFxuICAgICAgfSA6IHtcbiAgICAgICAgLi4uZSxcbiAgICAgICAgaG92ZXJlZDogITFcbiAgICAgIH0pO1xuICAgIGNhc2UgXCJlbGVtZW50L21vdXNlbGVhdmVcIjpcbiAgICAgIHJldHVybiBlbGVtZW50cy5tYXAoKGVsZW1lbnQpID0+IGVsZW1lbnQuaWQgPT09IG1lc3NhZ2UuaWQgPyB7XG4gICAgICAgIC4uLmVsZW1lbnQsXG4gICAgICAgIGhvdmVyZWQ6ICExXG4gICAgICB9IDogZWxlbWVudCk7XG4gICAgY2FzZSBcImVsZW1lbnQvdXBkYXRlUmVjdFwiOlxuICAgICAgcmV0dXJuIGVsZW1lbnRzLm1hcCgoZWxlbWVudCkgPT4gZWxlbWVudC5pZCA9PT0gbWVzc2FnZS5pZCA/IHtcbiAgICAgICAgLi4uZWxlbWVudCxcbiAgICAgICAgcmVjdDogbWVzc2FnZS5yZWN0XG4gICAgICB9IDogZWxlbWVudCk7XG4gICAgY2FzZSBcImVsZW1lbnQvY2xpY2tcIjpcbiAgICAgIHJldHVybiBlbGVtZW50cy5tYXAoKGUpID0+ICh7XG4gICAgICAgIC4uLmUsXG4gICAgICAgIGZvY3VzZWQ6IGUuaWQgPT09IG1lc3NhZ2UuaWQgJiYgXCJjbGlja2VkXCJcbiAgICAgIH0pKTtcbiAgICBjYXNlIFwib3ZlcmxheS9yZXNldC1tb3VzZS1zdGF0ZVwiOlxuICAgICAgcmV0dXJuIGVsZW1lbnRzLm1hcCgoZSkgPT4gKHtcbiAgICAgICAgLi4uZSxcbiAgICAgICAgZm9jdXNlZDogITEsXG4gICAgICAgIGhvdmVyZWQ6ICExXG4gICAgICB9KSk7XG4gICAgY2FzZSBcIm92ZXJsYXkvYmx1clwiOlxuICAgICAgcmV0dXJuIGVsZW1lbnRzLm1hcCgoZSkgPT4gKHtcbiAgICAgICAgLi4uZSxcbiAgICAgICAgZm9jdXNlZDogITFcbiAgICAgIH0pKTtcbiAgICBjYXNlIFwicHJlc2VudGF0aW9uL2JsdXJcIjpcbiAgICAgIHJldHVybiBlbGVtZW50cy5tYXAoKGUpID0+ICh7XG4gICAgICAgIC4uLmUsXG4gICAgICAgIGZvY3VzZWQ6ICExXG4gICAgICB9KSk7XG4gICAgY2FzZSBcInByZXNlbnRhdGlvbi9mb2N1c1wiOiB7XG4gICAgICBjb25zdCBjbGlja2VkRWxlbWVudCA9IGVsZW1lbnRzLmZpbmQoKGUpID0+IGUuZm9jdXNlZCA9PT0gXCJjbGlja2VkXCIpO1xuICAgICAgcmV0dXJuIGVsZW1lbnRzLm1hcCgoZSkgPT4ge1xuICAgICAgICBjb25zdCBmb2N1c2VkID0gXCJwYXRoXCIgaW4gZS5zYW5pdHkgJiYgZS5zYW5pdHkuaWQgPT09IG1lc3NhZ2UuZGF0YS5pZCAmJiBlLnNhbml0eS5wYXRoID09PSBtZXNzYWdlLmRhdGEucGF0aDtcbiAgICAgICAgcmV0dXJuIGNsaWNrZWRFbGVtZW50ICYmIGUgPT09IGNsaWNrZWRFbGVtZW50ICYmIGZvY3VzZWQgPyBlIDoge1xuICAgICAgICAgIC4uLmUsXG4gICAgICAgICAgLy8gTWFyayBhcyBhIGR1cGUgaWYgYW5vdGhlciBtYXRjaGluZyBpdGVtIGhhcyBiZWVuIGNsaWNrZWQgdG8gcHJldmVudFxuICAgICAgICAgIC8vIHNjcm9sbGluZywgb3RoZXJ3aXNlIGp1c3Qgc2V0IGZvY3VzIGFzIGEgYm9vbGVhblxuICAgICAgICAgIGZvY3VzZWQ6IGZvY3VzZWQgJiYgY2xpY2tlZEVsZW1lbnQgPyBcImR1cGxpY2F0ZVwiIDogZm9jdXNlZFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZWxlbWVudHM7XG4gIH1cbn07XG5mdW5jdGlvbiBvdmVybGF5U3RhdGVSZWR1Y2VyKHN0YXRlLCBtZXNzYWdlKSB7XG4gIGNvbnN0IHtcbiAgICB0eXBlXG4gIH0gPSBtZXNzYWdlO1xuICBsZXQge1xuICAgIGNvbnRleHRNZW51LFxuICAgIGZvY3VzUGF0aCxcbiAgICBwZXJzcGVjdGl2ZSxcbiAgICBpc0RyYWdnaW5nLFxuICAgIGRyYWdJbnNlcnRQb3NpdGlvbixcbiAgICBkcmFnU2hvd01pbmltYXAsXG4gICAgZHJhZ1Nob3dNaW5pbWFwUHJvbXB0LFxuICAgIGRyYWdTa2VsZXRvbixcbiAgICBkcmFnTWluaW1hcFRyYW5zaXRpb24sXG4gICAgZHJhZ0dyb3VwUmVjdFxuICB9ID0gc3RhdGUsIHdhc01heWJlQ29sbGFwc2VkID0gITE7XG4gIGlmICh0eXBlID09PSBcInByZXNlbnRhdGlvbi9mb2N1c1wiKSB7XG4gICAgY29uc3QgcHJldkZvY3VzUGF0aCA9IHN0YXRlLmZvY3VzUGF0aDtcbiAgICBmb2N1c1BhdGggPSBtZXNzYWdlLmRhdGEucGF0aCwgcHJldkZvY3VzUGF0aCAhPT0gZm9jdXNQYXRoICYmICh3YXNNYXliZUNvbGxhcHNlZCA9IHByZXZGb2N1c1BhdGguc2xpY2UoZm9jdXNQYXRoLmxlbmd0aCkuc3RhcnRzV2l0aChcIltcIikpO1xuICB9XG4gIHJldHVybiB0eXBlID09PSBcInByZXNlbnRhdGlvbi9wZXJzcGVjdGl2ZVwiICYmIChwZXJzcGVjdGl2ZSA9IG1lc3NhZ2UuZGF0YS5wZXJzcGVjdGl2ZSksIHR5cGUgPT09IFwiZWxlbWVudC9jb250ZXh0bWVudVwiICYmIChcInNhbml0eVwiIGluIG1lc3NhZ2UgPyBjb250ZXh0TWVudSA9IHtcbiAgICBub2RlOiBtZXNzYWdlLnNhbml0eSxcbiAgICBwb3NpdGlvbjogbWVzc2FnZS5wb3NpdGlvblxuICB9IDogY29udGV4dE1lbnUgPSBudWxsKSwgKHR5cGUgPT09IFwiZWxlbWVudC9jbGlja1wiIHx8IHR5cGUgPT09IFwiZWxlbWVudC9tb3VzZWxlYXZlXCIgfHwgdHlwZSA9PT0gXCJvdmVybGF5L2JsdXJcIiB8fCB0eXBlID09PSBcInByZXNlbnRhdGlvbi9ibHVyXCIgfHwgdHlwZSA9PT0gXCJwcmVzZW50YXRpb24vZm9jdXNcIikgJiYgKGNvbnRleHRNZW51ID0gbnVsbCksIHR5cGUgPT09IFwib3ZlcmxheS9kcmFnVXBkYXRlSW5zZXJ0UG9zaXRpb25cIiAmJiAoZHJhZ0luc2VydFBvc2l0aW9uID0gbWVzc2FnZS5pbnNlcnRQb3NpdGlvbiksIHR5cGUgPT09IFwib3ZlcmxheS9kcmFnU3RhcnRcIiAmJiAoaXNEcmFnZ2luZyA9ICEwKSwgbWVzc2FnZS50eXBlID09PSBcIm92ZXJsYXkvZHJhZ1VwZGF0ZVNrZWxldG9uXCIgJiYgKGRyYWdTa2VsZXRvbiA9IG1lc3NhZ2Uuc2tlbGV0b24pLCB0eXBlID09PSBcIm92ZXJsYXkvZHJhZ0VuZFwiICYmIChpc0RyYWdnaW5nID0gITEpLCBtZXNzYWdlLnR5cGUgPT09IFwib3ZlcmxheS9kcmFnVG9nZ2xlTWluaW1hcFByb21wdFwiICYmIChkcmFnU2hvd01pbmltYXBQcm9tcHQgPSBtZXNzYWdlLmRpc3BsYXkpLCB0eXBlID09PSBcIm92ZXJsYXkvZHJhZ1N0YXJ0TWluaW1hcFRyYW5zaXRpb25cIiAmJiAoZHJhZ01pbmltYXBUcmFuc2l0aW9uID0gITApLCB0eXBlID09PSBcIm92ZXJsYXkvZHJhZ0VuZE1pbmltYXBUcmFuc2l0aW9uXCIgJiYgKGRyYWdNaW5pbWFwVHJhbnNpdGlvbiA9ICExKSwgdHlwZSA9PT0gXCJvdmVybGF5L2RyYWdVcGRhdGVHcm91cFJlY3RcIiAmJiAoZHJhZ0dyb3VwUmVjdCA9IG1lc3NhZ2UuZ3JvdXBSZWN0KSwgdHlwZSA9PT0gXCJvdmVybGF5L2RyYWdUb2dnbGVNaW5pbWFwXCIgJiYgKGRyYWdTaG93TWluaW1hcCA9IG1lc3NhZ2UuZGlzcGxheSksIHtcbiAgICAuLi5zdGF0ZSxcbiAgICBjb250ZXh0TWVudSxcbiAgICBlbGVtZW50czogZWxlbWVudHNSZWR1Y2VyKHN0YXRlLmVsZW1lbnRzLCBtZXNzYWdlKSxcbiAgICBkcmFnSW5zZXJ0UG9zaXRpb24sXG4gICAgZHJhZ1NrZWxldG9uLFxuICAgIGRyYWdHcm91cFJlY3QsXG4gICAgaXNEcmFnZ2luZyxcbiAgICBmb2N1c1BhdGgsXG4gICAgcGVyc3BlY3RpdmUsXG4gICAgd2FzTWF5YmVDb2xsYXBzZWQsXG4gICAgZHJhZ1Nob3dNaW5pbWFwLFxuICAgIGRyYWdTaG93TWluaW1hcFByb21wdCxcbiAgICBkcmFnTWluaW1hcFRyYW5zaXRpb25cbiAgfTtcbn1cbmNvbnN0IFByZXZpZXdTbmFwc2hvdHNQcm92aWRlciA9IGZ1bmN0aW9uKHByb3BzKSB7XG4gIGNvbnN0ICQgPSBjKDEzKSwge1xuICAgIGNvbWxpbmssXG4gICAgY2hpbGRyZW5cbiAgfSA9IHByb3BzO1xuICBsZXQgdDA7XG4gICRbMF0gPT09IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vX2NhY2hlX3NlbnRpbmVsXCIpID8gKHQwID0gW10sICRbMF0gPSB0MCkgOiB0MCA9ICRbMF07XG4gIGNvbnN0IFtwcmV2aWV3U25hcHNob3RzLCBzZXRQcmV2aWV3U25hcHNob3RzXSA9IHVzZVN0YXRlKHQwKTtcbiAgbGV0IHQxO1xuICAkWzFdICE9PSBjb21saW5rID8gKHQxID0gYXN5bmMgKHNpZ25hbCkgPT4ge1xuICAgIGlmIChjb21saW5rKVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBjb21saW5rLmZldGNoKFwidmlzdWFsLWVkaXRpbmcvcHJldmlldy1zbmFwc2hvdHNcIiwgdm9pZCAwLCB7XG4gICAgICAgICAgc2lnbmFsLFxuICAgICAgICAgIHN1cHByZXNzV2FybmluZ3M6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICBzZXRQcmV2aWV3U25hcHNob3RzKHJlc3BvbnNlLnNuYXBzaG90cyk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgIH1cbiAgfSwgJFsxXSA9IGNvbWxpbmssICRbMl0gPSB0MSkgOiB0MSA9ICRbMl07XG4gIGNvbnN0IGZldGNoUHJldmlld1NuYXBzaG90cyA9IHQxO1xuICBsZXQgdDIsIHQzO1xuICAkWzNdICE9PSBjb21saW5rIHx8ICRbNF0gIT09IGZldGNoUHJldmlld1NuYXBzaG90cyA/ICh0MiA9ICgpID0+IHtcbiAgICBpZiAoIWNvbWxpbmspXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgcHJldmlld1NhcHNob3RzRmV0Y2ggPSBuZXcgQWJvcnRDb250cm9sbGVyKCksIHVuc3ViID0gY29tbGluay5vblN0YXR1cygoKSA9PiB7XG4gICAgICBmZXRjaFByZXZpZXdTbmFwc2hvdHMocHJldmlld1NhcHNob3RzRmV0Y2guc2lnbmFsKTtcbiAgICB9LCBcImNvbm5lY3RlZFwiKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcHJldmlld1NhcHNob3RzRmV0Y2guYWJvcnQoKSwgdW5zdWIoKTtcbiAgICB9O1xuICB9LCB0MyA9IFtjb21saW5rLCBmZXRjaFByZXZpZXdTbmFwc2hvdHNdLCAkWzNdID0gY29tbGluaywgJFs0XSA9IGZldGNoUHJldmlld1NuYXBzaG90cywgJFs1XSA9IHQyLCAkWzZdID0gdDMpIDogKHQyID0gJFs1XSwgdDMgPSAkWzZdKSwgdXNlRWZmZWN0KHQyLCB0Myk7XG4gIGxldCB0NCwgdDU7XG4gICRbN10gIT09IGNvbWxpbmsgPyAodDQgPSAoKSA9PiBjb21saW5rPy5vbihcInByZXNlbnRhdGlvbi9wcmV2aWV3LXNuYXBzaG90c1wiLCAoZGF0YSkgPT4ge1xuICAgIHNldFByZXZpZXdTbmFwc2hvdHMoZGF0YS5zbmFwc2hvdHMpO1xuICB9KSwgdDUgPSBbY29tbGlua10sICRbN10gPSBjb21saW5rLCAkWzhdID0gdDQsICRbOV0gPSB0NSkgOiAodDQgPSAkWzhdLCB0NSA9ICRbOV0pLCB1c2VFZmZlY3QodDQsIHQ1KTtcbiAgY29uc3QgY29udGV4dCA9IHByZXZpZXdTbmFwc2hvdHM7XG4gIGxldCB0NjtcbiAgcmV0dXJuICRbMTBdICE9PSBjaGlsZHJlbiB8fCAkWzExXSAhPT0gY29udGV4dCA/ICh0NiA9IC8qIEBfX1BVUkVfXyAqLyBqc3goUHJldmlld1NuYXBzaG90c0NvbnRleHQuUHJvdmlkZXIsIHsgdmFsdWU6IGNvbnRleHQsIGNoaWxkcmVuIH0pLCAkWzEwXSA9IGNoaWxkcmVuLCAkWzExXSA9IGNvbnRleHQsICRbMTJdID0gdDYpIDogdDYgPSAkWzEyXSwgdDY7XG59O1xuZnVuY3Rpb24gaXNTYW5pdHlOb2RlKG5vZGUpIHtcbiAgcmV0dXJuIFwicGF0aFwiIGluIG5vZGU7XG59XG5mdW5jdGlvbiBpc0RvY3VtZW50U2NoZW1hVHlwZSh0eXBlKSB7XG4gIHJldHVybiB0eXBlLnR5cGUgPT09IFwiZG9jdW1lbnRcIjtcbn1cbmZ1bmN0aW9uIGlzVHlwZVNjaGVtYVR5cGUodHlwZSkge1xuICByZXR1cm4gdHlwZS50eXBlID09PSBcInR5cGVcIjtcbn1cbmZ1bmN0aW9uIHBvcFVua2V5ZWRQYXRoU2VnbWVudHMocGF0aCkge1xuICByZXR1cm4gcGF0aC5zcGxpdChcIi5cIikudG9SZXZlcnNlZCgpLnJlZHVjZSgoYWNjLCBwYXJ0KSA9PiBhY2MubGVuZ3RoID8gW3BhcnQsIC4uLmFjY10gOiBwYXJ0LmluY2x1ZGVzKFwiW19rZXk9PVwiKSA/IFtwYXJ0XSA6IFtdLCBbXSkuam9pbihcIi5cIik7XG59XG5mdW5jdGlvbiBnZXRQYXRoc1dpdGhVbnJlc29sdmVkVHlwZXMoZWxlbWVudHMpIHtcbiAgcmV0dXJuIGVsZW1lbnRzLnJlZHVjZSgoYWNjLCBlbGVtZW50KSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgc2FuaXR5XG4gICAgfSA9IGVsZW1lbnQ7XG4gICAgaWYgKCEoXCJpZFwiIGluIHNhbml0eSkgfHwgIXNhbml0eS5wYXRoLmluY2x1ZGVzKFwiW19rZXk9PVwiKSkgcmV0dXJuIGFjYztcbiAgICBjb25zdCBwYXRoID0gcG9wVW5rZXllZFBhdGhTZWdtZW50cyhzYW5pdHkucGF0aCk7XG4gICAgcmV0dXJuIGFjYy5maW5kKChpdGVtKSA9PiBpdGVtLmlkID09PSBzYW5pdHkuaWQgJiYgaXRlbS5wYXRoID09PSBwYXRoKSB8fCBhY2MucHVzaCh7XG4gICAgICBpZDogc2FuaXR5LmlkLFxuICAgICAgcGF0aFxuICAgIH0pLCBhY2M7XG4gIH0sIFtdKTtcbn1cbmNvbnN0IFNjaGVtYVByb3ZpZGVyID0gZnVuY3Rpb24ocHJvcHMpIHtcbiAgY29uc3QgJCA9IGMoMjIpLCB7XG4gICAgY29tbGluayxcbiAgICBjaGlsZHJlbixcbiAgICBlbGVtZW50c1xuICB9ID0gcHJvcHM7XG4gIGxldCB0MDtcbiAgJFswXSA9PT0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLCAkWzBdID0gdDApIDogdDAgPSAkWzBdO1xuICBjb25zdCBbcmVzb2x2ZWRUeXBlcywgc2V0UmVzb2x2ZWRUeXBlc10gPSB1c2VTdGF0ZSh0MCksIFtzY2hlbWEsIHNldFNjaGVtYV0gPSB1c2VTdGF0ZShudWxsKTtcbiAgbGV0IHQxLCB0MjtcbiAgJFsxXSAhPT0gY29tbGluayA/ICh0MSA9ICgpID0+IHtcbiAgICBpZiAoIWNvbWxpbmspXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgZmV0Y2hTY2hlbWEgPSBhc3luYyBmdW5jdGlvbihzaWduYWwpIHtcbiAgICAgIGlmIChjb21saW5rKVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgY29tbGluay5mZXRjaChcInZpc3VhbC1lZGl0aW5nL3NjaGVtYVwiLCB2b2lkIDAsIHtcbiAgICAgICAgICAgIHNpZ25hbCxcbiAgICAgICAgICAgIHN1cHByZXNzV2FybmluZ3M6ICEwXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2V0U2NoZW1hKHJlc3BvbnNlLnNjaGVtYSk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICB9XG4gICAgfSwgc2NoZW1hRmV0Y2ggPSBuZXcgQWJvcnRDb250cm9sbGVyKCksIHVuc3ViID0gY29tbGluay5vblN0YXR1cygoKSA9PiB7XG4gICAgICBmZXRjaFNjaGVtYShzY2hlbWFGZXRjaC5zaWduYWwpO1xuICAgIH0sIFwiY29ubmVjdGVkXCIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzY2hlbWFGZXRjaC5hYm9ydCgpLCB1bnN1YigpO1xuICAgIH07XG4gIH0sIHQyID0gW2NvbWxpbmtdLCAkWzFdID0gY29tbGluaywgJFsyXSA9IHQxLCAkWzNdID0gdDIpIDogKHQxID0gJFsyXSwgdDIgPSAkWzNdKSwgdXNlRWZmZWN0KHQxLCB0Mik7XG4gIGxldCB0MztcbiAgJFs0XSA9PT0gU3ltYm9sLmZvcihcInJlYWN0Lm1lbW9fY2FjaGVfc2VudGluZWxcIikgPyAodDMgPSBbXSwgJFs0XSA9IHQzKSA6IHQzID0gJFs0XTtcbiAgY29uc3QgcmVwb3J0ZWRQYXRoc1JlZiA9IHVzZVJlZih0MyksIHQ0ID0gdXNlRGVmZXJyZWRWYWx1ZShlbGVtZW50cyk7XG4gIGxldCB0NTtcbiAgJFs1XSAhPT0gdDQgPyAodDUgPSBnZXRQYXRoc1dpdGhVbnJlc29sdmVkVHlwZXModDQpLCAkWzVdID0gdDQsICRbNl0gPSB0NSkgOiB0NSA9ICRbNl07XG4gIGNvbnN0IHBhdGhzID0gdDUsIGNvbnRyb2xsZXJSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGxldCB0NiwgdDc7XG4gICRbN10gIT09IGNvbWxpbmsgfHwgJFs4XSAhPT0gcGF0aHMgPyAodDYgPSAoKSA9PiB7XG4gICAgaWYgKCFwYXRocy5sZW5ndGggfHwgIWNvbWxpbmspXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgcmVwb3J0UGF0aHMgPSBhc3luYyAocGF0aHNfMCwgc2lnbmFsXzApID0+IHtcbiAgICAgIGNvbnN0IGluaXRpYWxSZXBvcnRlZFBhdGhzID0gcmVwb3J0ZWRQYXRoc1JlZi5jdXJyZW50O1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVwb3J0ZWRQYXRoc1JlZi5jdXJyZW50ID0gcGF0aHNfMDtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VfMCA9IGF3YWl0IGNvbWxpbmsuZmV0Y2goXCJ2aXN1YWwtZWRpdGluZy9zY2hlbWEtdW5pb24tdHlwZXNcIiwge1xuICAgICAgICAgIHBhdGhzOiBwYXRoc18wXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBzaWduYWw6IHNpZ25hbF8wLFxuICAgICAgICAgIHN1cHByZXNzV2FybmluZ3M6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc2lnbmFsXzAuYWJvcnRlZClcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIHNldFJlc29sdmVkVHlwZXMocmVzcG9uc2VfMC50eXBlcyksIGNvbnRyb2xsZXJSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgIH1cbiAgICAgIHNpZ25hbF8wLmFib3J0ZWQgJiYgKHJlcG9ydGVkUGF0aHNSZWYuY3VycmVudCA9IGluaXRpYWxSZXBvcnRlZFBhdGhzKTtcbiAgICB9O1xuICAgIHBhdGhzLnNvbWUoKHApID0+ICFyZXBvcnRlZFBhdGhzUmVmLmN1cnJlbnQuZmluZCgodDgyKSA9PiB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIGlkLFxuICAgICAgICBwYXRoXG4gICAgICB9ID0gdDgyO1xuICAgICAgcmV0dXJuIGlkID09PSBwLmlkICYmIHBhdGggPT09IHAucGF0aDtcbiAgICB9KSkgJiYgKGNvbnRyb2xsZXJSZWYuY3VycmVudD8uYWJvcnQoKSwgY29udHJvbGxlclJlZi5jdXJyZW50ID0gbmV3IEFib3J0Q29udHJvbGxlcigpLCByZXBvcnRQYXRocyhwYXRocywgY29udHJvbGxlclJlZi5jdXJyZW50LnNpZ25hbCkpO1xuICB9LCB0NyA9IFtjb21saW5rLCBwYXRoc10sICRbN10gPSBjb21saW5rLCAkWzhdID0gcGF0aHMsICRbOV0gPSB0NiwgJFsxMF0gPSB0NykgOiAodDYgPSAkWzldLCB0NyA9ICRbMTBdKSwgdXNlRWZmZWN0KHQ2LCB0Nyk7XG4gIGxldCB0ODtcbiAgJFsxMV0gIT09IHNjaGVtYSA/ICh0OCA9IChub2RlLCBfdHlwZSkgPT4ge1xuICAgIGNvbnN0IHR5cGUgPSBfdHlwZSB8fCBcImRvY3VtZW50XCI7XG4gICAgaWYgKCFzY2hlbWEgfHwgdHlwZW9mIG5vZGUgIT0gXCJzdHJpbmdcIiAmJiAoIWlzU2FuaXR5Tm9kZShub2RlKSB8fCAhQXJyYXkuaXNBcnJheShzY2hlbWEpKSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBuYW1lID0gdHlwZW9mIG5vZGUgPT0gXCJzdHJpbmdcIiA/IG5vZGUgOiBub2RlLnR5cGUsIGZpbHRlciA9IHR5cGUgPT09IFwiZG9jdW1lbnRcIiA/IGlzRG9jdW1lbnRTY2hlbWFUeXBlIDogaXNUeXBlU2NoZW1hVHlwZTtcbiAgICByZXR1cm4gc2NoZW1hLmZpbHRlcihmaWx0ZXIpLmZpbmQoKHNjaGVtYVR5cGUpID0+IHNjaGVtYVR5cGUubmFtZSA9PT0gbmFtZSk7XG4gIH0sICRbMTFdID0gc2NoZW1hLCAkWzEyXSA9IHQ4KSA6IHQ4ID0gJFsxMl07XG4gIGNvbnN0IGdldFR5cGUgPSB0ODtcbiAgbGV0IHQ5O1xuICAkWzEzXSAhPT0gZ2V0VHlwZSB8fCAkWzE0XSAhPT0gcmVzb2x2ZWRUeXBlcyA/ICh0OSA9IChub2RlXzApID0+IHtcbiAgICBpZiAoIWlzU2FuaXR5Tm9kZShub2RlXzApKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZmllbGQ6IHZvaWQgMCxcbiAgICAgICAgcGFyZW50OiB2b2lkIDBcbiAgICAgIH07XG4gICAgY29uc3Qgc2NoZW1hVHlwZV8wID0gZ2V0VHlwZShub2RlXzApO1xuICAgIGlmICghc2NoZW1hVHlwZV8wKVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZmllbGQ6IHZvaWQgMCxcbiAgICAgICAgcGFyZW50OiB2b2lkIDBcbiAgICAgIH07XG4gICAgZnVuY3Rpb24gZmllbGRGcm9tUGF0aChzY2hlbWFUeXBlXzEsIHBhdGhfMCwgcGFyZW50LCB0MTAyKSB7XG4gICAgICBjb25zdCBwcmV2UGF0aCA9IHQxMDIgPT09IHZvaWQgMCA/IFtdIDogdDEwMjtcbiAgICAgIGlmICghc2NoZW1hVHlwZV8xKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGZpZWxkOiB2b2lkIDAsXG4gICAgICAgICAgcGFyZW50OiB2b2lkIDBcbiAgICAgICAgfTtcbiAgICAgIGNvbnN0IFtuZXh0LCAuLi5yZXN0XSA9IHBhdGhfMDtcbiAgICAgIGlmIChcImZpZWxkc1wiIGluIHNjaGVtYVR5cGVfMSkge1xuICAgICAgICBjb25zdCBvYmplY3RGaWVsZCA9IHNjaGVtYVR5cGVfMS5maWVsZHNbbmV4dF07XG4gICAgICAgIGlmICghb2JqZWN0RmllbGQgJiYgXCJyZXN0XCIgaW4gc2NoZW1hVHlwZV8xKVxuICAgICAgICAgIHJldHVybiBmaWVsZEZyb21QYXRoKHNjaGVtYVR5cGVfMS5yZXN0LCBwYXRoXzAsIHNjaGVtYVR5cGVfMSwgcHJldlBhdGgpO1xuICAgICAgICBpZiAoIXJlc3QubGVuZ3RoKVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZDogb2JqZWN0RmllbGQsXG4gICAgICAgICAgICBwYXJlbnRcbiAgICAgICAgICB9O1xuICAgICAgICBpZiAoIW9iamVjdEZpZWxkKVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgW0BzYW5pdHkvdmlzdWFsLWVkaXRpbmddIE5vIGZpZWxkIGNvdWxkIGJlIHJlc29sdmVkIGF0IHBhdGg6IFwiJHtbLi4ucHJldlBhdGgsIC4uLnBhdGhfMF0uam9pbihcIi5cIil9XCJgKTtcbiAgICAgICAgcmV0dXJuIGZpZWxkRnJvbVBhdGgob2JqZWN0RmllbGQudmFsdWUsIHJlc3QsIHNjaGVtYVR5cGVfMSwgWy4uLnByZXZQYXRoLCBuZXh0XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoc2NoZW1hVHlwZV8xLnR5cGUgPT09IFwiYXJyYXlcIilcbiAgICAgICAgICByZXR1cm4gZmllbGRGcm9tUGF0aChzY2hlbWFUeXBlXzEub2YsIHBhdGhfMCwgc2NoZW1hVHlwZV8xLCBwcmV2UGF0aCk7XG4gICAgICAgIGlmIChzY2hlbWFUeXBlXzEudHlwZSA9PT0gXCJhcnJheUl0ZW1cIilcbiAgICAgICAgICByZXR1cm4gcmVzdC5sZW5ndGggPyBmaWVsZEZyb21QYXRoKHNjaGVtYVR5cGVfMS52YWx1ZSwgcmVzdCwgc2NoZW1hVHlwZV8xLCBbLi4ucHJldlBhdGgsIG5leHRdKSA6IHtcbiAgICAgICAgICAgIGZpZWxkOiBzY2hlbWFUeXBlXzEsXG4gICAgICAgICAgICBwYXJlbnRcbiAgICAgICAgICB9O1xuICAgICAgICBpZiAoc2NoZW1hVHlwZV8xLnR5cGUgPT09IFwidW5pb25cIikge1xuICAgICAgICAgIGNvbnN0IG5hbWVfMCA9IG5leHQuc3RhcnRzV2l0aChcIltfa2V5PT1cIikgPyByZXNvbHZlZFR5cGVzPy5nZXQobm9kZV8wLmlkKT8uZ2V0KFtwcmV2UGF0aC5qb2luKFwiLlwiKSwgbmV4dF0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oXCJcIikpIDogbmV4dDtcbiAgICAgICAgICByZXR1cm4gZmllbGRGcm9tUGF0aChzY2hlbWFUeXBlXzEub2YuZmluZCgoaXRlbSkgPT4gaXRlbS50eXBlID09PSBcInVuaW9uT3B0aW9uXCIgPyBpdGVtLm5hbWUgPT09IG5hbWVfMCA6IGl0ZW0pLCByZXN0LCBzY2hlbWFUeXBlXzEsIFsuLi5wcmV2UGF0aCwgbmV4dF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChzY2hlbWFUeXBlXzEudHlwZSA9PT0gXCJ1bmlvbk9wdGlvblwiKVxuICAgICAgICAgICAgcmV0dXJuIG5leHQgPyBmaWVsZEZyb21QYXRoKHNjaGVtYVR5cGVfMS52YWx1ZSwgcGF0aF8wLCBzY2hlbWFUeXBlXzEsIHByZXZQYXRoKSA6IHtcbiAgICAgICAgICAgICAgZmllbGQ6IHNjaGVtYVR5cGVfMSxcbiAgICAgICAgICAgICAgcGFyZW50XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIGlmIChzY2hlbWFUeXBlXzEudHlwZSA9PT0gXCJpbmxpbmVcIikge1xuICAgICAgICAgICAgY29uc3QgdHlwZV8wID0gZ2V0VHlwZShzY2hlbWFUeXBlXzEubmFtZSwgXCJ0eXBlXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZpZWxkRnJvbVBhdGgodHlwZV8wLnZhbHVlLCBwYXRoXzAsIHNjaGVtYVR5cGVfMSwgcHJldlBhdGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBbQHNhbml0eS92aXN1YWwtZWRpdGluZ10gTm8gZmllbGQgY291bGQgYmUgcmVzb2x2ZWQgYXQgcGF0aDogXCIke1suLi5wcmV2UGF0aCwgLi4ucGF0aF8wXS5qb2luKFwiLlwiKX1cImApO1xuICAgIH1cbiAgICBjb25zdCBub2RlUGF0aCA9IG5vZGVfMC5wYXRoLnNwbGl0KFwiLlwiKS5mbGF0TWFwKF90ZW1wJDYpO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZmllbGRGcm9tUGF0aChzY2hlbWFUeXBlXzAsIG5vZGVQYXRoLCB2b2lkIDApO1xuICAgIH0gY2F0Y2ggKHQxMTIpIHtcbiAgICAgIGNvbnN0IGUgPSB0MTEyO1xuICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBFcnJvciAmJiBjb25zb2xlLndhcm4oZS5tZXNzYWdlKSwge1xuICAgICAgICBmaWVsZDogdm9pZCAwLFxuICAgICAgICBwYXJlbnQ6IHZvaWQgMFxuICAgICAgfTtcbiAgICB9XG4gIH0sICRbMTNdID0gZ2V0VHlwZSwgJFsxNF0gPSByZXNvbHZlZFR5cGVzLCAkWzE1XSA9IHQ5KSA6IHQ5ID0gJFsxNV07XG4gIGNvbnN0IGdldEZpZWxkID0gdDk7XG4gIGxldCB0MTA7XG4gICRbMTZdICE9PSBnZXRGaWVsZCB8fCAkWzE3XSAhPT0gZ2V0VHlwZSA/ICh0MTAgPSB7XG4gICAgZ2V0RmllbGQsXG4gICAgZ2V0VHlwZVxuICB9LCAkWzE2XSA9IGdldEZpZWxkLCAkWzE3XSA9IGdldFR5cGUsICRbMThdID0gdDEwKSA6IHQxMCA9ICRbMThdO1xuICBjb25zdCBjb250ZXh0ID0gdDEwO1xuICBsZXQgdDExO1xuICByZXR1cm4gJFsxOV0gIT09IGNoaWxkcmVuIHx8ICRbMjBdICE9PSBjb250ZXh0ID8gKHQxMSA9IC8qIEBfX1BVUkVfXyAqLyBqc3goU2NoZW1hQ29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogY29udGV4dCwgY2hpbGRyZW4gfSksICRbMTldID0gY2hpbGRyZW4sICRbMjBdID0gY29udGV4dCwgJFsyMV0gPSB0MTEpIDogdDExID0gJFsyMV0sIHQxMTtcbn07XG5mdW5jdGlvbiBfdGVtcCQ2KHBhcnQpIHtcbiAgcmV0dXJuIHBhcnQuaW5jbHVkZXMoXCJbXCIpID8gcGFydC5zcGxpdCgvKFxcWy4rXFxdKS8sIDIpIDogW3BhcnRdO1xufVxuY29uc3QgY3JlYXRlU3RvcmUgPSAoaW5pdGlhbFN0YXRlKSA9PiB7XG4gIGxldCBzdGF0ZSA9IGluaXRpYWxTdGF0ZTtcbiAgY29uc3QgZ2V0U3RhdGUgPSAoKSA9PiBzdGF0ZSwgbGlzdGVuZXJzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgcmV0dXJuIHtcbiAgICBnZXRTdGF0ZSxcbiAgICBzZXRTdGF0ZTogKGZuKSA9PiB7XG4gICAgICBzdGF0ZSA9IGZuKHN0YXRlKSwgbGlzdGVuZXJzLmZvckVhY2goKGwpID0+IGwoKSk7XG4gICAgfSxcbiAgICBzdWJzY3JpYmU6IChsaXN0ZW5lcikgPT4gKGxpc3RlbmVycy5hZGQobGlzdGVuZXIpLCAoKSA9PiBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKSlcbiAgfTtcbn0sIHN0b3JlID0gY3JlYXRlU3RvcmUoe30pLCBTaGFyZWRTdGF0ZVByb3ZpZGVyID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0ICQgPSBjKDExKSwge1xuICAgIGNvbWxpbmssXG4gICAgY2hpbGRyZW5cbiAgfSA9IHByb3BzO1xuICBsZXQgdDAsIHQxO1xuICAkWzBdICE9PSBjb21saW5rID8gKHQwID0gKCkgPT4gY29tbGluaz8ub24oXCJwcmVzZW50YXRpb24vc2hhcmVkLXN0YXRlXCIsIF90ZW1wJDUpLCB0MSA9IFtjb21saW5rXSwgJFswXSA9IGNvbWxpbmssICRbMV0gPSB0MCwgJFsyXSA9IHQxKSA6ICh0MCA9ICRbMV0sIHQxID0gJFsyXSksIHVzZUVmZmVjdCh0MCwgdDEpO1xuICBsZXQgdDIsIHQzO1xuICAkWzNdICE9PSBjb21saW5rID8gKHQyID0gKCkgPT4ge1xuICAgIChhc3luYyBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgY29tbGluaz8uZmV0Y2goXCJ2aXN1YWwtZWRpdGluZy9zaGFyZWQtc3RhdGVcIiwgdm9pZCAwLCB7XG4gICAgICAgIHN1cHByZXNzV2FybmluZ3M6ICEwXG4gICAgICB9KTtcbiAgICAgIHZhbHVlICYmIHN0b3JlLnNldFN0YXRlKCgpID0+IHZhbHVlLnN0YXRlKTtcbiAgICB9KSgpLmNhdGNoKF90ZW1wMiQzKTtcbiAgfSwgdDMgPSBbY29tbGlua10sICRbM10gPSBjb21saW5rLCAkWzRdID0gdDIsICRbNV0gPSB0MykgOiAodDIgPSAkWzRdLCB0MyA9ICRbNV0pLCB1c2VFZmZlY3QodDIsIHQzKTtcbiAgbGV0IHQ0O1xuICAkWzZdICE9PSBjb21saW5rID8gKHQ0ID0ge1xuICAgIGNvbWxpbmssXG4gICAgc3RvcmVcbiAgfSwgJFs2XSA9IGNvbWxpbmssICRbN10gPSB0NCkgOiB0NCA9ICRbN107XG4gIGNvbnN0IHZhbHVlXzAgPSB0NDtcbiAgbGV0IHQ1O1xuICByZXR1cm4gJFs4XSAhPT0gY2hpbGRyZW4gfHwgJFs5XSAhPT0gdmFsdWVfMCA/ICh0NSA9IC8qIEBfX1BVUkVfXyAqLyBqc3goU2hhcmVkU3RhdGVDb250ZXh0LlByb3ZpZGVyLCB7IHZhbHVlOiB2YWx1ZV8wLCBjaGlsZHJlbiB9KSwgJFs4XSA9IGNoaWxkcmVuLCAkWzldID0gdmFsdWVfMCwgJFsxMF0gPSB0NSkgOiB0NSA9ICRbMTBdLCB0NTtcbn07XG5mdW5jdGlvbiBfdGVtcCQ1KGRhdGEpIHtcbiAgXCJ2YWx1ZVwiIGluIGRhdGEgPyBzdG9yZS5zZXRTdGF0ZSgocHJldikgPT4gKHtcbiAgICAuLi5wcmV2LFxuICAgIFtkYXRhLmtleV06IGRhdGEudmFsdWVcbiAgfSkpIDogc3RvcmUuc2V0U3RhdGUoKHByZXZfMCkgPT4gT2JqZWN0LmZyb21FbnRyaWVzKE9iamVjdC5lbnRyaWVzKHByZXZfMCkuZmlsdGVyKCh0MCkgPT4ge1xuICAgIGNvbnN0IFtrZXldID0gdDA7XG4gICAgcmV0dXJuIGtleSAhPT0gZGF0YS5rZXk7XG4gIH0pKSk7XG59XG5mdW5jdGlvbiBfdGVtcDIkMyhyZWFzb24pIHtcbiAgY29uc29sZS5kZWJ1ZyhyZWFzb24pLCBjb25zb2xlLndhcm4oXCJbQHNhbml0eS92aXN1YWwtZWRpdGluZ106IEZhaWxlZCB0byBmZXRjaCBzaGFyZWQgc3RhdGUuIENoZWNrIHlvdXIgdmVyc2lvbiBvZiBgc2FuaXR5YCBpcyB1cC10by1kYXRlXCIpO1xufVxuY29uc3QgVGVsZW1ldHJ5UHJvdmlkZXIgPSAodDApID0+IHtcbiAgY29uc3QgJCA9IGMoNSksIHtcbiAgICBjaGlsZHJlbixcbiAgICBjb21saW5rXG4gIH0gPSB0MDtcbiAgbGV0IHQxO1xuICAkWzBdICE9PSBjb21saW5rID8gKHQxID0gKG5hbWUsIGRhdGEpID0+IHtcbiAgICBpZiAoIWNvbWxpbmspXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgZXZlbnQgPSBldmVudHNbbmFtZV07XG4gICAgaWYgKGV2ZW50KVxuICAgICAgY29tbGluay5wb3N0KFwidmlzdWFsLWVkaXRpbmcvdGVsZW1ldHJ5LWxvZ1wiLCB7XG4gICAgICAgIGV2ZW50LFxuICAgICAgICBkYXRhXG4gICAgICB9KTtcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFRlbGVtZXRyeSBldmVudDogJHtuYW1lfSBkb2VzIG5vdCBleGlzdGApO1xuICB9LCAkWzBdID0gY29tbGluaywgJFsxXSA9IHQxKSA6IHQxID0gJFsxXTtcbiAgY29uc3QgbG9nID0gdDE7XG4gIGxldCB0MjtcbiAgcmV0dXJuICRbMl0gIT09IGNoaWxkcmVuIHx8ICRbM10gIT09IGxvZyA/ICh0MiA9IC8qIEBfX1BVUkVfXyAqLyBqc3goVGVsZW1ldHJ5Q29udGV4dC5Qcm92aWRlciwgeyB2YWx1ZTogbG9nLCBjaGlsZHJlbiB9KSwgJFsyXSA9IGNoaWxkcmVuLCAkWzNdID0gbG9nLCAkWzRdID0gdDIpIDogdDIgPSAkWzRdLCB0Mjtcbn07XG5mdW5jdGlvbiB1c2VDb250cm9sbGVyKGVsZW1lbnQsIGhhbmRsZXIsIGluRnJhbWUsIGluUG9wVXApIHtcbiAgY29uc3QgJCA9IGMoNyksIG92ZXJsYXlDb250cm9sbGVyID0gdXNlUmVmKHZvaWQgMCksIG9wdGltaXN0aWNBY3RvclJlYWR5ID0gdXNlT3B0aW1pc3RpY0FjdG9yUmVhZHkoKTtcbiAgbGV0IHQwLCB0MTtcbiAgcmV0dXJuICRbMF0gIT09IGVsZW1lbnQgfHwgJFsxXSAhPT0gaGFuZGxlciB8fCAkWzJdICE9PSBpbkZyYW1lIHx8ICRbM10gIT09IGluUG9wVXAgfHwgJFs0XSAhPT0gb3B0aW1pc3RpY0FjdG9yUmVhZHkgPyAodDAgPSAoKSA9PiB7XG4gICAgaWYgKGVsZW1lbnQpXG4gICAgICByZXR1cm4gb3ZlcmxheUNvbnRyb2xsZXIuY3VycmVudCA9IGNyZWF0ZU92ZXJsYXlDb250cm9sbGVyKHtcbiAgICAgICAgaGFuZGxlcixcbiAgICAgICAgb3ZlcmxheUVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgIGluRnJhbWUsXG4gICAgICAgIGluUG9wVXAsXG4gICAgICAgIG9wdGltaXN0aWNBY3RvclJlYWR5XG4gICAgICB9KSwgKCkgPT4ge1xuICAgICAgICBvdmVybGF5Q29udHJvbGxlci5jdXJyZW50Py5kZXN0cm95KCksIG92ZXJsYXlDb250cm9sbGVyLmN1cnJlbnQgPSB2b2lkIDA7XG4gICAgICB9O1xuICB9LCB0MSA9IFtlbGVtZW50LCBoYW5kbGVyLCBpbkZyYW1lLCBpblBvcFVwLCBvcHRpbWlzdGljQWN0b3JSZWFkeV0sICRbMF0gPSBlbGVtZW50LCAkWzFdID0gaGFuZGxlciwgJFsyXSA9IGluRnJhbWUsICRbM10gPSBpblBvcFVwLCAkWzRdID0gb3B0aW1pc3RpY0FjdG9yUmVhZHksICRbNV0gPSB0MCwgJFs2XSA9IHQxKSA6ICh0MCA9ICRbNV0sIHQxID0gJFs2XSksIHVzZUVmZmVjdCh0MCwgdDEpLCBvdmVybGF5Q29udHJvbGxlcjtcbn1cbmZ1bmN0aW9uIHVzZVBlcnNwZWN0aXZlU3luYyhjb21saW5rLCBkaXNwYXRjaCkge1xuICBjb25zdCAkID0gYyg0KTtcbiAgbGV0IHQwLCB0MTtcbiAgJFswXSAhPT0gY29tbGluayB8fCAkWzFdICE9PSBkaXNwYXRjaCA/ICh0MCA9ICgpID0+IHtcbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbWxpbms/LmZldGNoKFwidmlzdWFsLWVkaXRpbmcvZmV0Y2gtcGVyc3BlY3RpdmVcIiwgdm9pZCAwLCB7XG4gICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgc3VwcHJlc3NXYXJuaW5nczogITBcbiAgICB9KS50aGVuKChkYXRhKSA9PiB7XG4gICAgICBkaXNwYXRjaCh7XG4gICAgICAgIHR5cGU6IFwicHJlc2VudGF0aW9uL3BlcnNwZWN0aXZlXCIsXG4gICAgICAgIGRhdGFcbiAgICAgIH0pO1xuICAgIH0pLmNhdGNoKF90ZW1wJDQpO1xuICAgIGNvbnN0IHVuc3ViID0gY29tbGluaz8ub24oXCJwcmVzZW50YXRpb24vcGVyc3BlY3RpdmVcIiwgKGRhdGFfMCkgPT4ge1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcInByZXNlbnRhdGlvbi9wZXJzcGVjdGl2ZVwiLFxuICAgICAgICBkYXRhOiBkYXRhXzBcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB1bnN1Yj8uKCksIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICB9O1xuICB9LCB0MSA9IFtjb21saW5rLCBkaXNwYXRjaF0sICRbMF0gPSBjb21saW5rLCAkWzFdID0gZGlzcGF0Y2gsICRbMl0gPSB0MCwgJFszXSA9IHQxKSA6ICh0MCA9ICRbMl0sIHQxID0gJFszXSksIHVzZUVmZmVjdCh0MCwgdDEpO1xufVxuZnVuY3Rpb24gX3RlbXAkNCgpIHtcbn1cbmZ1bmN0aW9uIGlzRXF1YWxTZXRzKGEsIGIpIHtcbiAgaWYgKGEgPT09IGIpIHJldHVybiAhMDtcbiAgaWYgKGEuc2l6ZSAhPT0gYi5zaXplKSByZXR1cm4gITE7XG4gIGZvciAoY29uc3QgdmFsdWUgb2YgYSkgaWYgKCFiLmhhcyh2YWx1ZSkpIHJldHVybiAhMTtcbiAgcmV0dXJuICEwO1xufVxuZnVuY3Rpb24gdXNlUmVwb3J0RG9jdW1lbnRzKGNvbWxpbmssIGVsZW1lbnRzLCBwZXJzcGVjdGl2ZSkge1xuICBjb25zdCAkID0gYyg3KSwgbGFzdFJlcG9ydGVkID0gdXNlUmVmKHZvaWQgMCk7XG4gIGxldCB0MDtcbiAgJFswXSAhPT0gY29tbGluayA/ICh0MCA9IChkb2N1bWVudHMsIHBlcnNwZWN0aXZlXzApID0+IHtcbiAgICBjb21saW5rPy5wb3N0KFwidmlzdWFsLWVkaXRpbmcvZG9jdW1lbnRzXCIsIHtcbiAgICAgIGRvY3VtZW50cyxcbiAgICAgIHBlcnNwZWN0aXZlOiBwZXJzcGVjdGl2ZV8wXG4gICAgfSk7XG4gIH0sICRbMF0gPSBjb21saW5rLCAkWzFdID0gdDApIDogdDAgPSAkWzFdO1xuICBjb25zdCByZXBvcnREb2N1bWVudHMgPSB0MDtcbiAgbGV0IHQxLCB0MjtcbiAgJFsyXSAhPT0gZWxlbWVudHMgfHwgJFszXSAhPT0gcGVyc3BlY3RpdmUgfHwgJFs0XSAhPT0gcmVwb3J0RG9jdW1lbnRzID8gKHQxID0gKCkgPT4ge1xuICAgIGNvbnN0IG5vZGVzID0gZWxlbWVudHMubWFwKF90ZW1wJDMpLmZpbHRlcihfdGVtcDIkMiksIG5vZGVJZHMgPSBuZXcgU2V0KG5vZGVzLm1hcChfdGVtcDMkMSkpO1xuICAgIGlmICghbGFzdFJlcG9ydGVkLmN1cnJlbnQgfHwgIWlzRXF1YWxTZXRzKG5vZGVJZHMsIGxhc3RSZXBvcnRlZC5jdXJyZW50Lm5vZGVJZHMpIHx8IHBlcnNwZWN0aXZlICE9PSBsYXN0UmVwb3J0ZWQuY3VycmVudC5wZXJzcGVjdGl2ZSkge1xuICAgICAgY29uc3QgZG9jdW1lbnRzT25QYWdlID0gQXJyYXkuZnJvbShub2RlSWRzKS5tYXAoKF9pZCkgPT4ge1xuICAgICAgICBjb25zdCBub2RlXzAgPSBub2Rlcy5maW5kKChub2RlKSA9PiBub2RlLmlkID09PSBfaWQpLCB7XG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICBwcm9qZWN0SWQ6IF9wcm9qZWN0SWQsXG4gICAgICAgICAgZGF0YXNldDogX2RhdGFzZXRcbiAgICAgICAgfSA9IG5vZGVfMDtcbiAgICAgICAgcmV0dXJuIF9wcm9qZWN0SWQgJiYgX2RhdGFzZXQgPyB7XG4gICAgICAgICAgX2lkLFxuICAgICAgICAgIF90eXBlOiB0eXBlLFxuICAgICAgICAgIF9wcm9qZWN0SWQsXG4gICAgICAgICAgX2RhdGFzZXRcbiAgICAgICAgfSA6IHtcbiAgICAgICAgICBfaWQsXG4gICAgICAgICAgX3R5cGU6IHR5cGVcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgICAgbGFzdFJlcG9ydGVkLmN1cnJlbnQgPSB7XG4gICAgICAgIG5vZGVJZHMsXG4gICAgICAgIHBlcnNwZWN0aXZlXG4gICAgICB9LCByZXBvcnREb2N1bWVudHMoZG9jdW1lbnRzT25QYWdlLCBwZXJzcGVjdGl2ZSk7XG4gICAgfVxuICB9LCB0MiA9IFtlbGVtZW50cywgcGVyc3BlY3RpdmUsIHJlcG9ydERvY3VtZW50c10sICRbMl0gPSBlbGVtZW50cywgJFszXSA9IHBlcnNwZWN0aXZlLCAkWzRdID0gcmVwb3J0RG9jdW1lbnRzLCAkWzVdID0gdDEsICRbNl0gPSB0MikgOiAodDEgPSAkWzVdLCB0MiA9ICRbNl0pLCB1c2VFZmZlY3QodDEsIHQyKTtcbn1cbmZ1bmN0aW9uIF90ZW1wMyQxKGVfMCkge1xuICByZXR1cm4gZV8wLmlkO1xufVxuZnVuY3Rpb24gX3RlbXAyJDIocykge1xuICByZXR1cm4gISFzO1xufVxuZnVuY3Rpb24gX3RlbXAkMyhlKSB7XG4gIGNvbnN0IHtcbiAgICBzYW5pdHlcbiAgfSA9IGU7XG4gIHJldHVybiAhc2FuaXR5IHx8ICEoXCJpZFwiIGluIHNhbml0eSkgPyBudWxsIDogc2FuaXR5O1xufVxuY29uc3QgUm9vdCA9IHN0eWxlZC5kaXZgXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICBkaXJlY3Rpb246IGx0cjtcbiAgaW5zZXQ6IDA7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIHotaW5kZXg6ICR7KHtcbiAgJHpJbmRleFxufSkgPT4gJHpJbmRleCA/PyBcIjk5OTk5OTlcIn07XG5gO1xuZnVuY3Rpb24gcmFmMihmbikge1xuICBsZXQgcjAsIHIxO1xuICByZXR1cm4gcjAgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgIHIxID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZuKTtcbiAgfSksICgpID0+IHtcbiAgICByMCAhPT0gdm9pZCAwICYmIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHIwKSwgcjEgIT09IHZvaWQgMCAmJiBjYW5jZWxBbmltYXRpb25GcmFtZShyMSk7XG4gIH07XG59XG5jb25zdCBEb2N1bWVudFJlcG9ydGVyID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0ICQgPSBjKDgpLCB7XG4gICAgZG9jdW1lbnRJZHNcbiAgfSA9IHByb3BzO1xuICBsZXQgdDA7XG4gICRbMF0gPT09IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vX2NhY2hlX3NlbnRpbmVsXCIpID8gKHQwID0gW10sICRbMF0gPSB0MCkgOiB0MCA9ICRbMF07XG4gIGNvbnN0IFt1bmlxdWVJZHMsIHNldFVuaXF1ZUlkc10gPSB1c2VTdGF0ZSh0MCk7XG4gIGxldCB0MSwgdDI7XG4gICRbMV0gIT09IGRvY3VtZW50SWRzID8gKHQxID0gKCkgPT4ge1xuICAgIHNldFVuaXF1ZUlkcygocHJldikgPT4ge1xuICAgICAgY29uc3QgbmV4dCA9IEFycmF5LmZyb20obmV3IFNldChkb2N1bWVudElkcykpO1xuICAgICAgcmV0dXJuIHByZXYubGVuZ3RoID09PSBuZXh0Lmxlbmd0aCAmJiBwcmV2LnJlZHVjZShfdGVtcCQyLCBuZXh0KT8ubGVuZ3RoID09PSAwID8gcHJldiA6IG5leHQ7XG4gICAgfSk7XG4gIH0sIHQyID0gW2RvY3VtZW50SWRzXSwgJFsxXSA9IGRvY3VtZW50SWRzLCAkWzJdID0gdDEsICRbM10gPSB0MikgOiAodDEgPSAkWzJdLCB0MiA9ICRbM10pLCB1c2VFZmZlY3QodDEsIHQyKTtcbiAgY29uc3QgYWN0b3IgPSB1c2VPcHRpbWlzdGljQWN0b3IoKTtcbiAgbGV0IHQzLCB0NDtcbiAgcmV0dXJuICRbNF0gIT09IGFjdG9yIHx8ICRbNV0gIT09IHVuaXF1ZUlkcyA/ICh0MyA9ICgpID0+IHtcbiAgICBmb3IgKGNvbnN0IGlkXzAgb2YgdW5pcXVlSWRzKVxuICAgICAgYWN0b3Iuc2VuZCh7XG4gICAgICAgIHR5cGU6IFwib2JzZXJ2ZVwiLFxuICAgICAgICBkb2N1bWVudElkOiBnZXREcmFmdElkKGlkXzApXG4gICAgICB9KSwgYWN0b3Iuc2VuZCh7XG4gICAgICAgIHR5cGU6IFwib2JzZXJ2ZVwiLFxuICAgICAgICBkb2N1bWVudElkOiBnZXRQdWJsaXNoZWRJZChpZF8wKVxuICAgICAgfSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGZvciAoY29uc3QgaWRfMSBvZiB1bmlxdWVJZHMpXG4gICAgICAgIGFjdG9yLnNlbmQoe1xuICAgICAgICAgIHR5cGU6IFwidW5vYnNlcnZlXCIsXG4gICAgICAgICAgZG9jdW1lbnRJZDogZ2V0RHJhZnRJZChpZF8xKVxuICAgICAgICB9KSwgYWN0b3Iuc2VuZCh7XG4gICAgICAgICAgdHlwZTogXCJ1bm9ic2VydmVcIixcbiAgICAgICAgICBkb2N1bWVudElkOiBnZXRQdWJsaXNoZWRJZChpZF8xKVxuICAgICAgICB9KTtcbiAgICB9O1xuICB9LCB0NCA9IFthY3RvciwgdW5pcXVlSWRzXSwgJFs0XSA9IGFjdG9yLCAkWzVdID0gdW5pcXVlSWRzLCAkWzZdID0gdDMsICRbN10gPSB0NCkgOiAodDMgPSAkWzZdLCB0NCA9ICRbN10pLCB1c2VFZmZlY3QodDMsIHQ0KSwgbnVsbDtcbn0sIE92ZXJsYXlzQ29udHJvbGxlciA9IChwcm9wcykgPT4ge1xuICBjb25zdCB7XG4gICAgY29tbGluayxcbiAgICBkaXNwYXRjaCxcbiAgICBpbkZyYW1lLFxuICAgIGluUG9wVXAsXG4gICAgb25EcmFnLFxuICAgIG92ZXJsYXlFbmFibGVkLFxuICAgIHJvb3RFbGVtZW50XG4gIH0gPSBwcm9wcywge1xuICAgIGRpc3BhdGNoRHJhZ0VuZEV2ZW50XG4gIH0gPSB1c2VEcmFnRW5kRXZlbnRzKCksIHNlbmRUZWxlbWV0cnkgPSB1c2VUZWxlbWV0cnkoKSwgb3ZlcmxheUV2ZW50SGFuZGxlciA9IHVzZUNhbGxiYWNrKChtZXNzYWdlKSA9PiB7XG4gICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJlbGVtZW50L2NsaWNrXCIpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgc2FuaXR5XG4gICAgICB9ID0gbWVzc2FnZTtcbiAgICAgIGNvbWxpbms/LnBvc3QoXCJ2aXN1YWwtZWRpdGluZy9mb2N1c1wiLCBzYW5pdHkpLCBzZW5kVGVsZW1ldHJ5KFwiVmlzdWFsIEVkaXRpbmcgT3ZlcmxheSBDbGlja2VkXCIsIG51bGwpO1xuICAgIH0gZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSBcIm92ZXJsYXkvYWN0aXZhdGVcIilcbiAgICAgIGNvbWxpbms/LnBvc3QoXCJ2aXN1YWwtZWRpdGluZy90b2dnbGVcIiwge1xuICAgICAgICBlbmFibGVkOiAhMFxuICAgICAgfSk7XG4gICAgZWxzZSBpZiAobWVzc2FnZS50eXBlID09PSBcIm92ZXJsYXkvZGVhY3RpdmF0ZVwiKVxuICAgICAgY29tbGluaz8ucG9zdChcInZpc3VhbC1lZGl0aW5nL3RvZ2dsZVwiLCB7XG4gICAgICAgIGVuYWJsZWQ6ICExXG4gICAgICB9KTtcbiAgICBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09IFwib3ZlcmxheS9kcmFnRW5kXCIpIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgaW5zZXJ0UG9zaXRpb24sXG4gICAgICAgIHRhcmdldCxcbiAgICAgICAgZHJhZ0dyb3VwLFxuICAgICAgICBmbG93LFxuICAgICAgICBwcmV2ZW50SW5zZXJ0RGVmYXVsdFxuICAgICAgfSA9IG1lc3NhZ2U7XG4gICAgICBkaXNwYXRjaERyYWdFbmRFdmVudCh7XG4gICAgICAgIGluc2VydFBvc2l0aW9uLFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgIGRyYWdHcm91cCxcbiAgICAgICAgZmxvdyxcbiAgICAgICAgcHJldmVudEluc2VydERlZmF1bHRcbiAgICAgIH0pLCBpbnNlcnRQb3NpdGlvbiAmJiBzZW5kVGVsZW1ldHJ5KFwiVmlzdWFsIEVkaXRpbmcgRHJhZyBTZXF1ZW5jZSBDb21wbGV0ZWRcIiwgbnVsbCk7XG4gICAgfSBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09IFwib3ZlcmxheS9kcmFnVXBkYXRlQ3Vyc29yUG9zaXRpb25cIikge1xuICAgICAgb25EcmFnKG1lc3NhZ2UueCwgbWVzc2FnZS55KTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJvdmVybGF5L2RyYWdUb2dnbGVNaW5pbWFwXCIgJiYgbWVzc2FnZS5kaXNwbGF5ID09PSAhMClcbiAgICAgIHNlbmRUZWxlbWV0cnkoXCJWaXN1YWwgRWRpdGluZyBEcmFnIE1pbmltYXAgRW5hYmxlZFwiLCBudWxsKTtcbiAgICBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09IFwib3ZlcmxheS9zZXRDdXJzb3JcIikge1xuICAgICAgY29uc3Qge1xuICAgICAgICBlbGVtZW50LFxuICAgICAgICBjdXJzb3JcbiAgICAgIH0gPSBtZXNzYWdlO1xuICAgICAgY3Vyc29yID8gZWxlbWVudC5zdHlsZS5jdXJzb3IgPSBjdXJzb3IgOiBlbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KFwiY3Vyc29yXCIpO1xuICAgIH1cbiAgICBkaXNwYXRjaChtZXNzYWdlKTtcbiAgfSwgW2NvbWxpbmssIGRpc3BhdGNoLCBkaXNwYXRjaERyYWdFbmRFdmVudCwgb25EcmFnLCBzZW5kVGVsZW1ldHJ5XSksIGNvbnRyb2xsZXIgPSB1c2VDb250cm9sbGVyKHJvb3RFbGVtZW50LCBvdmVybGF5RXZlbnRIYW5kbGVyLCBpbkZyYW1lLCBpblBvcFVwKTtcbiAgcmV0dXJuIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgb3ZlcmxheUVuYWJsZWQgPyBjb250cm9sbGVyLmN1cnJlbnQ/LmFjdGl2YXRlKCkgOiBjb250cm9sbGVyLmN1cnJlbnQ/LmRlYWN0aXZhdGUoKTtcbiAgfSwgW2NvbnRyb2xsZXIsIG92ZXJsYXlFbmFibGVkXSksIG51bGw7XG59LCBPdmVybGF5cyA9IChwcm9wcykgPT4ge1xuICBjb25zdCAkID0gYyg3NiksIHtcbiAgICBjb21saW5rLFxuICAgIGNvbWxpbmtTdGF0dXMsXG4gICAgY29tcG9uZW50UmVzb2x2ZXI6IF9jb21wb25lbnRSZXNvbHZlcixcbiAgICBpbkZyYW1lLFxuICAgIGluUG9wVXAsXG4gICAgekluZGV4XG4gIH0gPSBwcm9wcywgcHJlZmVyc0RhcmsgPSB1c2VQcmVmZXJzRGFyaygpO1xuICBsZXQgdDA7XG4gICRbMF0gPT09IFN5bWJvbC5mb3IoXCJyZWFjdC5tZW1vX2NhY2hlX3NlbnRpbmVsXCIpID8gKHQwID0ge1xuICAgIGNvbnRleHRNZW51OiBudWxsLFxuICAgIGRyYWdJbnNlcnRQb3NpdGlvbjogbnVsbCxcbiAgICBkcmFnU2hvd01pbmltYXA6ICExLFxuICAgIGRyYWdTaG93TWluaW1hcFByb21wdDogITEsXG4gICAgZHJhZ1NrZWxldG9uOiBudWxsLFxuICAgIGVsZW1lbnRzOiBbXSxcbiAgICBmb2N1c1BhdGg6IFwiXCIsXG4gICAgaXNEcmFnZ2luZzogITEsXG4gICAgcGVyc3BlY3RpdmU6IFwicHVibGlzaGVkXCIsXG4gICAgd2FzTWF5YmVDb2xsYXBzZWQ6ICExLFxuICAgIGRyYWdNaW5pbWFwVHJhbnNpdGlvbjogITEsXG4gICAgZHJhZ0dyb3VwUmVjdDogbnVsbFxuICB9LCAkWzBdID0gdDApIDogdDAgPSAkWzBdO1xuICBjb25zdCBbdDEsIGRpc3BhdGNoXSA9IHVzZVJlZHVjZXIob3ZlcmxheVN0YXRlUmVkdWNlciwgdDApLCB7XG4gICAgY29udGV4dE1lbnUsXG4gICAgZHJhZ0luc2VydFBvc2l0aW9uLFxuICAgIGRyYWdTaG93TWluaW1hcCxcbiAgICBkcmFnU2hvd01pbmltYXBQcm9tcHQsXG4gICAgZHJhZ1NrZWxldG9uLFxuICAgIGVsZW1lbnRzLFxuICAgIGlzRHJhZ2dpbmcsXG4gICAgcGVyc3BlY3RpdmUsXG4gICAgd2FzTWF5YmVDb2xsYXBzZWQsXG4gICAgZHJhZ01pbmltYXBUcmFuc2l0aW9uLFxuICAgIGRyYWdHcm91cFJlY3RcbiAgfSA9IHQxLCBbcm9vdEVsZW1lbnQsIHNldFJvb3RFbGVtZW50XSA9IHVzZVN0YXRlKG51bGwpLCBbb3ZlcmxheUVuYWJsZWQsIHNldE92ZXJsYXlFbmFibGVkXSA9IHVzZVN0YXRlKCEwKTtcbiAgbGV0IHQyLCB0MztcbiAgJFsxXSAhPT0gY29tbGluayA/ICh0MiA9ICgpID0+IHtcbiAgICBjb25zdCB1bnN1YnMgPSBbY29tbGluaz8ub24oXCJwcmVzZW50YXRpb24vZm9jdXNcIiwgKGRhdGEpID0+IHtcbiAgICAgIGRpc3BhdGNoKHtcbiAgICAgICAgdHlwZTogXCJwcmVzZW50YXRpb24vZm9jdXNcIixcbiAgICAgICAgZGF0YVxuICAgICAgfSk7XG4gICAgfSksIGNvbWxpbms/Lm9uKFwicHJlc2VudGF0aW9uL2JsdXJcIiwgKGRhdGFfMCkgPT4ge1xuICAgICAgZGlzcGF0Y2goe1xuICAgICAgICB0eXBlOiBcInByZXNlbnRhdGlvbi9ibHVyXCIsXG4gICAgICAgIGRhdGE6IGRhdGFfMFxuICAgICAgfSk7XG4gICAgfSksIGNvbWxpbms/Lm9uKFwicHJlc2VudGF0aW9uL3RvZ2dsZS1vdmVybGF5XCIsICgpID0+IHtcbiAgICAgIHNldE92ZXJsYXlFbmFibGVkKF90ZW1wMiQxKTtcbiAgICB9KV0uZmlsdGVyKEJvb2xlYW4pO1xuICAgIHJldHVybiAoKSA9PiB1bnN1YnMuZm9yRWFjaChfdGVtcDMpO1xuICB9LCB0MyA9IFtjb21saW5rXSwgJFsxXSA9IGNvbWxpbmssICRbMl0gPSB0MiwgJFszXSA9IHQzKSA6ICh0MiA9ICRbMl0sIHQzID0gJFszXSksIHVzZUVmZmVjdCh0MiwgdDMpLCB1c2VQZXJzcGVjdGl2ZVN5bmMoY29tbGluaywgZGlzcGF0Y2gpLCB1c2VSZXBvcnREb2N1bWVudHMoY29tbGluaywgZWxlbWVudHMsIHBlcnNwZWN0aXZlKTtcbiAgbGV0IHQ0O1xuICAkWzRdICE9PSByb290RWxlbWVudCA/ICh0NCA9ICh4LCB5KSA9PiB7XG4gICAgcm9vdEVsZW1lbnQgJiYgKHJvb3RFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLS1kcmFnLXByZXZpZXcteFwiLCBgJHt4fXB4YCksIHJvb3RFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLS1kcmFnLXByZXZpZXcteVwiLCBgJHt5IC0gd2luZG93LnNjcm9sbFl9cHhgKSk7XG4gIH0sICRbNF0gPSByb290RWxlbWVudCwgJFs1XSA9IHQ0KSA6IHQ0ID0gJFs1XTtcbiAgY29uc3QgdXBkYXRlRHJhZ1ByZXZpZXdDdXN0b21Qcm9wcyA9IHQ0O1xuICBsZXQgdDUsIHQ2O1xuICAkWzZdID09PSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSA/ICh0NSA9ICgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVDbGljayA9IF90ZW1wNDtcbiAgICBsZXQgYWx0UHJlc3NlZCA9ICExO1xuICAgIGNvbnN0IGhhbmRsZUtleVVwID0gKGUpID0+IHtcbiAgICAgIGlzQWx0S2V5KGUpICYmIGFsdFByZXNzZWQgJiYgKGFsdFByZXNzZWQgPSAhMSwgc2V0T3ZlcmxheUVuYWJsZWQoX3RlbXA1KSk7XG4gICAgfSwgaGFuZGxlS2V5ZG93biA9IChlXzApID0+IHtcbiAgICAgIGlmIChpc0FsdEtleShlXzApKSB7XG4gICAgICAgIGlmIChlXzAuY3RybEtleSB8fCBlXzAubWV0YUtleSB8fCBlXzAuc2hpZnRLZXkpXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBhbHRQcmVzc2VkIHx8IChhbHRQcmVzc2VkID0gITAsIHNldE92ZXJsYXlFbmFibGVkKF90ZW1wNikpO1xuICAgICAgfVxuICAgICAgaXNIb3RrZXkoW1wibW9kXCIsIFwiXFxcXFwiXSwgZV8wKSAmJiBzZXRPdmVybGF5RW5hYmxlZChfdGVtcDcpO1xuICAgIH0sIGhhbmRsZVdpbmRvd0JsdXIgPSAoKSA9PiB7XG4gICAgICBhbHRQcmVzc2VkICYmIChhbHRQcmVzc2VkID0gITEsIHNldE92ZXJsYXlFbmFibGVkKF90ZW1wOCkpO1xuICAgIH07XG4gICAgcmV0dXJuIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ2xpY2spLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlS2V5ZG93biksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgaGFuZGxlS2V5VXApLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgaGFuZGxlV2luZG93Qmx1ciksICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQ2xpY2spLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlS2V5ZG93biksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgaGFuZGxlS2V5VXApLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgaGFuZGxlV2luZG93Qmx1cik7XG4gICAgfTtcbiAgfSwgdDYgPSBbc2V0T3ZlcmxheUVuYWJsZWRdLCAkWzZdID0gdDUsICRbN10gPSB0NikgOiAodDUgPSAkWzZdLCB0NiA9ICRbN10pLCB1c2VFZmZlY3QodDUsIHQ2KTtcbiAgY29uc3QgW292ZXJsYXlzRmxhc2gsIHNldE92ZXJsYXlzRmxhc2hdID0gdXNlU3RhdGUoITEpLCBbZmFkaW5nT3V0LCBzZXRGYWRpbmdPdXRdID0gdXNlU3RhdGUoITEpLCBmYWRlT3V0VGltZW91dFJlZiA9IHVzZVJlZih2b2lkIDApO1xuICBsZXQgdDcsIHQ4O1xuICAkWzhdICE9PSBvdmVybGF5RW5hYmxlZCA/ICh0NyA9ICgpID0+IHtcbiAgICBpZiAob3ZlcmxheUVuYWJsZWQpXG4gICAgICByZXR1cm4gcmFmMigoKSA9PiB7XG4gICAgICAgIHNldE92ZXJsYXlzRmxhc2goITApLCByYWYyKCgpID0+IHtcbiAgICAgICAgICBzZXRGYWRpbmdPdXQoITApLCBmYWRlT3V0VGltZW91dFJlZi5jdXJyZW50ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZXRGYWRpbmdPdXQoITEpLCBzZXRPdmVybGF5c0ZsYXNoKCExKTtcbiAgICAgICAgICB9LCAxNTAwKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICBmYWRlT3V0VGltZW91dFJlZi5jdXJyZW50ICYmIChjbGVhclRpbWVvdXQoZmFkZU91dFRpbWVvdXRSZWYuY3VycmVudCksIHNldE92ZXJsYXlzRmxhc2goITEpLCBzZXRGYWRpbmdPdXQoITEpKTtcbiAgfSwgdDggPSBbb3ZlcmxheUVuYWJsZWRdLCAkWzhdID0gb3ZlcmxheUVuYWJsZWQsICRbOV0gPSB0NywgJFsxMF0gPSB0OCkgOiAodDcgPSAkWzldLCB0OCA9ICRbMTBdKSwgdXNlRWZmZWN0KHQ3LCB0OCk7XG4gIGxldCB0OTtcbiAgJFsxMV0gIT09IGVsZW1lbnRzID8gKHQ5ID0gZWxlbWVudHMuZmxhdE1hcChfdGVtcDkpLCAkWzExXSA9IGVsZW1lbnRzLCAkWzEyXSA9IHQ5KSA6IHQ5ID0gJFsxMl07XG4gIGNvbnN0IGRvY3VtZW50SWRzID0gdDk7XG4gIGxldCB0MTA7XG4gICRbMTNdID09PSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSA/ICh0MTAgPSAoKSA9PiB7XG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogXCJvdmVybGF5L2JsdXJcIlxuICAgIH0pO1xuICB9LCAkWzEzXSA9IHQxMCkgOiB0MTAgPSAkWzEzXTtcbiAgY29uc3QgY2xvc2VDb250ZXh0TWVudSA9IHQxMCwgb3B0aW1pc3RpY0FjdG9yUmVhZHkgPSB1c2VPcHRpbWlzdGljQWN0b3JSZWFkeSgpLCBjb21wb25lbnRSZXNvbHZlciA9IG9wdGltaXN0aWNBY3RvclJlYWR5ID8gX2NvbXBvbmVudFJlc29sdmVyIDogdm9pZCAwO1xuICBsZXQgdDExO1xuICBiYjA6IHtcbiAgICBpZiAoKGluRnJhbWUgfHwgaW5Qb3BVcCkgJiYgY29tbGlua1N0YXR1cyAhPT0gXCJjb25uZWN0ZWRcIiB8fCBpc0RyYWdnaW5nKSB7XG4gICAgICBsZXQgdDEyMztcbiAgICAgICRbMTRdID09PSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSA/ICh0MTIzID0gW10sICRbMTRdID0gdDEyMykgOiB0MTIzID0gJFsxNF0sIHQxMSA9IHQxMjM7XG4gICAgICBicmVhayBiYjA7XG4gICAgfVxuICAgIGxldCB0MTIyO1xuICAgICRbMTVdICE9PSBjb21saW5rIHx8ICRbMTZdICE9PSBjb21wb25lbnRSZXNvbHZlciB8fCAkWzE3XSAhPT0gZHJhZ01pbmltYXBUcmFuc2l0aW9uIHx8ICRbMThdICE9PSBkcmFnU2hvd01pbmltYXAgfHwgJFsxOV0gIT09IGVsZW1lbnRzIHx8ICRbMjBdICE9PSBpbkZyYW1lIHx8ICRbMjFdICE9PSBpc0RyYWdnaW5nIHx8ICRbMjJdICE9PSBvcHRpbWlzdGljQWN0b3JSZWFkeSB8fCAkWzIzXSAhPT0gcHJvcHMucGx1Z2lucyB8fCAkWzI0XSAhPT0gd2FzTWF5YmVDb2xsYXBzZWQgPyAodDEyMiA9IGVsZW1lbnRzLmZpbHRlcihfdGVtcDApLm1hcCgodDEzMikgPT4ge1xuICAgICAgY29uc3Qge1xuICAgICAgICBpZCxcbiAgICAgICAgZWxlbWVudDogZWxlbWVudF8wLFxuICAgICAgICBmb2N1c2VkLFxuICAgICAgICBob3ZlcmVkLFxuICAgICAgICByZWN0LFxuICAgICAgICBzYW5pdHksXG4gICAgICAgIGRyYWdEaXNhYmxlZCxcbiAgICAgICAgdGFyZ2V0cyxcbiAgICAgICAgZWxlbWVudFR5cGVcbiAgICAgIH0gPSB0MTMyLCBkcmFnZ2FibGUgPSAhZHJhZ0Rpc2FibGVkICYmICEhZWxlbWVudF8wLmdldEF0dHJpYnV0ZShcImRhdGEtc2FuaXR5XCIpICYmIG9wdGltaXN0aWNBY3RvclJlYWR5ICYmIGVsZW1lbnRzLnNvbWUoKGVfMikgPT4gXCJpZFwiIGluIGVfMi5zYW5pdHkgJiYgXCJpZFwiIGluIHNhbml0eSA/IHNhbml0eU5vZGVzRXhpc3RJblNhbWVBcnJheShlXzIuc2FuaXR5LCBzYW5pdHkpICYmIGVfMi5zYW5pdHkucGF0aCAhPT0gc2FuaXR5LnBhdGggOiAhMSk7XG4gICAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIGpzeChFbGVtZW50T3ZlcmxheSwgeyBjb21saW5rLCBjb21wb25lbnRSZXNvbHZlciwgcGx1Z2luczogcHJvcHMucGx1Z2lucywgZWxlbWVudDogZWxlbWVudF8wLCBlbmFibGVTY3JvbGxJbnRvVmlldzogIWlzRHJhZ2dpbmcgJiYgIWRyYWdNaW5pbWFwVHJhbnNpdGlvbiAmJiAhZHJhZ1Nob3dNaW5pbWFwLCBpZCwgZm9jdXNlZCwgaG92ZXJlZCwgbm9kZTogc2FuaXR5LCByZWN0LCBzaG93QWN0aW9uczogIWluRnJhbWUsIGRyYWdnYWJsZSwgaXNEcmFnZ2luZzogaXNEcmFnZ2luZyB8fCBkcmFnTWluaW1hcFRyYW5zaXRpb24sIHdhc01heWJlQ29sbGFwc2VkOiBmb2N1c2VkICYmIHdhc01heWJlQ29sbGFwc2VkLCB0YXJnZXRzLCBlbGVtZW50VHlwZSB9LCBpZCk7XG4gICAgfSksICRbMTVdID0gY29tbGluaywgJFsxNl0gPSBjb21wb25lbnRSZXNvbHZlciwgJFsxN10gPSBkcmFnTWluaW1hcFRyYW5zaXRpb24sICRbMThdID0gZHJhZ1Nob3dNaW5pbWFwLCAkWzE5XSA9IGVsZW1lbnRzLCAkWzIwXSA9IGluRnJhbWUsICRbMjFdID0gaXNEcmFnZ2luZywgJFsyMl0gPSBvcHRpbWlzdGljQWN0b3JSZWFkeSwgJFsyM10gPSBwcm9wcy5wbHVnaW5zLCAkWzI0XSA9IHdhc01heWJlQ29sbGFwc2VkLCAkWzI1XSA9IHQxMjIpIDogdDEyMiA9ICRbMjVdLCB0MTEgPSB0MTIyO1xuICB9XG4gIGNvbnN0IGVsZW1lbnRzVG9SZW5kZXIgPSB0MTEsIHQxMiA9IHByZWZlcnNEYXJrID8gXCJkYXJrXCIgOiBcImxpZ2h0XCIsIHQxMyA9IGZhZGluZ091dCA/IFwiXCIgOiB2b2lkIDAsIHQxNCA9IG92ZXJsYXlzRmxhc2ggPyBcIlwiIDogdm9pZCAwO1xuICBsZXQgdDE1O1xuICAkWzI2XSAhPT0gZG9jdW1lbnRJZHMgfHwgJFsyN10gIT09IHBlcnNwZWN0aXZlID8gKHQxNSA9IC8qIEBfX1BVUkVfXyAqLyBqc3goRG9jdW1lbnRSZXBvcnRlciwgeyBkb2N1bWVudElkcywgcGVyc3BlY3RpdmUgfSksICRbMjZdID0gZG9jdW1lbnRJZHMsICRbMjddID0gcGVyc3BlY3RpdmUsICRbMjhdID0gdDE1KSA6IHQxNSA9ICRbMjhdO1xuICBsZXQgdDE2O1xuICAkWzI5XSAhPT0gY29tbGluayB8fCAkWzMwXSAhPT0gaW5GcmFtZSB8fCAkWzMxXSAhPT0gaW5Qb3BVcCB8fCAkWzMyXSAhPT0gb3ZlcmxheUVuYWJsZWQgfHwgJFszM10gIT09IHJvb3RFbGVtZW50IHx8ICRbMzRdICE9PSB1cGRhdGVEcmFnUHJldmlld0N1c3RvbVByb3BzID8gKHQxNiA9IC8qIEBfX1BVUkVfXyAqLyBqc3goT3ZlcmxheXNDb250cm9sbGVyLCB7IGNvbWxpbmssIGRpc3BhdGNoLCBpbkZyYW1lLCBpblBvcFVwLCBvbkRyYWc6IHVwZGF0ZURyYWdQcmV2aWV3Q3VzdG9tUHJvcHMsIG92ZXJsYXlFbmFibGVkLCByb290RWxlbWVudCB9KSwgJFsyOV0gPSBjb21saW5rLCAkWzMwXSA9IGluRnJhbWUsICRbMzFdID0gaW5Qb3BVcCwgJFszMl0gPSBvdmVybGF5RW5hYmxlZCwgJFszM10gPSByb290RWxlbWVudCwgJFszNF0gPSB1cGRhdGVEcmFnUHJldmlld0N1c3RvbVByb3BzLCAkWzM1XSA9IHQxNikgOiB0MTYgPSAkWzM1XTtcbiAgbGV0IHQxNztcbiAgJFszNl0gIT09IGNvbnRleHRNZW51ID8gKHQxNyA9IGNvbnRleHRNZW51ICYmIC8qIEBfX1BVUkVfXyAqLyBqc3goQ29udGV4dE1lbnUsIHsgLi4uY29udGV4dE1lbnUsIG9uRGlzbWlzczogY2xvc2VDb250ZXh0TWVudSB9KSwgJFszNl0gPSBjb250ZXh0TWVudSwgJFszN10gPSB0MTcpIDogdDE3ID0gJFszN107XG4gIGxldCB0MTg7XG4gICRbMzhdICE9PSBkcmFnR3JvdXBSZWN0IHx8ICRbMzldICE9PSBkcmFnSW5zZXJ0UG9zaXRpb24gfHwgJFs0MF0gIT09IGRyYWdNaW5pbWFwVHJhbnNpdGlvbiB8fCAkWzQxXSAhPT0gZHJhZ1Nob3dNaW5pbWFwUHJvbXB0IHx8ICRbNDJdICE9PSBpc0RyYWdnaW5nID8gKHQxOCA9IGlzRHJhZ2dpbmcgJiYgIWRyYWdNaW5pbWFwVHJhbnNpdGlvbiAmJiAvKiBAX19QVVJFX18gKi8ganN4cyhGcmFnbWVudCwgeyBjaGlsZHJlbjogW1xuICAgIGRyYWdJbnNlcnRQb3NpdGlvbiAmJiAvKiBAX19QVVJFX18gKi8ganN4KE92ZXJsYXlEcmFnSW5zZXJ0TWFya2VyLCB7IGRyYWdJbnNlcnRQb3NpdGlvbiB9KSxcbiAgICBkcmFnU2hvd01pbmltYXBQcm9tcHQgJiYgLyogQF9fUFVSRV9fICovIGpzeChPdmVybGF5TWluaW1hcFByb21wdCwge30pLFxuICAgIGRyYWdHcm91cFJlY3QgJiYgLyogQF9fUFVSRV9fICovIGpzeChPdmVybGF5RHJhZ0dyb3VwUmVjdCwgeyBkcmFnR3JvdXBSZWN0IH0pXG4gIF0gfSksICRbMzhdID0gZHJhZ0dyb3VwUmVjdCwgJFszOV0gPSBkcmFnSW5zZXJ0UG9zaXRpb24sICRbNDBdID0gZHJhZ01pbmltYXBUcmFuc2l0aW9uLCAkWzQxXSA9IGRyYWdTaG93TWluaW1hcFByb21wdCwgJFs0Ml0gPSBpc0RyYWdnaW5nLCAkWzQzXSA9IHQxOCkgOiB0MTggPSAkWzQzXTtcbiAgbGV0IHQxOTtcbiAgJFs0NF0gIT09IGRyYWdTa2VsZXRvbiB8fCAkWzQ1XSAhPT0gaXNEcmFnZ2luZyA/ICh0MTkgPSBpc0RyYWdnaW5nICYmIGRyYWdTa2VsZXRvbiAmJiAvKiBAX19QVVJFX18gKi8ganN4KE92ZXJsYXlEcmFnUHJldmlldywgeyBza2VsZXRvbjogZHJhZ1NrZWxldG9uIH0pLCAkWzQ0XSA9IGRyYWdTa2VsZXRvbiwgJFs0NV0gPSBpc0RyYWdnaW5nLCAkWzQ2XSA9IHQxOSkgOiB0MTkgPSAkWzQ2XTtcbiAgbGV0IHQyMDtcbiAgJFs0N10gIT09IGVsZW1lbnRzVG9SZW5kZXIgfHwgJFs0OF0gIT09IHQxMyB8fCAkWzQ5XSAhPT0gdDE0IHx8ICRbNTBdICE9PSB0MTUgfHwgJFs1MV0gIT09IHQxNiB8fCAkWzUyXSAhPT0gdDE3IHx8ICRbNTNdICE9PSB0MTggfHwgJFs1NF0gIT09IHQxOSB8fCAkWzU1XSAhPT0gekluZGV4ID8gKHQyMCA9IC8qIEBfX1BVUkVfXyAqLyBqc3hzKFJvb3QsIHsgXCJkYXRhLWZhZGluZy1vdXRcIjogdDEzLCBcImRhdGEtb3ZlcmxheXNcIjogdDE0LCByZWY6IHNldFJvb3RFbGVtZW50LCAkekluZGV4OiB6SW5kZXgsIGNoaWxkcmVuOiBbXG4gICAgdDE1LFxuICAgIHQxNixcbiAgICB0MTcsXG4gICAgZWxlbWVudHNUb1JlbmRlcixcbiAgICB0MTgsXG4gICAgdDE5XG4gIF0gfSksICRbNDddID0gZWxlbWVudHNUb1JlbmRlciwgJFs0OF0gPSB0MTMsICRbNDldID0gdDE0LCAkWzUwXSA9IHQxNSwgJFs1MV0gPSB0MTYsICRbNTJdID0gdDE3LCAkWzUzXSA9IHQxOCwgJFs1NF0gPSB0MTksICRbNTVdID0gekluZGV4LCAkWzU2XSA9IHQyMCkgOiB0MjAgPSAkWzU2XTtcbiAgbGV0IHQyMTtcbiAgJFs1N10gIT09IGNvbWxpbmsgfHwgJFs1OF0gIT09IHQyMCA/ICh0MjEgPSAvKiBAX19QVVJFX18gKi8ganN4KFNoYXJlZFN0YXRlUHJvdmlkZXIsIHsgY29tbGluaywgY2hpbGRyZW46IHQyMCB9KSwgJFs1N10gPSBjb21saW5rLCAkWzU4XSA9IHQyMCwgJFs1OV0gPSB0MjEpIDogdDIxID0gJFs1OV07XG4gIGxldCB0MjI7XG4gICRbNjBdICE9PSBjb21saW5rIHx8ICRbNjFdICE9PSB0MjEgPyAodDIyID0gLyogQF9fUFVSRV9fICovIGpzeChQcmV2aWV3U25hcHNob3RzUHJvdmlkZXIsIHsgY29tbGluaywgY2hpbGRyZW46IHQyMSB9KSwgJFs2MF0gPSBjb21saW5rLCAkWzYxXSA9IHQyMSwgJFs2Ml0gPSB0MjIpIDogdDIyID0gJFs2Ml07XG4gIGxldCB0MjM7XG4gICRbNjNdICE9PSBjb21saW5rIHx8ICRbNjRdICE9PSBlbGVtZW50cyB8fCAkWzY1XSAhPT0gdDIyID8gKHQyMyA9IC8qIEBfX1BVUkVfXyAqLyBqc3goU2NoZW1hUHJvdmlkZXIsIHsgY29tbGluaywgZWxlbWVudHMsIGNoaWxkcmVuOiB0MjIgfSksICRbNjNdID0gY29tbGluaywgJFs2NF0gPSBlbGVtZW50cywgJFs2NV0gPSB0MjIsICRbNjZdID0gdDIzKSA6IHQyMyA9ICRbNjZdO1xuICBsZXQgdDI0O1xuICAkWzY3XSAhPT0gcm9vdEVsZW1lbnQgfHwgJFs2OF0gIT09IHQyMyA/ICh0MjQgPSAvKiBAX19QVVJFX18gKi8ganN4KExheWVyUHJvdmlkZXIsIHsgY2hpbGRyZW46IC8qIEBfX1BVUkVfXyAqLyBqc3goUG9ydGFsUHJvdmlkZXIsIHsgZWxlbWVudDogcm9vdEVsZW1lbnQsIGNoaWxkcmVuOiB0MjMgfSkgfSksICRbNjddID0gcm9vdEVsZW1lbnQsICRbNjhdID0gdDIzLCAkWzY5XSA9IHQyNCkgOiB0MjQgPSAkWzY5XTtcbiAgbGV0IHQyNTtcbiAgJFs3MF0gIT09IHQxMiB8fCAkWzcxXSAhPT0gdDI0ID8gKHQyNSA9IC8qIEBfX1BVUkVfXyAqLyBqc3goVGhlbWVQcm92aWRlciwgeyBzY2hlbWU6IHQxMiwgdGhlbWU6IHN0dWRpb1RoZW1lLCB0b25lOiBcInRyYW5zcGFyZW50XCIsIGNoaWxkcmVuOiB0MjQgfSksICRbNzBdID0gdDEyLCAkWzcxXSA9IHQyNCwgJFs3Ml0gPSB0MjUpIDogdDI1ID0gJFs3Ml07XG4gIGxldCB0MjY7XG4gIHJldHVybiAkWzczXSAhPT0gY29tbGluayB8fCAkWzc0XSAhPT0gdDI1ID8gKHQyNiA9IC8qIEBfX1BVUkVfXyAqLyBqc3goVGVsZW1ldHJ5UHJvdmlkZXIsIHsgY29tbGluaywgY2hpbGRyZW46IHQyNSB9KSwgJFs3M10gPSBjb21saW5rLCAkWzc0XSA9IHQyNSwgJFs3NV0gPSB0MjYpIDogdDI2ID0gJFs3NV0sIHQyNjtcbn0sIElTX01BQyA9IHR5cGVvZiB3aW5kb3cgPCBcInVcIiAmJiAvTWFjfGlQb2R8aVBob25lfGlQYWQvLnRlc3Qod2luZG93Lm5hdmlnYXRvci5wbGF0Zm9ybSksIE1PRElGSUVSUyA9IHtcbiAgYWx0OiBcImFsdEtleVwiLFxuICBjdHJsOiBcImN0cmxLZXlcIixcbiAgbW9kOiBJU19NQUMgPyBcIm1ldGFLZXlcIiA6IFwiY3RybEtleVwiLFxuICBzaGlmdDogXCJzaGlmdEtleVwiXG59O1xuZnVuY3Rpb24gaXNIb3RrZXkoa2V5cywgZXZlbnQpIHtcbiAgcmV0dXJuIGtleXMuZXZlcnkoKGtleSkgPT4gTU9ESUZJRVJTW2tleV0gPyBldmVudFtNT0RJRklFUlNba2V5XV0gOiBldmVudC5rZXkgPT09IGtleS50b1VwcGVyQ2FzZSgpKTtcbn1cbmZ1bmN0aW9uIGlzQWx0S2V5KGV2ZW50KSB7XG4gIHJldHVybiBldmVudC5rZXkgPT09IFwiQWx0XCI7XG59XG5mdW5jdGlvbiBfdGVtcCQyKGFjYywgcHJldklkKSB7XG4gIHJldHVybiBhY2MuZmlsdGVyKChpZCkgPT4gaWQgIT09IHByZXZJZCk7XG59XG5mdW5jdGlvbiBfdGVtcDIkMShlbmFibGVkKSB7XG4gIHJldHVybiAhZW5hYmxlZDtcbn1cbmZ1bmN0aW9uIF90ZW1wMyh1bnN1Yikge1xuICByZXR1cm4gdW5zdWIoKTtcbn1cbmZ1bmN0aW9uIF90ZW1wNChldmVudCkge1xuICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gIGlmICgoaXNIVE1MQW5jaG9yRWxlbWVudCh0YXJnZXQpIHx8IGlzSFRNTEVsZW1lbnQodGFyZ2V0KSAmJiB0YXJnZXQuY2xvc2VzdChcImFcIikpICYmIGV2ZW50LmFsdEtleSkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCksIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGNvbnN0IG5ld0V2ZW50ID0gbmV3IE1vdXNlRXZlbnQoZXZlbnQudHlwZSwge1xuICAgICAgLi4uZXZlbnQsXG4gICAgICBhbHRLZXk6ICExLFxuICAgICAgYnViYmxlczogITAsXG4gICAgICBjYW5jZWxhYmxlOiAhMFxuICAgIH0pO1xuICAgIGV2ZW50LnRhcmdldD8uZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gIH1cbn1cbmZ1bmN0aW9uIF90ZW1wNShlbmFibGVkXzApIHtcbiAgcmV0dXJuICFlbmFibGVkXzA7XG59XG5mdW5jdGlvbiBfdGVtcDYoZW5hYmxlZF8xKSB7XG4gIHJldHVybiAhZW5hYmxlZF8xO1xufVxuZnVuY3Rpb24gX3RlbXA3KGVuYWJsZWRfMikge1xuICByZXR1cm4gIWVuYWJsZWRfMjtcbn1cbmZ1bmN0aW9uIF90ZW1wOChlbmFibGVkXzMpIHtcbiAgcmV0dXJuICFlbmFibGVkXzM7XG59XG5mdW5jdGlvbiBfdGVtcDkoZWxlbWVudCkge1xuICByZXR1cm4gXCJpZFwiIGluIGVsZW1lbnQuc2FuaXR5ID8gW2VsZW1lbnQuc2FuaXR5LmlkXSA6IFtdO1xufVxuZnVuY3Rpb24gX3RlbXAwKGVfMSkge1xuICByZXR1cm4gZV8xLmFjdGl2YXRlZCB8fCBlXzEuZm9jdXNlZDtcbn1cbmNvbnN0IFJlZnJlc2ggPSAocHJvcHMpID0+IHtcbiAgY29uc3QgJCA9IGMoNCksIHtcbiAgICBjb21saW5rLFxuICAgIHJlZnJlc2hcbiAgfSA9IHByb3BzLCBtYW51YWxSZWZyZXNoUmVmID0gdXNlUmVmKDApLCBtdXRhdGlvblJlZnJlc2hSZWYgPSB1c2VSZWYoMCk7XG4gIGxldCB0MCwgdDE7XG4gIHJldHVybiAkWzBdICE9PSBjb21saW5rIHx8ICRbMV0gIT09IHJlZnJlc2ggPyAodDAgPSAoKSA9PiBjb21saW5rLm9uKFwicHJlc2VudGF0aW9uL3JlZnJlc2hcIiwgKGRhdGEpID0+IHtcbiAgICBpZiAoZGF0YS5zb3VyY2UgPT09IFwibWFudWFsXCIpIHtcbiAgICAgIGNsZWFyVGltZW91dChtYW51YWxSZWZyZXNoUmVmLmN1cnJlbnQpO1xuICAgICAgY29uc3QgcHJvbWlzZSA9IHJlZnJlc2goZGF0YSk7XG4gICAgICBpZiAocHJvbWlzZSA9PT0gITEpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbWxpbmsucG9zdChcInZpc3VhbC1lZGl0aW5nL3JlZnJlc2hpbmdcIiwgZGF0YSk7XG4gICAgICBsZXQgdGltZWRPdXQgPSAhMTtcbiAgICAgIG1hbnVhbFJlZnJlc2hSZWYuY3VycmVudCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29tbGluay5wb3N0KFwidmlzdWFsLWVkaXRpbmcvcmVmcmVzaGVkXCIsIGRhdGEpLCB0aW1lZE91dCA9ICEwO1xuICAgICAgfSwgM2UzKSwgcHJvbWlzZT8uZmluYWxseT8uKCgpID0+IHtcbiAgICAgICAgdGltZWRPdXQgfHwgKGNsZWFyVGltZW91dChtYW51YWxSZWZyZXNoUmVmLmN1cnJlbnQpLCBjb21saW5rLnBvc3QoXCJ2aXN1YWwtZWRpdGluZy9yZWZyZXNoZWRcIiwgZGF0YSkpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChkYXRhLnNvdXJjZSA9PT0gXCJtdXRhdGlvblwiKSB7XG4gICAgICBjbGVhclRpbWVvdXQobXV0YXRpb25SZWZyZXNoUmVmLmN1cnJlbnQpO1xuICAgICAgY29uc3QgcHJvbWlzZV8wID0gcmVmcmVzaChkYXRhKTtcbiAgICAgIGlmIChwcm9taXNlXzAgPT09ICExKVxuICAgICAgICByZXR1cm47XG4gICAgICBjb21saW5rLnBvc3QoXCJ2aXN1YWwtZWRpdGluZy9yZWZyZXNoaW5nXCIsIGRhdGEpLCBtdXRhdGlvblJlZnJlc2hSZWYuY3VycmVudCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgY29uc3QgcHJvbWlzZV8xID0gcmVmcmVzaChkYXRhKTtcbiAgICAgICAgcHJvbWlzZV8xICE9PSAhMSAmJiAoY29tbGluay5wb3N0KFwidmlzdWFsLWVkaXRpbmcvcmVmcmVzaGluZ1wiLCBkYXRhKSwgcHJvbWlzZV8xPy5maW5hbGx5Py4oKCkgPT4ge1xuICAgICAgICAgIGNvbWxpbmsucG9zdChcInZpc3VhbC1lZGl0aW5nL3JlZnJlc2hlZFwiLCBkYXRhKTtcbiAgICAgICAgfSkgfHwgY29tbGluay5wb3N0KFwidmlzdWFsLWVkaXRpbmcvcmVmcmVzaGVkXCIsIGRhdGEpKTtcbiAgICAgIH0sIDFlMyksIHByb21pc2VfMD8uZmluYWxseT8uKCgpID0+IHtcbiAgICAgICAgY29tbGluay5wb3N0KFwidmlzdWFsLWVkaXRpbmcvcmVmcmVzaGVkXCIsIGRhdGEpO1xuICAgICAgfSkgfHwgY29tbGluay5wb3N0KFwidmlzdWFsLWVkaXRpbmcvcmVmcmVzaGVkXCIsIGRhdGEpO1xuICAgIH1cbiAgfSksIHQxID0gW2NvbWxpbmssIHJlZnJlc2hdLCAkWzBdID0gY29tbGluaywgJFsxXSA9IHJlZnJlc2gsICRbMl0gPSB0MCwgJFszXSA9IHQxKSA6ICh0MCA9ICRbMl0sIHQxID0gJFszXSksIHVzZUVmZmVjdCh0MCwgdDEpLCBudWxsO1xufTtcbmZ1bmN0aW9uIHVzZUNvbWxpbmsodDApIHtcbiAgY29uc3QgJCA9IGMoOSksIGFjdGl2ZSA9IHQwID09PSB2b2lkIDAgPyAhMCA6IHQwLCBbbm9kZSwgc2V0Tm9kZV0gPSB1c2VTdGF0ZSgpLCBbc3RhdHVzLCBzZXRTdGF0dXNdID0gdXNlU3RhdGUoXCJpZGxlXCIpO1xuICBsZXQgdDEsIHQyO1xuICAkWzBdICE9PSBhY3RpdmUgPyAodDEgPSAoKSA9PiB7XG4gICAgaWYgKCFhY3RpdmUpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgaW5zdGFuY2UgPSBjcmVhdGVOb2RlKHtcbiAgICAgIG5hbWU6IFwidmlzdWFsLWVkaXRpbmdcIixcbiAgICAgIGNvbm5lY3RUbzogXCJwcmVzZW50YXRpb25cIlxuICAgIH0sIGNyZWF0ZU5vZGVNYWNoaW5lKCkucHJvdmlkZSh7XG4gICAgICBhY3RvcnM6IGNyZWF0ZUNvbXBhdGliaWxpdHlBY3RvcnMoKVxuICAgIH0pKSwgdW5zdWIgPSBpbnN0YW5jZS5vblN0YXR1cygoKSA9PiBzZXRTdGF0dXMoXCJjb25uZWN0ZWRcIiksIFwiY29ubmVjdGVkXCIpO1xuICAgIHNldE5vZGUoaW5zdGFuY2UpO1xuICAgIGNvbnN0IHN0b3AgPSBpbnN0YW5jZS5zdGFydCgpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB1bnN1YigpLCBzdG9wKCksIHNldE5vZGUodm9pZCAwKTtcbiAgICB9O1xuICB9LCB0MiA9IFthY3RpdmVdLCAkWzBdID0gYWN0aXZlLCAkWzFdID0gdDEsICRbMl0gPSB0MikgOiAodDEgPSAkWzFdLCB0MiA9ICRbMl0pLCB1c2VFZmZlY3QodDEsIHQyKTtcbiAgbGV0IHQzLCB0NDtcbiAgJFszXSAhPT0gc3RhdHVzID8gKHQzID0gKCkgPT4ge1xuICAgIGlmIChzdGF0dXMgPT09IFwiY29ubmVjdGVkXCIpXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICByZXR1cm4gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIF90ZW1wJDEsIHtcbiAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcbiAgICB9KSwgKCkgPT4ge1xuICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgIH07XG4gIH0sIHQ0ID0gW3N0YXR1c10sICRbM10gPSBzdGF0dXMsICRbNF0gPSB0MywgJFs1XSA9IHQ0KSA6ICh0MyA9ICRbNF0sIHQ0ID0gJFs1XSksIHVzZUVmZmVjdCh0MywgdDQpO1xuICBsZXQgdDU7XG4gIHJldHVybiAkWzZdICE9PSBub2RlIHx8ICRbN10gIT09IHN0YXR1cyA/ICh0NSA9IFtub2RlLCBzdGF0dXNdLCAkWzZdID0gbm9kZSwgJFs3XSA9IHN0YXR1cywgJFs4XSA9IHQ1KSA6IHQ1ID0gJFs4XSwgdDU7XG59XG5mdW5jdGlvbiBfdGVtcCQxKHQwKSB7XG4gIGNvbnN0IHtcbiAgICBkYXRhLFxuICAgIG9yaWdpblxuICB9ID0gdDA7XG4gIGRhdGEgJiYgdHlwZW9mIGRhdGEgPT0gXCJvYmplY3RcIiAmJiBcImRvbWFpblwiIGluIGRhdGEgJiYgZGF0YS5kb21haW4gPT09IFwic2FuaXR5L2NoYW5uZWxzXCIgJiYgXCJmcm9tXCIgaW4gZGF0YSAmJiBkYXRhLmZyb20gPT09IFwicHJlc2VudGF0aW9uXCIgJiYgXCJ0eXBlXCIgaW4gZGF0YSAmJiBkYXRhLnR5cGUgPT09IFwicHJlc2VudGF0aW9uL3N0YXR1c1wiICYmIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2Uoe1xuICAgIGRvbWFpbjogXCJzYW5pdHkvY2hhbm5lbHNcIixcbiAgICB0eXBlOiBcInZpc3VhbC1lZGl0aW5nL3N0YXR1c1wiLFxuICAgIGRhdGE6IHtcbiAgICAgIG9yaWdpbjogbG9jYXRpb24ub3JpZ2luXG4gICAgfVxuICB9LCBvcmlnaW4pO1xufVxuZnVuY3Rpb24gY3JlYXRlU2hhcmVkTGlzdGVuZXIoY29tbGluaykge1xuICBjb25zdCBpbmNvbWluZ0Nvbm5lY3Rpb24kID0gbmV3IFJlcGxheVN1YmplY3QoMSksIGluY29taW5nTXV0YXRpb25zJCA9IG5ldyBTdWJqZWN0KCk7XG4gIHJldHVybiBjb21saW5rLmZldGNoKFwidmlzdWFsLWVkaXRpbmcvc25hcHNob3Qtd2VsY29tZVwiLCB2b2lkIDAsIHtcbiAgICBzdXBwcmVzc1dhcm5pbmdzOiAhMFxuICB9KS50aGVuKChkYXRhKSA9PiB7XG4gICAgaW5jb21pbmdDb25uZWN0aW9uJC5uZXh0KGRhdGEuZXZlbnQpO1xuICB9KS5jYXRjaCgoKSA9PiB7XG4gIH0pLCBjb21saW5rLm9uKFwicHJlc2VudGF0aW9uL3NuYXBzaG90LWV2ZW50XCIsIChkYXRhKSA9PiB7XG4gICAgZGF0YS5ldmVudC50eXBlID09PSBcInJlY29ubmVjdFwiICYmIGluY29taW5nQ29ubmVjdGlvbiQubmV4dChkYXRhLmV2ZW50KSwgZGF0YS5ldmVudC50eXBlID09PSBcIm11dGF0aW9uXCIgJiYgaW5jb21pbmdNdXRhdGlvbnMkLm5leHQoZGF0YS5ldmVudCk7XG4gIH0pLCBtZXJnZShpbmNvbWluZ0Nvbm5lY3Rpb24kLCBpbmNvbWluZ011dGF0aW9ucyQpO1xufVxuZnVuY3Rpb24gdXNlRGF0YXNldE11dGF0b3IoY29tbGluaykge1xuICBjb25zdCAkID0gYygzKTtcbiAgbGV0IHQwLCB0MTtcbiAgJFswXSAhPT0gY29tbGluayA/ICh0MCA9ICgpID0+IHtcbiAgICBpZiAoIWNvbWxpbmspXG4gICAgICByZXR1cm47XG4gICAgY29uc3QgbGlzdGVuZXIgPSBjcmVhdGVTaGFyZWRMaXN0ZW5lcihjb21saW5rKSwgZGF0YXNldE11dGF0b3IgPSBjcmVhdGVEYXRhc2V0TXV0YXRvcihjb21saW5rKSwgbXV0YXRvciA9IGNyZWF0ZUFjdG9yKGRhdGFzZXRNdXRhdG9yLCB7XG4gICAgICBpbnB1dDoge1xuICAgICAgICBjbGllbnQ6IHtcbiAgICAgICAgICB3aXRoQ29uZmlnOiBfdGVtcFxuICAgICAgICB9LFxuICAgICAgICBzaGFyZWRMaXN0ZW5lcjogbGlzdGVuZXJcbiAgICAgIH1cbiAgICB9KTtcbiAgICBtdXRhdG9yLnN0YXJ0KCk7XG4gICAgY29uc3QgZmVhdHVyZXNGZXRjaCA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgICByZXR1cm4gY29tbGluay5mZXRjaChcInZpc3VhbC1lZGl0aW5nL2ZlYXR1cmVzXCIsIHZvaWQgMCwge1xuICAgICAgc2lnbmFsOiBmZWF0dXJlc0ZldGNoLnNpZ25hbCxcbiAgICAgIHN1cHByZXNzV2FybmluZ3M6ICEwXG4gICAgfSkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgZGF0YS5mZWF0dXJlcy5vcHRpbWlzdGljICYmIHNldEFjdG9yKG11dGF0b3IpO1xuICAgIH0pLmNhdGNoKF90ZW1wMiksICgpID0+IHtcbiAgICAgIG11dGF0b3Iuc3RvcCgpLCBmZWF0dXJlc0ZldGNoLmFib3J0KCk7XG4gICAgfTtcbiAgfSwgdDEgPSBbY29tbGlua10sICRbMF0gPSBjb21saW5rLCAkWzFdID0gdDAsICRbMl0gPSB0MSkgOiAodDAgPSAkWzFdLCB0MSA9ICRbMl0pLCB1c2VFZmZlY3QodDAsIHQxKTtcbn1cbmZ1bmN0aW9uIF90ZW1wMigpIHtcbiAgY29uc29sZS53YXJuKFwiW0BzYW5pdHkvdmlzdWFsLWVkaXRpbmddIFBhY2thZ2UgdmVyc2lvbiBtaXNtYXRjaCBkZXRlY3RlZDogUGxlYXNlIHVwZGF0ZSB5b3VyIFNhbml0eSBzdHVkaW8gdG8gcHJldmVudCBwb3RlbnRpYWwgY29tcGF0aWJpbGl0eSBpc3N1ZXMuXCIpO1xufVxuZnVuY3Rpb24gX3RlbXAoKSB7XG59XG5jb25zdCBWaXN1YWxFZGl0aW5nID0gKHByb3BzKSA9PiB7XG4gIGNvbnN0ICQgPSBjKDIzKSwge1xuICAgIGNvbXBvbmVudHMsXG4gICAgcGx1Z2lucyxcbiAgICBoaXN0b3J5LFxuICAgIHBvcnRhbDogdDAsXG4gICAgcmVmcmVzaCxcbiAgICB6SW5kZXhcbiAgfSA9IHByb3BzLCBwb3J0YWwgPSB0MCA9PT0gdm9pZCAwID8gITAgOiB0MCwgW2luRnJhbWUsIHNldEluRnJhbWVdID0gdXNlU3RhdGUobnVsbCksIFtpblBvcFVwLCBzZXRJblBvcFVwXSA9IHVzZVN0YXRlKG51bGwpO1xuICBsZXQgdDEsIHQyO1xuICAkWzBdID09PSBTeW1ib2wuZm9yKFwicmVhY3QubWVtb19jYWNoZV9zZW50aW5lbFwiKSA/ICh0MSA9ICgpID0+IHtcbiAgICBzZXRJbkZyYW1lKGlzTWF5YmVQcmV2aWV3SWZyYW1lKCkpLCBzZXRJblBvcFVwKGlzTWF5YmVQcmV2aWV3V2luZG93KCkpO1xuICB9LCB0MiA9IFtdLCAkWzBdID0gdDEsICRbMV0gPSB0MikgOiAodDEgPSAkWzBdLCB0MiA9ICRbMV0pLCB1c2VFZmZlY3QodDEsIHQyKTtcbiAgY29uc3QgW3BvcnRhbEVsZW1lbnQsIHNldFBvcnRhbEVsZW1lbnRdID0gdXNlU3RhdGUobnVsbCk7XG4gIGxldCB0MywgdDQ7XG4gICRbMl0gIT09IHBvcnRhbCA/ICh0MyA9ICgpID0+IHtcbiAgICBpZiAocG9ydGFsID09PSAhMSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNhbml0eS12aXN1YWwtZWRpdGluZ1wiKTtcbiAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKG5vZGUpLCBzZXRQb3J0YWxFbGVtZW50KG5vZGUpLCAoKSA9PiB7XG4gICAgICBzZXRQb3J0YWxFbGVtZW50KG51bGwpLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMobm9kZSkgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgIH07XG4gIH0sIHQ0ID0gW3BvcnRhbF0sICRbMl0gPSBwb3J0YWwsICRbM10gPSB0MywgJFs0XSA9IHQ0KSA6ICh0MyA9ICRbM10sIHQ0ID0gJFs0XSksIHVzZUVmZmVjdCh0MywgdDQpO1xuICBjb25zdCBbY29tbGluaywgY29tbGlua1N0YXR1c10gPSB1c2VDb21saW5rKGluRnJhbWUgPT09ICEwIHx8IGluUG9wVXAgPT09ICEwKTtcbiAgdXNlRGF0YXNldE11dGF0b3IoY29tbGlua1N0YXR1cyA9PT0gXCJjb25uZWN0ZWRcIiA/IGNvbWxpbmsgOiB2b2lkIDApO1xuICBsZXQgdDU7XG4gICRbNV0gIT09IGNvbWxpbmsgfHwgJFs2XSAhPT0gY29tbGlua1N0YXR1cyB8fCAkWzddICE9PSBjb21wb25lbnRzIHx8ICRbOF0gIT09IGluRnJhbWUgfHwgJFs5XSAhPT0gaW5Qb3BVcCB8fCAkWzEwXSAhPT0gcGx1Z2lucyB8fCAkWzExXSAhPT0gekluZGV4ID8gKHQ1ID0gaW5GcmFtZSAhPT0gbnVsbCAmJiBpblBvcFVwICE9PSBudWxsICYmIC8qIEBfX1BVUkVfXyAqLyBqc3goT3ZlcmxheXMsIHsgY29tbGluaywgY29tbGlua1N0YXR1cywgY29tcG9uZW50UmVzb2x2ZXI6IGNvbXBvbmVudHMsIHBsdWdpbnMsIGluRnJhbWUsIGluUG9wVXAsIHpJbmRleCB9KSwgJFs1XSA9IGNvbWxpbmssICRbNl0gPSBjb21saW5rU3RhdHVzLCAkWzddID0gY29tcG9uZW50cywgJFs4XSA9IGluRnJhbWUsICRbOV0gPSBpblBvcFVwLCAkWzEwXSA9IHBsdWdpbnMsICRbMTFdID0gekluZGV4LCAkWzEyXSA9IHQ1KSA6IHQ1ID0gJFsxMl07XG4gIGxldCB0NjtcbiAgJFsxM10gIT09IGNvbWxpbmsgfHwgJFsxNF0gIT09IGhpc3RvcnkgfHwgJFsxNV0gIT09IHJlZnJlc2ggPyAodDYgPSBjb21saW5rICYmIC8qIEBfX1BVUkVfXyAqLyBqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChIaXN0b3J5LCB7IGNvbWxpbmssIGhpc3RvcnkgfSksXG4gICAgLyogQF9fUFVSRV9fICovIGpzeChNZXRhLCB7IGNvbWxpbmsgfSksXG4gICAgcmVmcmVzaCAmJiAvKiBAX19QVVJFX18gKi8ganN4KFJlZnJlc2gsIHsgY29tbGluaywgcmVmcmVzaCB9KVxuICBdIH0pLCAkWzEzXSA9IGNvbWxpbmssICRbMTRdID0gaGlzdG9yeSwgJFsxNV0gPSByZWZyZXNoLCAkWzE2XSA9IHQ2KSA6IHQ2ID0gJFsxNl07XG4gIGxldCB0NztcbiAgJFsxN10gIT09IHQ1IHx8ICRbMThdICE9PSB0NiA/ICh0NyA9IC8qIEBfX1BVUkVfXyAqLyBqc3hzKEZyYWdtZW50LCB7IGNoaWxkcmVuOiBbXG4gICAgdDUsXG4gICAgdDZcbiAgXSB9KSwgJFsxN10gPSB0NSwgJFsxOF0gPSB0NiwgJFsxOV0gPSB0NykgOiB0NyA9ICRbMTldO1xuICBjb25zdCBjaGlsZHJlbiA9IHQ3O1xuICBpZiAocG9ydGFsID09PSAhMSB8fCAhcG9ydGFsRWxlbWVudClcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIGxldCB0ODtcbiAgcmV0dXJuICRbMjBdICE9PSBjaGlsZHJlbiB8fCAkWzIxXSAhPT0gcG9ydGFsRWxlbWVudCA/ICh0OCA9IGNyZWF0ZVBvcnRhbChjaGlsZHJlbiwgcG9ydGFsRWxlbWVudCksICRbMjBdID0gY2hpbGRyZW4sICRbMjFdID0gcG9ydGFsRWxlbWVudCwgJFsyMl0gPSB0OCkgOiB0OCA9ICRbMjJdLCB0ODtcbn07XG5WaXN1YWxFZGl0aW5nLmRpc3BsYXlOYW1lID0gXCJWaXN1YWxFZGl0aW5nXCI7XG5leHBvcnQge1xuICBWaXN1YWxFZGl0aW5nLFxuICBjcmVhdGVEYXRhQXR0cmlidXRlLFxuICBjcmVhdGVEYXRhc2V0TXV0YXRvcixcbiAgY3JlYXRlRG9jdW1lbnRNdXRhdG9yLFxuICBlbXB0eUFjdG9yLFxuICB1c2VEb2N1bWVudHMsXG4gIHVzZU9wdGltaXN0aWMsXG4gIHVzZU9wdGltaXN0aWNBY3RvclxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next-sanity/node_modules/@sanity/visual-editing/dist/react/index.js\n");

/***/ })

};
;